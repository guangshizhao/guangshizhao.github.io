(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21f820"],{d9b7:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("layContentHeader",{attrs:{title:"流程",buttons:e.headerBtns}}),a("layContent",[a("dataTable",{ref:"childDataTable",attrs:{headers:e.headers,DataSource:e.DataSource,total:e.total,hideOperation:!0,sort:!0,allowActive:!0},on:{initialize:e.initialize}})],1),a(e.currentView,{ref:"componentForm",tag:"component",attrs:{PreviewType:1},on:{modalComfirmed:e.formComfirmed}}),a("contentModal",{attrs:{title:"查看流程图",IsShow:e.IsShowForSeeResult,width:"1100",isDetails:!0},on:{modalClosed:function(t){return e.modalClosedForSeeResult()}}},[a("div",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:e.imagesrc}})])])],1)},n=[],o=(a("e6d1"),a("e3b8")),s=a("551a"),i=a("bd12"),l=a("09fd"),c=a("01ee"),d=a("776f"),u={name:"process",data:function(){var e=this;return{total:0,DataSource:[],currentView:"",imagesrc:"",IsShowForSeeResult:!1,headerBtns:[{disabled:!1,text:"发起流程",icon:"self_add",click:function(){return e.startProcess()}},{disabled:!1,text:"查看流程图",icon:"self_look",click:function(){return e.seeImage()}}],headers:[{text:"序号",align:"center",sortable:!1},{text:"流程键值",align:"center",sortable:!1,value:"processKey"},{text:"流程名称",align:"center",sortable:!1,value:"processName"},{text:"流程描述",align:"center",sortable:!1,value:"description"}]}},mounted:function(){},methods:{initialize:function(e){var t=this;s["a"].http(window.processForUrl.getUrlForDefinition(e.page,e.rowsPerPage),"get",{},{success:function(e){t.DataSource=e.data.data.rows,t.total=e.data.data.total,t.$refs.childDataTable.setActiveItem([])},error:function(e){i["a"].alert(e)}})},getQueryStringArgs:function(e){if(e&&e.length>0){var t=e.length>0?e.substring(1):"",a={},r=t.length?t.split("&"):[],n=null,o=null,s=null,i=0,l=r.length;for(i=0;i<l;i++)n=r[i].split("="),o=decodeURIComponent(n[0]),s=decodeURIComponent(n[1]),o.length&&(a[o]=s);return a}return{}},startProcess:function(){var e=this,t=this.$refs.childDataTable.getActiveItem();t&&!Array.isArray(t)&&t.processKey?s["a"].http(window.processForUrl.getUrlForFirst(t.processKey),"get","",{success:function(t){var a=t.data.data,r=t.data.data.formKey,n={};void 0!=r&&null!=r&&r.indexOf("?")>-1&&(n=e.getQueryStringArgs(r.substring(r.indexOf("?"),r.length)),r=r.substring(0,r.indexOf("?")));var o=e.$getFrom("baseForm");o&&-1!=o&&(e.currentView=o,setTimeout((function(){e.$refs.componentForm.modalOpen(r,n,a)}),200))},error:function(e){i["a"].alert(e)}}):i["a"].alert("请选择一项作为你操作的对象！")},formComfirmed:function(){i["a"].alert("执行成功","success"),this.initialize({page:1,rowsPerPage:10})},modalClosedForSeeResult:function(){this.IsShowForSeeResult=!1},seeImage:function(){var e=this,t=this.$refs.childDataTable.getActiveItem();t&&!Array.isArray(t)&&t.id?s["a"].http(window.processForUrl.getUrlForImage(t.id),"get",{},{success:function(t){e.imagesrc=t.data.data.image,e.IsShowForSeeResult=!0},error:function(e){i["a"].alert(e)}}):i["a"].alert("请选择一项作为你操作的对象！")}},components:{dataTable:o["a"],layContent:l["a"],layContentHeader:c["a"],contentModal:d["a"]}},f=u,g=a("6691"),m=Object(g["a"])(f,r,n,!1,null,null,null);t["default"]=m.exports}}]);