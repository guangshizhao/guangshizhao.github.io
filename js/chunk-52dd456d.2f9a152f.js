(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52dd456d"],{"2edb":function(e,t,a){"use strict";var i,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"1000px",persistent:!0,scrollable:""},model:{value:e.IsShow,callback:function(t){e.IsShow=t},expression:"IsShow"}},[a("v-card",[a("v-card-title",{staticClass:"primary"},[a("span",{staticClass:"headline",staticStyle:{color:"#fff"}},[e._v(e._s(e.title))])]),a("v-card-text",[a("v-container",{staticStyle:{padding:"0"},attrs:{"grid-list-md":"","text-md-center":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("treeCombo",{attrs:{Source:e.dataSource,MultipleSelect:!1,label:"工厂产线架构",independentCheck:!1,independentSingleCheck:!0,"item-value":"id","item-text":"oname",clearable:"","return-object":""},on:{cleared:e.clearSearch},model:{value:e.equipmentPosition,callback:function(t){e.equipmentPosition=t},expression:"equipmentPosition"}})],1),a("v-flex",{attrs:{xs12:"",ms2:"",md2:""}},[a("v-select",{attrs:{items:e.equipType,label:"设备类型","item-value":"dvalue","item-text":"dname",clearable:"","single-line":""},on:{"click:clear":e.clearSearch},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-text-field",{attrs:{label:"设备编号",clearable:"","single-line":""},on:{"click:clear":e.clearSearch},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-text-field",{attrs:{label:"设备名称",clearable:"","single-line":""},on:{"click:clear":e.clearSearch},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-btn",{attrs:{color:"default","d-flex":""},on:{click:function(t){return e.Search()}}},[e._v("查询")]),a("v-btn",{attrs:{color:"default","d-flex":""},on:{click:function(t){return e.clearSearch()}}},[e._v("清空查询")])],1)],1)],1),a("gridTemplate2",{ref:"childGridTemplate",attrs:{title:"设备台账",gridModel2:e.equipmentModal,sort:!0,initCondition:e.initCondition}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{"margin-right":"30px"},attrs:{color:"primary"},on:{click:function(t){return e.equipmentModalComfirmed()}}},[e._v("确定")]),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.equipmentModalClosed()}}},[e._v("取消")])],1)],1)],1)},l=[],r=(a("7cfd"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("dataTable",{ref:"childDataTable",attrs:{headers:e.headers,sort:e.sort,DataSource:e.DataSource,hideOperation:!0,formatFields:e.FormatFields,total:e.total},on:{rowDbClick:e.rowDbClick,initialize:e.init}}),a("contentModal",{attrs:{title:e.title1,IsShow:e.IsShow,width:e.width},on:{modalClosed:function(t){return e.modalClosed()},modalComfirmed:function(t){return e.modalComfirmed()}}},[a("formTemplate",{ref:"childForm",attrs:{editors:e.editors,editedItem:e.editedItem}},[e._t("default")],2)],1),a("comfirmModal",{attrs:{title:"提示",IsShow:e.IsComfirmShow,text:e.deleteTittle},on:{modalComfirmedClose:function(t){return e.modalComfirmedClose()},modalComfirmed:function(t){return e.cofirmDelete()}}})],1)}),o=[],s=(a("ed8b"),a("4634"),a("de90"),a("8f42"),a("a2a7")),d=a("23f5"),c=a("71ba"),u=a("f05f"),m=a("8333"),h=a("d5b3"),f={name:"gridTemplate2",props:{gridModel2:{type:Object,required:!0},title:{type:String,required:!0},sort:{type:Boolean,default:!1},width:{type:Number},initCondition:{type:Object}},data:function(){return{valid:!0,IsShow:!1,IsComfirmShow:!1,IsLoading:!0,editors:[],totalDatas:0,total:1,DataSource:[],headers:[],editedItem:{},search:"",deletItems:[],FormatFields:{},currentparams:{},isAddOrUpdate:!0,title1:"",deleteTittle:"",likeParent:{}}},components:{contentModal:s["a"],comfirmModal:d["a"],dataTable:u["a"],formTemplate:c["a"]},watch:{gridModel2:{handler:function(e){i=new m["a"](e),this.headers=i.formatGridHeader(),!0===this.sort&&this.headers.unshift({text:"序号",align:"center",sortable:!1});var t=i.getEditFields();t.sort((function(e,t){var a=0;return e.formOrder<t.formOrder&&(a=-1),e.formOrder>t.formOrder&&(a=1),a})),this.editors=t,this.$emit("editorsReCode",t),this.FormatFields=i.getFormatFields()}}},methods:{init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;null!=e.page&&(this.currentparams=e);var a=this.currentparams,n=a.page,l=a.rowsPerPage;t.initCondition&&Object.keys(t.initCondition).forEach((function(e){t.likeParent[e]=t.initCondition[e]})),this.$Server.queryAll(i.getModelName(),{page:n,rowsPerPage:l},t.likeParent).then((function(e){t.DataSource=e.datas,t.total=e.page.total,t.$emit("afterInit",t.DataSource),null!=t.$refs.childDataTable.getCheckItems()&&t.$refs.childDataTable.getCheckItems().length>0&&t.$refs.childDataTable.unCheckItems()}),(function(e){return h["a"].alert(e)}))},doSearch:function(e){this.likeParent=e;var t=this.currentparams.page;1==t?this.init():this.$refs.childDataTable.setPage(1)},getPages:function(e){this.params=e},rowDbClick:function(e){this.$emit("rowDbClick",e)},GridDelete:function(){this.$refs.childDataTable.getCheckItems().length<=0?h["a"].alert("请选中需要删除的项"):(this.deleteTittle="确定删除所选"+this.title+"?",this.IsComfirmShow=!0)},getSelectedItems:function(){return this.$refs.childDataTable.getCheckItems()},unCheckItems:function(){return this.$refs.childDataTable.unCheckItems()},cofirmDelete:function(){var e=this.getSelectedItems();this.$emit("beforeExcuteDelete",e);var t=this;this.$Server.batchDelete(i.getModelName(),e).then((function(){t.IsComfirmShow=!1,t.init(t.currentparams)}),(function(e){t.IsComfirmShow=!1,h["a"].alert(e)}))},GridAdd:function(){this.editedItem={},this.$emit("beforeAdd",this.editedItem),this.IsShow=!0,this.$refs.childForm.resetValid(),this.$refs.childForm.resetForm(),this.title1="添加"+this.title},GridEdit:function(){var e=this;if(e.title1="编辑"+e.title,1!=e.$refs.childDataTable.getCheckItems().length)h["a"].alert("请选择一项作为你修改的对象");else{e.editedItem={};var t=e.$refs.childDataTable.getCheckItems()[0],a=t.id,i=t.createTime,n=t.updateTime,l=t.creator,r=t.modifier;e.editedItem={id:a,createTime:i,updateTime:n,creator:l,modifier:r},e.editors.forEach((function(a){a.field&&(e.editedItem[a.field]=t[a.field])})),e.$refs.childForm.resetValid(),e.$emit("beforeEdit",e.editedItem,t),e.IsShow=!0}},modalClosed:function(){this.$emit("beforeCancel"),this.IsShow=!1},modalComfirmed:function(){var e=this,t=this.$refs.childForm.getValues();this.$emit("beforeEditSubmit",t),0==this.$refs.childForm.getValid()?h["a"].alert("验证不通过"):e.isAddOrUpdate&&(e.isAddOrUpdate=!1,e.$Server.addOrUpdate(i.getModelName(),t,t.id).then((function(a){a.success&&(e.IsShow=!1,t.id&&(e.$refs.childDataTable.unCheckItems(),e.$refs.childDataTable.setCheckItems(t)),e.init(e.currentparams),h["a"].alert("保存成功","success"),e.$emit("afterCommitSuccess"),e.isAddOrUpdate=!0)}),(function(t){h["a"].alert(t),e.isAddOrUpdate=!0})))},modalComfirmedClose:function(){this.IsComfirmShow=!1},getCheckItems:function(){return this.$refs.childDataTable.getCheckItems()}}},b=f,p=a("6691"),v=Object(p["a"])(b,r,o,!1,null,null,null),w=v.exports,g=a("f19a"),M=a("7c02"),C=a("a7fe"),q=a("4027"),D={name:"equipmentModal",data:function(){return{title:"选择设备",equipmentModal:{},equipType:[],type:"",code:"",name:"",equipmentPosition:"",dataSource:[]}},mounted:function(){console.log(22222222),console.log(this.initCondition),this.init()},watch:{},computed:{},methods:{equipmentModalClosed:function(){this.$emit("equipmentModalClosed"),this.init(),this.$refs.childGridTemplate.init()},equipmentModalComfirmed:function(){this.$refs.childGridTemplate.getSelectedItems().length<=0?h["a"].alert("请选中需要确定的项"):(this.$emit("result",this.$refs.childGridTemplate.getSelectedItems()),this.$emit("equipmentModalComfirmed"),this.init(),this.$refs.childGridTemplate.unCheckItems(),this.$refs.childGridTemplate.init())},init:function(){var e=this;e.equipmentModal={},e.equipType=[],e.type="",e.code="",e.name="",e.equipmentPosition="",e.dataSource=[],this.equipmentModal=new M["a"],this.$Server.queryAll((new C["a"]).__name,{},{type:"4"}).then((function(t){e.equipType=t.datas})),this.$Server.queryAll((new q["a"]).__name,{},{searchEqpStation:!0}).then((function(t){e.dataSource=t.datas}))},Search:function(){var e=[],t=this;e={name:this.name,code:this.code,type:this.type,model:this.model,equipmentPosition:this.equipmentPosition&&this.equipmentPosition.length>0?this.equipmentPosition[0]:""},e.deleted=this.initCondition.deleted,e.eStatus=this.initCondition.eStatus,this.$Server.queryAll((new M["a"]).__name,{},e).then((function(e){t.$refs.childGridTemplate.DataSource=e.datas,t.$refs.childGridTemplate.total=e.total}))},clearSearch:function(){this.equipmentPosition="",this.name="",this.code="",this.type="",this.model="",this.$refs.childGridTemplate.init()}},components:{gridTemplate2:w,treeCombo:g["a"]},props:{IsShow:{type:Boolean,default:!1},initCondition:{type:Object,default:function(){var e={deleted:!1,eStatus:[0,1,2,4]};return e}}}},x=D,S=Object(p["a"])(x,n,l,!1,null,null,null);t["a"]=S.exports},"341e":function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var i=a("7300"),n=a("5873"),l=a("ddf2"),r=a("80ea"),o=a("ae0a"),s=a("97a3"),d=a("652a"),c=a("1269"),u=a("a7fe"),m=new d["a"],h=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var o=arguments.length,d=new Array(o),c=0;c<o;c++)d[c]=arguments[c];return a=Object(n["a"])(this,(e=Object(l["a"])(t)).call.apply(e,[this].concat(d))),Object(s["a"])(Object(r["a"])(a),"__name","MaintenancePlan"),Object(s["a"])(Object(r["a"])(a),"id",m.charField({require:!1,visible:!1,fieldName:"id",editable:!1})),Object(s["a"])(Object(r["a"])(a),"code",m.charField({require:!1,visible:!0,fieldName:"保养计划编号",maxLength:36,rules:[function(e){return!e||/^[\w|-]+$/.test(e)||"只能是数字,字母,下划线"}]})),Object(s["a"])(Object(r["a"])(a),"name",m.charField({require:!0,visible:!0,fieldName:"保养计划名称",maxLength:36})),Object(s["a"])(Object(r["a"])(a),"isAutoChinese",m.charField({require:!1,visible:!0,fieldName:"生成方式",editable:!1})),Object(s["a"])(Object(r["a"])(a),"constructByChinese",m.charField({require:!1,visible:!0,fieldName:"生成维度",editable:!1})),Object(s["a"])(Object(r["a"])(a),"startDate",m.dateField({require:!0,editable:!0,fieldName:"计划开始时间",visible:!0,menu:"purchase",format:function(e){if(e)return e.substring(0,10)}})),Object(s["a"])(Object(r["a"])(a),"endDate",m.dateField({require:!0,editable:!0,fieldName:"计划结束时间",visible:!0,menu:"purchase",format:function(e){if(e)return e.substring(0,10)}})),Object(s["a"])(Object(r["a"])(a),"actualStartDate",m.dateField({require:!1,fieldName:"实际开始时间",visible:!0,editable:!1,menu:"purchase",format:function(e){if(e)return e.substring(0,10)}})),Object(s["a"])(Object(r["a"])(a),"actualEndDate",m.dateField({require:!1,fieldName:"实际结束时间",visible:!0,editable:!1,menu:"purchase",format:function(e){if(e)return e.substring(0,10)}})),Object(s["a"])(Object(r["a"])(a),"equipmentViewModelList",m.charField({require:!0,visible:!1,fieldName:"设备列表",editable:!1})),Object(s["a"])(Object(r["a"])(a),"generation",m.charField({require:!0,visible:!1,fieldName:"生成方式",editable:!1})),Object(s["a"])(Object(r["a"])(a),"statusName",m.charField({require:!0,visible:!0,fieldName:"状态",editable:!1})),Object(s["a"])(Object(r["a"])(a),"status",m.comboBoxField(u["a"],{require:!0,visible:!1,editable:!1,fieldName:"状态",bindSource:{parms:{dname:"状态"}},format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),a}return Object(o["a"])(t,e),t}(c["a"])},a504:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var i=a("7300"),n=a("5873"),l=a("ddf2"),r=a("80ea"),o=a("ae0a"),s=a("97a3"),d=a("652a"),c=a("1269"),u=a("2c75"),m=new d["a"],h=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var o=arguments.length,d=new Array(o),c=0;c<o;c++)d[c]=arguments[c];return a=Object(n["a"])(this,(e=Object(l["a"])(t)).call.apply(e,[this].concat(d))),Object(s["a"])(Object(r["a"])(a),"__name","RMaintainStandardSpareParts"),Object(s["a"])(Object(r["a"])(a),"sparePartsId",m.comboBoxField(u["a"],{require:!0,fieldName:"备件"})),Object(s["a"])(Object(r["a"])(a),"model",m.charField({require:!1,fieldName:"规格型号"})),Object(s["a"])(Object(r["a"])(a),"amount",m.numberField("int",{require:!0,visible:!0,fieldName:"数量"})),Object(s["a"])(Object(r["a"])(a),"part",m.charField({require:!1,fieldName:"更换位置"})),Object(s["a"])(Object(r["a"])(a),"id",m.charField({require:!1,fieldName:"id",visible:!1})),Object(s["a"])(Object(r["a"])(a),"maintenancePlanId",m.charField({require:!1,fieldName:"保养计划id",editable:!1})),a}return Object(o["a"])(t,e),t}(c["a"])},d1fc:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var i=a("7300"),n=a("5873"),l=a("ddf2"),r=a("80ea"),o=a("ae0a"),s=a("97a3"),d=a("652a"),c=a("1269"),u=a("a504"),m=new d["a"],h=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var o=arguments.length,d=new Array(o),c=0;c<o;c++)d[c]=arguments[c];return a=Object(n["a"])(this,(e=Object(l["a"])(t)).call.apply(e,[this].concat(d))),Object(s["a"])(Object(r["a"])(a),"__name","MaintainStandard"),Object(s["a"])(Object(r["a"])(a),"equipmentId",m.charField({require:!1,visible:!1,fieldName:"设备id"})),Object(s["a"])(Object(r["a"])(a),"code",m.charField({require:!1,visible:!0,fieldName:"设备编号",tableOrder:9})),Object(s["a"])(Object(r["a"])(a),"name",m.charField({require:!1,visible:!0,fieldName:"设备名称",tableOrder:10})),Object(s["a"])(Object(r["a"])(a),"model",m.charField({require:!1,visible:!0,fieldName:"规格型号",tableOrder:20})),Object(s["a"])(Object(r["a"])(a),"position",m.charField({require:!1,visible:!1,fieldName:"设备位置",tableOrder:30})),Object(s["a"])(Object(r["a"])(a),"part",m.charField({require:!0,visible:!1,fieldName:"保养位置",tableOrder:40})),Object(s["a"])(Object(r["a"])(a),"content",m.charField({require:!0,visible:!0,fieldName:"保养内容",tableOrder:50})),Object(s["a"])(Object(r["a"])(a),"purpose",m.charField({require:!0,visible:!1,fieldName:"保养目的"})),Object(s["a"])(Object(r["a"])(a),"purposeChinese",m.charField({require:!0,visible:!0,fieldName:"保养目的",tableOrder:60})),Object(s["a"])(Object(r["a"])(a),"method",m.charField({require:!0,visible:!0,fieldName:"保养方法",tableOrder:70})),Object(s["a"])(Object(r["a"])(a),"materiel",m.charField({require:!1,visible:!0,fieldName:"保养工具物料"})),Object(s["a"])(Object(r["a"])(a),"standard",m.charField({require:!0,visible:!0,fieldName:"标准描述",tableOrder:80})),Object(s["a"])(Object(r["a"])(a),"spendTime",m.numberField("int",{require:!0,visible:!0,fieldName:"标准保养时间(min)",tableOrder:90})),Object(s["a"])(Object(r["a"])(a),"periodData",m.charField({require:!0,visible:!0,fieldName:"保养周期",tableOrder:100})),Object(s["a"])(Object(r["a"])(a),"eqpStatus",m.charField({require:!0,visible:!1,fieldName:"设备状态"})),Object(s["a"])(Object(r["a"])(a),"eqpStatusChinese",m.charField({require:!0,visible:!0,fieldName:"保养时设备状态",tableOrder:110})),Object(s["a"])(Object(r["a"])(a),"dataEqpStatus",m.charField({require:!1,visible:!1,fieldName:"保养目的",format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),Object(s["a"])(Object(r["a"])(a),"datePurpose",m.charField({require:!1,visible:!1,fieldName:"保养目的",format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),Object(s["a"])(Object(r["a"])(a),"period",m.charField({require:!0,visible:!1,fieldName:"保养周期"})),Object(s["a"])(Object(r["a"])(a),"periodUnit",m.charField({require:!0,visible:!1,fieldName:"周期单位"})),Object(s["a"])(Object(r["a"])(a),"lastMaintainTime",m.charField({require:!0,visible:!0,fieldName:"上次保养时间",editable:!1,tableOrder:120,format:function(e){if(e)return e.substring(0,10)}})),Object(s["a"])(Object(r["a"])(a),"nextMaintainTime",m.charField({require:!0,visible:!1,fieldName:"下次保养时间",editable:!1})),Object(s["a"])(Object(r["a"])(a),"description",m.charField({require:!1,visible:!1,fieldName:"备注",editable:!1})),Object(s["a"])(Object(r["a"])(a),"rMaintainStandardSparePartsViewModelList",m.oneToManyField(u["a"],"fff",{editableMode:"grid"})),a}return Object(o["a"])(t,e),t}(c["a"])},d9a3:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("layContentHeader",{attrs:{title:"保养计划",buttons:e.headerBtns}},[a("v-text-field",{staticStyle:{width:"320px"},attrs:{label:"请输入计划编号、保养计划名称",clearable:"","hide-details":"","single-line":"",primary:""},on:{"click:clear":e.clearMessage},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a("v-icon",{on:{click:function(t){return e.doSearch()}}},[e._v("search")])]},proxy:!0}]),model:{value:e.like,callback:function(t){e.like=t},expression:"like"}})],1),a("layContent",[a("gridTemplate",{ref:"childGridTemplate",attrs:{title:"保养计划",gridModel:e.maintenancePlan,sort:e.sort},on:{editorsReCode:e.editorsReCode,beforeEdit:e.beforeEdit,beforeAdd:e.beforeAdd,beforeEditSubmit:e.beforeEditSubmit,rowDbClick:e.rowDbClick,afterInit:e.afterInit}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-dialog",{ref:"dialog",attrs:{"return-value":e.startDate,"full-width":"",width:"290"},model:{value:e.startDateModal,callback:function(t){e.startDateModal=t},expression:"startDateModal"}},[a("v-text-field",{attrs:{slot:"activator","prepend-icon":"event",readonly:"",maxlength:"10",rules:[function(e){return!!e||"必填项"}],label:"计划开始时间"},slot:"activator",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                计划开始时间: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}}),a("v-date-picker",{attrs:{locale:"zh-cn",dayFormat:e.dayFormat},on:{change:function(t){e.startDateModal=!1}},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1)],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-dialog",{ref:"dialog",attrs:{"return-value":e.endDate,"full-width":"",width:"290"},model:{value:e.endDateModal,callback:function(t){e.endDateModal=t},expression:"endDateModal"}},[a("v-text-field",{attrs:{slot:"activator","prepend-icon":"event",readonly:"",maxlength:"10",rules:[function(e){return!!e||"必填项"}],label:"计划结束时间"},slot:"activator",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                计划结束时间: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}}),a("v-date-picker",{attrs:{locale:"zh-cn",dayFormat:e.dayFormat},on:{change:function(t){e.endDateModal=!1}},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1)],1)],1),a("ShowEquipmentModal",{attrs:{title:"保养设备",equipmentList:e.equipmentViewModelList},on:{equipment:e.getEquipment}}),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-radio-group",{attrs:{label:"生成时间",row:""},model:{value:e.generation,callback:function(t){e.generation=t},expression:"generation"}},[a("v-radio",{attrs:{label:"立即生成工单",value:"true"}}),a("v-radio",{attrs:{label:"按计划生成工单",value:"false"}})],1)],1)],1)],1)],1),a("maintenancePlanDetail",{attrs:{title:"查看保养计划详情",itemData:e.itemData,isMPDshow:e.isMPDshow},on:{showMPDetailClosed:function(t){return e.showMPDetailClosed()}}})],1)},n=[],l=(a("c041"),a("4634"),a("b9da")),r=a("341e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"1000px",persistent:!0,scrollable:""},model:{value:e.isMPDshow,callback:function(t){e.isMPDshow=t},expression:"isMPDshow"}},[a("v-card",[a("v-card-title",{staticClass:"primary"},[a("span",{staticClass:"headline",staticStyle:{color:"#fff"}},[e._v(e._s(e.title))])]),a("v-card-text",[a("v-container",{staticStyle:{padding:"0"},attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"保养计划编号",disabled:""},model:{value:e.itemData.code,callback:function(t){e.$set(e.itemData,"code",t)},expression:"itemData.code"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"保养计划名称",disabled:""},model:{value:e.itemData.name,callback:function(t){e.$set(e.itemData,"name",t)},expression:"itemData.name"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"计划开始时间",disabled:""},model:{value:e.itemData.startDate,callback:function(t){e.$set(e.itemData,"startDate",t)},expression:"itemData.startDate"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"计划结束时间",disabled:""},model:{value:e.itemData.endDate,callback:function(t){e.$set(e.itemData,"endDate",t)},expression:"itemData.endDate"}})],1)],1)],1),a("ShowEquipmentModal2",{attrs:{title:"保养设备",equipmentList:e.itemData.equipmentViewModelList},on:{equipment:e.getEquipment}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{"margin-right":"30px"},attrs:{color:"primary"},on:{click:function(t){return e.showMPDetailComfirmed()}}},[e._v("关闭")])],1)],1)],1)},s=[],d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("EquipmentModalTemplate",{attrs:{IsShow:e.IsShow},on:{result:e.getResult,equipmentModalClosed:function(t){return e.equipmentModalClosed()},equipmentModalComfirmed:function(t){return e.equipmentModalComfirmed()}}}),a("div",[a("div",[e._v("\n            "+e._s(e.title)+"\n        ")]),a("dataTable",{ref:"childDataTable",attrs:{headers:e.headers,DataSource:e.equipment,btLabel:"查看保养标准内容",allowActive:!0,hideOperation:!1,total:e.total,ClientPage:!0},on:{rowClick:e.rowClickEquip}})],1),a("showMaintenanceContentModal2",{attrs:{IsShow:e.IsShowMContent,itemData:e.itemData,title:"查看保养内容"},on:{equipmentOne:e.getEquipmentOne,showMContentModalClosed:e.showMContentModalClosed}})],1)},c=[],u=a("f05f"),m=a("2edb"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"1000px",persistent:!0,scrollable:""},model:{value:e.IsShow,callback:function(t){e.IsShow=t},expression:"IsShow"}},[a("v-card",[a("v-card-title",{staticClass:"primary"},[a("span",{staticClass:"headline",staticStyle:{color:"#fff"}},[e._v(e._s(e.title))])]),a("v-card-text",[a("v-container",{staticStyle:{padding:"0"},attrs:{"grid-list-md":"","text-md-center":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm3:""}},[a("v-text-field",{attrs:{label:"设备编号",disabled:""},model:{value:e.itemData.code,callback:function(t){e.$set(e.itemData,"code",t)},expression:"itemData.code"}})],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("v-text-field",{attrs:{label:"设备名称",disabled:""},model:{value:e.itemData.name,callback:function(t){e.$set(e.itemData,"name",t)},expression:"itemData.name"}})],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("v-text-field",{attrs:{label:"规格型号",disabled:""},model:{value:e.itemData.model,callback:function(t){e.$set(e.itemData,"model",t)},expression:"itemData.model"}})],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("v-text-field",{attrs:{label:"设备位置",disabled:""},model:{value:e.itemData.factoryName,callback:function(t){e.$set(e.itemData,"factoryName",t)},expression:"itemData.factoryName"}})],1)],1)],1),a("br"),a("div",[a("div",[e._v("保养内容:\n\n                ")]),a("simpleDataTable",{ref:"childDataTable",attrs:{headers:e.headers,hideHeaders:!1,items:e.maintainStandardViewModelList,allowActive:!1,hideOperation:!0}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.showMContentModalClosed()}}},[e._v("关闭")])],1)],1)],1)},f=[],b=a("ef3e"),p=a("d1fc"),v=a("d5b3"),w={name:"showMaintenanceContentModal",data:function(){return{headers:[{text:"保养位置",value:"part",align:"center",sortable:!1},{text:"保养内容",value:"content",align:"center",sortable:!1},{text:"保养目的",value:"purposeChinese",align:"center",sortable:!1},{text:"保养方法",value:"method",align:"center",sortable:!1},{text:"标准描述",value:"standard",align:"center",sortable:!1},{text:"标准保养时间(min)",value:"spendTime",align:"center",sortable:!1},{text:"保养周期",value:"periodData",align:"center",sortable:!1},{text:"保养设备状态",value:"eqpStatusChinese",align:"center",sortable:!1},{text:"上次保养时间",value:"lastMaintainTime",align:"center",sortable:!1}],sparePartsHeader:[{text:"保养内容",value:"content",align:"center",sortable:!1},{text:"备件名称",value:"name",align:"center",sortable:!1},{text:"规格型号",value:"model",align:"center",sortable:!1},{text:"数量",value:"amount",align:"center",sortable:!1},{text:"更换机身",value:"part",align:"center",sortable:!1},{text:"存放位置",value:"address",align:"center",sortable:!1}],maintainStandardViewModelList:[],result:[],IsShowMaintainStandard:!1,rMaintainStandardSparePartsViewModelList:[]}},props:["title","itemData","IsShow","equipmentOne"],components:{simpleDataTable:b["a"]},mounted:function(){},watch:{itemData:{handler:function(e,t){var a=this;a.maintainStandardViewModelList=e.maintainStandardViewModelList,a.maintainStandardViewModelList.forEach((function(e){e.lastMaintainTime=e.lastMaintainTime.substring(0,10)})),this.$emit("equipmentOne",e)}}},methods:{init:function(){},showMContentModalComfirmed:function(){var e=this;e.$emit("showMContentModalComfirmed")},showMContentModalClosed:function(){this.$emit("showMContentModalClosed")}}},g=w,M=a("6691"),C=Object(M["a"])(g,h,f,!1,null,null,null),q=C.exports,D={name:"showEquipmentModal",data:function(){return{headers:[{text:"设备编号",value:"code",align:"center",sortable:!1},{text:"设备名称",value:"name",align:"center",sortable:!1},{text:"规格型号",value:"model",align:"center",sortable:!1},{text:"设备位置",value:"factoryName",align:"center",sortable:!1},{text:"操作",value:"",align:"center",sortable:!1}],equipment:[],IsShow:!1,IsShowMContent:!1,itemData:"",total:1}},props:["title","equipmentList"],components:{EquipmentModalTemplate:m["a"],dataTable:u["a"],showMaintenanceContentModal2:q},mounted:function(){},watch:{equipmentList:{handler:function(e,t){this.equipment=e,0==this.equipment.length?this.total=1:this.total=this.equipment.length}},equipment:{handler:function(e,t){this.$emit("equipment",e)}}},methods:{init:function(){var e=this;e.equipment=[],e.IsShow=!1},getEquipmentOne:function(e){var t=this;t.equipmentList.forEach((function(t){t.id,e.id})),t.equipment=t.equipmentList,this.$emit("equipment",t.equipment)},getResult:function(e){var t=this;e.forEach((function(e){e.typeChinese=e.type.dname;var a=t.equipment.filter((function(t){return t.code===e.code}));0===a.length&&t.equipment.push(e)}))},equipmentModalClosed:function(){this.IsShow=!1},equipmentModalComfirmed:function(){this.IsShow=!1},showMContentModalComfirmed:function(){this.IsShowMContent=!1},showMContentModalClosed:function(){this.IsShowMContent=!1},rowClickEquip:function(e){console.log(e),this.itemData=e,this.IsShowMContent=!0},addEquipment:function(){this.IsShow=!0},removeEquipment:function(){var e=this,t=this.$refs.childDataTable.getCheckItems();0===t.length?v["a"].alert("请选择删除的设备"):t.forEach((function(t){e.equipment.forEach((function(e,a,i){e.code==t.code&&i.splice(a,1)}))}))}}},x=D,S=Object(M["a"])(x,d,c,!1,null,null,null),O=S.exports,j={data:function(){return{maintenancePlan:{}}},watch:{},components:{ShowEquipmentModal2:O},mounted:function(){this.init()},methods:{init:function(){},getEquipment:function(e){this.equipmentViewModelList=[],this.equipmentViewModelList=e},rowDbClick:function(){},showMPDetailComfirmed:function(){this.$emit("showMPDetailClosed")}},props:["title","itemData","isMPDshow"]},k=j,I=Object(M["a"])(k,o,s,!1,null,null,null),$=I.exports,y=(a("9ee5"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("EquipmentModalTemplate",{attrs:{initCondition:e.initCondition,IsShow:e.IsShow},on:{result:e.getResult,equipmentModalClosed:function(t){return e.equipmentModalClosed()},equipmentModalComfirmed:function(t){return e.equipmentModalComfirmed()}}}),a("div",[a("div",[e._v("\n            "+e._s(e.title)+" "),a("span",{staticStyle:{color:"red"}},[e._v("*")]),a("v-icon",{on:{click:function(t){return e.addEquipment()}}},[e._v("add")]),a("v-icon",{on:{click:function(t){return e.removeEquipment()}}},[e._v("remove")])],1),a("dataTable",{ref:"childDataTable",attrs:{headers:e.headers,DataSource:e.equipment,btLabel:"选择保养标准内容",allowActive:!1,hideOperation:!1,total:e.total,ClientPage:!0},on:{rowClick:e.rowClickEquip}})],1),a("showMaintenanceContentModal",{attrs:{IsShow:e.IsShowMContent,itemData:e.itemData,title:"选择保养内容"},on:{equipmentOne:e.getEquipmentOne,showMContentModalComfirmed:e.showMContentModalComfirmed,showMContentModalClosed:e.showMContentModalClosed}})],1)}),T=[],E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"1000px",persistent:!0,scrollable:""},model:{value:e.IsShow,callback:function(t){e.IsShow=t},expression:"IsShow"}},[a("v-card",[a("v-card-title",{staticClass:"primary"},[a("span",{staticClass:"headline",staticStyle:{color:"#fff"}},[e._v(e._s(e.title))])]),a("v-card-text",[a("v-container",{staticStyle:{padding:"0"},attrs:{"grid-list-md":"","text-md-center":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm3:""}},[a("v-text-field",{attrs:{label:"设备编号",disabled:""},model:{value:e.itemData.code,callback:function(t){e.$set(e.itemData,"code",t)},expression:"itemData.code"}})],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("v-text-field",{attrs:{label:"设备名称",disabled:""},model:{value:e.itemData.name,callback:function(t){e.$set(e.itemData,"name",t)},expression:"itemData.name"}})],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("v-text-field",{attrs:{label:"规格型号",disabled:""},model:{value:e.itemData.model,callback:function(t){e.$set(e.itemData,"model",t)},expression:"itemData.model"}})],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("v-text-field",{attrs:{label:"设备位置",disabled:""},model:{value:e.itemData.factoryName,callback:function(t){e.$set(e.itemData,"factoryName",t)},expression:"itemData.factoryName"}})],1)],1)],1),a("br"),a("div",[a("div",[e._v("保养内容:\n                    ")]),a("simpleDataTable",{ref:"childDataTable",attrs:{headers:e.headers,hideHeaders:!1,items:e.maintainStandardViewModelList,allowActive:!0,hideOperation:!0}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{"margin-right":"30px"},attrs:{color:"primary"},on:{click:function(t){return e.showMContentModalComfirmed()}}},[e._v("确定")]),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.showMContentModalClosed()}}},[e._v("取消")])],1)],1)],1)},_=[],F={name:"showMaintenanceContentModal",data:function(){return{headers:[{text:"保养位置",value:"part",align:"center",sortable:!1},{text:"保养内容",value:"content",align:"center",sortable:!1},{text:"保养目的",value:"purposeChinese",align:"center",sortable:!1},{text:"保养方法",value:"method",align:"center",sortable:!1},{text:"标准描述",value:"standard",align:"center",sortable:!1},{text:"标准保养时间(min)",value:"spendTime",align:"center",sortable:!1},{text:"保养周期",value:"periodData",align:"center",sortable:!1},{text:"保养设备状态",value:"eqpStatusChinese",align:"center",sortable:!1},{text:"上次保养时间",value:"lastMaintainTime",align:"center",sortable:!1}],sparePartsHeader:[{text:"保养内容",value:"content",align:"center",sortable:!1},{text:"备件名称",value:"name",align:"center",sortable:!1},{text:"规格型号",value:"model",align:"center",sortable:!1},{text:"数量",value:"amount",align:"center",sortable:!1},{text:"更换机身",value:"part",align:"center",sortable:!1},{text:"存放位置",value:"address",align:"center",sortable:!1}],maintainStandardViewModelList:[],result:[],IsShowMaintainStandard:!1,rMaintainStandardSparePartsViewModelList:[]}},props:["title","itemData","IsShow","equipmentOne"],components:{simpleDataTable:b["a"]},mounted:function(){},watch:{itemData:{handler:function(e,t){var a=this;a.maintainStandardViewModelList=[],a.getMStandard((function(){console.log(a.maintainStandardViewModelList),console.log(e.maintainStandardViewModelList),null!=e.maintainStandardViewModelList&&e.maintainStandardViewModelList.forEach((function(e){a.$refs.childDataTable.setCheckItems(e)}))})),this.$emit("equipmentOne",e)}}},methods:{init:function(){},showMContentModalComfirmed:function(){var e=this,t=this.$refs.childDataTable.getCheckItems();0===t.length?v["a"].alert("请选择需要保养的保养标准"):(e.itemData.maintainStandardViewModelList=t,e.$emit("showMContentModalComfirmed"))},showMContentModalClosed:function(){this.$emit("showMContentModalClosed")},getMStandard:function(e){var t=this,a={eqCode:this.itemData.code,deleted:!1};t.$Server.queryAll((new p["a"]).__name,{},a).then((function(a){t.maintainStandardViewModelList=a.datas,t.maintainStandardViewModelList.forEach((function(e){e.lastMaintainTime=e.lastMaintainTime.substring(0,10)})),e()}))}}},P=F,N=Object(M["a"])(P,E,_,!1,null,null,null),L=N.exports,V={name:"showEquipmentModal",data:function(){return{headers:[{text:"设备编号",value:"code",align:"center",sortable:!1},{text:"设备名称",value:"name",align:"center",sortable:!1},{text:"规格型号",value:"model",align:"center",sortable:!1},{text:"设备位置",value:"factoryName",align:"center",sortable:!1},{text:"操作",value:"",align:"center",sortable:!1}],equipment:[],IsShow:!1,IsShowMContent:!1,itemData:"",total:1}},props:["title","equipmentList","initCondition"],components:{EquipmentModalTemplate:m["a"],dataTable:u["a"],showMaintenanceContentModal:L},mounted:function(){console.log(this.initCondition)},watch:{equipmentList:{handler:function(e,t){this.equipment=e,0==this.equipment.length?this.total=1:this.total=this.equipment.length}},equipment:{handler:function(e,t){this.$emit("equipment",e)}}},methods:{init:function(){var e=this;e.equipment=[],e.IsShow=!1},getEquipmentOne:function(e){var t=this;t.equipmentList.forEach((function(t){t.id,e.id})),t.equipment=t.equipmentList,this.$emit("equipment",t.equipment)},getResult:function(e){var t=this;e.forEach((function(e){e.typeChinese=e.type.dname;var a=t.equipment.filter((function(t){return t.code===e.code}));0===a.length&&t.equipment.push(e)}))},equipmentModalClosed:function(){this.IsShow=!1},equipmentModalComfirmed:function(){this.IsShow=!1},showMContentModalComfirmed:function(){this.IsShowMContent=!1},showMContentModalClosed:function(){this.IsShowMContent=!1},rowClickEquip:function(e){console.log(e),this.itemData=e,this.IsShowMContent=!0},addEquipment:function(){this.IsShow=!0},removeEquipment:function(){var e=this,t=this.$refs.childDataTable.getCheckItems();0===t.length?v["a"].alert("请选择删除的设备"):t.forEach((function(t){e.equipment.forEach((function(e,a,i){e.code==t.code&&i.splice(a,1)}))}))}}},G=V,A=Object(M["a"])(G,y,T,!1,null,null,null),U=A.exports,R={data:function(){var e=this;return{maintenancePlan:{},headerBtns:[{disabled:!this.$per("MaintenancePlan","c"),text:"手动生成",icon:"self_manualgeneration",click:function(){return e.$refs.childGridTemplate.GridAdd()}},{disabled:!this.$per("MaintenancePlan","u"),text:"编辑",icon:"self_edit",click:function(){return e.GridEdit()}},{disabled:!this.$per("MaintenancePlan","d"),text:"删除",icon:"self_delete",click:function(){return e.GridDelete()}},{disabled:!this.$per("MaintenancePlan","e"),text:"导出",icon:"self_export",click:function(){return e.exportMaintenancePlan()}}],IsShowImport:!1,base64:"",sort:!0,equipmentViewModelList:[],status:"",like:"",isMPDshow:!1,itemData:{},startDate:"",startDateModal:!1,generation:"false",endDateModal:!1,endDate:"",codeType:""}},watch:{equipmentViewModelList:{handler:function(e,t){console.log(e)}}},components:{gridTemplate:l["a"],ShowEquipmentModal:U,maintenancePlanDetail:$},mounted:function(){this.init()},methods:{afterInit:function(e){var t=this;e.forEach((function(e){(e.status&&"未开始"==e.status.dname||"已取消"==e.status.dname)&&(e.statusName=t.$Utils.setStart(e.status.dname)),e.status&&"进行中"==e.status.dname&&(e.statusName=t.$Utils.setRed(e.status.dname)),e.status&&"已完成"==e.status.dname&&(e.statusName=t.$Utils.setSuccess(e.status.dname))}))},init:function(){var e=this;e.maintenancePlan=new r["a"]},dayFormat:function(e){return e?new Date(e.replace(/-/g,"/")).getDate():""},editorsReCode:function(e){e=e.filter((function(e){return"equipmentViewModelList"!=e.field})),e=e.filter((function(e){return"status"!=e.field})),e=e.filter((function(e){return"startDate"!=e.field})),e=e.filter((function(e){return"endDate"!=e.field})),e=e.filter((function(e){return"generation"!=e.field})),this.$refs.childGridTemplate.editors=e},GridDelete:function(){if(0==this.$refs.childGridTemplate.getCheckItems().length)v["a"].alert("请至少选中一个需要删除的项");else{if(this.$refs.childGridTemplate.getCheckItems()[0].isAuto)return void v["a"].alert("自动生成的计划不能删除");this.$refs.childGridTemplate.GridDelete()}},GridEdit:function(){if(1!=this.$refs.childGridTemplate.getCheckItems().length)v["a"].alert("请选中一个需要修改的项");else{if(this.$refs.childGridTemplate.getCheckItems()[0].auto)return void v["a"].alert("自动生成的计划不能修改");0!=this.$refs.childGridTemplate.getCheckItems()[0].status.dvalue?v["a"].alert("计划正在进行或者已完成，不能修改！"):this.$refs.childGridTemplate.GridEdit()}},beforeEdit:function(e,t){var a=this,i=Object.assign({},t),n=[];t.equipmentViewModelList.forEach((function(e){n.push(e)})),a.equipmentViewModelList=n,a.status=i.status,a.endDate=i.endDate.substring(0,10),a.startDate=i.startDate.substring(0,10)},beforeAdd:function(e){var t=this;console.log(t.codeType),t.equipmentViewModelList=[],t.endDate="",t.startDate="",t.generation="false"},beforeEditSubmit:function(e){console.log(this.equipmentViewModelList),e.equipmentViewModelList=this.equipmentViewModelList,e.status=this.status,e.startDate=this.startDate,e.endDate=this.endDate,e.generation=this.generation},getEquipment:function(e){this.equipmentViewModelList=[],this.equipmentViewModelList=e},doSearch:function(){var e=this,t={like:this.like};e.$refs.childGridTemplate.doSearch(t)},clearMessage:function(){this.$refs.childGridTemplate.doSearch({})},exportMaintenancePlan:function(){this.$Server.exportFile("MaintenancePlan","保养计划"+this.$Utils.getLocalFotmatTime())},rowDbClick:function(e){this.isMPDshow=!0,this.itemData=e,this.itemData.startDate=this.itemData.startDate.substring(0,10),this.itemData.endDate=this.itemData.endDate.substring(0,10)},showMPDetailClosed:function(){this.isMPDshow=!1}}},B=R,H=Object(M["a"])(B,i,n,!1,null,null,null);t["default"]=H.exports}}]);