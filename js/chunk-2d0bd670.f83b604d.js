(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bd670"],{"2c9b":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("layContentHeader",{attrs:{title:"设备台账",buttons:e.headerBtns}},[i("div",{staticStyle:{display:"inline-block"}},[i("v-text-field",{staticStyle:{width:"280px"},attrs:{label:"请输入设备编号或设备名称","hide-details":"","single-line":"",primary:"",clearable:""},on:{"click:clear":e.clearMessage},scopedSlots:e._u([{key:"append-outer",fn:function(){return[i("v-icon",{on:{click:function(t){return e.doSearch()}}},[e._v("search")])]},proxy:!0}]),model:{value:e.searchfx,callback:function(t){e.searchfx=t},expression:"searchfx"}})],1),i("div",{staticStyle:{display:"inline-block","vertical-align":"middle","margin-top":"-18px"}},[i("v-btn",{attrs:{small:"",flat:""},on:{click:e.addRow}},[e._v("高级搜索")])],1)]),i("v-layout",{directives:[{name:"show",rawName:"v-show",value:e.IsAdvanced,expression:"IsAdvanced"}],staticStyle:{padding:"0px 20px"},attrs:{row:"","align-start":""}},[i("v-flex",{staticStyle:{"margin-right":"20px"}},[i("v-text-field",{attrs:{label:"设备编号","single-line":"",clearable:""},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),i("v-flex",[i("v-text-field",{staticStyle:{"margin-right":"20px"},attrs:{label:"设备名称","single-line":"",clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),i("v-flex",[i("v-text-field",{staticStyle:{"margin-right":"20px"},attrs:{label:"规格型号","single-line":"",clearable:""},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1),i("v-flex",{staticStyle:{"margin-right":"20px"}},[i("v-select",{attrs:{items:e.equipType,label:"设备类型","item-value":"dvalue","item-text":"dname",multiple:"","single-line":"",clearable:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),i("v-flex",{staticStyle:{"margin-right":"20px"}},[i("treeCombo",{ref:"treeCombo0",attrs:{Source:e.organizSelect,MultipleSelect:!1,label:"所属部门",independentCheck:!0,independentSingleCheck:!1,"item-value":"id","item-text":"oname",clearable:"",IsTree:!1,"return-object":""},model:{value:e.deparentID,callback:function(t){e.deparentID=t},expression:"deparentID"}})],1),i("v-flex",{staticStyle:{"margin-right":"20px"}},[i("v-select",{attrs:{items:e.equipSourse,label:"来源","item-value":"dvalue","item-text":"dname","single-line":"",multiple:"",clearable:""},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}})],1),i("v-flex",[i("v-select",{attrs:{items:e.equipStatus,label:"状态","item-value":"dvalue","item-text":"dname","single-line":"",multiple:"",clearable:""},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}})],1),i("v-flex",{staticStyle:{"margin-left":"20px","margin-top":"10px"}},[i("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:"","d-flex":"",small:""},on:{click:function(t){return e.Search()}}},[e._v("查询")]),i("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:"","d-flex":"",small:""},on:{click:function(t){return e.clearCondition()}}},[e._v("清空查询")])],1),i("v-flex",{attrs:{xs8:""}}),i("v-spacer")],1),i("gridTemplate",{ref:"childGridTemplate",attrs:{title:"设备台账",gridModel:e.equipment,sort:!0,initCondition:e.initCondition},on:{editorsReCode:e.editorsReCode,beforeEdit:e.beforeEdit,beforeAdd:e.beforeAdd,beforeEditSubmit:e.beforeEditSubmit,rowDbClick:e.rowDbClick,beforeCancel:e.beforeCancel}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{staticClass:"headline",attrs:{xs12:""}},[e._v("基本信息:")]),i("v-flex",{attrs:{xs4:""}},[i("upload-input",{ref:"imgInput",staticStyle:{"margin-left":"50px"},attrs:{btnName:"上传设备图片"},model:{value:e.editAssets.eqpimage,callback:function(t){e.$set(e.editAssets,"eqpimage",t)},expression:"editAssets.eqpimage"}})],1),i("v-flex",{attrs:{xs8:""}},[i("v-layout",[i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"设备编号",rules:[function(e){return!e||/^[\w|-]+$/.test(e)||"只能是数字,字母,下划线"}]},model:{value:e.editAssets.code,callback:function(t){e.$set(e.editAssets,"code",t)},expression:"editAssets.code"}})],1),i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"条码编号",rules:[function(e){return null==e||""==e||0==e.length||e&&/^[0-9]*$/.test(e)||"只能输入数字"}]},model:{value:e.editAssets.barCode,callback:function(t){e.$set(e.editAssets,"barCode",t)},expression:"editAssets.barCode"}})],1)],1),i("v-layout",[i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"设备名称",rules:[function(e){return!!e||"必填项"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                设备名称 "),i("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.editAssets.name,callback:function(t){e.$set(e.editAssets,"name",t)},expression:"editAssets.name"}})],1),i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"规格型号",rules:[function(e){return!e||/^[A-Za-z0-9-\_]+$/.test(e)||"只能是英文，数字，下划线，横线"}]},model:{value:e.editAssets.model,callback:function(t){e.$set(e.editAssets,"model",t)},expression:"editAssets.model"}})],1)],1)],1),i("v-flex",{attrs:{xs12:""}},[i("v-layout",[i("v-flex",{attrs:{xs4:""}},[i("v-select",{attrs:{label:"设备类型","return-object":"",items:e.equipType,"item-text":"dname",rules:[function(e){return!!e||"必填项"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                设备类型 "),i("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.editAssets.type,callback:function(t){e.$set(e.editAssets,"type",t)},expression:"editAssets.type"}})],1),i("v-flex",{attrs:{xs4:""}},[i("treeComboForLastNode",{attrs:{itemName:"oname",label:"设备位置",Source:e.forgList,independentCheck:!1,require:!0},model:{value:e.editAssets.position,callback:function(t){e.$set(e.editAssets,"position",t)},expression:"editAssets.position"}})],1),i("v-flex",{attrs:{xs4:""}},[i("v-select",{attrs:{label:"来源",items:e.equipSourse,"item-text":"dname","return-object":""},model:{value:e.editAssets.source,callback:function(t){e.$set(e.editAssets,"source",t)},expression:"editAssets.source"}})],1)],1),i("v-layout",[i("v-flex",{attrs:{xs4:""}},[i("treeCombo",{ref:"treeCombo",attrs:{require:!1,Source:e.organizSelect,MultipleSelect:!1,label:"所属部门",disabled:!1,independentCheck:!1,independentSingleCheck:!0,"return-object":""},model:{value:e.editAssets.departmentID,callback:function(t){e.$set(e.editAssets,"departmentID",t)},expression:"editAssets.departmentID"}})],1),i("v-flex",{attrs:{xs4:""}},[i("treeCombo",{ref:"treeCombo1",attrs:{require:!1,Source:e.organizSelect,MultipleSelect:!1,label:"使用部门",disabled:!1,independentCheck:!1,independentSingleCheck:!0,"return-object":""},model:{value:e.editAssets.usedDepartmentID,callback:function(t){e.$set(e.editAssets,"usedDepartmentID",t)},expression:"editAssets.usedDepartmentID"}})],1),i("v-flex",{attrs:{xs4:""}},[i("v-select",{attrs:{label:"状态",items:e.equipStatus,"item-text":"dname","return-object":"",rules:[function(e){return!!e||"必填项"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                状态 "),i("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.editAssets.status,callback:function(t){e.$set(e.editAssets,"status",t)},expression:"editAssets.status"}})],1)],1),i("v-layout",[i("v-flex",{attrs:{xs4:""}},[i("v-combobox",{attrs:{label:"供应商",clearable:"",items:e.supplierList,"item-text":"cname","item-value":"id"},model:{value:e.editAssets.supplier,callback:function(t){e.$set(e.editAssets,"supplier",t)},expression:"editAssets.supplier"}})],1),i("v-flex",{attrs:{xs4:""}},[i("v-combobox",{attrs:{label:"租赁厂商",clearable:"",items:e.leaseholderList,"item-text":"cname","item-value":"id"},model:{value:e.editAssets.leaseholder,callback:function(t){e.$set(e.editAssets,"leaseholder",t)},expression:"editAssets.leaseholder"}})],1),i("v-flex",{attrs:{xs3:""}},[i("v-combobox",{attrs:{label:"生产厂商",clearable:"",items:e.manufacturerList,"item-text":"cname","item-value":"id"},model:{value:e.editAssets.manufacturer,callback:function(t){e.$set(e.editAssets,"manufacturer",t)},expression:"editAssets.manufacturer"}})],1),i("v-flex",{attrs:{xs1:""}},[i("div",{staticStyle:{"padding-top":"20px"}},[i("v-icon",{on:{click:function(t){return e.companyAdd()}}},[e._v("add")])],1)])],1),i("v-layout",[i("v-flex",{attrs:{xs4:""}},[i("v-text-field",{attrs:{label:"产地"},model:{value:e.editAssets.productionPlace,callback:function(t){e.$set(e.editAssets,"productionPlace",t)},expression:"editAssets.productionPlace"}})],1),i("v-flex",{attrs:{xs4:""}},[i("v-text-field",{attrs:{label:"出厂编号"},model:{value:e.editAssets.productionNo,callback:function(t){e.$set(e.editAssets,"productionNo",t)},expression:"editAssets.productionNo"}})],1),i("v-flex",{attrs:{xs4:""}},[i("v-dialog",{ref:"dialog",attrs:{"return-value":e.editAssets.productionDate,lazy:"","full-width":"",width:"290"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[i("v-text-field",{attrs:{slot:"activator","prepend-icon":"event",readonly:"",clearable:"",label:"出厂日期",rules:[function(t){return!e.errorStatus||e.errorMessage}]},slot:"activator",model:{value:e.editAssets.productionDate,callback:function(t){e.$set(e.editAssets,"productionDate",t)},expression:"editAssets.productionDate"}}),i("v-date-picker",{attrs:{locale:"zh-cn",dayFormat:e.dayFormat},on:{change:function(t){e.modal=!1}},model:{value:e.editAssets.productionDate,callback:function(t){e.$set(e.editAssets,"productionDate",t)},expression:"editAssets.productionDate"}})],1)],1)],1),i("v-layout",{attrs:{wrap:"",row:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-radio-group",{attrs:{row:"",label:"是否校准"},on:{change:function(t){return e.changeMering(e.editAssets.calibrated)}},model:{value:e.editAssets.calibrated,callback:function(t){e.$set(e.editAssets,"calibrated",t)},expression:"editAssets.calibrated"}},[i("v-radio",{attrs:{label:"是",value:"1"}}),i("v-radio",{attrs:{label:"否",value:"0"}})],1)],1),i("v-flex",{attrs:{xs12:""}},[i("v-textarea",{attrs:{label:"备注",rules:[function(e){return!(e&&e.length>=120)||"超出最大长度"}]},model:{value:e.editAssets.description,callback:function(t){e.$set(e.editAssets,"description",t)},expression:"editAssets.description"}})],1)],1)],1)],1),i("v-divider",{staticStyle:{"border-style":"dashed","border-width":"thin"}}),i("v-layout",[i("v-flex",{attrs:{xs12:""}},[i("span",{staticClass:"headline"},[e._v("上传附件:")]),i("v-icon",{on:{click:function(t){return e.addUpload()}}},[e._v("add")]),i("v-icon",{on:{click:function(t){return e.removeUpload()}}},[e._v("remove")])],1)],1),e._l(e.equipmentDocumentList,(function(t,a){return i("v-layout",{key:a,style:e.selectDocument.includes(t)?"background: #E3F2FD":"",attrs:{row:""},on:{click:function(i){return e.getClick(t,a)}}},[i("fileUploader",{ref:"uploadFile",refInFor:!0,attrs:{label:"上传附件",multiple:!1,fileNames:t.documentViewModel.dname,uploadBase64:!1,userVersion:t},on:{formData:e.getFileData},model:{value:t.documentViewModel,callback:function(i){e.$set(t,"documentViewModel",i)},expression:"doc.documentViewModel"}})],1)})),i("v-divider",{staticStyle:{"border-style":"dashed","border-width":"thin"}}),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{staticClass:"headline",attrs:{xs12:""}},[e._v("资产信息:")]),e._l(e.assetsEditors,(function(t){return i("v-flex",{key:t.field,attrs:{xs4:""}},["charField"==t.fieldType?i("v-text-field",{attrs:{label:t.fieldName,rules:[function(e){return!t.require||!!e||"必填项"},function(e){return!t.require||/^[A-Za-z0-9-_]+$/.test(e)||"数据格式不正确"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                        "+e._s(t.fieldName)+" "),t.require?i("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]},proxy:!0}],null,!0),model:{value:e.editAssets[t.field],callback:function(i){e.$set(e.editAssets,t.field,i)},expression:"editAssets[item.field]"}}):e._e(),"purchaseDate"==t.field?i("v-dialog",{ref:"dialog",refInFor:!0,attrs:{"return-value":e.editAssets[t.field],lazy:"","full-width":"",width:"290"},model:{value:t.modal,callback:function(i){e.$set(t,"modal",i)},expression:"item.modal"}},[i("v-text-field",{attrs:{slot:"activator","prepend-icon":"event",readonly:"",maxlength:"10",clearable:"",label:t.fieldName,rules:[function(t){return!e.error||e.errorHints}]},slot:"activator",model:{value:e.editAssets[t.field],callback:function(i){e.$set(e.editAssets,t.field,i)},expression:"editAssets[item.field]"}}),i("v-date-picker",{attrs:{locale:"zh-cn",dayFormat:e.dayFormat},on:{change:function(e){t.modal=!1}},model:{value:e.editAssets[t.field],callback:function(i){e.$set(e.editAssets,t.field,i)},expression:"editAssets[item.field]"}})],1):e._e(),"acceptDate"==t.field?i("v-dialog",{ref:"dialog",refInFor:!0,attrs:{"return-value":e.editAssets[t.field],lazy:"","full-width":"",width:"290"},model:{value:t.modal,callback:function(i){e.$set(t,"modal",i)},expression:"item.modal"}},[i("v-text-field",{attrs:{slot:"activator","prepend-icon":"event",readonly:"",maxlength:"10",clearable:"",label:t.fieldName,rules:[function(t){return!e.error1||e.errorHints1}]},slot:"activator",model:{value:e.editAssets[t.field],callback:function(i){e.$set(e.editAssets,t.field,i)},expression:"editAssets[item.field]"}}),i("v-date-picker",{attrs:{locale:"zh-cn",dayFormat:e.dayFormat},on:{change:function(e){t.modal=!1}},model:{value:e.editAssets[t.field],callback:function(i){e.$set(e.editAssets,t.field,i)},expression:"editAssets[item.field]"}})],1):e._e(),"startProduceDate"==t.field?i("v-dialog",{ref:"dialog",refInFor:!0,attrs:{"return-value":e.editAssets[t.field],lazy:"","full-width":"",width:"290"},model:{value:t.modal,callback:function(i){e.$set(t,"modal",i)},expression:"item.modal"}},[i("v-text-field",{attrs:{slot:"activator","prepend-icon":"event",readonly:"",maxlength:"10",clearable:"",label:t.fieldName,rules:[function(t){return!e.error2||e.errorHints2}]},slot:"activator",model:{value:e.editAssets[t.field],callback:function(i){e.$set(e.editAssets,t.field,i)},expression:"editAssets[item.field]"}}),i("v-date-picker",{attrs:{locale:"zh-cn",dayFormat:e.dayFormat},on:{change:function(e){t.modal=!1}},model:{value:e.editAssets[t.field],callback:function(i){e.$set(e.editAssets,t.field,i)},expression:"editAssets[item.field]"}})],1):e._e(),"numberField"==t.fieldType&&"float"==t.type?i("v-text-field",{attrs:{label:t.fieldName,rules:[function(e){return!t.require||!!e||"必填项"},function(e){return!e||/^[\+\-]?\d*?\.?\d*?$/.test(e)||"只能是数字或者小数！"}]},model:{value:e.editAssets[t.field],callback:function(i){e.$set(e.editAssets,t.field,i)},expression:"editAssets[item.field]"}}):e._e(),"numberField"==t.fieldType&&"int"==t.type?i("v-text-field",{attrs:{label:t.fieldName,type:"number",rules:[function(e){return!t.require||!!e||"必填项"},function(e){return!e||/^(0|[1-9][0-9]*)$/.test(e)||"只能是正整数"}]},model:{value:e.editAssets[t.field],callback:function(i){e.$set(e.editAssets,t.field,i)},expression:"editAssets[item.field]"}}):e._e(),"comboboxField"==t.fieldType?i("v-select",{attrs:{"prepend-inner-icon":t.require?"star":"",items:e.abcTypeList,label:t.fieldName,"item-text":"dname","return-object":""},model:{value:e.editAssets[t.field],callback:function(i){e.$set(e.editAssets,t.field,i)},expression:"editAssets[item.field]"}}):e._e()],1)}))],2)],2),i("contentModal",{attrs:{title:"设备详情",IsShow:e.IsShowDetails,isDetails:!0},on:{modalClosed:function(t){return e.modalClosed()}}},[i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{staticClass:"headline",attrs:{xs12:""}},[e._v("基本信息:")]),i("v-flex",{attrs:{xs4:""}},[i("upload-input",{staticStyle:{"margin-left":"50px"},attrs:{btnName:"上传设备图片",disabled:!0},model:{value:e.equipmentDetail.eqpimage,callback:function(t){e.$set(e.equipmentDetail,"eqpimage",t)},expression:"equipmentDetail.eqpimage"}})],1),i("v-flex",{attrs:{xs8:""}},[i("v-layout",[i("v-flex",[i("v-text-field",{attrs:{label:"设备编号",disabled:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                    设备编号 "),i("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.equipmentDetail.code,callback:function(t){e.$set(e.equipmentDetail,"code",t)},expression:"equipmentDetail.code"}})],1),i("v-flex",[i("v-text-field",{attrs:{label:"条码编号",disabled:""},model:{value:e.equipmentDetail.barCode,callback:function(t){e.$set(e.equipmentDetail,"barCode",t)},expression:"equipmentDetail.barCode"}})],1)],1),i("v-layout",[i("v-flex",[i("v-text-field",{attrs:{label:"设备名称",disabled:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                    设备名称 "),i("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.equipmentDetail.name,callback:function(t){e.$set(e.equipmentDetail,"name",t)},expression:"equipmentDetail.name"}})],1),i("v-flex",[i("v-text-field",{attrs:{label:"规格型号",disabled:""},model:{value:e.equipmentDetail.model,callback:function(t){e.$set(e.equipmentDetail,"model",t)},expression:"equipmentDetail.model"}})],1)],1)],1),i("v-flex",{attrs:{xs12:""}},[i("v-layout",[i("v-flex",[i("v-select",{attrs:{label:"设备类型","return-object":"",items:e.equipType,"item-text":"dname",disabled:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                    设备类型 "),i("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.equipmentDetail.type,callback:function(t){e.$set(e.equipmentDetail,"type",t)},expression:"equipmentDetail.type"}})],1),i("v-flex",[i("v-select",{attrs:{label:"设备位置",disabled:"",items:e.forgList,"item-text":"fname","item-value":"id"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                    设备位置 "),i("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.equipmentDetail.position,callback:function(t){e.$set(e.equipmentDetail,"position",t)},expression:"equipmentDetail.position"}})],1),i("v-flex",[i("v-select",{attrs:{label:"来源",items:e.equipSourse,"item-text":"dname","return-object":"",disabled:""},model:{value:e.equipmentDetail.source,callback:function(t){e.$set(e.equipmentDetail,"source",t)},expression:"equipmentDetail.source"}})],1)],1),i("v-layout",[i("v-flex",[i("treeCombo",{ref:"treeCombo2",attrs:{require:!1,Source:e.organizSelect,MultipleSelect:!1,label:"所属部门",disabled:!0,independentCheck:!1,independentSingleCheck:!0,"return-object":""},model:{value:e.equipmentDetail.departmentID,callback:function(t){e.$set(e.equipmentDetail,"departmentID",t)},expression:"equipmentDetail.departmentID"}})],1),i("v-flex",[i("treeCombo",{ref:"treeCombo3",attrs:{require:!1,Source:e.organizSelect,MultipleSelect:!1,label:"使用部门",disabled:!0,independentCheck:!1,independentSingleCheck:!0,"return-object":""},model:{value:e.equipmentDetail.usedDepartmentID,callback:function(t){e.$set(e.equipmentDetail,"usedDepartmentID",t)},expression:"equipmentDetail.usedDepartmentID"}})],1),i("v-flex",[i("v-select",{attrs:{label:"状态",items:e.equipStatus,"item-text":"dname","return-object":"",disabled:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                    状态 "),i("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.equipmentDetail.status,callback:function(t){e.$set(e.equipmentDetail,"status",t)},expression:"equipmentDetail.status"}})],1)],1),i("v-layout",[i("v-flex",[i("v-select",{attrs:{label:"供应商",items:e.companyList,"item-text":"cname","item-value":"id",disabled:""},model:{value:e.equipmentDetail.supplier,callback:function(t){e.$set(e.equipmentDetail,"supplier",t)},expression:"equipmentDetail.supplier"}})],1),i("v-flex",[i("v-select",{attrs:{label:"租赁厂商",items:e.companyList,"item-text":"cname","item-value":"id",disabled:""},model:{value:e.equipmentDetail.leaseholder,callback:function(t){e.$set(e.equipmentDetail,"leaseholder",t)},expression:"equipmentDetail.leaseholder"}})],1),i("v-flex",[i("v-select",{attrs:{label:"生产厂商",items:e.companyList,"item-text":"cname","item-value":"id",disabled:""},model:{value:e.equipmentDetail.manufacturer,callback:function(t){e.$set(e.equipmentDetail,"manufacturer",t)},expression:"equipmentDetail.manufacturer"}})],1)],1),i("v-layout",[i("v-flex",[i("v-text-field",{attrs:{label:"产地",disabled:""},model:{value:e.equipmentDetail.productionPlace,callback:function(t){e.$set(e.equipmentDetail,"productionPlace",t)},expression:"equipmentDetail.productionPlace"}})],1),i("v-flex",[i("v-text-field",{attrs:{label:"出厂编号",disabled:""},model:{value:e.equipmentDetail.productionNo,callback:function(t){e.$set(e.equipmentDetail,"productionNo",t)},expression:"equipmentDetail.productionNo"}})],1),i("v-flex",[i("v-dialog",{attrs:{disabled:"","return-value":e.equipmentDetail.productionDate,lazy:"","full-width":"",width:"290"}},[i("v-text-field",{attrs:{slot:"activator","prepend-icon":"event",maxlength:"10",clearable:"",disabled:"",label:"出厂日期"},slot:"activator",model:{value:e.equipmentDetail.productionDate,callback:function(t){e.$set(e.equipmentDetail,"productionDate",t)},expression:"equipmentDetail.productionDate"}}),i("v-date-picker",{attrs:{locale:"zh-cn",dayFormat:e.dayFormat,disabled:""},model:{value:e.equipmentDetail.productionDate,callback:function(t){e.$set(e.equipmentDetail,"productionDate",t)},expression:"equipmentDetail.productionDate"}})],1)],1)],1),i("v-layout",[i("v-flex",[i("v-textarea",{attrs:{label:"备注",disabled:""},model:{value:e.equipmentDetail.description,callback:function(t){e.$set(e.equipmentDetail,"description",t)},expression:"equipmentDetail.description"}})],1)],1)],1)],1),i("p",{staticClass:"headline"},[e._v("设备附件")]),e._l(e.equipmentDetail.equipmentDocumentList,(function(t,a){return i("v-layout",{key:a,attrs:{row:""}},[i("v-flex",{attrs:{xs5:""}},[i("v-text-field",{attrs:{value:t.documentViewModel.dname+t.documentViewModel.newestFileExt,disabled:""}})],1),i("v-flex",{attrs:{xs5:""}},[i("v-text-field",{attrs:{value:t.userVersion,disabled:""}})],1),i("v-flex",[i("v-btn",{on:{click:function(i){return e.downloadFile(t.documentViewModel)}}},[e._v("下载")])],1)],1)})),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{staticClass:"headline",attrs:{xs12:""}},[e._v("资产信息:")]),e._l(e.assetsEditors,(function(t){return i("v-flex",{key:t.field,attrs:{xs4:""}},["charField"==t.fieldType?i("v-text-field",{attrs:{label:t.fieldName,disabled:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                            "+e._s(t.fieldName)+" "),t.require?i("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]},proxy:!0}],null,!0),model:{value:e.equipmentDetail[t.field],callback:function(i){e.$set(e.equipmentDetail,t.field,i)},expression:"equipmentDetail[item.field]"}}):e._e(),"purchaseDate"==t.field?i("v-dialog",{ref:"dialog",refInFor:!0,attrs:{disabled:"","return-value":e.equipmentDetail[t.field],lazy:"","full-width":"",width:"290"},model:{value:e.modal2,callback:function(t){e.modal2=t},expression:"modal2"}},[i("v-text-field",{attrs:{slot:"activator","prepend-icon":"event",maxlength:"10",clearable:"",label:t.fieldName,disabled:""},slot:"activator",model:{value:e.equipmentDetail[t.field],callback:function(i){e.$set(e.equipmentDetail,t.field,i)},expression:"equipmentDetail[item.field]"}}),i("v-date-picker",{attrs:{locale:"zh-cn",dayFormat:e.dayFormat,disabled:""},on:{change:function(t){e.modal2=!1}},model:{value:e.equipmentDetail[t.field],callback:function(i){e.$set(e.equipmentDetail,t.field,i)},expression:"equipmentDetail[item.field]"}})],1):e._e(),"acceptDate"==t.field?i("v-dialog",{ref:"dialog",refInFor:!0,attrs:{disabled:"","return-value":e.equipmentDetail[t.field],lazy:"","full-width":"",width:"290"},model:{value:e.modal3,callback:function(t){e.modal3=t},expression:"modal3"}},[i("v-text-field",{attrs:{slot:"activator","prepend-icon":"event",readonly:"",maxlength:"10",clearable:"",disabled:"",label:t.fieldName},slot:"activator",model:{value:e.equipmentDetail[t.field],callback:function(i){e.$set(e.equipmentDetail,t.field,i)},expression:"equipmentDetail[item.field]"}}),i("v-date-picker",{attrs:{locale:"zh-cn",dayFormat:e.dayFormat,disabled:""},on:{change:function(t){e.modal3=!1}},model:{value:e.equipmentDetail[t.field],callback:function(i){e.$set(e.equipmentDetail,t.field,i)},expression:"equipmentDetail[item.field]"}})],1):e._e(),"startProduceDate"==t.field?i("v-dialog",{ref:"dialog",refInFor:!0,attrs:{disabled:"","return-value":e.equipmentDetail[t.field],lazy:"","full-width":"",width:"290"},model:{value:e.modal4,callback:function(t){e.modal4=t},expression:"modal4"}},[i("v-text-field",{attrs:{slot:"activator","prepend-icon":"event",disabled:"",maxlength:"10",clearable:"",label:t.fieldName},slot:"activator",model:{value:e.equipmentDetail[t.field],callback:function(i){e.$set(e.equipmentDetail,t.field,i)},expression:"equipmentDetail[item.field]"}}),i("v-date-picker",{attrs:{locale:"zh-cn",dayFormat:e.dayFormat,disabled:""},on:{change:function(t){e.modal4=!1}},model:{value:e.equipmentDetail[t.field],callback:function(i){e.$set(e.equipmentDetail,t.field,i)},expression:"equipmentDetail[item.field]"}})],1):e._e(),"numberField"==t.fieldType&&"float"==t.type?i("v-text-field",{attrs:{label:t.fieldName,disabled:""},model:{value:e.equipmentDetail[t.field],callback:function(i){e.$set(e.equipmentDetail,t.field,i)},expression:"equipmentDetail[item.field]"}}):e._e(),"numberField"==t.fieldType&&"int"==t.type?i("v-text-field",{attrs:{label:t.fieldName,type:"number",disabled:""},model:{value:e.equipmentDetail[t.field],callback:function(i){e.$set(e.equipmentDetail,t.field,i)},expression:"equipmentDetail[item.field]"}}):e._e(),"comboboxField"==t.fieldType?i("v-select",{attrs:{"prepend-inner-icon":t.require?"star":"",items:e.abcTypeList,label:t.fieldName,"item-text":"dname",disabled:"","return-object":""},model:{value:e.equipmentDetail[t.field],callback:function(i){e.$set(e.equipmentDetail,t.field,i)},expression:"equipmentDetail[item.field]"}}):e._e()],1)}))],2),e.equipmentDetail.rentalTaskViewModel&&e.rentalTaskViewModel.rentalTaskViewModel.rentalCode?i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",[i("v-text-field",{attrs:{label:"租赁编号",disabled:""},model:{value:e.equipmentDetail.rentalTaskViewModel.rentalCode,callback:function(t){e.$set(e.equipmentDetail.rentalTaskViewModel,"rentalCode",t)},expression:"equipmentDetail.rentalTaskViewModel.rentalCode"}})],1),i("v-flex",[i("v-text-field",{attrs:{label:"申请人",disabled:""},model:{value:e.equipmentDetail.rentalTaskViewModel.applicantName,callback:function(t){e.$set(e.equipmentDetail.rentalTaskViewModel,"applicantName",t)},expression:"equipmentDetail.rentalTaskViewModel.applicantName"}})],1),i("v-flex",[i("v-text-field",{attrs:{label:"租赁原因",disabled:""},model:{value:e.equipmentDetail.rentalTaskViewModel.reason,callback:function(t){e.$set(e.equipmentDetail.rentalTaskViewModel,"reason",t)},expression:"equipmentDetail.rentalTaskViewModel.reason"}})],1)],1):e._e(),e.equipmentDetail.purchaseTaskViewModel&&e.equipmentDetail.purchaseTaskViewModel.purchaseCode?i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",[i("v-text-field",{attrs:{label:"购置编号",disabled:""},model:{value:e.equipmentDetail.purchaseTaskViewModel.purchaseCode,callback:function(t){e.$set(e.equipmentDetail.purchaseTaskViewModel,"purchaseCode",t)},expression:"equipmentDetail.purchaseTaskViewModel.purchaseCode"}})],1),i("v-flex",[i("v-text-field",{attrs:{label:"申请人",disabled:""},model:{value:e.equipmentDetail.purchaseTaskViewModel.applicantName,callback:function(t){e.$set(e.equipmentDetail.purchaseTaskViewModel,"applicantName",t)},expression:"equipmentDetail.purchaseTaskViewModel.applicantName"}})],1),i("v-flex",[i("v-text-field",{attrs:{label:"购置原因",disabled:""},model:{value:e.equipmentDetail.purchaseTaskViewModel.reason,callback:function(t){e.$set(e.equipmentDetail.purchaseTaskViewModel,"reason",t)},expression:"equipmentDetail.purchaseTaskViewModel.reason"}})],1)],1):e._e()],2)],1),i("contentModal",{attrs:{title:"导入设备",IsShow:e.IsShowImport},on:{modalClosed:function(t){return e.modalClosedImport()},modalComfirmed:function(t){return e.ComfirmImport()}}},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:e.downloadTemp}},[e._v("下载导入模板")]),i("div",{staticStyle:{color:"red","font-size":"12px"}},[e._v("\n                (注:文档内标题标红的列为必填项，请勿输入以下非法字符：~、@、$、^、&、《、》、<、>、￥)\n            ")])],1),i("UploadFile",{ref:"uploadFile",attrs:{label:"导入文件"},on:{formData:e.getFormData},model:{value:e.base64,callback:function(t){e.base64=t},expression:"base64"}})],1),i("contentModal",{attrs:{title:"添加来往单位",IsShow:e.IsShowCompany,width:"1100"},on:{modalClosed:function(t){return e.modalClosedCompany()},modalComfirmed:function(t){return e.modalComfirmedCompany()}}},[i("companyAdd",{ref:"company",attrs:{companyInfo:e.companyInfo}})],1),i("contentModal",{attrs:{title:"添加计量仪器",IsShow:e.IsShowMering,width:"1100"},on:{modalClosed:function(t){return e.modalClosedMering()},modalComfirmed:function(t){return e.modalComfirmedMering()}}},[i("meringEquipmentAdd",{ref:"meringEquipment",attrs:{equipment:e.equipmentMering,organizSelect:e.organizSelect}})],1)],1)},s=[],l=(i("7cfd"),i("bada"),i("4634"),i("c041"),i("a1de")),n=i("f19a"),r=i("0b43"),o=i("b9da"),d=i("9ee5"),c=i("20d3"),u=i("b490"),m=i("55b3"),p=i("a2a7"),f=i("a7fe"),h=i("815a"),v=i("d5b3"),b=i("b27e"),x=(i("1d53"),i("250a"),i("4027")),D=i("15ad"),g=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",{attrs:{"grid-list-md":""}},[i("v-form",{ref:"meringForm",attrs:{valid:"true","lazy-validation":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm6:""}},[i("v-text-field",{attrs:{label:"仪器编号",disabled:""},model:{value:e.equipment.code,callback:function(t){e.$set(e.equipment,"code",t)},expression:"equipment.code"}})],1),i("v-flex",{attrs:{xs12:"",sm6:""}},[i("v-text-field",{attrs:{label:"仪器名称",rules:[e.rules.selectRe],disabled:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n            仪器名称"),i("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.equipment.name,callback:function(t){e.$set(e.equipment,"name",t)},expression:"equipment.name"}})],1),i("v-flex",{attrs:{xs12:"",sm6:""}},[i("v-text-field",{attrs:{label:"规格型号",disabled:""},model:{value:e.equipment.model,callback:function(t){e.$set(e.equipment,"model",t)},expression:"equipment.model"}})],1),i("v-flex",{attrs:{xs12:"",sm6:""}},[i("v-text-field",{attrs:{label:"使用位置"},model:{value:e.equipment.usedPart,callback:function(t){e.$set(e.equipment,"usedPart",t)},expression:"equipment.usedPart"}})],1),i("v-flex",{attrs:{xs12:"",sm6:""}},[i("v-select",{attrs:{items:e.organizList,"item-value":"id","item-text":"name",label:"所属部门",multiple:"",disabled:""},model:{value:e.equipment.departmentID,callback:function(t){e.$set(e.equipment,"departmentID",t)},expression:"equipment.departmentID"}})],1),i("v-flex",{attrs:{xs12:"",sm6:""}},[i("v-select",{attrs:{items:e.organizList,"item-value":"id","item-text":"name",label:"所属部门",multiple:"",disabled:""},model:{value:e.equipment.usedDepartmentID,callback:function(t){e.$set(e.equipment,"usedDepartmentID",t)},expression:"equipment.usedDepartmentID"}})],1),i("v-flex",{attrs:{xs12:"",sm6:""}},[i("v-select",{attrs:{label:"校准类型",items:e.typeData,"item-text":"dname","return-object":"",rules:[e.rules.selectRe]},on:{change:function(t){return e.meringTypeChange(e.equipment.type)}},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n            校准类型"),i("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.equipment.type,callback:function(t){e.$set(e.equipment,"type",t)},expression:"equipment.type"}})],1),i("v-flex",{attrs:{xs6:"",sm3:""}},[e.IsShowPeriod?i("v-text-field",{attrs:{label:"校准周期",type:"number",rules:[function(e){return!!e||"只能是正整数."},function(e){return!e||/^(0|[1-9][0-9]*)$/.test(e)||"只能是正整数"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n            校准周期"),i("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}],null,!1,1070703681),model:{value:e.equipment.period,callback:function(t){e.$set(e.equipment,"period",t)},expression:"equipment.period"}}):e._e()],1),i("v-flex",{attrs:{xs6:"",sm3:""}},[e.IsShowPeriod?i("v-select",{attrs:{label:"周期单位",items:e.periodUnitData,"item-text":"dname","return-object":"",rules:[e.rules.selectRe]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n            周期单位"),i("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}],null,!1,1648260286),model:{value:e.equipment.periodUnit,callback:function(t){e.$set(e.equipment,"periodUnit",t)},expression:"equipment.periodUnit"}}):e._e()],1),e.IsShowPeriod?i("v-flex",{attrs:{xs12:"",sm6:""}},[i("v-dialog",{ref:"dialog",attrs:{"return-value":e.equipment.lastCalibrationDate,"full-width":"",width:"290"},model:{value:e.lastCalibrationDateModal,callback:function(t){e.lastCalibrationDateModal=t},expression:"lastCalibrationDateModal"}},[i("v-text-field",{attrs:{slot:"activator","prepend-icon":"event",readonly:"",maxlength:"10",label:"上次校准时间"},slot:"activator",model:{value:e.equipment.lastCalibrationDate,callback:function(t){e.$set(e.equipment,"lastCalibrationDate",t)},expression:"equipment.lastCalibrationDate"}}),i("v-date-picker",{attrs:{locale:"zh-cn",dayFormat:e.dayFormat},on:{change:function(t){e.lastCalibrationDateModal=!1}},model:{value:e.equipment.lastCalibrationDate,callback:function(t){e.$set(e.equipment,"lastCalibrationDate",t)},expression:"equipment.lastCalibrationDate"}})],1)],1):e._e(),i("v-flex",{attrs:{xs12:"",sm6:""}})],1),i("v-divider",{staticStyle:{"border-style":"dashed","border-width":"thin"},attrs:{xs12:"",sm12:""}}),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs6:"",sm4:""}},[i("v-text-field",{staticStyle:{"margin-top":"-9px"},attrs:{label:"计量标准文件名称"},model:{value:e.equipment.meteringStandardVName,callback:function(t){e.$set(e.equipment,"meteringStandardVName",t)},expression:"equipment.meteringStandardVName"}})],1),i("v-flex",{attrs:{xs6:"",sm2:""}},[i("v-text-field",{staticStyle:{"margin-top":"-9px"},attrs:{label:"版本",prefix:"V",rules:[function(e){return!e||/^\d+$/.test(e)||/^\d+(\.\d+)+$/.test(e)||"只能是数字或者小数点！"}]},model:{value:e.equipment.meteringStandardVersion,callback:function(t){e.$set(e.equipment,"meteringStandardVersion",t)},expression:"equipment.meteringStandardVersion"}})],1),i("v-flex",{attrs:{xs12:"",sm6:""}},[i("UploadFile2",{ref:"uploadFile1",attrs:{label:"选择文件",fileNames:e.equipment.meteringStandardName,uploadBase64:!1,hint:"支持文档格式：doc,docx,xls,xlsx,ppt,pptx,pdf"},on:{formData:e.meteringStandardUpload},model:{value:e.equipment.meteringStandardVM,callback:function(t){e.$set(e.equipment,"meteringStandardVM",t)},expression:"equipment.meteringStandardVM"}})],1)],1),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs6:"",sm4:""}},[i("v-text-field",{staticStyle:{"margin-top":"-9px"},attrs:{label:"校准报告文件名称"},model:{value:e.equipment.calibrationReportVName,callback:function(t){e.$set(e.equipment,"calibrationReportVName",t)},expression:"equipment.calibrationReportVName"}})],1),i("v-flex",{attrs:{xs6:"",sm2:""}},[i("v-text-field",{staticStyle:{"margin-top":"-9px"},attrs:{label:"版本",prefix:"V",rules:[function(e){return!e||/^\d+$/.test(e)||/^\d+(\.\d+)+$/.test(e)||"只能是数字或者小数点！"}]},model:{value:e.equipment.calibrationReportVersion,callback:function(t){e.$set(e.equipment,"calibrationReportVersion",t)},expression:"equipment.calibrationReportVersion"}})],1),i("v-flex",{attrs:{xs12:"",sm6:""}},[i("UploadFile2",{ref:"uploadFile2",attrs:{label:"选择文件",uploadBase64:!1,fileNames:e.equipment.calibrationReportName,hint:"支持文档格式：doc,docx,xls,xlsx,ppt,pptx,pdf"},on:{formData:e.calibrationReportUpload},model:{value:e.equipment.calibrationReportVM,callback:function(t){e.$set(e.equipment,"calibrationReportVM",t)},expression:"equipment.calibrationReportVM"}})],1)],1)],1)],1)},q=[],y=i("3876"),A=i("6bf2"),S=i.n(A),k={name:"meringEquipmentAdd",data:function(){return{rules:{required:function(e){return!!e||"必填项."},min:function(e){return e.length>=8||"Min 8 characters"},selectRe:function(e){return!!/^(0)$/.test(e)||!!e||"必填项"}},periodUnitData:[],typeData:[],meteringStandardName:"",calibrationReportVName:"",calibrationReportVersion:"",calibrationReportName:"",calibrationReportVM:"",lastCalibrationDateModal:!1,IsShowPeriod:!1,meteringStandardVM:"",meteringStandardVersion:"",meteringStandardVName:""}},computed:{organizList:function(){return this.organizSelect?this.organizSelect:[]},meringEquipment:function(){var e={};return this.equipment&&(e=JSON.parse(JSON.stringify(this.equipment)),e.department=this.equipment.departmentID),e}},components:{UploadFile2:y["a"],treeCombo:n["a"]},props:["equipment","organizSelect"],methods:{initialize:function(){var e=this;this.$Server.queryAll((new f["a"]).__name,{},{dname:"校准标准"}).then((function(t){e.typeData=t.datas})),this.$Server.queryAll((new f["a"]).__name,null,{dname:"保养周期单位"}).then((function(t){e.periodUnitData=t.datas}))},meteringStandardUpload:function(e){var t=this,i=e.get("data");if(i){var a=i.name.substring(i.name.lastIndexOf(".")+1,i.name.length),s=["doc","docx","xls","xlsx","ppt","pptx","pdf"];0==s.filter((function(e){return e===a})).length&&(v["a"].alert("请检查文件是否为符合条件的文件！"),t.$refs.uploadFile1.clearFile())}},calibrationReportUpload:function(e){var t=this,i=e.get("data");if(i){var a=i.name.substring(i.name.lastIndexOf(".")+1,i.name.length),s=["doc","docx","xls","xlsx","ppt","pptx","pdf"];0==s.filter((function(e){return e===a})).length&&(v["a"].alert("请检查文件是否为符合条件的文件！"),t.$refs.uploadFile2.clearFile())}},dayFormat:function(e){return e?new Date(e.replace(/-/g,"/")).getDate():""},meringTypeChange:function(e){e&&(this.equipment.lastCalibrationDate=S()(new Date).format("YYYY-MM-DD"),null!=e.dvalue&&void 0!=e.dvalue&&2!=e.dvalue?this.IsShowPeriod=!0:this.IsShowPeriod=!1)},resetFormValidation:function(){this.$refs.meringForm.resetValidation()},resetForm:function(){this.$refs.meringForm.reset(),this.$refs.meringForm.resetValidation()},validation:function(){return this.$refs.meringForm.validate()},resetFile:function(){this.$refs.uploadFile2.clearFile(),this.$refs.uploadFile1.clearFile()}}},w=k,$=i("6691"),M=Object($["a"])(w,g,q,!1,null,"46d91b9a",null),I=M.exports,N={data:function(){var e=this;return{equipment:{},initCondition:{deleted:!1},headerBtns:[{disabled:!this.$per("Equipment","c"),text:"添加",icon:"self_add",click:function(){return e.$refs.childGridTemplate.GridAdd()}},{disabled:!this.$per("Equipment","u"),text:"编辑",icon:"self_edit",click:function(){return e.$refs.childGridTemplate.GridEdit()}},{disabled:!this.$per("Equipment","d"),text:"删除",icon:"self_delete",click:function(){return e.$refs.childGridTemplate.GridDelete()}},{disabled:!this.$per("Equipment","import"),text:"导入",icon:"self_import",click:function(){return e.importEquipment()}},{disabled:!this.$per("Equipment","e"),text:"导出",icon:"self_export",click:function(){return e.exportEquipment()}}],code:"",name:"",type:"",nameSelect:[],dataSource:[],IsAdvanced:!1,iconShow:"add",organizSelect:[],IsShowImport:!1,base64:"",equipSourse:[],equipType:[],model:"",deparentID:"",source:"",status:"",IsShowDetails:!1,editEquipment:[{field:"eqpimage",fieldName:"图片"},{field:"code",fieldName:"设备编号"},{field:"name",fieldName:"设备名称"},{field:"model",fieldName:"规格型号"},{field:"type",fieldName:"设备类型"},{field:"source",fieldName:"来源"},{field:"departmentName",fieldName:"所在部门"},{field:"usedDepartName",fieldName:"使用部门"},{field:"manufacturer",fieldName:"生产厂商"},{field:"leaseholder",fieldName:"租赁厂商"},{field:"supplier",fieldName:"供应商"},{field:"position",fieldName:"设备位置"},{field:"status",fieldName:"状态"},{field:"abcType",fieldName:"ABC类"},{field:"purchaseDate",fieldName:"购入日期"},{field:"acceptDate",fieldName:"验收日期"},{field:"warrantyPeriod",fieldName:"保修期限"},{field:"startProduceDate",fieldName:"投产日期"},{field:"originalValue",fieldName:"设备原值"},{field:"productionPlace",fieldName:"产地"},{field:"productionNo",fieldName:"出厂编号"},{field:"productionDate",fieldName:"出厂日期"},{field:"fixedAssetNo",fieldName:"固定资产编号"}],equipmentDetail:{},equipStatus:[],companyList:[],supplierList:[],manufacturerList:[],leaseholderList:[],editAssets:{},abcTypeList:[],assetsEditors:[],searchfx:"",editors:[],modal:!1,errorMessage:"",errorStatus:!1,errorHints:"",errorHints1:"",errorHints2:"",error:!1,error1:!1,error2:!1,modal1:!1,modal2:!1,modal3:!1,modal4:!1,forgList:[],equipmentDocumentList:[],selectDocument:[],deleteIndex:"",IsShowCompany:!1,companyInfo:{},cooperateList:[],IsShowMering:!1,equipmentMering:{},initObject:{type:{},usedPart:"",period:"",periodUnit:"",lastCalibrationDate:"",meteringStandardVName:"",meteringStandardVersion:"",meteringStandardVM:"",calibrationReportVName:"",calibrationReportVersion:"",calibrationReportVM:""},cacheMering:{}}},mounted:function(){this.equipment=new d["a"],this._EquipServer=new u["a"],this.init();var e=this;this.$Server.queryAll((new f["a"]).__name,{},{dname:"有无合作"}).then((function(t){e.cooperateList=t.datas})),this.cacheMering=JSON.parse(JSON.stringify(this.initObject))},components:{UploadInput:b["a"],gridTemplate:o["a"],UploadFile:m["a"],contentModal:p["a"],treeCombo:n["a"],treeComboForLastNode:r["a"],fileUploader:l["a"],companyAdd:D["a"],meringEquipmentAdd:I},methods:{addUpload:function(){this.equipmentDocumentList?this.equipmentDocumentList.push({documentViewModel:{}}):this.equipmentDocumentList=[{}]},removeUpload:function(){this.selectDocument.length>0?this.equipmentDocumentList.length>0&&this.equipmentDocumentList.splice(this.deleteIndex,1):v["a"].alert("选择一个需要删除的附件")},getClick:function(e,t){this.selectDocument=[],this.selectDocument.push(e),this.deleteIndex=t},dayFormat:function(e){return e?new Date(e.replace(/-/g,"/")).getDate():""},dateFormat:function(){var e=new Date,t=e.getFullYear(),i=e.getMonth()+1,a=e.getDate();i<10&&(i="0"+i),a<10&&(a="0"+a);var s=t+"-"+i+"-"+a;return s},clearCondition:function(){this.clearSearch(),this.$refs.childGridTemplate.doSearch({})},clearMessage:function(){var e={};this.$refs.childGridTemplate.doSearch(e)},init:function(){var e=this;this.$Server.queryAll((new c["a"]).__name).then((function(t){e.organizSelect=t.datas})),this.$Server.queryAll((new f["a"]).__name,{},{type:"7"}).then((function(t){e.equipSourse=t.datas})),this.$Server.queryAll((new f["a"]).__name,{},{type:"5"}).then((function(t){e.equipStatus=t.datas})),this.$Server.queryAll((new f["a"]).__name,{},{type:"4"}).then((function(t){e.equipType=t.datas})),this.$Server.queryAll((new h["a"]).__name,{},{deleted:"false"}).then((function(t){e.companyList=t.datas,e.supplierList=t.datas.filter((function(e){return e.ctypeName&&e.ctypeName.indexOf("供应商")>-1||void 0==e.ctypeName||null==e.ctypeName})),e.manufacturerList=t.datas.filter((function(e){return e.ctypeName&&e.ctypeName.indexOf("生产厂商")>-1||void 0==e.ctypeName||null==e.ctypeName})),e.leaseholderList=t.datas.filter((function(e){return e.ctypeName&&e.ctypeName.indexOf("租赁厂商")>-1||void 0==e.ctypeName||null==e.ctypeName}))})),this.$Server.queryAll((new f["a"]).__name,{},{dname:"ABC类"}).then((function(t){e.abcTypeList=t.datas})),this.$Server.queryAll((new x["a"]).__name,{},{searchEqpStation:!0}).then((function(t){e.forgList=t.datas})),this.editAssets={purchaseDate:"",abcType:{},acceptDate:"",warrantyPeriod:"",startProduceDate:"",originalValue:""}},editorsReCode:function(e){this.editors=e,this.$refs.childGridTemplate.editors=[],this.assetsEditors=e.filter((function(e){return"purchaseDate"==e.field||"abcType"==e.field||"acceptDate"==e.field||"warrantyPeriod"==e.field||"startProduceDate"==e.field||"originalValue"==e.field||"fixedAssetNo"==e.field}))},beforeEdit:function(e,t){var i=this;this.editAssets=JSON.parse(JSON.stringify(t)),this.equipmentDocumentList=[],this.editAssets.equipmentDocumentList&&this.editAssets.equipmentDocumentList.forEach((function(e){i.equipmentDocumentList.push(e)})),void 0!=t.calibrated&&null!=t.calibrated&&1==t.calibrated&&(this.editAssets.calibrated="1"),void 0!=t.calibrated&&null!=t.calibrated&&0==t.calibrated&&(this.editAssets.calibrated="0");var a=this.editAssets.departmentID;if(this.editAssets.departmentID=[a],this.editAssets.usedDepartmentID=[t.usedDepartmentID],this.editAssets.purchaseDate&&(this.editAssets.purchaseDate=this.editAssets.purchaseDate.substring(0,10)),this.editAssets.startProduceDate&&(this.editAssets.startProduceDate=this.editAssets.startProduceDate.substring(0,10)),this.editAssets.productionDate&&(this.editAssets.productionDate=this.editAssets.productionDate.substring(0,10)),this.editAssets.acceptDate&&(this.editAssets.acceptDate=this.editAssets.acceptDate.substring(0,10)),this.editAssets.position&&(this.editAssets.position=[this.editAssets.position]),this.editAssets.supplier){var s=this.supplierList.find((function(e){return e.id===i.editAssets.supplier}));s&&(this.editAssets.supplier=s)}if(this.editAssets.manufacturer){var l=this.manufacturerList.find((function(e){return e.id===i.editAssets.manufacturer}));l&&(this.editAssets.manufacturer=l)}if(this.editAssets.leaseholder){var n=this.leaseholderList.find((function(e){return e.id===i.editAssets.leaseholder}));n&&(this.editAssets.leaseholder=n)}this.clearError(),this.$refs.meringEquipment.resetFile()},beforeCancel:function(){this.editAssets.departmentID=[],this.editAssets.usedDepartmentID=[],this.$refs.imgInput.$refs.upload.value=""},beforeAdd:function(){this.editAssets={},this.editAssets.departmentID=[],this.editAssets.usedDepartmentID=[],this.editAssets.position=[],this.editAssets.calibrated="0",this.equipmentDocumentList=[],this.$refs.treeCombo.setActiveVaules(),this.$refs.treeCombo1.setActiveVaules(),this.clearError(),this.cacheMering=JSON.parse(JSON.stringify(this.initObject)),this.equipmentMering={},this.$refs.meringEquipment.resetFile()},beforeEditSubmit:function(e){var t=this;if(this.$refs.imgInput.$refs.upload.value="",this.editors.forEach((function(i){e[i.field]=t.editAssets[i.field]})),void 0!=this.editAssets.position&&this.editAssets.position.length>0&&(e.position=this.editAssets.position[0]),this.editAssets.departmentID&&this.editAssets.departmentID.length>0&&(e.departmentID=this.editAssets.departmentID[0]),void 0!=this.editAssets.usedDepartmentID&&this.editAssets.usedDepartmentID.length>0&&(e.usedDepartmentID=this.editAssets.usedDepartmentID[0]),this.editAssets.productionDate){var i=this.dateFormat();1==this.validDate(this.editAssets.productionDate,i)?(this.errorMessage="出厂日期不能大于当前时间",this.errorStatus=!0):(this.errorMessage="",this.errorStatus=!1)}if(this.editAssets.purchaseDate){var a=this.dateFormat();1==this.validDate(this.editAssets.purchaseDate,a)?(this.errorHints="购入日期不能大于当前时间",this.error=!0):this.editAssets.productionDate&&1==this.validDate(this.editAssets.productionDate,this.editAssets.purchaseDate)?(this.errorHints="购入日期需要在出厂日期之后或同一时间",this.error=!0):(this.error=!1,this.errorHints="")}if(this.editAssets.acceptDate){var s=this.dateFormat();1==this.validDate(this.editAssets.acceptDate,s)?(this.errorHints1="验收日期不能大于当前时间",this.error1=!0):this.editAssets.purchaseDate?1==this.validDate(this.editAssets.purchaseDate,this.editAssets.acceptDate)?(this.errorHints1="验收日期需要在购入日期之后或同一时间",this.error1=!0):(this.error1=!1,this.errorHints1=""):this.editAssets.productionDate&&1==this.validDate(this.editAssets.productionDate,this.editAssets.acceptDate)?(this.errorHints="验收日期需要在出厂日期之后或同一时间",this.error1=!0):(this.error1=!1,this.errorHints1="")}this.editAssets.startProduceDate&&(this.editAssets.acceptDate?1==this.validDate(this.editAssets.acceptDate,this.editAssets.startProduceDate)?(this.errorHints2="投产日期需要在验收日期之后或同一时间",this.error2=!0):(this.error2=!1,this.errorHints2=""):this.editAssets.purchaseDate?1==this.validDate(this.editAssets.purchaseDate,this.editAssets.startProduceDate)?(this.errorHints2="投产日期需要在购入日期之后或同一时间",this.error2=!0):(this.error2=!1,this.errorHints2=""):this.editAssets.productionDate&&1==this.validDate(this.editAssets.productionDate,this.editAssets.startProduceDate)?(this.errorHints2="投产日期需要在出厂日期之后或同一时间",this.error2=!0):(this.error2=!1,this.errorHints2="")),this.editAssets.supplier&&(e.supplier=this.editAssets.supplier.id),this.editAssets.manufacturer&&(e.manufacturer=this.editAssets.manufacturer.id),this.editAssets.leaseholder&&(e.leaseholder=this.editAssets.leaseholder.id),e.equipmentDocumentList=this.equipmentDocumentList,""!=this.cacheMering.meteringStandardVName&&""!=this.cacheMering.meteringStandardVName&&void 0!=this.cacheMering.meteringStandardVM&&null!=this.cacheMering.meteringStandardVM&&null!=this.cacheMering.meteringStandardVM.docuFile&&this.cacheMering.meteringStandardVM.length>0&&(this.cacheMering.meteringStandardVM.dname=this.cacheMering.meteringStandardVName+this.cacheMering.meteringStandardVM.dname.substring(this.meteringStandardVM[0].dname.lastIndexOf("."))),this.cacheMering.meteringStandardVM=null==this.cacheMering.meteringStandardVM?"":this.cacheMering.meteringStandardVM,""!=this.cacheMering.calibrationReportVName&&""!=this.cacheMering.calibrationReportVName&&this.cacheMering.calibrationReportVM&&void 0!=this.cacheMering.calibrationReportVM.length&&null!=this.cacheMering.calibrationReportVM&&null!=this.cacheMering.calibrationReportVM.docuFile&&this.cacheMering.calibrationReportVM.docuFile.length>0&&(this.cacheMering.calibrationReportVM.dname=this.cacheMering.calibrationReportVName+this.cacheMering.calibrationReportVM.dname.substring(this.calibrationReportVM.dname.lastIndexOf("."))),this.cacheMering.calibrationReportVM=null==this.cacheMering.calibrationReportVM?"":this.cacheMering.calibrationReportVM,null!=this.editAssets.calibrated&&void 0!=this.editAssets.calibrated&&1==this.editAssets.calibrated&&(e.meteringEquipmentViewModel=JSON.parse(JSON.stringify(this.cacheMering)),this.cacheMering.departmentID&&this.cacheMering.departmentID.length>0&&(e.meteringEquipmentViewModel.departmentID=this.cacheMering.departmentID[0]),this.cacheMering.usedDepartmentID&&this.cacheMering.usedDepartmentID.length>0&&(e.meteringEquipmentViewModel.usedDepartmentID=this.cacheMering.usedDepartmentID[0])),e.calibrated=this.editAssets.calibrated},clearError:function(){this.errorHints="",this.errorHints1="",this.errorHints2="",this.errorMessage=""},clearSearch:function(){this.iconShow="add",this.model="",this.deparentID="",this.source="",this.status="",this.type="",this.code="",this.name="",this.$refs.treeCombo0.clearMessage()},changeMering:function(e){1==e&&(this.IsShowMering=!0,this.$refs.meringEquipment.initialize(),this.equipmentMering=JSON.parse(JSON.stringify(this.cacheMering)),this.editAssets&&(this.equipmentMering.code=this.editAssets.code,this.equipmentMering.name=this.editAssets.name,this.equipmentMering.model=this.editAssets.model,this.equipmentMering.departmentID=this.editAssets.departmentID,this.equipmentMering.usedDepartmentID=this.editAssets.usedDepartmentID))},addRow:function(){1==this.IsAdvanced?(this.IsAdvanced=!1,this.iconShow="add",this.model="",this.deparentID="",this.source="",this.status="",this.type="",this.code="",this.name="",this.$refs.childGridTemplate.doSearch({})):(this.IsAdvanced=!0,this.iconShow="remove_circle")},doSearch:function(){this.$refs.childGridTemplate.doSearch({searchfx:this.searchfx})},Search:function(){var e=[];e={name:this.name,code:this.code,types:this.type,model:this.model,deparentIds:this.deparentID,sources:this.source,statusList:this.status},this.$refs.childGridTemplate.doSearch(e)},importEquipment:function(){this.IsShowImport=!0},exportEquipment:function(){this.$Server.exportFile("Equipment","设备台账"+this.$Utils.getLocalFotmatTime())},modalClosedImport:function(){this.IsShowImport=!1,this.$refs.uploadFile.clearFile()},ComfirmImport:function(){var e=this,t=this.$refs.uploadFile.filename,i={base64:this.base64,fileName:t,fileType:"xls"};null==this.base64||0==this.base64.length?v["a"].alert("请选择导入的文件"):this.$Server.importFile((new d["a"]).__name,i).then((function(t){t.success&&null==t.datas.error?(v["a"].alert("导入成功","success"),e.$refs.uploadFile.clearFile(),e.IsShowImport=!1,e.$refs.childGridTemplate.init({})):v["a"].alert(t.datas.error)}),(function(e){return v["a"].alert(e)}))},getFormData:function(e){var t=this,i=e.get("data");if(i){var a=i.name.substring(i.name.lastIndexOf(".")+1,i.name.length);"xls"!=a&&"xlsx"!=a&&(v["a"].alert("请检查文件是否为Excel文件"),t.$refs.uploadFile.clearFile())}},getFileData:function(){},downloadTemp:function(){var e=document.createElement("a");e.href="/imporTemp/equipment.xls",e.download="设备台账.xls",e.click()},downloadFile:function(e){if(e&&e.newestFilePath){var t=document.createElement("a");t.href=e.newestFilePath,t.download=e.dname+e.newestFileExt,t.click()}},rowDbClick:function(e){this.IsShowDetails=!0,this.equipmentDetail=JSON.parse(JSON.stringify(e)),this.equipmentDetail.purchaseDate&&(this.equipmentDetail.purchaseDate=this.equipmentDetail.purchaseDate.substring(0,10)),this.equipmentDetail.startProduceDate&&(this.equipmentDetail.startProduceDate=this.equipmentDetail.startProduceDate.substring(0,10)),this.equipmentDetail.productionDate&&(this.equipmentDetail.productionDate=this.equipmentDetail.productionDate.substring(0,10)),this.equipmentDetail.acceptDate&&(this.equipmentDetail.acceptDate=this.equipmentDetail.acceptDate.substring(0,10))},modalClosed:function(){this.IsShowDetails=!1},validDate:function(e,t){var i=new Date(e),a=new Date(t);return i>=a},companyAdd:function(){this.resetForm(),this.IsShowCompany=!0,this.companyInfo={},this.companyInfo.hasCooperate=this.cooperateList.find((function(e){return"有"==e.dname})),this.companyInfo.region="",this.$refs.company.beforeAdd(this.companyInfo)},resetForm:function(){this.$refs.company.$refs.formCompanyAdd.reset(),this.$refs.company.$refs.formCompanyAdd.resetValidation()},modalClosedCompany:function(){this.IsShowCompany=!1,this.companyInfo={}},modalComfirmedCompany:function(){var e=this;1==e.$refs.company.validate()&&e.$Server.addOrUpdate("Company",e.companyInfo,!1).then((function(t){t.success&&(e.IsShowCompany=!1,e.$Server.queryAll((new h["a"]).__name,{},{deleted:"false"}).then((function(t){e.companyList=t.datas,e.supplierList=t.datas.filter((function(e){return e.ctypeName.indexOf("供应商")>-1||void 0==e.ctypeName||null==e.ctypeName})),e.manufacturerList=t.datas.filter((function(e){return e.ctypeName.indexOf("生产厂商")>-1||void 0==e.ctypeName||null==e.ctypeName})),e.leaseholderList=t.datas.filter((function(e){return e.ctypeName.indexOf("租赁厂商")>-1||void 0==e.ctypeName||null==e.ctypeName}))})),v["a"].alert("保存成功","success"))}),(function(e){v["a"].alert(e)}))},modalClosedMering:function(){this.IsShowMering=!1,this.$refs.meringEquipment.resetForm(),this.$refs.meringEquipment.resetFile(),this.cacheMering=JSON.parse(JSON.stringify(this.initObject))},modalComfirmedMering:function(){1==this.$refs.meringEquipment.validation()?(this.IsShowMering=!1,this.cacheMering=JSON.parse(JSON.stringify(this.equipmentMering))):v["a"].alert("验证不通过，请重新填写数据")}}},_=N,C=Object($["a"])(_,a,s,!1,null,null,null);t["default"]=C.exports}}]);