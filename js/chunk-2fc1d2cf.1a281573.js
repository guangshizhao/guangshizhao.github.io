(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2fc1d2cf"],{"77e3":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-tabs",{attrs:{"slider-color":"primary",color:"#f5f5f5",id:"selftabs"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[r("v-tab",{key:1},[r("img",{attrs:{src:a("e865")}}),e._v("备件入库 ")]),r("v-tab",{key:2},[r("img",{attrs:{src:a("e865")}}),e._v("备件出库")]),r("v-tab-item",{key:1},[r("sparePartInStorage")],1),r("v-tab-item",{key:2},[r("sparePartOutStorage")],1)],1)],1)},i=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("layContentHeader",{attrs:{title:"",buttons:e.headerBtns}},[a("v-text-field",{staticStyle:{width:"260px"},attrs:{label:"输入出库单编号或出库人","hide-details":"","single-line":"",primary:"",clearable:""},on:{"click:clear":e.clearMessage},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a("v-icon",{on:{click:function(t){return e.doSearch()}}},[e._v("search")])]},proxy:!0}]),model:{value:e.searchfx,callback:function(t){e.searchfx=t},expression:"searchfx"}})],1),a("layContent",[a("dataTable",{ref:"childDataTable",attrs:{headers:e.headers,sort:e.sort,DataSource:e.DataSource,hideOperation:!0,formatFields:e.formatFields,total:e.total},on:{initialize:e.initTable}}),a("contentModal",{attrs:{title:e.title,IsShow:e.IsShow,width:"1100"},on:{modalClosed:function(t){return e.modalClosed()},modalComfirmed:function(t){return e.modalComfirmed()}}},[a("sparePartOutStorageDetail",{ref:"addOrUpdate",attrs:{item:e.detailForUpdate,sparePartsList:e.sparePartsList}})],1)],1)],1)},o=[],s=(a("4634"),a("de90"),a("7300")),c=a("5873"),l=a("ddf2"),d=a("80ea"),u=a("ae0a"),f=a("97a3"),h=a("652a"),p=a("1269"),m=new h["a"],b=function(e){function t(){var e,a;Object(s["a"])(this,t);for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return a=Object(c["a"])(this,(e=Object(l["a"])(t)).call.apply(e,[this].concat(i))),Object(f["a"])(Object(d["a"])(a),"__name","SparePartOutStorage"),Object(f["a"])(Object(d["a"])(a),"outStorageNo",m.charField({require:!0,fieldName:"出库单编号",rules:[function(e){return!!e||"必填项"}]})),Object(f["a"])(Object(d["a"])(a),"outStorageDate",m.dateField({require:!0,fieldName:"出库日期",rules:[function(e){return!!e||"必填项"}],format:function(e){if(e)return e.substring(0,10)}})),Object(f["a"])(Object(d["a"])(a),"outStoragePersonName",m.charField({require:!0,fieldName:"出库人",rules:[function(e){return!!e||"必填项"}]})),Object(f["a"])(Object(d["a"])(a),"source",m.charField({require:!0,fieldName:"来源",rules:[function(e){return!!e||"必填项"}]})),Object(f["a"])(Object(d["a"])(a),"sparePartcode",m.charField({require:!0,fieldName:"备件编号",rules:[function(e){return!!e||"必填项"}]})),Object(f["a"])(Object(d["a"])(a),"sparePartName",m.charField({require:!0,fieldName:"备件名称",rules:[function(e){return!!e||"必填项"}]})),Object(f["a"])(Object(d["a"])(a),"inventory",m.charField({require:!0,fieldName:"库存量",rules:[function(e){return!!e||"必填项"}]})),Object(f["a"])(Object(d["a"])(a),"amount",m.charField({require:!0,fieldName:"出库数量 ",rules:[function(e){return!!e||"必填项"}]})),Object(f["a"])(Object(d["a"])(a),"type",m.charField({require:!0,fieldName:"出库类型",visible:!1,rules:[function(e){return!!e||"必填项"}],format:function(e){if(e)return e.dname}})),Object(f["a"])(Object(d["a"])(a),"description",m.charField({require:!0,fieldName:"备注",rules:[function(e){return!!e||"必填项"}],visible:!1})),a}return Object(u["a"])(t,e),t}(p["a"]),S=a("d5b3"),g=a("8333"),O=a("a2a7"),v=a("f05f"),P=a("681f"),j=a("a7fe"),N=a("53b8"),F=a("6bf2"),y=a.n(F),D=new g["a"](new b),w={name:"SparePartOutStorage",data:function(){var e=this;return{initObject:{id:"",outStorageNo:"",outStorageDate:"",outStoragePerson:"",outStoragePersonName:"",source:"其他",type:{dname:""},sparePartcode:[],sparePartName:[],inventory:[],amount:[],outStorageSparePartList:[]},searchfx:"",sort:!0,total:1,DataSource:[],title:"",IsShow:!1,IsAddOp:!0,detailForUpdate:{},IsShowForSee:!1,titleForSee:"",headerBtns:[{disabled:!this.$per("SparePartsStorage","c"),text:"添加",icon:"self_add",click:function(){return e.tableAdd()}},{disabled:!this.$per("SparePartsStorage","d"),text:"删除",icon:"self_delete",click:function(){return e.tableDelete()}}],outTypeList:[],sparePartsList:[]}},computed:{headers:function(){var e=D.formatGridHeader();return!0===this.sort&&e.unshift({text:"序号",align:"center",sortable:!1}),e},formatFields:function(){return D.getFormatFields()}},components:{contentModal:O["a"],dataTable:v["a"],sparePartOutStorageDetail:N["a"]},created:function(){this.detailForUpdate=JSON.parse(JSON.stringify(this.initObject))},mounted:function(){var e=this;this.$Server.queryAll((new j["a"]).__name,{},{dname:"出库类型"}).then((function(t){e.outTypeList=t.datas})),this.sparePartsInfo()},methods:{sparePartsInfo:function(){var e=this;e.$Server.queryAll("SpareParts",null,{deleted:!1}).then((function(t){e.sparePartsList=t.datas}))},tableAdd:function(){this.resetForm(),this.IsAddOp=!0,this.detailForUpdate=JSON.parse(JSON.stringify(this.initObject)),this.detailForUpdate.outStoragePersonName=window.sessionStorage.getItem("uname"),this.detailForUpdate.outStorageDate=y()(new Date).format("YYYY-MM-DD"),this.detailForUpdate.type=this.outTypeList[2],this.title="添加出库记录",this.IsShow=!0},doSearch:function(){var e=this.$refs.childDataTable.getPagination();1==e.page?this.initTable(e):this.$refs.childDataTable.setPage(1)},clearMessage:function(){this.searchfx="",this.doSearch()},initTable:function(e){var t=this;e&&e.page||(e=this.$refs.childDataTable.getPagination()),t.$Server.queryAll(D.getModelName(),{page:e.page,rowsPerPage:e.rowsPerPage},{searchfx:t.searchfx}).then((function(e){t.$refs.childDataTable.unCheckItems(),t.DataSource=e.datas,t.DataSource.forEach((function(e){var t=[],a=[],r=[],i=[];e&&e.outStorageSparePartList&&e.outStorageSparePartList.forEach((function(e){null!=e.spareCode&&t.push(e.spareCode),null!=e.spareName&&a.push(e.spareName),null!=e.inventory?i.push(e.inventory):i.push(0),null!=e.amount?r.push(e.amount):r.push(0)})),e.sparePartcode=t,e.sparePartName=a,e.amount=r,e.inventory=i})),t.total=e.page.total}),(function(e){}))},modalComfirmed:function(){var e=this;1==e.$refs.addOrUpdate.validate()&&e.$Server.addOrUpdate(D.getModelName(),e.detailForUpdate,!e.IsAddOp).then((function(t){t.success&&(e.IsShow=!1,e.detailForUpdate=JSON.parse(JSON.stringify(e.initObject)),e.initTable(),e.sparePartsInfo(),S["a"].alert("保存成功","success"))}),(function(e){S["a"].alert(e)}))},modalClosed:function(){this.IsShow=!1,this.detailForUpdate=JSON.parse(JSON.stringify(this.initObject))},resetFormValidation:function(){this.$refs.addOrUpdate.$refs.form.resetValidation()},resetForm:function(){this.$refs.addOrUpdate.$refs.form.reset(),this.$refs.addOrUpdate.$refs.form.resetValidation()},cofirmDelete:function(e){var t=this;e.forEach((function(e){e.amount=0,e.inventory=0})),t.$Server.batchDelete(D.getModelName(),e).then((function(){t.initTable()}),(function(e){S["a"].alert(e)}))},tableDelete:function(){var e=this,t=this.$refs.childDataTable.getCheckItems();this.$refs.childDataTable.getCheckItems().length<=0?S["a"].alert("请选中需要删除的项"):P["a"].confirm("确定删除所选备件出库?","提示",500,(function(){e.cofirmDelete(t)}),(function(){}))}}},I=w,$=a("6691"),x=Object($["a"])(I,n,o,!1,null,null,null),T=x.exports,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("layContentHeader",{attrs:{title:"",buttons:e.headerBtns}},[a("v-text-field",{staticStyle:{width:"260px"},attrs:{label:"输入入库单编号或入库人","hide-details":"","single-line":"",primary:"",clearable:""},on:{"click:clear":e.clearMessage},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a("v-icon",{on:{click:function(t){return e.doSearch()}}},[e._v("search")])]},proxy:!0}]),model:{value:e.searchfx,callback:function(t){e.searchfx=t},expression:"searchfx"}})],1),a("layContent",[a("dataTable",{ref:"childDataTable",attrs:{headers:e.headers,sort:e.sort,DataSource:e.DataSource,hideOperation:!0,formatFields:e.formatFields,total:e.total},on:{initialize:e.initTable}}),a("contentModal",{attrs:{title:e.title,IsShow:e.IsShow,width:"1100"},on:{modalClosed:function(t){return e.modalClosed()},modalComfirmed:function(t){return e.modalComfirmed()}}},[a("sparePartInStorageDetail",{ref:"addOrUpdate",attrs:{item:e.detailForUpdate,sparePartsList:e.sparePartsList}})],1)],1)],1)},q=[],k=a("af05"),C=a("0721"),_=new g["a"](new k["a"]),M={name:"sparePartInStorage",data:function(){var e=this;return{initObject:{id:"",inStorageNo:"",inStorageDate:"",inStoragePerson:"",inStoragePersonName:"",source:"其他",type:{dname:""},sparePartcode:[],sparePartName:[],inventory:[],amount:[],rInStorageSparePartViewModels:[]},searchfx:"",sort:!0,total:1,DataSource:[],title:"",IsShow:!1,IsAddOp:!0,detailForUpdate:{},IsShowForSee:!1,titleForSee:"",headerBtns:[{disabled:!this.$per("SparePartsStorage","c"),text:"添加",icon:"self_add",click:function(){return e.tableAdd()}},{disabled:!this.$per("SparePartsStorage","d"),text:"删除",icon:"self_delete",click:function(){return e.tableDelete()}}],inTypeList:[],sparePartsList:[]}},computed:{headers:function(){var e=_.formatGridHeader();return!0===this.sort&&e.unshift({text:"序号",align:"center",sortable:!1}),e},formatFields:function(){return _.getFormatFields()}},components:{contentModal:O["a"],dataTable:v["a"],sparePartInStorageDetail:C["a"]},created:function(){this.detailForUpdate=JSON.parse(JSON.stringify(this.initObject))},mounted:function(){var e=this;this.$Server.queryAll((new j["a"]).__name,{},{dname:"入库类型"}).then((function(t){e.inTypeList=t.datas})),this.sparePartsInfo()},methods:{sparePartsInfo:function(){var e=this;e.$Server.queryAll("SpareParts",null,{deleted:!1}).then((function(t){e.sparePartsList=t.datas}))},tableAdd:function(){this.resetForm(),this.IsAddOp=!0,this.detailForUpdate=JSON.parse(JSON.stringify(this.initObject)),this.detailForUpdate.inStoragePersonName=window.sessionStorage.getItem("uname"),this.detailForUpdate.inStorageDate=y()(new Date).format("YYYY-MM-DD"),this.detailForUpdate.type=this.inTypeList[3],this.title="添加入库记录",this.IsShow=!0},doSearch:function(){var e=this.$refs.childDataTable.getPagination();1==e.page?this.initTable(e):this.$refs.childDataTable.setPage(1)},clearMessage:function(){this.searchfx="",this.doSearch()},initTable:function(e){var t=this;e&&e.page||(e=this.$refs.childDataTable.getPagination()),t.$Server.queryAll(_.getModelName(),{page:e.page,rowsPerPage:e.rowsPerPage},{searchfx:t.searchfx}).then((function(e){t.$refs.childDataTable.unCheckItems(),t.DataSource=e.datas,t.DataSource.forEach((function(e){var t=[],a=[],r=[],i=[];e&&e.rInStorageSparePartViewModels&&e.rInStorageSparePartViewModels.forEach((function(e){null!=e.spareCode&&t.push(e.spareCode),null!=e.spareName&&a.push(e.spareName),null!=e.inventory?i.push(e.inventory):i.push(0),null!=e.amount?r.push(e.amount):r.push(0)})),e.sparePartcode=t,e.sparePartName=a,e.amount=r,e.inventory=i})),t.total=e.page.total}),(function(e){}))},modalComfirmed:function(){var e=this;1==e.$refs.addOrUpdate.validate()&&e.$Server.addOrUpdate(_.getModelName(),e.detailForUpdate,!e.IsAddOp).then((function(t){t.success&&(e.IsShow=!1,e.detailForUpdate=JSON.parse(JSON.stringify(e.initObject)),e.initTable(),e.sparePartsInfo(),S["a"].alert("保存成功","success"))}),(function(e){S["a"].alert(e)}))},modalClosed:function(){this.IsShow=!1,this.detailForUpdate=JSON.parse(JSON.stringify(this.initObject))},resetFormValidation:function(){this.$refs.addOrUpdate.$refs.form.resetValidation()},resetForm:function(){this.$refs.addOrUpdate.$refs.form.reset(),this.$refs.addOrUpdate.$refs.form.resetValidation()},cofirmDelete:function(e){var t=this;e.forEach((function(e){e.amount=0,e.inventory=0})),t.$Server.batchDelete(_.getModelName(),e).then((function(){t.initTable()}),(function(e){S["a"].alert(e)}))},tableDelete:function(){var e=this,t=this.$refs.childDataTable.getCheckItems();this.$refs.childDataTable.getCheckItems().length<=0?S["a"].alert("请选中需要删除的项"):P["a"].confirm("确定删除所选备件入库?","提示",500,(function(){e.cofirmDelete(t)}),(function(){}))}}},A=M,J=Object($["a"])(A,U,q,!1,null,null,null),L=J.exports,E={name:"sparePartStorage",data:function(){return{active:null,text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."}},watch:{},components:{sparePartInStorage:L,sparePartOutStorage:T},mounted:function(){},methods:{init:function(){},next:function(){var e=parseInt(this.active);this.active=e<2?e+1:0}}},V=E,Y=(a("da74"),Object($["a"])(V,r,i,!1,null,"3425d218",null));t["default"]=Y.exports},"8c59":function(e,t,a){},af05:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var r=a("7300"),i=a("5873"),n=a("ddf2"),o=a("80ea"),s=a("ae0a"),c=a("97a3"),l=a("652a"),d=a("1269"),u=new l["a"],f=function(e){function t(){var e,a;Object(r["a"])(this,t);for(var s=arguments.length,l=new Array(s),d=0;d<s;d++)l[d]=arguments[d];return a=Object(i["a"])(this,(e=Object(n["a"])(t)).call.apply(e,[this].concat(l))),Object(c["a"])(Object(o["a"])(a),"__name","SparePartInStorage"),Object(c["a"])(Object(o["a"])(a),"inStorageNo",u.charField({require:!0,fieldName:"入库单编号",rules:[function(e){return!!e||"必填项"}]})),Object(c["a"])(Object(o["a"])(a),"inStorageDate",u.dateField({require:!0,fieldName:"入库日期",rules:[function(e){return!!e||"必填项"}],format:function(e){if(e)return e.substring(0,10)}})),Object(c["a"])(Object(o["a"])(a),"inStoragePersonName",u.charField({require:!0,fieldName:"入库人",rules:[function(e){return!!e||"必填项"}]})),Object(c["a"])(Object(o["a"])(a),"source",u.charField({require:!0,fieldName:"来源",rules:[function(e){return!!e||"必填项"}]})),Object(c["a"])(Object(o["a"])(a),"sparePartcode",u.charField({require:!0,fieldName:"备件编号",rules:[function(e){return!!e||"必填项"}]})),Object(c["a"])(Object(o["a"])(a),"sparePartName",u.charField({require:!0,fieldName:"备件名称",rules:[function(e){return!!e||"必填项"}]})),Object(c["a"])(Object(o["a"])(a),"inventory",u.charField({require:!0,fieldName:"库存量",rules:[function(e){return!!e||"必填项"}]})),Object(c["a"])(Object(o["a"])(a),"amount",u.charField({require:!0,fieldName:"入库数量 ",rules:[function(e){return!!e||"必填项"}]})),Object(c["a"])(Object(o["a"])(a),"type",u.charField({require:!0,visible:!1,fieldName:"入库类型",rules:[function(e){return!!e||"必填项"}],format:function(e){if(e)return e.dname}})),Object(c["a"])(Object(o["a"])(a),"description",u.charField({require:!0,visible:!1,fieldName:"备注",rules:[function(e){return!!e||"必填项"}]})),a}return Object(s["a"])(t,e),t}(d["a"])},da74:function(e,t,a){"use strict";var r=a("8c59"),i=a.n(r);i.a}}]);