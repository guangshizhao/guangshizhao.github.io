(function(e){function t(t){for(var i,n,l=t[0],o=t[1],c=t[2],u=0,d=[];u<l.length;u++)n=l[u],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&d.push(r[n][0]),r[n]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);p&&p(t);while(d.length)d.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],i=!0,n=1;n<a.length;n++){var l=a[n];0!==r[l]&&(i=!1)}i&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var i={},n={app:0},r={app:0},s=[];function l(e){return o.p+"js/"+({}[e]||e)+"."+{"chunk-03453285":"df517bbf","chunk-0aa6530b":"fb49f90f","chunk-0e4feb54":"f1718a15","chunk-0e503371":"001fd62c","chunk-0e511601":"27b223bc","chunk-0e511b9a":"12894c87","chunk-0e6549df":"80ceb9e8","chunk-0e658160":"42938e50","chunk-0e65ce56":"c0c74c52","chunk-0e6640e4":"201a1ca3","chunk-0eefdee8":"91a0f8b4","chunk-13cf8b80":"b10b778a","chunk-17cc8582":"294f06a5","chunk-1eeb1176":"69f186d0","chunk-2d0cc437":"fd7ecca2","chunk-2d21b499":"0b4789bd","chunk-2d21f2a9":"15f0d3ba","chunk-2d21f820":"f039db71","chunk-c8a31db8":"30523217","chunk-78369d26":"6d698d19","chunk-1fcc477e":"6bad73f8","chunk-200ea4ae":"9070a5f0","chunk-26e158eb":"ca3e34fc","chunk-2b1fd67e":"a57ce09d","chunk-2d0a2db3":"c07c286a","chunk-2d0cfea5":"0064dbe6","chunk-2d0d7c47":"1d71d869","chunk-2d217a3f":"8ad2fe92","chunk-2d221807":"968194a0","chunk-2d2253e8":"ae37ab5a","chunk-2fc1d2cf":"1a281573","chunk-33927d0c":"bb55f245","chunk-405f0983":"3d9f5e26","chunk-464658b8":"14d72f42","chunk-4727f340":"1dbfc3a6","chunk-4e351056":"fd2707ba","chunk-55031b22":"af532337","chunk-0cbacb0d":"8cd706e5","chunk-22de65ab":"8b76cde5","chunk-e1722276":"57795f82","chunk-57fb5987":"97f2906c","chunk-58b555dc":"c232a54d","chunk-5dad86e1":"06914cac","chunk-60eefe4f":"706eb401","chunk-6ab08734":"86fb3fe3","chunk-6fdff16b":"2a9cfb49","chunk-74a8262d":"58146941","chunk-7697ea0e":"dcf5dc8f","chunk-7aa0aee5":"c8f40841","chunk-04e686ee":"0785bb74","chunk-01aef11d":"391ba685","chunk-326976a8":"6d1de886","chunk-06d4a917":"92cba437","chunk-0ee9a171":"a901328f","chunk-282e281c":"39039104","chunk-2b098bcb":"b214601b","chunk-2d0b9bb5":"75fcf725","chunk-2d0bd670":"f83b604d","chunk-2d0e5f15":"2247acaf","chunk-2d21b2f9":"5b3f8836","chunk-2d22498d":"6e2949ce","chunk-415329ba":"09a7fd6e","chunk-52dd456d":"2f9a152f","chunk-62db736f":"4e6b5b3f","chunk-8edddaca":"b9e2043c","chunk-7897b7c0":"0838fb57","chunk-be66bcc8":"176f86de","chunk-979cead2":"5e9dc141","chunk-982dc07e":"165f55c3","chunk-9edb8df8":"59e9d27f","chunk-a72f5926":"2460f6a1","chunk-b035ae2c":"9e146755","chunk-b6f792a0":"b0320f89","chunk-dd5b776e":"f528ffb8","chunk-df4fbd8e":"bbeb21f0","chunk-fba88358":"94c1c2a1"}[e]+".js"}function o(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(e){var t=[],a={"chunk-03453285":1,"chunk-0aa6530b":1,"chunk-0eefdee8":1,"chunk-13cf8b80":1,"chunk-17cc8582":1,"chunk-1eeb1176":1,"chunk-c8a31db8":1,"chunk-78369d26":1,"chunk-1fcc477e":1,"chunk-200ea4ae":1,"chunk-26e158eb":1,"chunk-2b1fd67e":1,"chunk-2fc1d2cf":1,"chunk-33927d0c":1,"chunk-405f0983":1,"chunk-464658b8":1,"chunk-4727f340":1,"chunk-4e351056":1,"chunk-55031b22":1,"chunk-0cbacb0d":1,"chunk-22de65ab":1,"chunk-e1722276":1,"chunk-57fb5987":1,"chunk-5dad86e1":1,"chunk-60eefe4f":1,"chunk-6ab08734":1,"chunk-6fdff16b":1,"chunk-7697ea0e":1,"chunk-7aa0aee5":1,"chunk-326976a8":1,"chunk-06d4a917":1,"chunk-0ee9a171":1,"chunk-282e281c":1,"chunk-2b098bcb":1,"chunk-415329ba":1,"chunk-62db736f":1,"chunk-7897b7c0":1,"chunk-979cead2":1,"chunk-982dc07e":1,"chunk-a72f5926":1,"chunk-b035ae2c":1,"chunk-b6f792a0":1,"chunk-dd5b776e":1,"chunk-fba88358":1};n[e]?t.push(n[e]):0!==n[e]&&a[e]&&t.push(n[e]=new Promise((function(t,a){for(var i="css/"+({}[e]||e)+"."+{"chunk-03453285":"034da403","chunk-0aa6530b":"29fb6d6b","chunk-0e4feb54":"31d6cfe0","chunk-0e503371":"31d6cfe0","chunk-0e511601":"31d6cfe0","chunk-0e511b9a":"31d6cfe0","chunk-0e6549df":"31d6cfe0","chunk-0e658160":"31d6cfe0","chunk-0e65ce56":"31d6cfe0","chunk-0e6640e4":"31d6cfe0","chunk-0eefdee8":"26105c92","chunk-13cf8b80":"a2827ffc","chunk-17cc8582":"fa671a26","chunk-1eeb1176":"e4073ba5","chunk-2d0cc437":"31d6cfe0","chunk-2d21b499":"31d6cfe0","chunk-2d21f2a9":"31d6cfe0","chunk-2d21f820":"31d6cfe0","chunk-c8a31db8":"a664ce97","chunk-78369d26":"50a879f2","chunk-1fcc477e":"7e1bffdb","chunk-200ea4ae":"0a66389f","chunk-26e158eb":"c1b03f63","chunk-2b1fd67e":"8633253f","chunk-2d0a2db3":"31d6cfe0","chunk-2d0cfea5":"31d6cfe0","chunk-2d0d7c47":"31d6cfe0","chunk-2d217a3f":"31d6cfe0","chunk-2d221807":"31d6cfe0","chunk-2d2253e8":"31d6cfe0","chunk-2fc1d2cf":"4f05fb81","chunk-33927d0c":"e6b7027e","chunk-405f0983":"70f5a711","chunk-464658b8":"fea7668a","chunk-4727f340":"7db8b5c3","chunk-4e351056":"032f0917","chunk-55031b22":"6d894868","chunk-0cbacb0d":"173e2854","chunk-22de65ab":"e9b1ae69","chunk-e1722276":"e523e36f","chunk-57fb5987":"a391e989","chunk-58b555dc":"31d6cfe0","chunk-5dad86e1":"fc2335eb","chunk-60eefe4f":"9f71c96d","chunk-6ab08734":"e5137917","chunk-6fdff16b":"b109e98a","chunk-74a8262d":"31d6cfe0","chunk-7697ea0e":"3099a829","chunk-7aa0aee5":"30bad7e6","chunk-04e686ee":"31d6cfe0","chunk-01aef11d":"31d6cfe0","chunk-326976a8":"f3e40ff2","chunk-06d4a917":"436510a7","chunk-0ee9a171":"bb1adfea","chunk-282e281c":"e5f04841","chunk-2b098bcb":"30c3c974","chunk-2d0b9bb5":"31d6cfe0","chunk-2d0bd670":"31d6cfe0","chunk-2d0e5f15":"31d6cfe0","chunk-2d21b2f9":"31d6cfe0","chunk-2d22498d":"31d6cfe0","chunk-415329ba":"24b36516","chunk-52dd456d":"31d6cfe0","chunk-62db736f":"b586f4d9","chunk-8edddaca":"31d6cfe0","chunk-7897b7c0":"b199174c","chunk-be66bcc8":"31d6cfe0","chunk-979cead2":"c6800e59","chunk-982dc07e":"b9f6b92e","chunk-9edb8df8":"31d6cfe0","chunk-a72f5926":"b2e146f3","chunk-b035ae2c":"39b8fd27","chunk-b6f792a0":"ee9ba515","chunk-dd5b776e":"5220e7f0","chunk-df4fbd8e":"31d6cfe0","chunk-fba88358":"416e2ec2"}[e]+".css",r=o.p+i,s=document.getElementsByTagName("link"),l=0;l<s.length;l++){var c=s[l],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===i||u===r))return t()}var d=document.getElementsByTagName("style");for(l=0;l<d.length;l++){c=d[l],u=c.getAttribute("data-href");if(u===i||u===r)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var i=t&&t.target&&t.target.src||r,s=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=i,delete n[e],p.parentNode.removeChild(p),a(s)},p.href=r;var m=document.getElementsByTagName("head")[0];m.appendChild(p)})).then((function(){n[e]=0})));var i=r[e];if(0!==i)if(i)t.push(i[2]);else{var s=new Promise((function(t,a){i=r[e]=[t,a]}));t.push(i[2]=s);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,o.nc&&u.setAttribute("nonce",o.nc),u.src=l(e);var d=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(p);var a=r[e];if(0!==a){if(a){var i=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+i+": "+n+")",d.name="ChunkLoadError",d.type=i,d.request=n,a[1](d)}r[e]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},o.m=e,o.c=i,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(a,i,function(t){return e[t]}.bind(null,i));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var p=u;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"01c9":function(e,t,a){"use strict";var i=a("7b9d"),n=a.n(i);n.a},"0446":function(e,t,a){"use strict";var i=a("cf9e"),n=a.n(i);n.a},"0721":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs4:"",md4:""}},[a("v-text-field",{attrs:{rules:[function(e){return!e||/^[\w|-]+$/.test(e)||"只能是数字,字母,下划线"}],label:"入库单编号"},model:{value:e.item.inStorageNo,callback:function(t){e.$set(e.item,"inStorageNo",t)},expression:"item.inStorageNo"}})],1),a("v-flex",{attrs:{xs4:""}},[a("datePicker",{attrs:{label:"入库日期",required:!0,rules:[function(e){return e&&""!=e||"必填项"},function(e){return new Date>new Date(e)||"入库日期不能大于当前日期"}]},model:{value:e.item.inStorageDate,callback:function(t){e.$set(e.item,"inStorageDate",t)},expression:"item.inStorageDate"}})],1),a("v-flex",{attrs:{xs4:"",md4:""}},[a("v-text-field",{attrs:{label:"入库人:",required:"",disabled:"",rules:[e.rules.required]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                入库人 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.item.inStoragePersonName,callback:function(t){e.$set(e.item,"inStoragePersonName",t)},expression:"item.inStoragePersonName"}})],1),a("v-flex",{attrs:{xs4:"",md4:""}},[a("v-select",{attrs:{items:e.inTypeList,"item-text":"dname","return-object":"",rules:[e.rules.required],disabled:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                入库类型 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.item.type,callback:function(t){e.$set(e.item,"type",t)},expression:"item.type"}})],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:3!=e.item.type.dvalue,expression:"item.type.dvalue!=3"}],attrs:{xs4:"",md4:""}},[a("v-text-field",{attrs:{disabled:"",label:"来源"},model:{value:e.item.source,callback:function(t){e.$set(e.item,"source",t)},expression:"item.source"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"备注"},model:{value:e.item.description,callback:function(t){e.$set(e.item,"description",t)},expression:"item.description"}})],1)],1)],1)],1),a("div",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-form",{ref:"formAdd",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-layout",{attrs:{row:""}},[a("p",{staticStyle:{"font-size":"16px","padding-left":"16px"}},[e._v("入库明细")]),a("div",[a("v-icon",{on:{click:e.addShowSparePart}},[e._v("add")]),a("v-icon",{on:{click:e.detailedTableDelete}},[e._v("remove")])],1)]),a("v-layout",{directives:[{name:"show",rawName:"v-show",value:e.addShowSpareParts||""!=e.detailedAddItem.id&&""!=e.detailedAddItem,expression:"addShowSpareParts || (detailedAddItem.id!=''&&detailedAddItem !='')"}],staticStyle:{"padding-top":"20px"},attrs:{"align-center":"",row:"",wrap:""}},[a("v-flex",{attrs:{xs3:"",md3:""}},[a("v-combobox",{attrs:{items:e.sparePartsList,"item-text":"codeName",rules:[e.rules.required],"item-value":"id"},on:{input:e.selectSpareParts},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                备件名称"),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.selectDetailedEditor.spareObj,callback:function(t){e.$set(e.selectDetailedEditor,"spareObj",t)},expression:"selectDetailedEditor.spareObj"}})],1),a("v-flex",{attrs:{xs3:"",md3:""}},[a("v-text-field",{attrs:{label:"规格型号",disabled:e.isCannotEdit},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                规格型号\n              ")]},proxy:!0}]),model:{value:e.selectDetailedEditor.model,callback:function(t){e.$set(e.selectDetailedEditor,"model",t)},expression:"selectDetailedEditor.model"}})],1),a("v-flex",{attrs:{xs3:"",md3:""}},[a("v-text-field",{attrs:{label:"库存量",disabled:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                库存量\n              ")]},proxy:!0}]),model:{value:e.selectDetailedEditor.inventory,callback:function(t){e.$set(e.selectDetailedEditor,"inventory",t)},expression:"selectDetailedEditor.inventory"}})],1),a("v-flex",{attrs:{xs3:"",md3:""}},[a("v-text-field",{attrs:{label:"申请数量",disabled:3!=e.item.type.dvalue},model:{value:e.selectDetailedEditor.applyAmount,callback:function(t){e.$set(e.selectDetailedEditor,"applyAmount",t)},expression:"selectDetailedEditor.applyAmount"}})],1),a("v-flex",{attrs:{xs4:"",md4:""}},[a("v-select",{attrs:{items:e.storageLocationList,"item-text":"sname",rules:[e.rules.required],"return-object":""},on:{change:e.changeStorageLocation},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                入库位置"),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.selectDetailedEditor.storageLocation,callback:function(t){e.$set(e.selectDetailedEditor,"storageLocation",t)},expression:"selectDetailedEditor.storageLocation"}})],1),a("v-flex",{attrs:{xs3:"",md3:""}},[a("v-text-field",{attrs:{label:"入库数量",type:"number",rules:[function(e){return/^(1|[1-9][0-9]*)$/.test(e)||"只能是正整数"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                入库数量 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.selectDetailedEditor.amount,callback:function(t){e.$set(e.selectDetailedEditor,"amount",t)},expression:"selectDetailedEditor.amount"}})],1),a("v-flex",{attrs:{xs1:"",md1:""}},[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.updateSparePartInfo}},[e._v("添加")])],1)],1)],1),a("localDataTable",{ref:"detailedDataTable",attrs:{headers:e.addHeaders,hideHeaders:!1,sort:!0,items:e.item.rInStorageSparePartViewModels,allowActive:!0,hideOperation:!0},on:{rowDbClick:e.rowDbClick}})],1)],1)],1)},n=[],r=(a("7cfd"),a("0b34"),a("ed8b"),a("4634"),a("d5b3")),s=a("a7fe"),l=a("681f"),o=a("f855"),c=a("1d53"),u={name:"sparePartInStorageDetail",props:{item:Object,sparePartsList:Array,isCannotEdit:{default:!1,type:Boolean}},data:function(){return{valid:!0,rules:{required:function(e){return!!e||"必填项"}},addHeaders:[{text:"序号",value:"",align:"center",sortable:!1},{text:"备件编号",value:"spareCode",align:"center",sortable:!1},{text:"备件名称",value:"spareName",align:"center",sortable:!1},{text:"规格型号",value:"model",align:"center",sortable:!1},{text:"库存量",value:"inventory",align:"center",sortable:!1},{text:"申请数量",value:"applyAmount",align:"center",sortable:!1},{text:"入库位置",value:"storageLocationName",align:"center",sortable:!1},{text:"入库数量",value:"amount",align:"center",sortable:!1}],inTypeList:[],sourceList:[],storageLocationList:[],storageLocationList2:[],equipmentModelList:[],selectDetailedEditor:{spareObj:{},inventory:null},detailedAddItem:{id:""},addShowSpareParts:!1,tableId:1}},components:{localDataTable:o["a"],datePicker:c["a"]},computed:{},mounted:function(){this.init()},methods:{init:function(){var e=this;this.$Server.queryAll((new s["a"]).__name,{},{dname:"入库类型"}).then((function(t){e.inTypeList=t.datas})),this.$Server.queryAll("Storagelocation").then((function(t){e.storageLocationList=t.datas,e.storageLocationList2=t.datas}))},validate:function(){return 1==this.$refs.form.validate()&&(this.item.amount=0,this.item.inventory=0,this.item.inStoragePerson=window.sessionStorage.getItem("userId"),this.item.rInStorageSparePartViewModels&&this.item.rInStorageSparePartViewModels.length>0?(this.item.rInStorageSparePartViewModels.forEach((function(e){if(void 0==e.storageLocationID||null==e.storageLocationID||0==e.storageLocationID.length)return r["a"].alert("请填写入库位置"),!1})),!0):(r["a"].alert("请填写入库明细"),!1))},addShowSparePart:function(){this.selectDetailedEditor={},this.$refs.formAdd.resetValidation(),this.addShowSpareParts=!0},detailedTableDelete:function(){var e=this,t=this.$refs.detailedDataTable.getCheckItems();this.$refs.detailedDataTable.getCheckItems().length<=0?r["a"].alert("请选中需要删除的数据"):l["a"].confirm("确定删除所选备件数据?","提示",500,(function(){t.forEach((function(t){e.item.rInStorageSparePartViewModels.splice(t,1)}))}),(function(){}))},rowDbClick:function(e){var t=this;this.$refs.formAdd.resetValidation(),0!==Object.keys(e).length?(t.detailedAddItem=JSON.parse(JSON.stringify(e)),t.selectDetailedEditor=JSON.parse(JSON.stringify(e))):(this.detailedAddItem=[],t.selectDetailedEditor={})},changeStorageLocation:function(){this.selectDetailedEditor.storageLocationName=this.selectDetailedEditor.storageLocation.sname,this.selectDetailedEditor.storageLocationID=this.selectDetailedEditor.storageLocation.id},updateSparePartInfo:function(){var e=this;if(1==this.$refs.formAdd.validate()){var t=this.item.rInStorageSparePartViewModels.filter((function(t){return e.selectDetailedEditor.sparePartsID==t.sparePartsID&&e.selectDetailedEditor.storageLocationID==t.storageLocationID})).length;if(this.addShowSpareParts&&0==t){this.selectDetailedEditor.id=this.tableId++;var a=JSON.parse(JSON.stringify(this.selectDetailedEditor));this.item.rInStorageSparePartViewModels.push(a)}else{this.detailedAddItem=JSON.parse(JSON.stringify(this.selectDetailedEditor));var i=this.item.rInStorageSparePartViewModels.findIndex((function(t){return e.detailedAddItem.sparePartsID==t.sparePartsID&&e.detailedAddItem.storageLocationID==t.storageLocationID}));this.item.rInStorageSparePartViewModels.splice(i,1,this.detailedAddItem)}this.addShowSpareParts=!1,this.detailedAddItem={id:""},this.selectDetailedEditor={}}},selectSpareParts:function(){var e=this,t=this.sparePartsList.filter((function(t){return e.selectDetailedEditor.spareObj.codeName==t.codeName}));t.length>0?(this.selectDetailedEditor.spareCode=void 0==t[0].code?"":t[0].code,this.selectDetailedEditor.spareName=t[0].name,this.selectDetailedEditor.model=t[0].model,this.selectDetailedEditor.inventory=t[0].inventory,this.selectDetailedEditor.sparePartsID=t[0].id,this.selectDetailedEditor.applyAmount=t[0].applyAmount):(this.selectDetailedEditor.spareCode="",this.selectDetailedEditor.spareName=this.selectDetailedEditor.spareObj,this.selectDetailedEditor.inventory=0,this.selectDetailedEditor.sparePartsID="")}}},d=u,p=a("6691"),m=Object(p["a"])(d,i,n,!1,null,"09c09f19",null);t["a"]=m.exports},"0768":function(e,t,a){"use strict";var i=a("4bb0"),n=a.n(i);n.a},"07c5":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ko-toolbar layHeader",on:{click:function(e){e.stopPropagation()}}},[i("span",{staticClass:"layHeaderTitle",style:{"font-size":e.fontsize,opacity:e.opacity}},[e.title?i("img",{attrs:{src:a("e865")}}):e._e(),e._v(e._s(e.title))]),i("span",{staticClass:"ko-toolbar-item text-xs-right",staticStyle:{margin:"10px 0px 0px 0px"}},[e._l(e.buttons,(function(t,a){return i("span",{key:a,staticClass:"mainbtnsgroup"},[i("v-btn",{key:a,class:e.getLastClass(a,e.buttons.length),attrs:{flat:"",small:"",disabled:t.disabled},on:{click:t.click}},[i("v-icon",{class:t.icon,attrs:{center:"",default:"",small:""}}),e._v(e._s(t.text)+"\n      ")],1),e.buttons.length>a+1?i("span",{staticClass:"line"}):e._e()],1)})),e.buttons&&e.buttons.length>0?i("span",{staticClass:"btnsgroup"},[i("v-menu",{attrs:{"open-on-hover":"",bottom:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[i("v-btn",e._g({attrs:{flat:"",small:""}},a),[i("v-icon",{staticClass:"self_execute",attrs:{center:"",default:"",small:""}}),e._v("操作\n          ")],1)]}}],null,!1,3919890941)},[i("v-list",e._l(e.buttons,(function(t,a){return i("v-list-tile",{key:a,attrs:{disabled:t.disabled},on:{click:t.click}},[i("v-list-tile-title",[i("v-icon",{class:t.icon,attrs:{center:"",default:"",small:""}}),i("span",{staticStyle:{"font-size":"13px"}},[e._v(e._s(t.text))])],1)],1)})),1)],1)],1):e._e(),i("span",{staticClass:"rightgroup"},[e._t("default")],2)],2)])},n=[],r={data:function(){return{searchValue:""}},methods:{getLastClass:function(e,t){var a=t==e+1,i={};return i["lastbtn"]=a,i["mb-2"]=!0,i}},props:{title:{type:String},buttons:{type:Array},allowSearch:{type:Boolean,default:!1},searchLabel:{type:String,default:"搜索"},fontsize:{type:String,default:"20px"},opacity:{default:1}},watch:{searchValue:{handler:function(e){this.$emit("doSearch",e)}}}},s=r,l=(a("905a"),a("6691")),o=Object(l["a"])(s,i,n,!1,null,"e277e378",null);t["a"]=o.exports},"0909":function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=a("4ff8"),p=new c["a"],m=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","Position"),Object(o["a"])(Object(s["a"])(a),"name",p.charField({require:!0,fieldName:"岗位名称",visible:!0,rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"description",p.charField({require:!1,fieldName:"岗位描述",visible:!0})),Object(o["a"])(Object(s["a"])(a),"fpname",p.charField({require:!1,fieldName:"直属上级",visible:!0,editable:!1})),Object(o["a"])(Object(s["a"])(a),"posiCode",p.charField({require:!1,fieldName:"岗位编码",visible:!1,editable:!1})),Object(o["a"])(Object(s["a"])(a),"orgId",p.charField({require:!1,fieldName:"组织架构",visible:!1,editable:!1})),Object(o["a"])(Object(s["a"])(a),"skills",p.manyToManyField(d["a"],{require:!1,fieldName:"技能",bindSource:{text:"sname",value:"id",parms:{}},colspan:"md12"})),Object(o["a"])(Object(s["a"])(a),"positionSkillList",p.charField({require:!1,editable:!1,visible:!1})),Object(o["a"])(Object(s["a"])(a),"positionSkill",p.charField({require:!0,fieldName:"关联技能",editable:!1})),a}return Object(l["a"])(t,e),t}(u["a"])},"0988":function(e,t,a){"use strict";var i=a("ce16"),n=a.n(i);n.a},"0b43":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-menu",{attrs:{"offset-overflow":"","full-width":"",disabled:e.disabled,"close-on-content-click":!1},model:{value:e.showMenu,callback:function(t){e.showMenu=t},expression:"showMenu"}},[a("v-text-field",{attrs:{slot:"activator",label:e.label,"append-icon":"arrow_drop_down",value:e.textValueStr,disabled:e.disabled,clearable:"",readonly:"",rules:e.getRules(e.requireVaild)},on:{"click:clear":function(t){return e.clearfield()}},slot:"activator",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n        "+e._s(e.label)+" "),e.requireVaild?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]},proxy:!0}])}),a("v-list",[a("v-text-field",{staticStyle:{width:"97%",margin:"0px auto 12px auto"},attrs:{label:"查询","hide-details":"","single-line":"",primary:"",clearable:"","append-icon":"fa-search"},on:{"click:clear":e.clearMessage,"click:append":e.doSearch},model:{value:e.searchfx,callback:function(t){e.searchfx=t},expression:"searchfx"}}),a("treeView",{ref:"childTreeView",attrs:{Source:e.searchSource,MultipleSelect:e.MultipleSelect,independentCheck:e.independentCheck,independentSingleCheck:e.independentSingleCheck,IsTree:e.IsTree},on:{SelectChanged:e.selectChanged}})],1)],1)},n=[],r=(a("bada"),a("4634"),a("8062"),a("fafd"),a("a9b1"),a("7cfd"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"selftreeview",staticStyle:{position:"relative","overflow-x":"hidden","max-height":"250px"}},[a("v-treeview",{class:e.ShowLines?"showTreeLine":"",attrs:{active:e.activeValue,items:e.treeSource,activatable:!e.independentCheck&&!e.MultipleSelect,"selected-color":"primary","item-key":"id","active-class":e.MultipleSelect?"v-treeview-node--active":"treeActiveItem",hoverable:"",open:e.parentIds,"open-on-click":"",selectable:e.MultipleSelect,transition:""},on:{"update:active":function(t){e.activeValue=t}},scopedSlots:e._u([e.independentCheck?{key:"prepend",fn:function(t){var i=t.item;t.open;return[a("v-checkbox",{attrs:{label:i.name},on:{change:function(t){return e.checkChang(i.id)}},model:{value:e.indChecks[i.id],callback:function(t){e.$set(e.indChecks,i.id,t)},expression:"indChecks[item.id]"}})]}}:null,e.independentCheck?{key:"label",fn:function(e){e.item,e.open}}:{key:"prepend",fn:function(e){e.item,e.open}}],null,!0),model:{value:e.treeValues,callback:function(t){e.treeValues=t},expression:"treeValues"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.operationEnable,expression:"!operationEnable"}],staticStyle:{position:"absolute",left:"0px",top:"0px",width:"1000px",height:"1000px","z-index":"100","background-color":"#000",opacity:"0.2"}})],1)}),s=[],l=a("97a3"),o={name:"treeViewForLastNode",data:function(){return{treeValues:[],activeValue:[],operationEnable:!0,parentIds:[],indChecks:{},disableCommit:!1}},watch:{activeValue:{handler:function(e){this.CommitChang()},deep:!0},treeValues:{handler:function(e){this.CommitChang()},deep:!0},Source:{handler:function(e){this.CommitChang()},deep:!0}},computed:{treeSource:function(){this.parentIds=[];var e=this.toTree(this.Source,"-1");if(1==this.IsTree){var t=[];return e&&e.length>0?(e.forEach((function(e){t=t.concat(e.children)})),t):e}return e}},methods:{getSelect:function(){return this.MultipleSelect?this.treeValues:this.activeValue},checkChang:function(e){this.independentSingleCheck&&(this.indChecks=Object(l["a"])({},e,this.indChecks[e])),this.CommitChang()},setActiveVaules:function(){this.activeValue=[]},clearfield:function(){this.independentCheck?this.indChecks=[]:this.MultipleSelect?this.treeValues=[]:this.activeValue=[],this.$emit("SelectChanged",[])},clickDisable:function(){this.operationEnable=!1},clickEnable:function(){this.operationEnable=!0},CommitChang:function(){if(this.independentCheck){var e=[];for(var t in this.indChecks)this.indChecks[t]&&e.push(t);this.$emit("SelectChanged",e)}else this.MultipleSelect?this.$emit("SelectChanged",this.treeValues):this.$emit("SelectChanged",this.activeValue)},setSelectItems:function(e){var t=this;this.indChecks={},Array.isArray(e)&&e&&e.length>0&&(this.independentCheck?e.forEach((function(e){t.$set(t.indChecks,e,!0)})):this.MultipleSelect?this.treeValues=e:this.activeValue=e)},toTree:function(e,t){if(e&&e.length){for(var a,i=this,n=[],r=0;r<e.length;r++)if(e[r].parentId==t){var s=Object.assign({},e[r]);a=i.toTree(e,e[r].id),a.length>0&&(s.children=a),n.push(s)}return n}}},props:["Source","MultipleSelect","ShowLines","independentCheck","independentSingleCheck","IsTree"]},c=o,u=(a("10a9"),a("6691")),d=Object(u["a"])(c,r,s,!1,null,null,null),p=d.exports,m=a("d5b3"),f={name:"treeComboForLastNode",data:function(){return{showMenu:!1,treeValues:[],activeValue:[],selectedItem:[],IsShow:!1,textValueStr:"",requireVaild:"",searchfx:"",searchSource:[]}},components:{treeView:p},watch:{value:{handler:function(e,t){void 0!=e&&(this.textValueStr=this.getTextValueStr(e),this.$refs.childTreeView.setSelectItems(e))}},Source:{handler:function(e){this.searchSource=e},immediate:!0}},computed:{},mounted:function(){this.requireVaild=this.require},methods:{familyTree:function(e,t){var a=[],i=function t(i,n){for(var r=0;r<i.length;r++){var s=i[r];if(s.id==n){a.push(s),t(e,s.parentId);break}s.children&&t(s.children,n)}};return i(e,t),a},clearMessage:function(){var e=this;e.searchfx="",e.searchSource=e.Source},doSearch:function(){var e=this;if(e.searchfx.length>0){for(var t=[],a=0;a<e.Source.length;a++){var i=[];e.Source[a].name.indexOf(e.searchfx)>-1&&(i=e.familyTree(e.Source,e.Source[a].id),t=t.concat(t,i))}this.searchSource=Array.from(new Set(t))}else e.searchSource=e.Source},getRules:function(e){return e?[function(e){return e&&""!=e||"必填项"}]:void 0},clearfield:function(){this.$refs.childTreeView.clearfield(),this.$emit("cleared")},getTextValueStr:function(e){var t=this;Array.isArray(e)||(e=[e]);var a=this;if(e&&e.length){var i=e.map((function(e){if(!e)return"";var i={};if(i=1==t.IsTree?t.Source.find((function(t){return t.id==e&&"-1"!=t.parentId})):t.Source.find((function(t){return t.id==e})),i&&i.name)return i.name;a.$Console.error("未找到已保存的关联id："+e)}));return i.join("，")}},selectChanged:function(e){if(e&&e.length>0){var t=this.Source.find((function(t){return t.id==e[0]}));t&&t.orgType&&(7==t.orgType.dvalue||6==t.orgType.dvalue)?(this.textValueStr=this.getTextValueStr(e),this.$emit("input",e)):m["a"].alert("只能选择工位或者库位！")}else this.textValueStr=this.getTextValueStr(e),this.$emit("input",e)},setActiveVaules:function(){this.clearMessage(),this.$refs.childTreeView.setActiveVaules(),this.$refs.childTreeView.clearfield()}},props:["label","Source","MultipleSelect","independentCheck","value","independentSingleCheck","require","disabled","IsTree"]},v=f,h=Object(u["a"])(v,i,n,!1,null,null,null);t["a"]=h.exports},"0c04":function(e,t,a){},"0cbd":function(e,t,a){},"0d46":function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=a("a7fe"),p=(a("d9f7"),new c["a"]),m=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","SpRepairTask"),Object(o["a"])(Object(s["a"])(a),"repairCode",p.charField({require:!0,fieldName:"送修单编号",colspan:"md4",rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"sparePartsCode",p.charField({require:!0,fieldName:"备件编号"})),Object(o["a"])(Object(s["a"])(a),"sparePartsName",p.charField({require:!0,fieldName:"备件名称"})),Object(o["a"])(Object(s["a"])(a),"storageLocationName",p.charField({require:!0,fieldName:"备件位置"})),Object(o["a"])(Object(s["a"])(a),"receiveCount",p.charField({require:!0,fieldName:"送修数量"})),Object(o["a"])(Object(s["a"])(a),"repairType",p.comboBoxField(d["a"],{require:!1,fieldName:"维修类型",editable:!1,format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"reason",p.charField({require:!0,fieldName:"送修原因",visible:!0})),Object(o["a"])(Object(s["a"])(a),"repairDate",p.dateField({require:!0,fieldName:"送修日期",format:function(e){if(e)return e.substring(0,10)}})),Object(o["a"])(Object(s["a"])(a),"repairUser",p.charField({editable:!1,fieldName:"送修人",visible:!1})),Object(o["a"])(Object(s["a"])(a),"repairUserName",p.charField({editable:!1,fieldName:"申请人"})),Object(o["a"])(Object(s["a"])(a),"status",p.comboBoxField(d["a"],{require:!1,fieldName:"状态",editable:!1,visible:!1,format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"statusName",p.charField({require:!1,editable:!1,fieldName:"状态"})),a}return Object(l["a"])(t,e),t}(u["a"])},"0e3a":function(e,t,a){"use strict";var i=a("6e6d"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:"","max-width":e.width},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"primary"},[a("span",{staticClass:"headline",staticStyle:{color:"#fff"}},[e._v(e._s(e.title))])]),a("v-card-text",[e._v(e._s(e.content))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary darken-1",flat:""},on:{click:function(t){return e.confirmEvent()}}},[e._v("确定")]),a("v-btn",{attrs:{color:"primary darken-1",flat:""},on:{click:function(t){return e.cancelEvent()}}},[e._v("取消")])],1)],1)],1)},r=[],s={name:"Confirm",data:function(){return{dialog:!1,width:"",title:"",content:"",confirm:null,cancel:null}},mounted:function(){},methods:{confirmEvent:function(){this.dialog=!1,this.confirm()},cancelEvent:function(){this.dialog=!1,this.cancel()}}},l=s,o=a("6691"),c=Object(o["a"])(l,n,r,!1,null,null,null),u=c.exports,d=i["default"].extend(u),p=null;u.confirm=function(e,t,a,n,r){var s={content:e,title:t,width:a||600,confirm:n,cancel:r};null==p?(p=new d({data:s}).$mount(),document.body.appendChild(p.$el),i["default"].nextTick((function(){p.dialog=!0}))):i["default"].nextTick((function(){p.content=s.content,p.title=s.title,p.width=s.width,p.confirm=s.confirm,p.cancel=s.cancel,p.dialog=!0}))};t["a"]=u},"0fef":function(e,t,a){},1:function(e,t){},"10a9":function(e,t,a){"use strict";var i=a("c339"),n=a.n(i);n.a},1269:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var i=a("7300"),n=a("97a3"),r=a("652a"),s=new r["a"],l=function e(){Object(i["a"])(this,e),Object(n["a"])(this,"id",s.charField({require:!0,fieldName:"id",editable:!1,visible:!1})),Object(n["a"])(this,"createTime",s.charField({require:!0,fieldName:"创建时间",editable:!1,visible:!1})),Object(n["a"])(this,"updateTime",s.charField({require:!0,fieldName:"更新时间",editable:!1,visible:!1})),Object(n["a"])(this,"creator",s.charField({require:!0,fieldName:"创建人",editable:!1,visible:!1})),Object(n["a"])(this,"modifier",s.charField({require:!0,fieldName:"修改人",editable:!1,visible:!1}))}},"15ad":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"formCompanyAdd",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs4:"",md4:""}},[a("v-text-field",{attrs:{label:"单位编号:"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                            单位编号:\n                        ")]},proxy:!0}]),model:{value:e.companyInfo.comCode,callback:function(t){e.$set(e.companyInfo,"comCode",t)},expression:"companyInfo.comCode"}})],1),a("v-flex",{attrs:{xs4:"",md4:""}},[a("v-text-field",{attrs:{label:"单位名称:",rules:[function(e){return!!e||"必填项"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                            单位名称:"),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.companyInfo.cname,callback:function(t){e.$set(e.companyInfo,"cname",t)},expression:"companyInfo.cname"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-select",{attrs:{label:"单位类型",multiple:"","single-line":"",clearable:"","item-text":"dname","item-value":"dvalue",items:e.typeList},model:{value:e.companyInfo.ctypeList,callback:function(t){e.$set(e.companyInfo,"ctypeList",t)},expression:"companyInfo.ctypeList"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-select",{attrs:{label:"行业","return-object":"","item-text":"dname",items:e.industryList,clearable:""},model:{value:e.companyInfo.industry,callback:function(t){e.$set(e.companyInfo,"industry",t)},expression:"companyInfo.industry"}})],1),a("v-flex",{attrs:{xs4:""}},[a("treeView",{ref:"treeView",attrs:{independentCheck:!1,Source:e.regionList,MultipleSelect:!1,label:"区域",independentSingleCheck:!0,IsTree:!0,"return-object":""},model:{value:e.companyInfo.region,callback:function(t){e.$set(e.companyInfo,"region",t)},expression:"companyInfo.region"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"地址"},model:{value:e.companyInfo.address,callback:function(t){e.$set(e.companyInfo,"address",t)},expression:"companyInfo.address"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"邮政编码"},model:{value:e.companyInfo.postalCode,callback:function(t){e.$set(e.companyInfo,"postalCode",t)},expression:"companyInfo.postalCode"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-radio-group",{attrs:{row:"",label:"有无合作"},model:{value:e.companyInfo.hasCooperate,callback:function(t){e.$set(e.companyInfo,"hasCooperate",t)},expression:"companyInfo.hasCooperate"}},e._l(e.cooperateList,(function(e){return a("v-radio",{key:e.dvalue,attrs:{label:e.dname,value:e}})})),1)],1)],1),a("simpleDataTable",{attrs:{items:e.contact,allowEdit:!0,editConfig:e.simpleGridEditConfig,headers:e.editContact,hideHeaders:!1}})],1)],1)],1)},n=[],r=(a("bada"),a("4634"),a("f19a")),s=a("58c5"),l=a("815a"),o=a("8333"),c=a("a7fe"),u=a("d5b3"),d=new o["a"]((new l["a"]).companycontacts.model),p=(new o["a"](new l["a"]),{name:"companyAdd",props:["companyInfo"],data:function(){var e=this;return{valid:!0,industryList:[],regionList:[],cooperateList:[],typeList:[],contact:[],editContact:d.formatGridHeader(),simpleGridEditConfig:[{userfor:"add",click:function(){var t={};d.formatGridHeader().map((function(e){t[e.value]=""})),e.contact.push(t)}},{userfor:"delete",click:function(t,a){e.deleteContact(t,a)}}]}},components:{simpleDataTable:s["a"],treeView:r["a"]},computed:{tree:function(){var e=[];this.regionList&&(e=this.toTree(this.regionList,"-1"));var t=[];return e&&e.length>0&&e.forEach((function(e){t=t.concat(e.children)})),t}},mounted:function(){this.init()},methods:{init:function(){var e=this;this.$Server.queryAll((new c["a"]).__name,{},{dname:"有无合作"}).then((function(t){e.cooperateList=t.datas})),this.$Server.queryAll((new c["a"]).__name,{},{dname:"来往单位行业"}).then((function(t){e.industryList=t.datas})),this.$Server.queryAll((new c["a"]).__name,{},{tree:"来往单位区域"}).then((function(t){e.regionList=t.datas,e.regionList&&e.regionList.length>0&&e.regionList.forEach((function(e){e.name=e.dname}))})),this.$Server.queryAll((new c["a"]).__name,{},{dname:"来往单位管理类型"}).then((function(t){e.typeList=t.datas}))},validate:function(){var e=this;return 1==this.$refs.formCompanyAdd.validate()&&(this.companyInfo.region=this.regionList.find((function(t){return t.id==e.companyInfo.region})),0==this.contact.length?u["a"].alert("联系人不能为空"):this.companyInfo.companycontacts=this.contact,!0)},beforeAdd:function(e){this.contact=[],this.contact.push({})},deleteContact:function(e,t){this.contact.length>1?this.contact.splice(t,1):u["a"].alert("必须有一个联系人信息")},toTree:function(e,t){if(e&&e.length){for(var a,i=this,n=[],r=0;r<e.length;r++)if(e[r].parentId==t){i.parentIds.push(t);var s=e[r];a=i.toTree(e,e[r].id),a.length>0&&(s.children=a),n.push(s)}return n}}}}),m=p,f=a("6691"),v=Object(f["a"])(m,i,n,!1,null,"5c9f3eec",null);t["a"]=v.exports},"1b24":function(e,t,a){"use strict";var i=a("44ac"),n=a.n(i);n.a},"1b77":function(e,t,a){"use strict";var i=a("ccbb"),n=a.n(i);n.a},"1c0f":function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=a("a7fe"),p=(a("d9f7"),new c["a"]),m=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","SpReceiveTask"),Object(o["a"])(Object(s["a"])(a),"receiveCode",p.charField({require:!0,fieldName:"领用单编号",colspan:"md4",rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"spareCodes",p.charField({require:!0,fieldName:"备件编号"})),Object(o["a"])(Object(s["a"])(a),"spareNames",p.charField({require:!0,fieldName:"备件名称"})),Object(o["a"])(Object(s["a"])(a),"receiveCounts",p.charField({require:!0,fieldName:"领用数量"})),Object(o["a"])(Object(s["a"])(a),"reason",p.charField({require:!0,visible:!0,fieldName:"领用原因"})),Object(o["a"])(Object(s["a"])(a),"receiveDate",p.dateField({require:!0,fieldName:"最迟领用日期",format:function(e){if(e)return e.substring(0,10)}})),Object(o["a"])(Object(s["a"])(a),"applicantName",p.charField({editable:!1,fieldName:"申请人"})),Object(o["a"])(Object(s["a"])(a),"spare",p.charField({require:!0,visible:!1,fieldName:"备件信息"})),Object(o["a"])(Object(s["a"])(a),"status",p.comboBoxField(d["a"],{require:!1,fieldName:"状态",editable:!1,visible:!1,format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"statusName",p.charField({require:!1,editable:!1,fieldName:"任务状态"})),a}return Object(l["a"])(t,e),t}(u["a"])},"1d18":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.disabled?a("v-text-field",{attrs:{"append-icon":"fa-search",disabled:"",label:e.label,placeholder:e.placeholder},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n        "+e._s(e.label)+" "),e.required?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]},proxy:!0}]),model:{value:e.users,callback:function(t){e.users=t},expression:"users"}}):a("v-text-field",{attrs:{"append-icon":"zmdi-close",readonly:"",label:e.label,placeholder:e.placeholder,rules:[function(t){return!e.required||t&&""!=t||"必填项"}]},on:{"click:append":e.clearSelect,focus:e.selectPersons},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n        "+e._s(e.label)+" "),e.required?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]},proxy:!0}],null,!1,2637317356),model:{value:e.users,callback:function(t){e.users=t},expression:"users"}}),a("User",{ref:"usersAdd",attrs:{IsShowAddUser:e.IsShowAddUser,multiple:e.multiple},on:{userComfirmed:e.userComfirmed,userClosed:e.userClosed,getselectUserList:e.getselectUserList}})],1)},n=[],r=(a("4634"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-dialog",{attrs:{width:"830px",persistent:!0,scrollable:""},model:{value:e.IsShowAddUser,callback:function(t){e.IsShowAddUser=t},expression:"IsShowAddUser"}},[a("v-form",{ref:"form",staticStyle:{width:"100%"},attrs:{valid:"true"}},[a("v-card",[a("v-card-title",{staticClass:"primary"},[a("span",{staticClass:"headline",staticStyle:{color:"#fff"}},[e._v("添加人员")])]),a("v-card-text",{staticStyle:{height:"500px"}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{staticStyle:{"border-right":"1px silver dashed",padding:"10px"},attrs:{xs6:""}},[a("div",{staticStyle:{"margin-bottom":"10px","margin-left":"10px"}},[a("v-text-field",{attrs:{clearable:"","hide-details":"","single-line":"",primary:"",label:"请输入工号或姓名"},on:{"click:clear":e.clearMessage},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a("v-icon",{on:{click:function(t){return e.doSearch()}}},[e._v("search")])]},proxy:!0}]),model:{value:e.searchfx,callback:function(t){e.searchfx=t},expression:"searchfx"}})],1),0==e.isSearch?a("v-tabs",{staticClass:"usertabs",attrs:{"slider-color":"primary"},model:{value:e.activeValue,callback:function(t){e.activeValue=t},expression:"activeValue"}},[a("v-tab",{key:1,attrs:{actives:1}},[e._v("\n                                    组织\n                                ")]),a("v-tab",{key:2,attrs:{actives:2}},[e._v("\n                                    岗位\n                                ")]),a("v-tab-item",{key:1},[a("div",{staticStyle:{"max-width":"370px",padding:"10px 0px"}},[a("treeView",{ref:"childTreeView",attrs:{Source:e.treeItems,radio:!0},on:{afterSelectChange:e.selectChanged}})],1)]),a("v-tab-item",{key:2},[a("div",{staticStyle:{"max-width":"370px",padding:"10px 0px"}},[a("treeView",{ref:"childTreeView",attrs:{Source:e.positionItems,radio:!0},on:{afterSelectChange:e.selectPosition}})],1)])],1):a("v-data-table",{staticClass:"elevation-1 usertable",attrs:{"hide-actions":"",items:e.userSource,headers:e.headers,"no-data-text":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-center"},[a("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s(t.item.name))]),a("span",{staticStyle:{"margin-left":"20px","margin-top":"10px",cursor:"pointer"},on:{click:function(a){return e.addUser(t.item,t.index)}}},[a("v-icon",{staticStyle:{"font-size":"18px"}},[e._v("add")])],1)])]}}])})],1),a("v-flex",{staticStyle:{padding:"10px"},attrs:{xs6:""}},[a("div",{staticStyle:{"margin-bottom":"20px","font-size":"16px","font-weight":"bold"}},[e._v("已选中人员")]),a("v-data-table",{staticClass:"elevation-1 usertable",attrs:{"hide-actions":"",items:e.selectUserSource,headers:e.headers,"no-data-text":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-center"},[a("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s(t.item.name))]),a("span",{staticStyle:{"margin-left":"20px","margin-top":"10px",cursor:"pointer"},on:{click:function(a){return e.removeUser(t.item,t.index)}}},[a("v-icon",{staticStyle:{"font-size":"18px"}},[e._v("clear")])],1)])]}}])})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{"margin-right":"30px"},attrs:{color:"primary"},on:{click:function(t){return e.userComfirmed()}}},[e._v("确定")]),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.userClosed()}}},[e._v("取消")])],1)],1)],1)],1),a("v-dialog",{attrs:{width:"500"},model:{value:e.IsShow,callback:function(t){e.IsShow=t},expression:"IsShow"}},[a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n                提示\n            ")]),a("v-card-text",[e._v("\n                "+e._s(e.message)+"\n            ")]),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.modalComfirmed()}}},[e._v("\n                    是\n                ")]),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.modalComfirmedClose()}}},[e._v("\n                    否\n                ")])],1)],1)],1)],1)}),s=[],l=a("1e0e"),o=a("20d3"),c=a("0909"),u=(a("d5b3"),a("d9f7")),d=(a("a7fe"),{data:function(){return{activeValue:null,treeItems:[],positionItems:[],userSource:[],headers:[{text:"工号(姓名)",align:"center",sortable:!1,value:"name"}],searchfx:"",isSearch:!1,selectUserSource:[],IsShow:!1,message:"",activeItem:{},orgUserList:[],IsPosition:!1}},watch:{IsShowAddUser:{handler:function(e){e||this.initialize(),this.resetPage()},deep:!0}},components:{treeView:l["a"]},props:["IsShowAddUser","multiple"],mounted:function(){this.initialize()},methods:{resetPage:function(){var e=[],t=this.$parent.getselectUserList();t&&t.length>0&&t.forEach((function(t){var a=Object.assign({},t);e.push(a)})),this.activeValue=0,this.userSource=[],this.searchfx="",this.isSearch=!1,this.selectUserSource=e,this.IsShow=!1,this.message="",this.activeItem={},this.orgUserList=[],this.IsPosition=!1},initialize:function(){var e=this;e.$Server.queryAll((new o["a"]).__name).then((function(t){e.treeItems=t.datas})),e.$Server.queryAll((new c["a"]).__name).then((function(t){e.positionItems=t.datas}))},userClosed:function(){this.$emit("userClosed")},userComfirmed:function(){this.$emit("userComfirmed",this.selectUserSource)},selectChanged:function(e,t){t.loginName?this.selectUserSource.filter((function(e){return e.id==t.id})).length>0||(0==this.multiple&&(this.selectUserSource=[]),this.selectUserSource.push(t)):1==this.multiple&&(this.IsShow=!0,this.message="确认添加该组织下的所有人员？",this.activeItem=t,this.IsPosition=!1)},selectPosition:function(e,t){t.loginName?this.selectUserSource.filter((function(e){return e.id==t.id})).length>0||(0==this.multiple&&(this.selectUserSource=[]),this.selectUserSource.push(t)):1==this.multiple&&(this.IsShow=!0,this.IsPosition=!0,this.activeItem=t,this.message="确认添加该岗位下的所有人员？")},removeUser:function(e,t){this.selectUserSource.splice(t,1)},addUser:function(e,t){this.selectUserSource.filter((function(t){return t.id==e.id})).length>0||(0==this.multiple&&(this.selectUserSource=[]),this.selectUserSource.push(e))},doSearch:function(){var e=this;this.isSearch=!0,this.$Server.queryAll((new u["a"]).__name,{},{like:this.searchfx}).then((function(t){e.userSource=t.datas}))},clearMessage:function(){this.isSearch=!1,this.initialize()},modalComfirmed:function(){var e=this;1==this.IsPosition?this.$Server.queryAll((new u["a"]).__name,{},{positionId:this.activeItem.id}).then((function(t){e.orgUserList=t.datas,e.orgUserList.forEach((function(t){e.selectUserSource.filter((function(e){return e.id==t.id})).length>0||e.selectUserSource.push(t)}))})):this.$Server.queryAll((new u["a"]).__name,{},{orgId:this.activeItem.id}).then((function(t){e.orgUserList=t.datas,e.orgUserList.forEach((function(t){e.selectUserSource.filter((function(e){return e.id==t.id})).length>0||e.selectUserSource.push(t)}))})),this.IsShow=!1},modalComfirmedClose:function(){this.IsShow=!1},clearSelectUser:function(){this.selectUserSource=[],this.isSearch=!1,this.searchfx="",this.initialize()}}}),p=d,m=(a("ead4"),a("6691")),f=Object(m["a"])(p,r,s,!1,null,null,null),v=f.exports,h={name:"selectUser",data:function(){return{users:"",IsShowAddUser:!1,selectUserList:[]}},computed:{},watch:{users:{handler:function(e,t){e&&e.length>0||(this.selectUserList=[]),JSON.stringify(e)!=JSON.stringify(t)&&this.changeValue()},deep:!0},value:{handler:function(e){this.users=e},deep:!0,immediate:!0},initselect:{handler:function(e){e&&e.length>0?this.selectUserList=e:this.selectUserList=[]},deep:!0}},components:{User:v},mounted:function(){},methods:{changeValue:function(){this.$emit("changeValue",this.selectUserList)},clearSelect:function(){this.users="",this.selectUserList=[]},getselectUserList:function(){return this.selectUserList},selectPersons:function(){this.IsShowAddUser=!0},userClosed:function(){this.IsShowAddUser=!1},userComfirmed:function(e){var t=this;t.selectUserList=e;var a=[];t.users="",e&&e.length>0&&(e.forEach((function(e){a.push(e.uname)})),t.users=a.join(",")),t.IsShowAddUser=!1}},props:["required","label","multiple","value","initselect","disabled","placeholder"]},b=h,g=Object(m["a"])(b,i,n,!1,null,null,null);t["a"]=g.exports},"1d40":function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=(a("a7fe"),a("d685")),p=(a("20d3"),a("815a")),m=new c["a"],f=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","EqpUnusedTrendTask"),Object(o["a"])(Object(s["a"])(a),"trendCode",m.charField({require:!0,fieldName:"处理单编号",colspan:"md4",rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"eqpCode",m.charField({require:!0,visible:!0,fieldName:"设备编号"})),Object(o["a"])(Object(s["a"])(a),"eqpName",m.charField({require:!0,visible:!0,fieldName:"设备名称"})),Object(o["a"])(Object(s["a"])(a),"trendMode",m.charField({require:!0,fieldName:"处理方式",format:function(e){if(e)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"reason",m.charField({require:!0,visible:!0,fieldName:"处理原因"})),Object(o["a"])(Object(s["a"])(a),"deadline",m.dateField({require:!0,fieldName:"最迟处理日期",colspan:"md4",format:function(e){if(e)return e.substring(0,10)}})),Object(o["a"])(Object(s["a"])(a),"applicantName",m.charField({editable:!1,fieldName:"申请人"})),Object(o["a"])(Object(s["a"])(a),"status",m.charField({require:!0,fieldName:"任务状态",visible:!1,rules:[function(e){return!!e||"必填项"}],format:function(e){if(e)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"statusName",m.charField({require:!1,fieldName:"任务状态",editable:!1})),Object(o["a"])(Object(s["a"])(a),"equipment",m.comboBoxField(d["a"],{require:!0,fieldName:"设备名称",bindSource:{value:"id",text:"name"},visible:!1,editable:!1})),Object(o["a"])(Object(s["a"])(a),"rentCompany",m.comboBoxField(p["a"],{require:!1,fieldName:"出租厂商",visible:!1,bindSource:{text:"cname",value:"id",parms:""}})),Object(o["a"])(Object(s["a"])(a),"position",m.charField({require:!0,fieldName:"设备位置",visible:!1})),a}return Object(l["a"])(t,e),t}(u["a"])},"1d53":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{ref:"dialog",attrs:{"return-value":e.time,persistent:"",lazy:"","full-width":"",width:"290px"},on:{"update:returnValue":function(t){e.time=t},"update:return-value":function(t){e.time=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-text-field",e._g({attrs:{label:e.label,"append-icon":"event",readonly:"",disabled:e.disabled,clearable:"",value:e.time,"error-messages":e.errorMessages,rules:e.rules},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                "+e._s(e.label)+" "),e.required?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]},proxy:!0}],null,!0),model:{value:e.time,callback:function(t){e.time=t},expression:"time"}},i))]}}]),model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("v-date-picker",{attrs:{disabled:e.disabled,dayFormat:e.dayFormat,locale:e.locale},on:{input:e.okHandler},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1)},n=[],r=(a("c041"),{name:"datePicker",data:function(){return{modal:!1,time:""}},watch:{value:{handler:function(e){this.time=e?e.substring(0,10):e},deep:!0,immediate:!0},time:function(e){null!==e&&""!==e||this.$emit("input",null)}},props:{locale:{type:String,default:"zh-cn"},label:{type:String},value:{type:String},errorMessages:{type:String},required:{type:Boolean,default:!1},rules:{type:Array},disabled:{type:Boolean,default:!1}},methods:{dayFormat:function(e){return e?new Date(e.replace(/-/g,"/")).getDate():""},okHandler:function(){this.modal=!1,this.$refs.dialog.save(this.time),this.$emit("input",this.time)}}}),s=r,l=a("6691"),o=Object(l["a"])(s,i,n,!1,null,"41354d12",null);t["a"]=o.exports},"1e0e":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"selfvuetree",staticStyle:{margin:"0px 0px 0px 20px"}},[a("v-tree",{ref:"childTreeView",attrs:{data:e.treeValues,radio:!0},on:{"node-select":e.selectChanged},model:{value:e.treeValues,callback:function(t){e.treeValues=t},expression:"treeValues"}})],1)},n=[],r=(a("7cfd"),a("4634"),{data:function(){return{treeValues:[]}},watch:{Source:{handler:function(e,t){var a=this;this.treeValues=this.toTree(e,"-1"),null!=this.treeValues&&this.treeValues.forEach((function(e){e.userList&&e.userList.forEach((function(t){t.title=t.name,e.children?e.children.unshift(t):(e.children=[],e.children.unshift(t))})),e.children&&a.setName(e.children)}))},deep:!0}},methods:{setName:function(e){var t=this;e.forEach((function(e){e.children&&t.setName(e.children),e.userList&&(e.children?e.userList.forEach((function(t){t.title=t.name,e.children.filter((function(e){return e.id==t.id})).length>0||e.children.unshift(t)})):(e.children=[],e.userList.forEach((function(t){t.title=t.name,e.children.unshift(t)}))))}))},selectChanged:function(e){var t=[];if(e){t.push(e.id);var a={};this.$emit("afterSelectChange",a,e)}},toTree:function(e,t){if(e&&e.length){for(var a,i=this,n=[],r=0;r<e.length;r++)if(e[r].parentId==t){var s=Object.assign({},e[r]);s.title=e[r].name,s.expanded=!0,a=i.toTree(e,e[r].id),a.length>0&&(s.children=a),n.push(s)}return n}},setActiveVaules:function(){this.$refs.childTreeView.nodeSelected({})}},props:["Source"]}),s=r,l=a("6691"),o=Object(l["a"])(s,i,n,!1,null,null,null);t["a"]=o.exports},"1e17":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._t("default")],2)},n=[],r=a("6691"),s={},l=Object(r["a"])(s,i,n,!1,null,"c2c9d0b2",null);t["a"]=l.exports},"1f9c":function(e,t,a){e.exports=a.p+"img/weblogo.2f3185c6.png"},"1fba":function(e,t,a){"use strict";var i=a("d2db"),n=a.n(i);n.a},2064:function(e,t){e.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QONaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YmEyZDAzNzEtZDYyMS04YjRhLWE2MmQtMmQ4MjlmMzRlN2FjIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk1QzdBMDIwNDE2NTExRTk4Q0U4QkM1NjY5MThFMjhFIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk1QzdBMDFGNDE2NTExRTk4Q0U4QkM1NjY5MThFMjhFIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjliZTMyNjFiLTdlZTgtZWM0Yi1iMWE5LWZmOTcyN2JjMzEwYyIgc3RSZWY6ZG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmUzMWNkNTZmLTMwMDYtMTFlOS05NzNhLTgwNWYyYTM1ZDM3YiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv/uAA5BZG9iZQBkwAAAAAH/2wCEAAYEBAQFBAYFBQYJBgUGCQsIBgYICwwKCgsKCgwQDAwMDAwMEAwODxAPDgwTExQUExMcGxsbHB8fHx8fHx8fHx8BBwcHDQwNGBAQGBoVERUaHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fH//AABEIAGQAZAMBEQACEQEDEQH/xABzAAEBAAEFAAAAAAAAAAAAAAAABgUBAgQHCAEBAAAAAAAAAAAAAAAAAAAAABAAAQMCBAMDCAsAAAAAAAAAAAECAwQFESESBjETB7N0NkFRYXGj01UXgdEiMlLSI5MUFRYRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/APQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADiXO62+10jqyvmbBTtVEV7sVzXgiIiKqr6gMH8y9k/EvYz+7AfMvZPxL2M/uwOTbt9bUuNXHR0le19RKuEbHRyx6l8yK9rUxAzwAAAAAAAAABC9YvDNN31nZSgSF2TYf+JplolT+80x6sNXM5mXO5mOWnjh9GAEYBlNreJrR32n7VoHogAAAAAAAAAAhesXhmm76zspQIuw9Orndtvz3RruXKudBA7LnI37yqq8MeDfqApNn9M6eSyzzXqJWVdazTAxUwfA3ij8F4PVUx9WXlUCOoLRWWjfFut9W3CWGup0RycHNWVulzfQqAd9gAAAAAAAAAEv1E2/cL5YWU1AjX1EM7Z0jcqN1IjXMVEVcEx+3jmBHxW7rFFGyKPmMjYiNYxstKiI1EwRETUBv/hdZvxS/vUv5gNbdtTf9fuO2118b+nRTRyrPJJC5UbG9H6U5Sq5cVTIDtQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf/9k="},2080:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("送修单编号："+e._s(e.taskDetail.repairCode))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("送修日期："+e._s(e.taskDetail.createdTime&&e.taskDetail.createdTime.substring(0,10)))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("申请人："+e._s(e.taskDetail.repairUserName))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("维修类型："+e._s(e.taskDetail.repairType&&e.taskDetail.repairType.dname))])])],1),e._l(e.taskDetail.rsrtsList,(function(t,i){return a("v-layout",{key:i,attrs:{wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("备件编号："+e._s(t.sparePartsCode))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("备件位置："+e._s(t.storageLocationName))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("备件名称："+e._s(t.sparePartsName))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("规格型号："+e._s(t.sparePartsModel))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("数量："+e._s(t.receiveCount))])])],1)})),a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("p",[e._v("送修原因："+e._s(e.taskDetail.reason))])])],1),a("v-layout",[e.taskDetail.documentName?a("v-flex",{attrs:{xs12:""}},[a("view-file",{attrs:{documentViewModel:{newestFilePath:e.taskDetail.documentName},color:"primary"}})],1):e._e()],1),a("v-layout",[e.taskDetail.status&&"已取消"==e.taskDetail.status.dname?a("v-flex",{staticStyle:{"margin-top":"15px"},attrs:{xs12:""}},[a("p",[e._v("取消原因："+e._s(e.taskDetail.cancelReason))])]):e._e()],1)],2)},n=[],r={name:"DetailBlock",props:{taskDetail:Object},computed:{documentName:function(){return this.taskDetail.document&&null!=this.taskDetail.document.dname?this.taskDetail.document.dname+this.taskDetail.documentName.substring(this.taskDetail.documentName.lastIndexOf(".")):" "}},methods:{downloadDocument:function(e,t){console.log(t);var a=document.createElement("a");a.href="/documents/"+t,a.download=e,a.click()}}},s=r,l=a("6691"),o=Object(l["a"])(s,i,n,!1,null,"8f78c49c",null);t["a"]=o.exports},2084:function(e,t,a){},"20d3":function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=new c["a"],p=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","Organization"),Object(o["a"])(Object(s["a"])(a),"orgCode",d.charField({require:!0,fieldName:"编号"})),Object(o["a"])(Object(s["a"])(a),"oname",d.charField({require:!0,fieldName:"名称"})),Object(o["a"])(Object(s["a"])(a),"parentId",d.charField({require:!1,fieldName:"上级组织",editable:!1})),Object(o["a"])(Object(s["a"])(a),"parentName",d.charField({require:!1,fieldName:"上级组织",readonly:!0})),Object(o["a"])(Object(s["a"])(a),"description",d.charField({require:!1,fieldName:"描述"})),Object(o["a"])(Object(s["a"])(a),"orgType",d.charField({require:!1,fieldName:"组织类型",editable:!1})),Object(o["a"])(Object(s["a"])(a),"rootNode",d.charField({require:!1,fieldName:"根节点",editable:!1,visible:!1})),Object(o["a"])(Object(s["a"])(a),"level",d.charField({require:!1,visible:!1,fieldName:"级别",editable:!1})),a}return Object(l["a"])(t,e),t}(u["a"])},"23f5":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"500"},model:{value:e.IsShow,callback:function(t){e.IsShow=t},expression:"IsShow"}},[a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n            "+e._s(e.title)+"\n        ")]),a("v-card-text",[e._v("\n            "+e._s(e.text)+"\n        ")]),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.modalComfirmed()}}},[e._v("\n                确认\n            ")]),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.modalComfirmedClose()}}},[e._v("\n                取消\n            ")])],1)],1)],1)},n=[],r={name:"comfirmModal",methods:{modalComfirmed:function(){this.$emit("modalComfirmed")},modalComfirmedClose:function(){this.$emit("modalComfirmedClose")}},props:["title","IsShow","text"]},s=r,l=a("6691"),o=Object(l["a"])(s,i,n,!1,null,null,null);t["a"]=o.exports},"24e3":function(e,t,a){"use strict";var i=a("5498"),n=a.n(i);n.a},"250a":function(e,t,a){"use strict";var i=a("6e6d"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{"ms-preload":!0,loadHide:e.IsLoading},attrs:{id:"ms-preload"}},[e._m(0)])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"status"}},[a("div",{staticClass:"spinner"},[a("div",{staticClass:"dot1"}),a("div",{staticClass:"dot2"})])])}],s={name:"Loading",data:function(){return{IsLoading:!0}},mounted:function(){},methods:{}},l=s,o=(a("538c"),a("6691")),c=Object(o["a"])(l,n,r,!1,null,"63c76539",null),u=c.exports,d=i["default"].extend(u),p=null;u.load=function(){null==p?(p=(new d).$mount(),document.body.appendChild(p.$el),i["default"].nextTick((function(){p.IsLoading=!1}))):i["default"].nextTick((function(){p.IsLoading=!1}))},u.close=function(){i["default"].nextTick((function(){null!=p&&(p.IsLoading=!0)}))};t["a"]=u},"25b0":function(e,t,a){"use strict";var i=a("71a6"),n=a.n(i);n.a},"25c5":function(e,t,a){"use strict";var i=a("951a"),n=a.n(i);n.a},"287d":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{lazy:"","full-width":"",width:e.width,disabled:e.disabled},model:{value:e.display,callback:function(t){e.display=t},expression:"display"}},[a("v-text-field",{attrs:{slot:"activator",label:e.label,value:e.formattedDatetime,disabled:e.disabled,loading:e.loading,"error-messages":e.errorMessages,"error-count":e.errorCount,error:e.error,"hide-details":e.hideDetails,"append-icon":e.appendIcon,rules:e.rules,readonly:"",clearable:""},on:{"click:clear":function(t){return e.fieldClear()}},slot:"activator",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n      "+e._s(e.label)+" "),e.prependIcon&&e.prependIcon.length>0?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]},proxy:!0}])}),a("v-card",[a("v-card-text",{staticStyle:{padding:"0"}},[a("v-tabs",{attrs:{"fixed-tabs":""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("v-tab",{key:"calendar"},[e._t("dateIcon",[a("v-icon",[e._v("event")])])],2),a("v-tab",{key:"timer",attrs:{disabled:!e.dateSelected}},[e._t("timeIcon",[a("v-icon",[e._v("access_time")])])],2),a("v-tab-item",{key:"calendar"},[a("v-date-picker",{attrs:{"full-width":"",scrollable:"",locale:e.locale,dayFormat:e.dayFormat,actions:""},model:{value:e.datePart,callback:function(t){e.datePart=t},expression:"datePart"}})],1),a("v-tab-item",{key:"timer"},[a("v-time-picker",{ref:"timer",staticClass:"v-time-picker-custom",attrs:{"full-width":"",scrollable:"",format:e.timePickerFormat,actions:""},model:{value:e.timePart,callback:function(t){e.timePart=t},expression:"timePart"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),e._t("actions",[a("v-btn",{attrs:{color:"grey lighten-1",flat:""},nativeOn:{click:function(t){return e.clearHandler(t)}}},[e._v(e._s(e.clearText))]),a("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:e.okHandler}},[e._v(e._s(e.okText))])],{parent:this})],2)],1)],1)},n=[],r=(a("c041"),a("8f42"),a("6bf2")),s=a.n(r),l="YYYY-MM-DD",o="HH:mm",c="00:00",u={name:"v-datetime-picker",model:{prop:"datetime",event:"input"},props:{datetime:{type:[Date,String],default:null},rules:{type:Array},label:{type:String,default:""},width:{type:Number,default:320},format:{type:String,default:"YYYY-MM-DD HH:mm:ss"},timePickerFormat:{type:String,default:"24hr"},locale:{type:String,default:"zh-cn"},clearText:{type:String,default:"CLEAR"},okText:{type:String,default:"OK"},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},errorMessages:{type:[String,Array],default:function(){return[]}},errorCount:{type:[Number,String],default:1},error:{type:Boolean,default:!1},hideDetails:{type:Boolean,default:!1},appendIcon:{type:String},prependIcon:{type:String}},data:function(){return{display:!1,dateSelected:!1,timeSelected:!1,activeTab:0,selectedDatetime:null}},created:function(){this.datetime instanceof Date?this.selectedDatetime=this.datetime:("string"===typeof this.datetime||this.datetime instanceof String)&&(this.selectedDatetime=s()(this.datetime,this.format))},computed:{datePart:{get:function(){var e=this.selectedDatetime?s()(this.selectedDatetime).format(l):"";return e},set:function(e){this.dateSelected=!0,this.activeTab=1;var t=s()(e,l),a=this.selectedDatetime?s()(this.selectedDatetime).hour():0,i=this.selectedDatetime?s()(this.selectedDatetime).minute():0,n=s()().year(t.year()).month(t.month()).date(t.date()).hour(a).minute(i).second(0);this.selectedDatetime=n.toDate()}},timePart:{get:function(){var e=this.selectedDatetime?s()(this.selectedDatetime).format(o):c;return e},set:function(e){this.timeSelected=!0;var t=s()(e,o),a=s()(this.selectedDatetime).hour(t.hour()).minute(t.minute()).second(0);this.selectedDatetime=a.toDate()}},formattedDatetime:function(){return this.datetime||(this.selectedDatetime=""),this.datetime?s()(this.datetime).format(this.format):""}},methods:{fieldClear:function(){this.selectedDatetime=""},dayFormat:function(e){return e?new Date(e.replace(/-/g,"/")).getDate():""},okHandler:function(){this.display=!1,this.activeTab=0,this.$refs.timer.selectingHour=!0,this.datetime=s()(this.selectedDatetime).format(this.format)},clearHandler:function(){this.display=!1,this.activeTab=0,this.$refs.timer.selectingHour=!0,this.datetime=""}}},d=u,p=a("6691"),m=Object(p["a"])(d,i,n,!1,null,null,null),f=m.exports,v=function(e){e.component("v-datetime-picker",f)};t["a"]=v},"2a8a":function(e,t,a){},"2c75":function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=a("a7fe"),p=a("815a"),m=a("e530"),f=a("d685"),v=new c["a"],h=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","SpareParts"),Object(o["a"])(Object(s["a"])(a),"partsImage",v.imageField({require:!1,fieldName:"上传备件图片",visible:!1})),Object(o["a"])(Object(s["a"])(a),"code",v.charField({fieldName:"零件号",rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"name",v.charField({require:!0,fieldName:"备件名称",rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"model",v.charField({require:!1,fieldName:"规格型号"})),Object(o["a"])(Object(s["a"])(a),"type",v.comboBoxField(d["a"],{require:!1,fieldName:"备件类型",bindSource:{parms:{type:"23"}},format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"length",v.numberField("int",{require:!0,fieldName:"长",visible:!1})),Object(o["a"])(Object(s["a"])(a),"width",v.numberField("int",{require:!0,fieldName:"宽",visible:!1})),Object(o["a"])(Object(s["a"])(a),"height",v.numberField("int",{require:!0,fieldName:"高",visible:!1})),Object(o["a"])(Object(s["a"])(a),"manufacturer",v.comboBoxField(p["a"],{require:!1,fieldName:"生产厂商",visible:!1,bindSource:{text:"cname",value:"id",parms:""}})),Object(o["a"])(Object(s["a"])(a),"supplier",v.comboBoxField(p["a"],{require:!1,fieldName:"供应商",visible:!1,bindSource:{text:"cname",value:"id",parms:""}})),Object(o["a"])(Object(s["a"])(a),"inventory",v.charField({require:!1,fieldName:"库存量",editable:!1,visible:!1})),Object(o["a"])(Object(s["a"])(a),"inventoryStr",v.charField({require:!1,fieldName:"库存量",editable:!1})),Object(o["a"])(Object(s["a"])(a),"minInventory",v.numberField("int",{require:!0,fieldName:"最低库存",visible:!1})),Object(o["a"])(Object(s["a"])(a),"minInventoryStr",v.charField({require:!0,fieldName:"最低库存"})),Object(o["a"])(Object(s["a"])(a),"miniOrder",v.numberField("int",{visible:!1,editable:!1,fieldName:"最小起订量"})),Object(o["a"])(Object(s["a"])(a),"maxInventory",v.numberField("int",{require:!0,fieldName:"最高库存",visible:!1})),Object(o["a"])(Object(s["a"])(a),"serviceLife",v.numberField("int",{require:!1,fieldName:"使用年限(月)"})),Object(o["a"])(Object(s["a"])(a),"originalValue",v.numberField("int",{require:!1,fieldName:"单价(元)"})),Object(o["a"])(Object(s["a"])(a),"totalPrice",v.charField({require:!1,fieldName:"总价(元)",editable:!1})),Object(o["a"])(Object(s["a"])(a),"inventoryUnit",v.comboBoxField(d["a"],{require:!1,fieldName:"库存单位",bindSource:{parms:{type:"25"}},format:function(e){if(null!=e&&null!=e.dname)return e.dname},visible:!1})),Object(o["a"])(Object(s["a"])(a),"document",v.fileField({require:!1,fieldName:"备件标准",visible:!1})),Object(o["a"])(Object(s["a"])(a),"acceptanceFile",v.fileField({require:!0,fieldName:"备件标准",visible:!1,editable:!1})),Object(o["a"])(Object(s["a"])(a),"equipments",v.manyToManyField(f["a"],{require:!1,fieldName:"适用设备",visible:!1,bindSource:{text:"name",value:"id",parms:""}})),Object(o["a"])(Object(s["a"])(a),"abcType",v.comboBoxField(d["a"],{require:!0,fieldName:"ABC类",visible:!1,bindSource:{text:"dname",value:"dvalue",parms:{type:"6"}}})),Object(o["a"])(Object(s["a"])(a),"procurementCycle",v.numberField("int",{require:!1,fieldName:"采购周期(天)",visible:!1})),Object(o["a"])(Object(s["a"])(a),"fmrType",v.comboBoxField(d["a"],{require:!0,fieldName:"使用频次",visible:!1,bindSource:{text:"dname",value:"dvalue",parms:{type:"24"}}})),Object(o["a"])(Object(s["a"])(a),"positions",v.oneToManyField(m["a"],"sparePartsID",{editableMode:"grid",fieldName:"操作权"})),Object(o["a"])(Object(s["a"])(a),"deleted",v.charField({require:!1,visible:!1})),Object(o["a"])(Object(s["a"])(a),"status",v.charField({require:!1,fieldName:"备件状态",format:function(e){if(e&&e.dname)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"safeCount",v.numberField("int",{editable:!1,visible:!1,fieldName:"安全库存"})),a}return Object(l["a"])(t,e),t}(u["a"])},3045:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[e._v("基本信息")]),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"领用单编号",rules:[function(e){return!e||/^[\w|-]+$/.test(e)||"只能是数字,字母,下划线"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                            领用单编号\n                        ")]},proxy:!0}]),model:{value:e.item.receiveCode,callback:function(t){e.$set(e.item,"receiveCode",t)},expression:"item.receiveCode"}})],1),a("v-flex",{attrs:{xs4:""}},[a("datePicker",{attrs:{label:"领用日期",required:!0,rules:[function(e){return e&&""!=e||"必填项"},function(t){return new Date(t)>=new Date(e.today)||"领用时间不能小于当前时间"}]},model:{value:e.item.receiveDate,callback:function(t){e.$set(e.item,"receiveDate",t)},expression:"item.receiveDate"}})],1),a("v-flex",{attrs:{xs4:""}},[a("selectUser",{ref:"selectUser",attrs:{value:e.item.applicantName,required:!0,label:"申请人",multiple:!1,initselect:e.item.userViewModel},on:{changeValue:e.changeValue}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"领用原因"},model:{value:e.item.reason,callback:function(t){e.$set(e.item,"reason",t)},expression:"item.reason"}})],1)],1),a("v-layout",[a("v-flex",{attrs:{xs12:""}},[e._v("\n                备件信息：\n                "),a("v-btn",{staticClass:"btnClass",attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){return e.addRowSpareParts()}}},[a("v-icon",[e._v("\n                        add\n                    ")])],1),a("v-btn",{staticClass:"btnClass",attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){return e.deleteSpareparts(e.selectedIndex)}}},[a("v-icon",[e._v("\n                        remove\n                    ")])],1)],1)],1),e._l(e.item.receiveSparepartsList,(function(t,i){return a("v-layout",{key:i,class:{"box-active":i==e.selectedIndex},on:{click:function(t){return e.spareRowSelect(i)}}},[a("v-flex",{attrs:{xs3:""}},[a("v-select",{attrs:{items:e.sparePartsList,label:"备件编号","item-text":"codeName","item-value":"id",rules:[function(e){return!!e||"必填项"}]},on:{change:function(a){return e.handleSelectChange(i,t)}},model:{value:t.sparePartsID,callback:function(a){e.$set(t,"sparePartsID",a)},expression:"spare.sparePartsID"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{label:"备件名称",disabled:!0},model:{value:t.spareName,callback:function(a){e.$set(t,"spareName",a)},expression:"spare.spareName"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{label:"规格型号",disabled:!0},model:{value:t.spareModel,callback:function(a){e.$set(t,"spareModel",a)},expression:"spare.spareModel"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{label:"备件数量",rules:[function(e){return!("0"===e)||"数量不能为0"},function(e){return!!e||"必填项"},function(e){return!t.sparePartsID||e&&e<=t.inventory||"领用数量须在0-"+t.inventory},function(e){return!e||/^(0|[1-9][0-9]*)$/.test(e)||"只能是正整数"}],type:"number"},model:{value:t.receiveCount,callback:function(a){e.$set(t,"receiveCount",a)},expression:"spare.receiveCount"}})],1)],1)}))],2)],1)],1)},n=[],r=(a("4634"),a("7cfd"),a("bada"),a("1d53")),s=a("1d18"),l=a("d5b3"),o=a("a2a7"),c=a("2c75"),u=a("d685"),d=a("8333"),p=a("3876"),m=a("f855"),f=a("f05f"),v=a("6bf2"),h=a.n(v),b=new d["a"](new c["a"]),g={name:"SpReceiveTaskDetail",data:function(){return{today:h()(new Date).format("YYYY-MM-DD"),valid:!0,inventoryTypes:[],childInventoryTypes:[],IsSelectShow:!1,IsShowForSpareparts:!1,sort:!0,searchfx:"",total:0,DataSource:[],headers:[{text:"序号",align:"center",sortable:!1},{text:"备件编号",value:"code",align:"center",sortable:!1},{text:"备件名称",value:"name",align:"center",sortable:!1},{text:"规格型号",value:"model",align:"center",sortable:!1},{text:"类型",value:"type",align:"center",sortable:!1},{text:"库存数量",value:"inventoryStr",align:"center",sortable:!1}],equipmentDirectoryList:[],errorHints2:"最迟到货时间不能小于当前时间",test:new Date,isDisabled:!1,equipmentDirectory:"",test1:"",test2:"",test3:"",test4:"",selectedIndex:-1,sparePartsList:[]}},components:{datePicker:r["a"],selectUser:s["a"],contentModal:o["a"],localDataTable:m["a"],dataTable:f["a"],uploadFile2:p["a"]},watch:{spareParts:function(e,t){}},created:function(){var e=this;e.$Server.queryAll((new c["a"]).__name,null,{deleted:!1,haveLocation:"true"}).then((function(t){e.sparePartsList=t.datas}))},computed:{formatFields:function(){return b.getFormatFields()}},props:["item"],methods:{addRowSpareParts:function(){this.item.receiveSparepartsList.push({})},deleteSpareparts:function(e){e>=0?(this.item.receiveSparepartsList.splice(e,1),this.selectedIndex=-1):l["a"].alert("请选择要删除的项")},spareRowSelect:function(e){e!==this.selectedIndex&&(this.selectedIndex=e)},handleSelectChange:function(e,t){var a=this.sparePartsList.find((function(e){return e.id==t.sparePartsID}));a&&(t.spareName=a.name,t.spareModel=a.model,t.inventory=a.inventory)},validate:function(){if(1==this.$refs.form.validate()){var e=this.$refs.selectUser.getselectUserList();return e&&e.length>0&&(this.item.applicant=this.$refs.selectUser.getselectUserList()[0].id),!0}return!1},init:function(){var e=this;this.$Server.queryAll((new u["a"]).__name,{},{all:"all"}).then((function(t){e.equipmentDirectoryList=t.datas}))},getFormData:function(e){console.log(e)},addSpareparts:function(){var e=this;e.IsShowForSpareparts=!0},removeSpareparts:function(){var e=this,t=this.$refs.childDataTable.getCheckItems();0===t.length?l["a"].alert("请选择删除的备件"):t.forEach((function(t){e.item.sparePartsList.forEach((function(e,a,i){e.code==t.code&&i.splice(a,1)}))}))},doSearch:function(){var e=this.$refs.childDataTableForSpareparts.getPagination();1==e.page?this.initTable(e):this.$refs.childDataTableForSpareparts.setPage(1)},clearMessage:function(){this.searchfx="",this.doSearch()},initTable:function(e){var t=this;e&&e.page||(e=this.$refs.childDataTableForSpareparts.getPagination()),t.$Server.queryAll(b.getModelName(),{page:e.page,rowsPerPage:e.rowsPerPage},{nameOrCode:t.searchfx?t.searchfx:""}).then((function(e){t.$refs.childDataTableForSpareparts.unCheckItems(),t.DataSource=e.datas,t.total=e.page.total}),(function(e){}))},modalComfirmedForSpareparts:function(){var e=this,t=e.$refs.childDataTableForSpareparts.getCheckItems();t&&t.forEach((function(t){for(var a=!0,i=0;i<e.item.sparePartsList.length;i++)if(t.code==e.item.sparePartsList[i].code){a=!1;break}a&&e.item.sparePartsList.push(Object.assign({},t))})),e.IsShowForSpareparts=!1,e.clearMessage()},modalClosedForSpareparts:function(){this.IsShowForSpareparts=!1,this.clearMessage()},inventoryTypesChange:function(e){},changeValue:function(e){console.log(e)},initEditLoacation:function(e){var t=this;e.receiveSparepartsList&&e.receiveSparepartsList.forEach((function(e){var a=t.sparePartsList.find((function(t){return e.sparePartsID==t.id}));e.inventory=a.inventory}))}},mounted:function(){}},x=g,y=(a("7e38"),a("6691")),k=Object(y["a"])(x,i,n,!1,null,"b2ed6790",null);t["a"]=k.exports},3876:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-text-field",{staticStyle:{padding:"0","margin-bottom":"0"},attrs:{"prepend-icon":"attach_file","single-line":"",label:e.label,hint:e.hint,"persistent-hint":""},nativeOn:{click:function(t){return e.onFocus(t)}},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}}),a("input",{ref:"fileInput",staticClass:"nicai",attrs:{type:"file",accept:e.accept,multiple:e.multiple},on:{change:e.onFileChange}})],1)},n=[],r=a("3596"),s=(a("7cfd"),a("dea4")),l=(a("4634"),{data:function(){return{filename:"",filedate:[]}},watch:{fileNames:{handler:function(e){console.log(e),void 0!=e&&null!=e&&(this.filename=e)},deep:!0,immediate:!0},filename:{handler:function(e){e||(this.clearFile(),this.$emit("input",""))}}},props:{label:{type:String,default:"Please choose..."},hint:{type:String,default:""},multiple:{type:Boolean,default:!1},uploadBase64:{type:Boolean,default:!0},fileNames:{type:String},accept:{type:String,default:"*"}},methods:{getFormData:function(e){var t=new FormData;return Object(s["a"])(e).forEach((function(e){t.append("data",e,e.name)})),t},onFocus:function(){this.disabled||this.$refs.fileInput.click()},onFileChange:function(e){var t=this;this.filedata=[];var a=e.target.files||e.dataTransfer.files,i=this.getFormData(a);t.$emit("formData",i);var n=function(a){var i=e.target.files[a];if("object"==Object(r["a"])(i)){var n=new FileReader;n.readAsDataURL(i),n.onload=function(a){t.filedata.push({dname:i.name,docuFile:a.target.result,newestFileSize:i.size}),t.filename=t.filedata.map((function(e){return e.dname})).join(","),0==t.uploadBase64?0==t.multiple?(t.$emit("input",t.filedata[0]),e.target.value=""):(t.$emit("input",t.filedata),e.target.value=""):(t.$emit("input",t.filedata.map((function(e){return e.docuFile}))[0]),e.target.value=""),console.log(t.filename)}}};for(var s in e.target.files)n(s)},clearFile:function(){this.filename="",this.$refs.fileInput.value=""}}}),o=l,c=(a("d6e4"),a("6691")),u=Object(c["a"])(o,i,n,!1,null,"5663551c",null);t["a"]=u.exports},"3be8":function(e,t,a){"use strict";var i=a("0fef"),n=a.n(i);n.a},"3dba":function(e,t,a){},"3e5e":function(e,t,a){},"3e99":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{ref:"dialog",attrs:{"return-value":e.time,persistent:"",lazy:"","full-width":"",width:"290px"},on:{"update:returnValue":function(t){e.time=t},"update:return-value":function(t){e.time=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-text-field",e._g({attrs:{label:e.label,"append-icon":"event",readonly:"",disabled:e.disabled,clearable:"",value:e.time,"error-messages":e.errorMessages,rules:e.rules},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                "+e._s(e.label)+" "),e.required?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]},proxy:!0}],null,!0),model:{value:e.time,callback:function(t){e.time=t},expression:"time"}},i))]}}]),model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("v-date-picker",{attrs:{disabled:e.disabled,dayFormat:e.dayFormat,locale:e.locale},on:{input:e.okHandler},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1)},n=[],r=(a("c041"),{name:"datePicker",data:function(){return{modal:!1,time:""}},watch:{value:{handler:function(e){this.time=e?e.substring(0,10):e},deep:!0},time:function(e){null!==e&&""!==e||this.$emit("input",null)}},props:{locale:{type:String,default:"zh-cn"},label:{type:String},value:{type:String},errorMessages:{type:String},required:{type:Boolean,default:!1},rules:{type:Array},disabled:{type:Boolean,default:!1}},methods:{dayFormat:function(e){return e?new Date(e.replace(/-/g,"/")).getDate():""},okHandler:function(){this.modal=!1,this.$refs.dialog.save(this.time),this.$emit("input",this.time)}}}),s=r,l=a("6691"),o=Object(l["a"])(s,i,n,!1,null,"41a6931a",null);t["a"]=o.exports},"3edd":function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=a("a7fe"),p=new c["a"],m=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","EqpPurchaseTask"),Object(o["a"])(Object(s["a"])(a),"purchaseCode",p.charField({require:!0,fieldName:"购置单编号",icon:"star",tableOrder:10})),Object(o["a"])(Object(s["a"])(a),"equipmentDirectoryName",p.charField({require:!0,editable:!1,fieldName:"设备名称",icon:"star",tableOrder:20})),Object(o["a"])(Object(s["a"])(a),"equipmentDirectoryModel",p.charField({require:!0,editable:!1,fieldName:"规格型号",icon:"star",tableOrder:30})),Object(o["a"])(Object(s["a"])(a),"type",p.charField({require:!0,editable:!1,fieldName:"设备类型",visible:!1})),Object(o["a"])(Object(s["a"])(a),"model",p.charField({require:!0,editable:!1,fieldName:"规格型号",visible:!1})),Object(o["a"])(Object(s["a"])(a),"purchaseCount",p.numberField("int",{require:!0,visible:!0,fieldName:"购置数量"})),Object(o["a"])(Object(s["a"])(a),"reason",p.charField({require:!0,fieldName:"购置原因",icon:"star"})),Object(o["a"])(Object(s["a"])(a),"equipmentDirectory",p.charField({require:!0,visible:!1,fieldName:"购置设备",icon:"star"})),Object(o["a"])(Object(s["a"])(a),"status",p.comboBoxField(d["a"],{require:!1,fieldName:"任务状态",editable:!1,visible:!1,format:function(e){if(null!=e&&null!=e.dname)return e.dname},tableOrder:50})),Object(o["a"])(Object(s["a"])(a),"latestTime",p.dateField({require:!0,fieldName:"最迟到货时间",icon:"star",format:function(e){if(e)return e.substring(0,10)}})),Object(o["a"])(Object(s["a"])(a),"applicantName",p.charField({require:!0,editable:!1,fieldName:"申请人",icon:"star",tableOrder:40})),Object(o["a"])(Object(s["a"])(a),"applicant",p.charField({require:!0,visible:!1,fieldName:"申请人",icon:"star"})),Object(o["a"])(Object(s["a"])(a),"statusName",p.charField({require:!1,editable:!1,fieldName:"任务状态"})),Object(o["a"])(Object(s["a"])(a),"documentVersion",p.charField({require:!1,editable:!1,visible:!1,fieldName:"附件版本",icon:"star"})),Object(o["a"])(Object(s["a"])(a),"documentId",p.charField({require:!1,editable:!1,visible:!1,fieldName:"附件版本id",icon:"star"})),a}return Object(l["a"])(t,e),t}(u["a"])},"3f83":function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=(a("e530"),new c["a"]),p=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","Storagelocation"),Object(o["a"])(Object(s["a"])(a),"id",d.charField({require:!1,visible:!1,editable:!1})),Object(o["a"])(Object(s["a"])(a),"slcode",d.charField({require:!1,visible:!0,editable:!0,fieldName:"库位编号"})),Object(o["a"])(Object(s["a"])(a),"length",d.numberField("int",{require:!0,fieldName:"长",editable:!0})),Object(o["a"])(Object(s["a"])(a),"width",d.numberField("int",{require:!0,fieldName:"宽",editable:!0})),Object(o["a"])(Object(s["a"])(a),"height",d.numberField("int",{require:!0,fieldName:"高",editable:!0})),Object(o["a"])(Object(s["a"])(a),"sparePositions",d.charField({require:!1,fieldName:"备件信息",visible:!1,editable:!1})),a}return Object(l["a"])(t,e),t}(u["a"])},4027:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=a("b690"),p=a("9ee5"),m=new c["a"],f=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","FOrganization"),Object(o["a"])(Object(s["a"])(a),"parentName",m.charField({readonly:!0,fieldName:"上级组织"})),Object(o["a"])(Object(s["a"])(a),"orgType",m.comboBoxField(null,{require:!0,fieldName:"节点类型",readonly:!0})),Object(o["a"])(Object(s["a"])(a),"fcode",m.charField({require:!0,fieldName:"编号",readonly:!0})),Object(o["a"])(Object(s["a"])(a),"fname",m.charField({require:!0,fieldName:"名称"})),Object(o["a"])(Object(s["a"])(a),"description",m.charField({require:!0,fieldName:"描述",editable:!0})),Object(o["a"])(Object(s["a"])(a),"parentId",m.charField({require:!0,fieldName:"工位父级",editable:!1})),Object(o["a"])(Object(s["a"])(a),"stationType",m.comboBoxField(null,{require:!0,fieldName:"工位类型",editable:!0})),Object(o["a"])(Object(s["a"])(a),"xPoint",m.charField({require:!0,fieldName:"X轴坐标",editable:!0})),Object(o["a"])(Object(s["a"])(a),"yPoint",m.charField({require:!0,fieldName:"Y轴坐标",editable:!0})),Object(o["a"])(Object(s["a"])(a),"workShopImage",m.imageField({require:!0,fieldName:"车间背景图",editable:!0})),Object(o["a"])(Object(s["a"])(a),"preStation",m.comboBoxField(null,{require:!0,fieldName:"前置工位ID",editable:!0})),Object(o["a"])(Object(s["a"])(a),"runningEquipments",m.manyToManyField(d["a"],{editable:!1})),Object(o["a"])(Object(s["a"])(a),"equipmentViewModels",m.manyToManyField(p["a"],{editable:!0,visible:!1})),Object(o["a"])(Object(s["a"])(a),"users",m.charField({fieldName:"用户"})),Object(o["a"])(Object(s["a"])(a),"workshop",m.charField({fieldName:"所在车间"})),Object(o["a"])(Object(s["a"])(a),"shopLength",m.numberField("float",{fieldName:"车间长度"})),Object(o["a"])(Object(s["a"])(a),"shopWidth",m.numberField("float",{fieldName:"车间宽度"})),Object(o["a"])(Object(s["a"])(a),"level",m.charField({require:!1,visible:!1,fieldName:"级别",editable:!1})),a}return Object(l["a"])(t,e),t}(u["a"])},"427a":function(e,t,a){},"431e":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{lazy:"","full-width":"",width:e.width,disabled:e.disabled},model:{value:e.display,callback:function(t){e.display=t},expression:"display"}},[a("v-text-field",{attrs:{slot:"activator",label:e.label,value:e.formattedDatetime,disabled:e.disabled,loading:e.loading,"error-messages":e.errorMessages,"error-count":e.errorCount,error:e.error,"hide-details":e.hideDetails,"append-icon":e.appendIcon,rules:e.rules,readonly:"",clearable:""},on:{"click:clear":function(t){return e.fieldClear()}},slot:"activator",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n      "+e._s(e.label)+" "),e.prependIcon&&e.prependIcon.length>0?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]},proxy:!0}])}),a("v-card",[a("v-card-text",{staticStyle:{padding:"0"}},[a("v-tabs",{attrs:{"fixed-tabs":""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("v-tab",{key:"calendar"},[e._t("dateIcon",[a("v-icon",[e._v("event")])])],2),a("v-tab",{key:"timer",attrs:{disabled:!e.dateSelected}},[e._t("timeIcon",[a("v-icon",[e._v("access_time")])])],2),a("v-tab-item",{key:"calendar"},[a("v-date-picker",{attrs:{"full-width":"",scrollable:"",locale:e.locale,dayFormat:e.dayFormat,actions:""},model:{value:e.datePart,callback:function(t){e.datePart=t},expression:"datePart"}})],1),a("v-tab-item",{key:"timer"},[a("v-time-picker",{ref:"timer",staticClass:"v-time-picker-custom",attrs:{"full-width":"",scrollable:"",format:e.timePickerFormat,actions:""},model:{value:e.timePart,callback:function(t){e.timePart=t},expression:"timePart"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),e._t("actions",[a("v-btn",{attrs:{color:"grey lighten-1",flat:""},nativeOn:{click:function(t){return e.clearHandler(t)}}},[e._v(e._s(e.clearText))]),a("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:e.okHandler}},[e._v(e._s(e.okText))])],{parent:this})],2)],1)],1)},n=[],r=(a("c041"),a("8f42"),a("6bf2")),s=a.n(r),l="YYYY-MM-DD",o="HH:mm",c="00:00",u={name:"v-datetime-picker",model:{prop:"datetime",event:"input"},props:{datetime:{type:[Date,String],default:null},rules:{type:Array},label:{type:String,default:""},width:{type:Number,default:320},format:{type:String,default:"YYYY-MM-DD HH:mm:ss"},timePickerFormat:{type:String,default:"24hr"},locale:{type:String,default:"zh-cn"},clearText:{type:String,default:"CLEAR"},okText:{type:String,default:"OK"},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},errorMessages:{type:[String,Array],default:function(){return[]}},errorCount:{type:[Number,String],default:1},error:{type:Boolean,default:!1},hideDetails:{type:Boolean,default:!1},appendIcon:{type:String},prependIcon:{type:String}},data:function(){return{display:!1,dateSelected:!1,timeSelected:!1,activeTab:0,selectedDatetime:null,currentDatetime:""}},created:function(){this.datetime instanceof Date?this.selectedDatetime=this.datetime:("string"===typeof this.datetime||this.datetime instanceof String)&&(this.selectedDatetime=this.datetime.length>0?s()(this.datetime,this.format):null)},computed:{datePart:{get:function(){var e=this.selectedDatetime?s()(this.selectedDatetime).format(l):"";return e},set:function(e){this.dateSelected=!0,this.activeTab=1;var t=s()(e,l),a=this.selectedDatetime?s()(this.selectedDatetime).hour():0,i=this.selectedDatetime?s()(this.selectedDatetime).minute():0,n=s()().year(t.year()).month(t.month()).date(t.date()).hour(a).minute(i).second(0);this.selectedDatetime=n.toDate()}},timePart:{get:function(){var e=this.selectedDatetime?s()(this.selectedDatetime).format(o):c;return e},set:function(e){this.timeSelected=!0;var t=s()(e,o),a=s()(this.selectedDatetime).hour(t.hour()).minute(t.minute()).second(0);this.selectedDatetime=a.toDate()}},formattedDatetime:function(){return this.datetime||(this.selectedDatetime=""),this.currentDatetime?s()(this.currentDatetime).format(this.format):this.datetime}},methods:{fieldClear:function(){this.selectedDatetime="",this.currentDatetime=""},dayFormat:function(e){return e?new Date(e.replace(/-/g,"/")).getDate():""},okHandler:function(){this.display=!1,this.activeTab=0,this.$refs.timer.selectingHour=!0,this.currentDatetime=s()(this.selectedDatetime).format(this.format),this.$emit("input",this.currentDatetime)},clearHandler:function(){this.display=!1,this.activeTab=0,this.$refs.timer.selectingHour=!0,this.currentDatetime="",this.$emit("input",this.currentDatetime)}}},d=u,p=a("6691"),m=Object(p["a"])(d,i,n,!1,null,null,null),f=m.exports,v=function(e){e.component("v-datetime-picker",f)};t["a"]=v},"44ac":function(e,t,a){},"4a73":function(e,t,a){},"4b30":function(e,t,a){},"4bb0":function(e,t,a){},"4f12":function(e,t,a){"use strict";var i=a("2084"),n=a.n(i);n.a},"4ff8":function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=new c["a"],p=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","Skill"),Object(o["a"])(Object(s["a"])(a),"sname",d.charField({require:!0,fieldName:"技能名称"})),Object(o["a"])(Object(s["a"])(a),"description",d.charField({require:!1,fieldName:"描述"})),a}return Object(l["a"])(t,e),t}(u["a"])},5217:function(e,t,a){},"52d6":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-flex",{staticStyle:{"margin-bottom":"10px"},attrs:{xs2:"","offset-xs10":""}},[e.allowSearch?a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":"",light:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}):e._e()],1),e.total>0||e.localpagination?a("v-data-table",{staticClass:"elevation-1",attrs:{items:e.items,headers:e.headers,"hide-actions":"","hide-headers":e.hideHeaders,search:e.search,"select-all":e.allowActive,"no-data-text":"",pagination:e.pagination,"rows-per-page-items":e.perPage},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[""==e.fieldName||null==e.fieldName||void 0==e.fieldName?a("tr",{on:{click:function(a){return e.setActiveItem(t.item,t.index)}}},[e.allowActive?a("td",[a("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"props.selected"}})],1):e._e(),e._l(e.fheader,(function(i){return a("td",{key:i.value,staticClass:"text-xs-center"},["fileField"==i.fieldType?a("UploadFile",{ref:"uploadFile",refInFor:!0,staticStyle:{padding:"0",height:"40px"},attrs:{xs2:"",uploadBase64:e.uploadBase64,multiple:e.multiple,label:"上传附件"},on:{formData:e.getFormData},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"checkbox"==i.fieldType?a("div",e._l(i.boolSelectField,(function(n){return a("v-checkbox",{key:n.dvalue,staticStyle:{"text-align":"center"},attrs:{value:n,label:n.dname},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}})})),1):"chatField"==i.fieldType?a("v-text-field",{attrs:{label:i.text,"single-line":""},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"comboboxField"==i.fieldType&&0==e.total?a("v-select",{attrs:{items:t.item[i.comboboxSelect],"item-text":i.itemtext,"item-value":i.itemvalue,multiple:i.IsMultiple||void 0!=t.item.constructBy&&!(0==t.item.constructBy)},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"comboboxField"==i.fieldType&&e.total>0?a("v-select",{attrs:{items:t.item[i.comboboxSelect],"item-text":i.itemtext,"item-value":i.itemvalue,multiple:i.IsMultiple||void 0!=t.item.constructBy&&!(0==t.item.constructBy)},on:{change:function(a){return e.selectChange(t.item)}},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):Array.isArray(t.item[i.value])?a("table",{staticClass:"tableInside"},e._l(t.item[i.value],(function(t,i){return a("tr",{key:i},[e._v("\n                            "+e._s(t)+"\n                        ")])})),0):"btn"==i.fieldType&&1==i.inlineEdit?a("v-btn",{on:{click:function(a){return e.recordData(t.item,t.index)}}},[e._v(e._s(i.textValue))]):"btn"==i.fieldType&&0==i.inlineEdit?a("v-btn",{on:{click:function(a){return e.recordData(t.item,t.index)}}},[e._v(e._s(i.textValue))]):e.formatFields&&e.formatFields[i.value]?a("span",[e._v(e._s(e.formatFields[i.value](t.item[i.value])))]):-1!=i.value.indexOf(".")?a("span",[e._v(e._s(t.item[i.value.split(".")[0]][i.value.split(".")[1]]))]):a("span",{domProps:{innerHTML:e._s(t.item[i.value])}})],1)}))],2):a("tr",{on:{click:function(a){return e.setActiveItem(t.item,t.index)}}},e._l(e.fheader,(function(i){return a("td",{directives:[{name:"show",rawName:"v-show",value:i.value!=e.mergeConfig[t.index].field||e.mergeConfig[t.index].isHead,expression:"h.value!=mergeConfig[props.index].field||mergeConfig[props.index].isHead"}],key:i.value,staticClass:"text-xs-center editTr",attrs:{rowspan:i.value!=e.mergeConfig[t.index].field?1:e.mergeConfig[t.index].rowspan}},[e.formatFields&&e.formatFields[i.value]?a("span",[e._v(e._s(e.formatFields[i.value](t.item[i.value])))]):"fileField"==i.fieldType?a("UploadFile",{ref:"uploadFile",refInFor:!0,staticStyle:{padding:"0",height:"40px"},attrs:{xs2:"",uploadBase64:e.uploadBase64,multiple:e.multiple,label:"上传附件",fileNames:t.item.fileName},on:{formData:e.getFormData},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"boolField"==i.fieldType&&1==i.inlineEdit?a("v-radio-group",{attrs:{row:""},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}},e._l(i.boolSelectField,(function(e){return a("v-radio",{key:e.dvalue,attrs:{label:e.dname,value:e.dvalue}})})),1):"checkbox"==i.fieldType?a("div",e._l(i.boolSelectField,(function(n){return a("v-checkbox",{key:n.dvalue,staticStyle:{"text-align":"center"},attrs:{value:n,label:n.dname},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}})})),1):"chatField"==i.fieldType&&1==i.inlineEdit?a("v-text-field",{model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"numberField"==i.fieldType&&1==i.inlineEdit?a("v-text-field",{attrs:{type:"number",rules:[function(e){return!i.required||void 0!=e&&e+""!=""||"必填项"},function(e){return!e||/^(0|[1-9][0-9]*)$/.test(e)||"只能是正整数"}]},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"comboboxField"==i.fieldType&&1==i.inlineEdit?a("v-select",{attrs:{label:i.text},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"btn"==i.fieldType&&1==i.inlineEdit?a("v-btn",{on:{click:function(a){return e.recordData(t.item,t.index)}}},[e._v(e._s(i.textValue))]):"btn"==i.fieldType&&0==i.inlineEdit?a("v-btn",{on:{click:function(a){return e.recordData(t.item,t.index)}}},[e._v(e._s(i.textValue))]):-1!=i.value.indexOf(".")?a("span",[e._v(e._s(t.item[i.value.split(".")[0]][i.value.split(".")[1]]))]):a("span",{domProps:{innerHTML:e._s(t.item[i.value])}})],1)})),0)]}}],null,!1,3884194297),model:{value:e.checkedItem,callback:function(t){e.checkedItem=t},expression:"checkedItem"}}):a("v-data-table",{staticClass:"elevation-1",attrs:{items:e.items,headers:e.headers,"hide-actions":"","hide-headers":e.hideHeaders,search:e.search,"select-all":e.allowActive,"no-data-text":""},scopedSlots:e._u([{key:"items",fn:function(t){return[""==e.fieldName||null==e.fieldName||void 0==e.fieldName?a("tr",{on:{click:function(a){return e.setActiveItem(t.item,t.index)}}},[e.allowActive?a("td",[a("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"props.selected"}})],1):e._e(),e._l(e.fheader,(function(i){return a("td",{key:i.value,staticClass:"text-xs-center"},["fileField"==i.fieldType?a("UploadFile",{ref:"uploadFile",refInFor:!0,staticStyle:{padding:"0",height:"40px"},attrs:{xs2:"",uploadBase64:e.uploadBase64,multiple:e.multiple,label:"上传附件"},on:{formData:e.getFormData},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"checkbox"==i.fieldType?a("div",e._l(i.boolSelectField,(function(n){return a("v-checkbox",{key:n.dvalue,staticStyle:{"text-align":"center"},attrs:{value:n,label:n.dname},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}})})),1):"chatField"==i.fieldType?a("v-text-field",{attrs:{label:i.text,"single-line":""},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"comboboxField"==i.fieldType&&0==e.total?a("v-select",{attrs:{items:t.item[i.comboboxSelect],"item-text":i.itemtext,"item-value":i.itemvalue,multiple:i.IsMultiple||void 0!=t.item.constructBy&&!(0==t.item.constructBy)},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"comboboxField"==i.fieldType&&e.total>0?a("v-select",{attrs:{items:t.item[i.comboboxSelect],"item-text":i.itemtext,"item-value":i.itemvalue,multiple:i.IsMultiple||void 0!=t.item.constructBy&&!(0==t.item.constructBy)},on:{change:function(a){return e.selectChange(t.item)}},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):Array.isArray(t.item[i.value])?a("table",{staticClass:"tableInside"},e._l(t.item[i.value],(function(t,i){return a("tr",{key:i},[e._v("\n                            "+e._s(t)+"\n                        ")])})),0):"btn"==i.fieldType&&1==i.inlineEdit?a("v-btn",{on:{click:function(a){return e.recordData(t.item,t.index)}}},[e._v(e._s(i.textValue))]):"btn"==i.fieldType&&0==i.inlineEdit?a("v-btn",{on:{click:function(a){return e.recordData(t.item,t.index)}}},[e._v(e._s(i.textValue))]):e.formatFields&&e.formatFields[i.value]?a("span",[e._v(e._s(e.formatFields[i.value](t.item[i.value])))]):-1!=i.value.indexOf(".")?a("span",[e._v(e._s(t.item[i.value.split(".")[0]][i.value.split(".")[1]]))]):a("span",{domProps:{innerHTML:e._s(t.item[i.value])}})],1)}))],2):a("tr",{on:{click:function(a){return e.setActiveItem(t.item,t.index)}}},e._l(e.fheader,(function(i){return a("td",{directives:[{name:"show",rawName:"v-show",value:i.value!=e.mergeConfig[t.index].field||e.mergeConfig[t.index].isHead,expression:"h.value!=mergeConfig[props.index].field||mergeConfig[props.index].isHead"}],key:i.value,staticClass:"text-xs-center editTr",attrs:{rowspan:i.value!=e.mergeConfig[t.index].field?1:e.mergeConfig[t.index].rowspan}},[e.formatFields&&e.formatFields[i.value]?a("span",[e._v(e._s(e.formatFields[i.value](t.item[i.value])))]):"fileField"==i.fieldType?a("UploadFile",{ref:"uploadFile",refInFor:!0,staticStyle:{padding:"0",height:"40px"},attrs:{xs2:"",uploadBase64:e.uploadBase64,multiple:e.multiple,label:"上传附件",fileNames:t.item.fileName},on:{formData:e.getFormData},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"boolField"==i.fieldType&&1==i.inlineEdit?a("v-radio-group",{attrs:{row:""},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}},e._l(i.boolSelectField,(function(e){return a("v-radio",{key:e.dvalue,attrs:{label:e.dname,value:e.dvalue}})})),1):"checkbox"==i.fieldType?a("div",e._l(i.boolSelectField,(function(n){return a("v-checkbox",{key:n.dvalue,staticStyle:{"text-align":"center"},attrs:{value:n,label:n.dname},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}})})),1):"chatField"==i.fieldType&&1==i.inlineEdit?a("v-text-field",{model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"numberField"==i.fieldType&&1==i.inlineEdit?a("v-text-field",{attrs:{type:"number",rules:[function(e){return!i.required||void 0!=e&&e+""!=""||"必填项"},function(e){return!e||/^(0|[1-9][0-9]*)$/.test(e)||"只能是正整数"}]},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"comboboxField"==i.fieldType&&1==i.inlineEdit?a("v-select",{attrs:{label:i.text},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"btn"==i.fieldType&&1==i.inlineEdit?a("v-btn",{on:{click:function(a){return e.recordData(t.item,t.index)}}},[e._v(e._s(i.textValue))]):"btn"==i.fieldType&&0==i.inlineEdit?a("v-btn",{on:{click:function(a){return e.recordData(t.item,t.index)}}},[e._v(e._s(i.textValue))]):-1!=i.value.indexOf(".")?a("span",[e._v(e._s(t.item[i.value.split(".")[0]][i.value.split(".")[1]]))]):a("span",{domProps:{innerHTML:e._s(t.item[i.value])}})],1)})),0)]}}]),model:{value:e.checkedItem,callback:function(t){e.checkedItem=t},expression:"checkedItem"}}),e.total>0&&0==e.localpagination?a("div",{staticClass:"text-xs-right pt-2 pagediv"},[a("div",{staticClass:"rightpage"},[a("v-pagination",{attrs:{length:e.pages,"total-visible":7},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1),a("div",{staticClass:"leftpage"},[a("v-select",{attrs:{items:e.comboboxValues,solo:""},model:{value:e.rowsPerPage,callback:function(t){e.rowsPerPage=t},expression:"rowsPerPage"}})],1),a("div",{staticClass:"clearpage"})]):e._e(),e.localpagination?a("div",{staticClass:"text-xs-right pt-2 pagediv"},[a("div",{staticClass:"rightpage"},[a("v-pagination",{attrs:{length:e.pages,"total-visible":7},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1),a("div",{staticClass:"leftpage"},[a("v-select",{attrs:{items:e.comboboxValues,solo:""},model:{value:e.rowsPerPage,callback:function(t){e.rowsPerPage=t},expression:"rowsPerPage"}})],1),a("div",{staticClass:"clearpage"})]):e._e()],1)},n=[],r=(a("4634"),a("bada"),a("7cfd"),a("e6d1"),a("8f42"),a("55b3")),s=a("d5b3"),l={components:{UploadFile:r["a"]},data:function(){return{search:"",checkedItem:[],uploadBase64:!1,multiple:!0,activeItem:"",avtiveIndex:"",comboboxValues:[10,25,50],rowsPerPage:10,page:1,pagination:{},perPage:[10,20,{text:"$vuetify.dataIterator.rowsPerPageAll",value:-1}]}},props:{total:{type:Number,default:0},items:{type:Array,required:!0},editConfig:{default:!1},headers:{type:Array},hideHeaders:{default:!0},localpagination:{default:!1},resourceName:{default:!1},allowSearch:{default:!1,type:Boolean},allowActive:{default:!1},formatFields:{type:Object},fieldName:{type:String}},computed:{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.total/this.pagination.rowsPerPage)},fheader:function(){var e=this;return e.editConfig&&e.headers.push({text:"操作"}),e.headers.filter((function(e){return e.value}))}},watch:{rowsPerPage:{handler:function(e){this.pagination.rowsPerPage&&(this.pagination.rowsPerPage=this.rowsPerPage)},deep:!0},page:{handler:function(e){this.pagination.page&&(1==e&&(this.pagination.page=0),this.pagination.page=this.page)},deep:!0},pagination:{handler:function(e){this.page==e.page&&this.rowsPerPage==e.rowsPerPage&&this.$emit("chooseAssignedUser",e.page,e.rowsPerPage)},deep:!0},checkedItem:{handler:function(e){this.$emit("changeItems",e)}},items:{handler:function(e){var t=this;this.IsLoading=!1,null==this.fieldName||""==this.fieldName?this.mergeConfig=e.map((function(a,i){return{field:t.fieldName,index:i,rowspan:e.filter((function(e){return e[t.fieldName]==a[t.fieldName]})).length,isHead:0==i||!(e[i-1<0?0:i-1][t.fieldName]==e[i][t.fieldName])}})):this.mergeConfig=e.map((function(a,i){return-1!=t.fieldName.indexOf(".")?{field:t.fieldName,index:i,rowspan:e.filter((function(e){return e[t.fieldName.split(".")[0]][t.fieldName.split(".")[1]]==a[t.fieldName.split(".")[0]][t.fieldName.split(".")[1]]})).length,isHead:0==i||!(e[i-1<0?0:i-1][t.fieldName.split(".")[0]][t.fieldName.split(".")[1]]==e[i][t.fieldName.split(".")[0]][t.fieldName.split(".")[1]])}:{field:t.fieldName,index:i,rowspan:e.filter((function(e){return e[t.fieldName]==a[t.fieldName]})).length,isHead:0==i||!(e[i-1<0?0:i-1][t.fieldName]==e[i][t.fieldName])}}))}}},mergeTable:function(e,t){var a=t.map((function(a,i){return-1!=e.indexOf(".")?{field:e,index:i,rowspan:t.filter((function(t){return t[e.split(".")[0]][e.split(".")[1]]==a[e.split(".")[0]][e.split(".")[1]]})).length,isHead:0==i||!(t[i-1<0?0:i-1][e.split(".")[0]][e.split(".")[1]]==t[i][e.split(".")[0]][e.split(".")[1]])}:{field:e,index:i,rowspan:t.filter((function(t){return t[e]==a[e]})).length,isHead:0==i||!(t[i-1<0?0:i-1][e]==t[i][e])}}));return a},methods:{getPagination:function(){return this.pagination?{page:this.page,rowsPerPage:this.rowsPerPage}:{page:1,rowsPerPage:10}},selectChange:function(e){this.$emit("selectChangeForSave",e)},setActiveItem:function(e,t){this.allowActive&&(this.activeItem=e),this.avtiveIndex=t},setCheckItems:function(e){this.checkedItem.push(e)},getCheckItems:function(){return this.checkedItem},unCheckItems:function(){this.checkedItem=[]},addOrUpdate:function(e){var t=this;this.resourceName?t.$Server.addOrUpdate(t.resourceName,e,e.id).then((function(e){e.success&&t.$Console.info("修改成功")}),(function(e){s["a"].alert(e)})):this.editConfig.find((function(e){return"save"==e.userfor})).click(e)},deleteItem:function(e,t){var a=this;this.resourceName?this.$Server.batchDelete(a.resourceName,[e]).then((function(){a.$Console.info("删除成功"),a.items=a.items.filter((function(t){return t.id!=e.id}))}),(function(e){s["a"].alert(e)})):this.editConfig.find((function(e){return"delete"==e.userfor})).click(e,t)},getFormData:function(e){var t=this,a=e.get("data");if(a){var i=a.name.substring(a.name.lastIndexOf(".")+1,a.name.length);"doc"!=i&&"docx"!=i&&"ppt"!=i&&"pptx"!=i&&"pdf"!=i&&"xls"!=i&&"xlsx"!=i&&"png"!=i&&"gif"!=i&&"jpg"!=i&&"bmp"!=i&&"jpeg"!=i&&"mp4"!=i&&(s["a"].alert("请检查文件格式是否正确"),t.$refs.uploadFile[this.avtiveIndex].clearFile())}},clearFile:function(){this.$refs.uploadFile&&this.$refs.uploadFile.forEach((function(e){e.clearFile()}))},recordData:function(e,t){this.$emit("recordData",e,t)}}},o=l,c=(a("25c5"),a("6691")),u=Object(c["a"])(o,i,n,!1,null,null,null);t["a"]=u.exports},"531b":function(e,t,a){"use strict";var i=a("f753"),n=a.n(i),r=a("a49b");t["a"]={http:function(e,t,a,i){var s=sessionStorage.getItem("token");if(!s)return window.location.href=r["config"].LoginUrl,!1;var l={Authorization:s},o={url:e,method:t,data:a,headers:l};n()(o).then((function(e){if(200==e.data.code)i.success(e);else{if(401==e.data.code)return i.success(e),window.location.href=r["config"].LoginUrl,!1;i.error(e.data.msg)}})).catch((function(e){i.error(e)}))},thttp:function(e,t,a,i){var r=sessionStorage.getItem("token"),s={Authorization:r},l={url:e,method:t,params:a,headers:s};n()(l).then((function(e){i.success(e)})).catch((function(e){i.error(e)}))}}},5330:function(e,t,a){},"538c":function(e,t,a){"use strict";var i=a("0cbd"),n=a.n(i);n.a},"53b8":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs4:"",md4:""}},[a("v-text-field",{attrs:{rules:[function(e){return!e||/^[\w|-]+$/.test(e)||"只能是数字,字母,下划线"}],label:"出库单编号"},model:{value:e.item.outStorageNo,callback:function(t){e.$set(e.item,"outStorageNo",t)},expression:"item.outStorageNo"}})],1),a("v-flex",{attrs:{xs4:""}},[a("datePicker",{attrs:{label:"出库日期",required:!0,rules:[function(e){return e&&""!=e||"必填项"},function(e){return new Date>new Date(e)||"出库日期不能大于当前日期"}]},model:{value:e.item.outStorageDate,callback:function(t){e.$set(e.item,"outStorageDate",t)},expression:"item.outStorageDate"}})],1),a("v-flex",{attrs:{xs4:"",md4:""}},[a("v-text-field",{attrs:{label:"出库人",required:"",disabled:"",rules:[e.rules.required]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                出库人 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.item.outStoragePersonName,callback:function(t){e.$set(e.item,"outStoragePersonName",t)},expression:"item.outStoragePersonName"}})],1),a("v-flex",{attrs:{xs4:"",md4:""}},[a("v-select",{attrs:{items:e.outTypeList,"item-text":"dname","return-object":"",disabled:"",rules:[e.rules.required]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                出库类型 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.item.type,callback:function(t){e.$set(e.item,"type",t)},expression:"item.type"}})],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:2!=e.item.type.dvalue,expression:"item.type.dvalue!=2"}],attrs:{xs4:"",md4:""}},[a("v-text-field",{attrs:{disabled:"",label:"来源"},model:{value:e.item.source,callback:function(t){e.$set(e.item,"source",t)},expression:"item.source"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"备注"},model:{value:e.item.description,callback:function(t){e.$set(e.item,"description",t)},expression:"item.description"}})],1)],1)],1)],1),a("div",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-form",{ref:"formAdd",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[0==e.isCheck?a("v-layout",{attrs:{row:""}},[a("p",{staticStyle:{"font-size":"16px","padding-left":"16px"}},[e._v("出库明细")]),a("div",[a("v-icon",{attrs:{disabled:e.isCannotEdit},on:{click:e.addShowSparePart}},[e._v("add")]),a("v-icon",{attrs:{disabled:e.isCannotEdit},on:{click:e.detailedTableDelete}},[e._v("remove")])],1)]):e._e(),a("v-layout",{directives:[{name:"show",rawName:"v-show",value:e.addShowSpareParts||""!=e.detailedAddItem.id&&""!=e.detailedAddItem,expression:"addShowSpareParts || (detailedAddItem.id!=''&&detailedAddItem !='')"}],staticStyle:{"padding-top":"20px"},attrs:{"align-center":"",row:"",wrap:""}},[a("v-flex",{attrs:{xs3:"",md3:""}},[a("v-select",{attrs:{items:e.sparePartsList,"item-text":"codeName",rules:[e.rules.required],"return-object":""},on:{change:e.selectSpareParts},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                    备件名称"),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.selectDetailedEditor.spareObj,callback:function(t){e.$set(e.selectDetailedEditor,"spareObj",t)},expression:"selectDetailedEditor.spareObj"}})],1),a("v-flex",{attrs:{xs3:"",md3:""}},[a("v-text-field",{attrs:{label:"规格型号:",disabled:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                    规格型号\n                                ")]},proxy:!0}]),model:{value:e.selectDetailedEditor.model,callback:function(t){e.$set(e.selectDetailedEditor,"model",t)},expression:"selectDetailedEditor.model"}})],1),a("v-flex",{attrs:{xs3:"",md3:""}},[a("v-text-field",{attrs:{label:"库存量",disabled:"",type:"number",rules:[function(e){return/^(0|[1-9][0-9]*)$/.test(e)||"只能是正整数"}]},model:{value:e.selectDetailedEditor.inventory,callback:function(t){e.$set(e.selectDetailedEditor,"inventory",t)},expression:"selectDetailedEditor.inventory"}})],1),a("v-flex",{attrs:{xs3:"",md3:""}},[a("v-text-field",{attrs:{label:"申请数量",disabled:2!=e.item.type.dvalue},model:{value:e.selectDetailedEditor.applyAmount,callback:function(t){e.$set(e.selectDetailedEditor,"applyAmount",t)},expression:"selectDetailedEditor.applyAmount"}})],1),a("v-flex",{attrs:{xs4:"",md4:""}},[a("v-select",{attrs:{items:e.storageLocationList,"item-text":"positionName",rules:[e.rules.required],"return-object":""},on:{change:e.changeStorageLocation},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                    出库位置"),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.selectDetailedEditor.storageLocation,callback:function(t){e.$set(e.selectDetailedEditor,"storageLocation",t)},expression:"selectDetailedEditor.storageLocation"}})],1),a("v-flex",{attrs:{xs3:"",md3:""}},[a("v-text-field",{attrs:{label:"出库数量",type:"number",rules:[function(e){return!!e||"必填项"},function(t){return t&&t<=e.inventory||"出库数量须在0-"+e.inventory}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                    出库数量"),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.selectDetailedEditor.amount,callback:function(t){e.$set(e.selectDetailedEditor,"amount",t)},expression:"selectDetailedEditor.amount"}})],1),a("v-flex",{attrs:{xs1:"",md1:""}},[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.updateSparePartInfo}},[e._v("添加")])],1)],1)],1),a("localDataTable",{ref:"detailedDataTable",attrs:{headers:e.addHeaders,hideHeaders:!1,sort:!0,items:e.item.outStorageSparePartList,allowActive:0==e.isCheck,hideOperation:!0},on:{rowDbClick:e.rowDbClick}})],1)],1)],1)},n=[],r=(a("7cfd"),a("0b34"),a("ed8b"),a("4634"),a("d5b3")),s=a("a7fe"),l=a("681f"),o=a("f05f"),c=a("f855"),u=a("1d53"),d={name:"sparePartOutStorageDetail",props:{item:{type:Object},sparePartsList:{type:Array,required:!0},isCheck:{type:Boolean,default:!1}},data:function(){return{valid:!0,isCannotEdit:!1,rules:{required:function(e){return!!e||"必填项"}},addHeaders:[{text:"序号",value:"",align:"center",sortable:!1},{text:"备件编号",value:"spareCode",align:"center",sortable:!1},{text:"备件名称",value:"spareName",align:"center",sortable:!1},{text:"规格型号",value:"model",align:"center",sortable:!1},{text:"库存量",value:"inventory",align:"center",sortable:!1},{text:"申请数量",value:"applyAmount",align:"center",sortable:!1},{text:"出库位置",value:"storageLocationName",align:"center",sortable:!1},{text:"出库数量",value:"amount",align:"center",sortable:!1}],outTypeList:[],sourceList:[],storageLocationList:[],storageLocationList2:[],equipmentModelList:[],selectDetailedEditor:{spareObj:{}},detailedAddItem:{id:""},addShowSpareParts:!1,tableId:1,inventory:0}},components:{dataTable:o["a"],localDataTable:c["a"],datePicker:u["a"]},computed:{},mounted:function(){this.init()},methods:{init:function(){var e=this;this.$Server.queryAll((new s["a"]).__name,{},{dname:"出库类型"}).then((function(t){e.outTypeList=t.datas})),this.$Server.queryAll("SparePosition").then((function(t){e.storageLocationList=t.datas,e.storageLocationList2=t.datas}))},validate:function(){return 1==this.$refs.form.validate()&&(this.item.amount=0,this.item.inventory=0,this.item.outStoragePerson=window.sessionStorage.getItem("userId"),!0)},addShowSparePart:function(){this.selectDetailedEditor={},this.$refs.formAdd.resetValidation(),this.addShowSpareParts=!0},detailedTableDelete:function(){var e=this,t=this.$refs.detailedDataTable.getCheckItems();this.$refs.detailedDataTable.getCheckItems().length<=0?r["a"].alert("请选中需要删除的数据"):l["a"].confirm("确定删除所选备件数据?","提示",500,(function(){t.forEach((function(t){e.item.outStorageSparePartList.splice(t,1)}))}),(function(){}))},rowDbClick:function(e){var t=this;this.$refs.formAdd.resetValidation(),0!==Object.keys(e).length?(t.detailedAddItem=JSON.parse(JSON.stringify(e)),t.selectDetailedEditor=JSON.parse(JSON.stringify(e))):(this.detailedAddItem=[],t.selectDetailedEditor={})},changeStorageLocation:function(){this.selectDetailedEditor.storageLocationName=this.selectDetailedEditor.storageLocation.positionName,this.selectDetailedEditor.storageLocationID=this.selectDetailedEditor.storageLocation.storageLocationID,this.inventory=this.selectDetailedEditor.storageLocation.inventory},updateSparePartInfo:function(){var e=this;if(1==this.$refs.formAdd.validate()){if(this.selectDetailedEditor.amount>this.selectDetailedEditor.inventory)return r["a"].alert("出库数量必须小于库存量！"),!1;if(this.addShowSpareParts){this.selectDetailedEditor.id=this.tableId++;var t=JSON.parse(JSON.stringify(this.selectDetailedEditor));this.item.outStorageSparePartList.push(t)}else{this.detailedAddItem=JSON.parse(JSON.stringify(this.selectDetailedEditor));var a=this.item.outStorageSparePartList.findIndex((function(t){return e.detailedAddItem.id==t.id}));this.item.outStorageSparePartList.splice(a,1,this.detailedAddItem)}this.addShowSpareParts=!1,this.detailedAddItem={id:""},this.selectDetailedEditor={}}},selectSpareParts:function(){var e=this,t=this;t.storageLocationList=JSON.parse(JSON.stringify(t.storageLocationList2));var a=this.sparePartsList.filter((function(t){return e.selectDetailedEditor.spareObj.codeName==t.codeName}));this.storageLocationList=this.storageLocationList.filter((function(e){return t.selectDetailedEditor.spareObj.id==e.sparePartsID})),this.selectDetailedEditor.spareCode=a[0].code,this.selectDetailedEditor.spareName=a[0].name,this.selectDetailedEditor.model=a[0].model,this.selectDetailedEditor.inventory=a[0].inventory,this.selectDetailedEditor.sparePartsID=a[0].id,this.inventory=a[0].inventory}}},p=d,m=a("6691"),f=Object(m["a"])(p,i,n,!1,null,"6552d5aa",null);t["a"]=f.exports},5498:function(e,t,a){},"54f5":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("cc1d"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4634"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__),vue__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("6e6d"),_controlTypeConfig__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("5bf7"),_message__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("bd12"),workflow_components_datetime_components_datePicker_vue__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("3e99"),workflow_components_datetime_components_index_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("287d");vue__WEBPACK_IMPORTED_MODULE_2__["default"].use(workflow_components_datetime_components_index_js__WEBPACK_IMPORTED_MODULE_6__["a"]),__webpack_exports__["a"]={name:"customForm",data:function(){return{tableBindDatas:{},tableSelectDatas:{},testBoxBindDatas:{},variables:{},inputTypes:_controlTypeConfig__WEBPACK_IMPORTED_MODULE_3__["a"],valid:!0,hasfor:!1,objid:""}},components:{datePicker:workflow_components_datetime_components_datePicker_vue__WEBPACK_IMPORTED_MODULE_5__["a"]},props:["formData"],methods:{initForm:function(e,t){var a=this;a.formData&&(a.setFormData(),e?(a.objid=e,a.$Server.queryObjectById(a.formData.sourcekey,e).then((function(e){a.hasfor=!0,a.$nextTick((function(){for(var t=0;t<a.formData.textboxs.length;t++){var i=e.data.data;for(var n in i)if(a.formData.textboxs[t].id==n){2==a.formData.textboxs[t].control&&i[n]?a.formData.textboxs[t].value=JSON.parse(i[n]):8==a.formData.textboxs[t].control?i[n]+""=="false"?a.formData.textboxs[t].value="0":i[n]+""=="true"?a.formData.textboxs[t].value="1":a.formData.textboxs[t].value=i[n]:a.formData.textboxs[t].value=i[n];break}}}))}))):a.hasfor=!0)},setFormData:function setFormData(){var self=this;self.formData.textboxs.forEach((function(e){var t=[];if(e.sourceBind&&e.sourceBind.sourceKey){var a=e.sourceBind.sourceKey;self.$Server.queryAll(a,{},{}).then((function(a){t=a.datas,self.$set(self.testBoxBindDatas,e.id,t)}),(function(e){return _message__WEBPACK_IMPORTED_MODULE_4__["a"].alert(e)}))}})),self.formData.customScript.scriptContent&&"beforeEdit"==self.formData.customScript.eventMoment&&setTimeout((function(){eval(self.formData.customScript.scriptContent)}),500)},getTitle:function(){return"自定义表单"},getFormData:function getFormData(){var self=this;if(1==self.$refs.form.validate()){self.formData.customScript.scriptContent&&"beforeSubmit"==self.formData.customScript.eventMoment&&eval(self.formData.customScript.scriptContent);var fdata={};return self.formData.textboxs.forEach((function(e){fdata[e.field]=e.value,e.processVar&&(self.variables[e.processVar]=e.value)})),fdata.id=self.objid,fdata}throw"验证不通过！"},getSourceKey:function(){return this.formData.sourcekey},getVariables:function(){return this.variables},guid:function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}}},"551a":function(e,t,a){"use strict";var i=a("f753"),n=a.n(i),r=a("f30f");t["a"]={http:function(e,t,a,i){var s=sessionStorage.getItem("token");if(!s)return window.location.href=r["a"].LoginUrl,!1;var l={Authorization:s},o={url:e,method:t,data:a,headers:l};n()(o).then((function(e){if(200==e.data.code)i.success(e);else{if(401==e.data.code)return i.success(e),window.location.href=r["a"].LoginUrl,!1;i.error(e.data.msg)}})).catch((function(e){i.error(e)}))},thttp:function(e,t,a,i){var r=sessionStorage.getItem("token"),s={Authorization:r},l={url:e,method:t,params:a,headers:s};n()(l).then((function(e){i.success(e)})).catch((function(e){i.error(e)}))}}},"556c":function(e,t,a){},"55b3":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-text-field",{staticStyle:{padding:"0","margin-bottom":"0"},attrs:{"prepend-icon":"attach_file","single-line":"",label:e.label,disabled:e.disabled,hint:e.hint,"persistent-hint":""},nativeOn:{click:function(t){return e.onFocus(t)}},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}}),a("input",{ref:"fileInput",staticClass:"nicai",attrs:{type:"file",multiple:e.multiple},on:{change:e.onFileChange}})],1)},n=[],r=a("3596"),s=(a("7cfd"),a("dea4")),l=(a("4634"),{data:function(){return{filename:"",filedate:[]}},mounted:function(){null!=this.fileNames&&void 0!=this.fileNames&&(this.filename=this.fileNames)},watch:{fileNames:{handler:function(e){void 0!=e&&null!=e&&(this.filename=e)},deep:!0},filename:{handler:function(e){e||(this.clearFile(),this.$emit("input",""))},deep:!0}},props:{label:{type:String,default:"Please choose..."},hint:{type:String,default:""},multiple:{type:Boolean,default:!1},uploadBase64:{type:Boolean,default:!0},fileNames:{type:String},disabled:{type:Boolean,default:!1}},methods:{getFormData:function(e){var t=new FormData;return Object(s["a"])(e).forEach((function(e){t.append("data",e,e.name)})),t},onFocus:function(){this.disabled||this.$refs.fileInput.click()},onFileChange:function(e){var t=this;this.filedata=[];var a=e.target.files||e.dataTransfer.files,i=this.getFormData(a);t.$emit("formData",i);var n=function(a){var i=e.target.files[a];if("object"==Object(r["a"])(i)){var n=new FileReader;n.readAsDataURL(i),n.onload=function(a){t.filedata.push({name:i.name,data:a.target.result,size:i.size}),t.filename=t.filedata.map((function(e){return e.name})).join(","),0==t.uploadBase64?(t.$emit("input",t.filedata),e.target.value=""):(t.$emit("input",t.filedata.map((function(e){return e.data}))[0]),e.target.value="")}}};for(var s in e.target.files)n(s)},clearFile:function(){this.filename="",this.$refs.fileInput.value=""}}}),o=l,c=(a("7499"),a("6691")),u=Object(c["a"])(o,i,n,!1,null,"5a54a454",null);t["a"]=u.exports},5612:function(e,t,a){"use strict";var i=a("a9ac"),n=a.n(i);n.a},"56d7":function(t,n,r){"use strict";r.r(n);r("de90"),r("cc1d"),r("0b34"),r("7cfd"),r("bada"),r("96dd"),r("a60a"),r("e783"),r("8b1f");var l=r("6e6d"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"app"}},[a("router-view")],1)},c=[],u=r("6691"),d={},p=Object(u["a"])(d,o,c,!1,null,null,null),f=p.exports,v=r("c478"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tertiary parentdiv"},[a("div",{staticClass:"tertiary home_div"},[a("div",{staticClass:"left_div",staticStyle:{float:"left"}},[a("div",{staticStyle:{border:"1px solid #e4e4e4",padding:"0px 10px 10px 10px","background-color":"#FFFFFF"}},[a("div",{staticStyle:{"font-size":"18px",color:"#646464","text-align":"right"}},[a("span",{staticClass:"display_inline"},[e._v("时间：")]),a("span",{staticClass:"display_inline",staticStyle:{"vertical-align":"middle","margin-right":"10px"}},[a("v-select",{staticStyle:{width:"150px"},attrs:{items:e.years,"item-text":"key","item-value":"value"},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}})],1),a("span",{staticClass:"display_inline",staticStyle:{"vertical-align":"middle"}},[a("v-select",{staticStyle:{width:"150px"},attrs:{items:e.items,"item-text":"key","item-value":"value"},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1),a("span",{staticClass:"display_inline",staticStyle:{margin:"0px 15px"}},[e._v("到")]),a("span",{staticClass:"display_inline",staticStyle:{"vertical-align":"middle"}},[a("v-select",{staticStyle:{width:"150px"},attrs:{items:e.items,"item-text":"key","item-value":"value"},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1),a("span",{staticClass:"display_inline",staticStyle:{"margin-left":"15px"}},[a("v-btn",{attrs:{color:"primary"},on:{click:e.searchInfo}},[e._v("查询")])],1)]),a("div",{staticClass:"home_bg",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"home_bgone"},[a("div",{staticStyle:{margin:"24px 0px 0px 20px",color:"#b7b6b6","font-size":"18px"}},[a("div",[e._v("故障次数")]),a("div",[a("span",{staticClass:"display_inline overflow",staticStyle:{color:"#e67333","font-size":"36px","max-width":"75px","vertical-align":"middle"},attrs:{title:e.eqpStoppageTaskDetail.eqpStoppageCount}},[e._v(e._s(e.eqpStoppageTaskDetail.eqpStoppageCount))]),a("span",[e._v("(次)")])])])]),a("div",{staticClass:"home_bgtwo"},[a("div",{staticStyle:{margin:"24px 0px 0px 20px",color:"#b7b6b6","font-size":"18px"}},[a("div",[e._v("故障率")]),a("div",[a("span",{staticStyle:{color:"#f13509","font-size":"36px"},attrs:{title:e.eqpStoppageTaskDetail.eqpStopRate}},[e._v(e._s(e.eqpStoppageTaskDetail.eqpStopRate))]),a("span",[e._v("%")])])])]),a("div",{staticClass:"home_bgthree"},[a("div",{staticStyle:{margin:"14px 0px 0px 20px",color:"#b7b6b6","font-size":"16px"}},[a("div",[e._v("平均故障")]),e._m(0),a("div",{staticStyle:{"margin-top":"-10px"}},[a("span",{staticClass:"display_inline overflow",staticStyle:{color:"#41b456","font-size":"36px","max-width":"85px","vertical-align":"middle"},attrs:{title:e.eqpStoppageTaskDetail.eqpResponseTime}},[e._v(e._s(e.eqpStoppageTaskDetail.eqpResponseTime))]),a("span",[e._v("min")])])])]),a("div",{staticClass:"home_bgfour"},[a("div",{staticStyle:{margin:"14px 0px 0px 20px",color:"#b7b6b6","font-size":"16px"}},[a("div",[e._v("平均故障")]),e._m(1),a("div",{staticStyle:{"margin-top":"-10px"}},[a("span",{staticClass:"display_inline overflow",staticStyle:{color:"#8e44ad","font-size":"36px","max-width":"85px","vertical-align":"middle"},attrs:{title:e.eqpStoppageTaskDetail.eqpRepairTime}},[e._v(e._s(e.eqpStoppageTaskDetail.eqpRepairTime))]),a("span",[e._v("小时")])])])]),a("div",{staticClass:"home_bgfive"},[a("div",{staticStyle:{margin:"14px 0px 0px 20px",color:"#b7b6b6","font-size":"16px"}},[a("div",[e._v("维修工时")]),a("div",[e._v("统计")]),a("div",{staticStyle:{"margin-top":"-10px"}},[a("span",{staticClass:"display_inline overflow",staticStyle:{color:"#16a085","font-size":"36px","max-width":"85px","vertical-align":"middle"},attrs:{title:e.eqpStoppageTaskDetail.totalRepairTime}},[e._v(e._s(e.eqpStoppageTaskDetail.totalRepairTime))]),a("span",[e._v("小时")])])])])]),a("div",{staticClass:"home_count"},[a("div",{staticClass:"display_inline",staticStyle:{"margin-left":"54px",height:"84px","line-height":"84px"}},[e._v("保养统计")]),a("div",{staticClass:"display_inline",staticStyle:{"margin-left":"30px","vertical-align":"top","margin-top":"10px"}},[a("div",{staticClass:"overflow widthone"},[a("span",{staticStyle:{"font-size":"18px"}},[e._v("计划：")]),a("span",{staticStyle:{color:"#2998e1"},attrs:{title:e.eqpStoppageTaskDetail.mainTaskCount}},[e._v(e._s(e.eqpStoppageTaskDetail.mainTaskCount))])]),a("div",{staticClass:"overflow widthone"},[a("span",{staticStyle:{"font-size":"18px"}},[e._v("实际：")]),a("span",{staticStyle:{color:"#2998e1"},attrs:{title:e.eqpStoppageTaskDetail.acMaintaskCount}},[e._v(e._s(e.eqpStoppageTaskDetail.acMaintaskCount))])])]),e._m(2),a("div",{staticClass:"display_inline",staticStyle:{"margin-left":"54px",height:"84px","line-height":"84px"}},[e._v("点巡检统计")]),a("div",{staticClass:"display_inline",staticStyle:{"margin-left":"30px","vertical-align":"top","margin-top":"10px"}},[a("div",{staticClass:"overflow widthtwo"},[a("span",{staticStyle:{"font-size":"18px"}},[e._v("计划：")]),a("span",{staticStyle:{color:"#2998e1"},attrs:{title:e.eqpStoppageTaskDetail.pointTaskCount}},[e._v(e._s(e.eqpStoppageTaskDetail.pointTaskCount))])]),a("div",{staticClass:"overflow widthtwo"},[a("span",{staticStyle:{"font-size":"18px"}},[e._v("实际：")]),a("span",{staticStyle:{color:"#2998e1"},attrs:{title:e.eqpStoppageTaskDetail.acPointTaskCount}},[e._v(e._s(e.eqpStoppageTaskDetail.acPointTaskCount))])])]),e._m(3),a("div",{staticClass:"display_inline",staticStyle:{"margin-left":"10px",height:"84px","line-height":"84px"}},[e._v("故障维修执行统计")]),a("div",{staticClass:"display_inline",staticStyle:{"margin-left":"30px","vertical-align":"top","margin-top":"10px"}},[a("div",{staticClass:"overflow widthtwo"},[a("span",{staticStyle:{"font-size":"18px"}},[e._v("计划：")]),a("span",{staticStyle:{color:"#2998e1"},attrs:{title:e.eqpStoppageTaskDetail.repairTaskCount}},[e._v(e._s(e.eqpStoppageTaskDetail.repairTaskCount))])]),a("div",{staticClass:"overflow widthtwo"},[a("span",{staticStyle:{"font-size":"18px"}},[e._v("实际：")]),a("span",{staticStyle:{color:"#2998e1"},attrs:{title:e.eqpStoppageTaskDetail.acRepairTaskCount}},[e._v(e._s(e.eqpStoppageTaskDetail.acRepairTaskCount))])])])])]),a("div",{staticStyle:{height:"294px",border:"1px solid #e4e4e4","background-color":"#FFFFFF","margin-top":"20px",padding:"10px 0px 0px 10px"},attrs:{id:"echart_one"}}),e._m(4)]),a("div",{staticStyle:{float:"left",width:"100%","padding-left":"20px"}},[a("div",{staticStyle:{border:"1px solid #e4e4e4","background-color":"#FFFFFF"}},[a("div",{staticClass:"secondary",staticStyle:{height:"48px","line-height":"48px"}},[e._m(5),a("span",{staticClass:"display_inline",staticStyle:{color:"#3f4458","margin-left":"10px","font-size":"18px","vertical-align":"middle"}},[e._v("待办事项")]),a("a",{attrs:{href:"javascript:void(0)"},on:{click:e.toMore}},[e._m(6)]),a("div",{staticStyle:{clear:"both"}})]),a("div",[a("v-data-table",{staticClass:"elevation-1",staticStyle:{height:"424px"},attrs:{headers:e.dHeaders,items:e.dSource,"no-data-text":"暂无","hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.name))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.processDefinitionName))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.createTime?t.item.createTime.substring(0,10):""))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.dueDate?t.item.dueDate.substring(0,10):""))])]}}])})],1),a("div",{staticClass:"secondary",staticStyle:{height:"48px","line-height":"48px"}},[e._m(7),a("span",{staticClass:"display_inline",staticStyle:{color:"#3f4458","margin-left":"10px","font-size":"18px","vertical-align":"middle"}},[e._v("我发起的")]),a("a",{attrs:{href:"javascript:void(0)"},on:{click:e.toMore}},[e._m(8)]),a("div",{staticStyle:{clear:"both"}})]),a("div",[a("v-data-table",{staticClass:"elevation-1",staticStyle:{height:"424px"},attrs:{headers:e.wHeaders,items:e.wSource,"no-data-text":"暂无","hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.processName))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.startTime?t.item.startTime.substring(0,10):""))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.endTime?t.item.endTime.substring(0,10):""))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.strStatus))])]}}])})],1)])]),a("div",{staticStyle:{clear:"both"}})])])},b=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("span",{staticStyle:{color:"#41b456"}},[e._v("间隔")]),e._v("时间")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("span",{staticStyle:{color:"#8e44ad"}},[e._v("维修")]),e._v("时间")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"display_inline"},[a("img",{attrs:{src:r("c4e7")}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"display_inline"},[a("img",{attrs:{src:r("c4e7")}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"20px"}},[a("div",{staticStyle:{float:"left",width:"48%",border:"1px solid #e4e4e4",height:"305px",padding:"10px 0px 0px 10px","background-color":"#FFFFFF"},attrs:{id:"echart_two"}}),a("div",{staticStyle:{float:"right",width:"48%",border:"1px solid #e4e4e4",height:"305px",padding:"10px 0px 0px 10px","background-color":"#FFFFFF"},attrs:{id:"echart_three"}}),a("div",{staticStyle:{clear:"both"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"display_inline",staticStyle:{"margin-left":"16px"}},[a("img",{attrs:{src:r("aa64")}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"display_inline",staticStyle:{"margin-right":"25px",float:"right"}},[a("img",{attrs:{src:r("6dc6")}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"display_inline",staticStyle:{"margin-left":"16px"}},[a("img",{attrs:{src:r("96d6")}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"display_inline",staticStyle:{"margin-right":"25px",float:"right"}},[a("img",{attrs:{src:r("6dc6")}})])}],g=(r("4634"),r("d5b3")),x=r("551a"),y=r("debc"),k=r.n(y),S={data:function(){return{startDate:"01",years:[],year:{},items:[{key:"1月",value:"01"},{key:"2月",value:"02"},{key:"3月",value:"03"},{key:"4月",value:"04"},{key:"5月",value:"05"},{key:"6月",value:"06"},{key:"7月",value:"07"},{key:"8月",value:"08"},{key:"9月",value:"09"},{key:"10月",value:"10"},{key:"11月",value:"11"},{key:"12月",value:"12"}],endDate:"12",dHeaders:[{text:"任务名称",align:"center",sortable:!1,value:"name"},{text:"流程名称",align:"center",sortable:!1,value:"processDefinitionName"},{text:"创建时间",align:"center",sortable:!1,value:"createTime"},{text:"截止时间",align:"center",sortable:!1,value:"dueDate"}],dSource:[],wHeaders:[{text:"流程名称",align:"center",sortable:!1,value:"processName"},{text:"开始时间",align:"center",sortable:!1,value:"startTime"},{text:"结束时间",align:"center",sortable:!1,value:"endTime"},{text:"状态",align:"center",sortable:!1,value:"strStatus"}],wSource:[],echartOne:null,echarTwo:null,echartThree:null,eqpStoppageTaskDetail:{}}},mounted:function(){var e=this;e.initialize()},created:function(){var e=(new Date).getFullYear();this.years=[],this.year=e;for(var t=0;t<5;t++)this.years.push({key:e-t+"年",value:e-t})},methods:{initialize:function(){var e=this,t=this.getTime(),a=t.startTime,i=t.endTime;this.$Server.queryAll("EqpStoppageReport",{},{startTime:a,endTime:i}).then((function(t){var a=[],i=[];if(t.datas&&t.datas.length>0){var n=t.datas.reverse();n.forEach((function(e){a.push(e.eqpCodeName),i.push(e.repairTime)}))}e.initEchartForTwo(i,a)})),this.$Server.queryAll("SpConsumeReport",{},{startTime:a,endTime:i}).then((function(t){var a=[],i=[];if(t.datas&&t.datas.length>0&&t.datas&&t.datas.length>0){var n=t.datas.reverse();n.forEach((function(e){a.push(e.spCodeName),i.push(e.count)}))}e.initEchartForThree(i,a)})),this.$Server.queryAll("EqpRepairTrendReport",{},{startTime:a,endTime:i}).then((function(t){if(e.dataSource=t.datas,t.datas&&t.datas.length>0){for(var a=t.datas[0].stopRateList,i=t.datas[0].repairTrendList,n=[],r=[],s=1;s<=12;s++)switch(s){case 1:e.conformRate(a,"01",n),e.confirmCount(i,"01",r);break;case 2:e.conformRate(a,"02",n),e.confirmCount(i,"02",r);break;case 3:e.conformRate(a,"03",n),e.confirmCount(i,"03",r);break;case 4:e.conformRate(a,"04",n),e.confirmCount(i,"04",r);break;case 5:e.conformRate(a,"05",n),e.confirmCount(i,"05",r);break;case 6:e.conformRate(a,"06",n),e.confirmCount(i,"06",r);break;case 7:e.conformRate(a,"07",n),e.confirmCount(i,"07",r);break;case 8:e.conformRate(a,"08",n),e.confirmCount(i,"08",r);break;case 9:e.conformRate(a,"09",n),e.confirmCount(i,"09",r);break;case 10:e.conformRate(a,"10",n),e.confirmCount(i,"10",r);break;case 11:e.conformRate(a,"11",n),e.confirmCount(i,"11",r);break;case 12:e.conformRate(a,"12",n),e.confirmCount(i,"12",r);break}e.initEchartForOne(n,r)}})),this.$Server.queryAll("EqpStatistic",{},{startTime:a,endTime:i}).then((function(t){t.datas&&t.datas.length>0&&(e.eqpStoppageTaskDetail=t.datas[0])})),x["a"].http(window.processForUrl.getUrlForTodos(1,7),"get",{},{success:function(t){e.dSource=t.data.data.rows}}),x["a"].http(window.processForUrl.getUrlForInitiated(1,7),"get",{},{success:function(t){e.wSource=t.data.data.rows}})},conformRate:function(e,t,a){var i=e.find((function(e){return e.itemName&&e.itemName.substring(4)==t}));i&&i.stopRate?a.push(i.stopRate):a.push(0)},confirmCount:function(e,t,a){var i=e.find((function(e){return e.itemName&&e.itemName.substring(4)==t}));i&&i.repairTime?a.push(i.repairTime):a.push(0)},getTime:function(){var e={};return e.startTime=this.year+"-"+this.startDate+"-01",e.endTime=this.year+"-"+this.endDate+"-31",e},toMore:function(){this.$router.push({path:"/schedule"})},searchInfo:function(){parseInt(this.startDate)>parseInt(this.endDate)?g["a"].alert("开始月份必须比结束月份小！"):this.initialize()},initEchartForThree:function(e,t){var a=this;a.echartThree=this.$echarts.init(document.getElementById("echart_three")),a.echartThree.setOption({title:{text:"备件消耗排行",textStyle:{color:"#3f4458",fontSize:18}},color:["#6890fb"],grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:t,axisLabel:{formatter:function(e){return e?e.length>10?e.substring(0,10)+"...":e:""}}},series:[{type:"bar",itemStyle:{normal:{color:new a.$echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"#6890fb"},{offset:1,color:"#9752fd"}])}},data:e}]})},initEchartForTwo:function(e,t){var a=this;a.echartTwo=this.$echarts.init(document.getElementById("echart_two")),a.echartTwo.setOption({title:{text:"设备故障排行",textStyle:{color:"#3f4458",fontSize:18}},color:["#fb9409"],grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:t,axisLabel:{formatter:function(e){return e?e.length>10?e.substring(0,10)+"...":e:""}}},series:[{type:"bar",itemStyle:{normal:{color:new a.$echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"#fb9409"},{offset:1,color:"#f9510b"}])}},data:e}]}),k()(window).resize((function(){a.echartTwo.resize()}))},initEchartForOne:function(e,t){var a=this;a.echartOne=this.$echarts.init(document.getElementById("echart_one")),a.echartOne.setOption({title:{text:"维修趋势分析",textStyle:{color:"#3f4458",fontSize:18}},color:["#ccd8e7","#4a7fbb"],tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:["维修时间","故障率"]},xAxis:[{type:"category",data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"维修时间(小时)",axisLabel:{formatter:"{value}"}},{type:"value",name:"故障率",min:0,max:1,axisLabel:{formatter:"{value}"}}],series:[{name:"维修时间",type:"bar",data:t},{name:"故障率",type:"line",yAxisIndex:1,data:e}]})}}},_=S,w=(r("8511"),Object(u["a"])(_,h,b,!1,null,"4052d6a4",null)),D=w.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bg-full-page bg back-fixed"},[a("div",{staticClass:"absolute-center",staticStyle:{"max-width":"525px"}},[a("div",[a("v-card",{staticClass:"login login_div"},[a("div",{staticClass:"loginHeader primary",staticStyle:{height:"100px"}},[a("div",[a("img",{attrs:{src:r("d4e7")}})])]),a("v-card-text",[a("div",{staticStyle:{"text-align":"center","font-size":"24px",color:"#0f3988",margin:"10px 0px 20px 0px"}},[e._v(e._s(e.info.systemName))]),a("v-form",{ref:"form",staticStyle:{width:"400px",margin:"0 auto"}},[a("v-text-field",{attrs:{label:"用户名","prepend-icon":"person",rules:[function(e){return!!e||"用户名不能为空."}],primary:""},model:{value:e.loginData.username,callback:function(t){e.$set(e.loginData,"username",t)},expression:"loginData.username"}}),a("v-text-field",{attrs:{label:"密码","prepend-icon":"lock",type:"password",rules:[function(e){return!!e||"密码不能为空."}]},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.submitForm())}},model:{value:e.loginData.password,callback:function(t){e.$set(e.loginData,"password",t)},expression:"loginData.password"}}),a("p",{staticStyle:{color:"red"}},[e._v(e._s(e.errorMessage))]),a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("v-checkbox",{attrs:{label:"记住我"},on:{change:e.setCookie},model:{value:e.checkbox,callback:function(t){e.checkbox=t},expression:"checkbox"}}),a("p",{staticStyle:{color:"#424242"}},[e._v("没有账号？请联系管理员")])],1),a("v-layout",[a("v-spacer"),a("v-btn",{staticClass:"pull-right",attrs:{color:"primary"},on:{click:function(t){return t.preventDefault(),e.submitForm()}}},[e._v("登录")])],1)],1)],1)],1)],1)])])},C=[],I=(r("e6d1"),r("f753")),q=r.n(I),O=r("531b"),j=r("250a"),F=(r("fafd"),r("a9b1"),{});function A(e){k()("#ms-configurator").animate({right:"0px"},400),k()(".ms-configurator-btn").animate({right:"-60px"},200)}function N(){k()("#ms-configurator").animate({right:"-310px"},200),k()(".ms-configurator-btn").animate({right:"20px"},400)}function L(){var e=k()(".ms-slidebar"),t=k()(".ms-site-container"),a=k()(".ms-toggle-left"),i=!1,n=!1;a.click((function(){n?(e.removeClass("open"),n=!1):(e.addClass("open"),n=!0),i=!0})),t.click((function(){!i&&n&&(e.removeClass("open"),n=!1),i=!1}))}!function(e,t,a){var i=e();e.fn.dropdownHover=function(a){return"ontouchstart"in document?this:(i=i.add(this.parent()),this.each((function(){var n,r,s=e(this),l=s.parent(),o={delay:e(this).data("delay"),hoverDelay:e(this).data("hover-delay"),instantlyCloseOthers:e(this).data("close-others")},c="show.bs.dropdown",u=e.extend(!0,{},{delay:0,hoverDelay:0,instantlyCloseOthers:!0},a,o);function d(e){t.clearTimeout(n),t.clearTimeout(r),r=t.setTimeout((function(){i.find(":focus").blur(),!0===u.instantlyCloseOthers&&i.removeClass("show"),t.clearTimeout(r),s.attr("aria-expanded","true"),l.addClass("show"),s.trigger(c)}),u.hoverDelay)}l.hover((function(a){if(!l.hasClass("show")&&!s.is(a.target))return!0;767<e(t).width()&&d(a)}),(function(){767<e(t).width()&&(t.clearTimeout(r),n=t.setTimeout((function(){s.attr("aria-expanded","false"),l.removeClass("show"),s.trigger("hide.bs.dropdown")}),u.delay))})),s.hover((function(a){if(!l.hasClass("show")&&!l.is(a.target)&&767<e(t).width())return!0;767<e(t).width()&&d(a)})),l.find(".dropdown-submenu").each((function(){var a,i=e(this);i.hover((function(){t.clearTimeout(a),i.children(".dropdown-menu").show(),i.siblings().children(".dropdown-menu").hide()}),(function(){var e=i.children(".dropdown-menu");a=t.setTimeout((function(){e.hide()}),u.delay)}))}))})))},e(document).ready((function(){}))}(k.a,window),k()(document).ready((function(){})),function(e){e(".input-number .btn-circle:first-of-type").on("click",(function(){e(".input-number input").val(parseInt(e(".input-number input").val(),10)-1)})),e(".input-number .btn-circle:last-of-type").on("click",(function(){e(".input-number input").val(parseInt(e(".input-number input").val(),10)+1)}))}(k.a),function(e){function t(t){var a=e(t);a.prop("disabled")||a.closest(".form-group").addClass("is-focused")}function a(a){var n=!1;(a.is(e.material.options.checkboxElements)||a.is(e.material.options.radioElements))&&(n=!0),a.closest("label").hover((function(){var a,i,r=e(this).find("input"),s=r.prop("disabled");n&&(a=e(this),i=s,(a.hasClass("checkbox-inline")||a.hasClass("radio-inline")?a:a.closest(".checkbox").length?a.closest(".checkbox"):a.closest(".radio")).toggleClass("disabled",i)),s||t(r)}),(function(){i(e(this).find("input"))}))}function i(t){e(t).closest(".form-group").removeClass("is-focused")}e.expr[":"].notmdproc=function(t){return!e(t).data("mdproc")},e.material={options:{validate:!0,input:!0,ripples:!0,checkbox:!0,togglebutton:!0,radio:!0,arrive:!0,autofill:!1,withRipples:[".btn:not(.btn-link)",".card-image",".navbar a:not(.withoutripple)",".dropdown-menu a",".nav-tabs a:not(.withoutripple)",".withripple",".pagination li:not(.active):not(.disabled) a:not(.withoutripple)"].join(","),inputElements:"input.form-control, textarea.form-control, select.form-control",checkboxElements:".checkbox > label > input[type=checkbox], label.checkbox-inline > input[type=checkbox]",togglebuttonElements:".togglebutton > label > input[type=checkbox]",radioElements:".radio > label > input[type=radio], label.radio-inline > input[type=radio]"},checkbox:function(t){a(e(t||this.options.checkboxElements).filter(":notmdproc").data("mdproc",!0).after("<span class='checkbox-material'><span class='check'></span></span>"))},togglebutton:function(t){a(e(t||this.options.togglebuttonElements).filter(":notmdproc").data("mdproc",!0).after("<span class='toggle'></span>"))},radio:function(t){a(e(t||this.options.radioElements).filter(":notmdproc").data("mdproc",!0).after("<span class='circle'></span><span class='check'></span>"))},input:function(t){e(t||this.options.inputElements).filter(":notmdproc").data("mdproc",!0).each((function(){var t=e(this),a=t.closest(".form-group");if(0!==a.length||"hidden"===t.attr("type")||t.attr("hidden")||(t.wrap("<div class='form-group'></div>"),a=t.closest(".form-group")),t.attr("data-hint")&&(t.after("<p class='help-block'>"+t.attr("data-hint")+"</p>"),t.removeAttr("data-hint")),e.each({"input-lg":"form-group-lg","input-sm":"form-group-sm"},(function(e,i){t.hasClass(e)&&(t.removeClass(e),a.addClass(i))})),t.hasClass("floating-label")){var i=t.attr("placeholder");t.attr("placeholder",null).removeClass("floating-label");var n=t.attr("id"),r="";n&&(r="for='"+n+"'"),a.addClass("label-floating"),t.after("<label "+r+"class='control-label'>"+i+"</label>")}null!==t.val()&&"undefined"!=t.val()&&""!==t.val()||a.addClass("is-empty"),0<a.find("input[type=file]").length&&a.addClass("is-fileinput")}))},attachInputEventHandlers:function(){var a=this.options.validate;e(document).on("keydown paste",".form-control",(function(t){var a;(void 0===(a=t).which||"number"==typeof a.which&&0<a.which&&!a.ctrlKey&&!a.metaKey&&!a.altKey&&8!=a.which&&9!=a.which&&13!=a.which&&16!=a.which&&17!=a.which&&20!=a.which&&27!=a.which)&&e(this).closest(".form-group").removeClass("is-empty")})).on("keyup change",".form-control",(function(){var t=e(this),i=t.closest(".form-group"),n=void 0===t[0].checkValidity||t[0].checkValidity();""===t.val()?i.addClass("is-empty"):i.removeClass("is-empty"),a&&(n?i.removeClass("has-error"):i.addClass("has-error"))})).on("focus",".form-control, .form-group.is-fileinput",(function(){t(this)})).on("blur",".form-control, .form-group.is-fileinput",(function(){i(this)})).on("change",".form-group input",(function(){var t=e(this);if("file"!=t.attr("type")){var a=t.closest(".form-group");t.val()?a.removeClass("is-empty"):a.addClass("is-empty")}})).on("change",".form-group.is-fileinput input[type='file']",(function(){var t=e(this).closest(".form-group"),a="";e.each(this.files,(function(e,t){a+=t.name+", "})),(a=a.substring(0,a.length-2))?t.removeClass("is-empty"):t.addClass("is-empty"),t.find("input.form-control[readonly]").val(a)}))},ripples:function(t){e(t||this.options.withRipples).ripples()},autofill:function(){var t=setInterval((function(){e("input[type!=checkbox]").each((function(){var t=e(this);t.val()&&t.val()!==t.attr("value")&&t.trigger("change")}))}),100);setTimeout((function(){clearInterval(t)}),1e4)},attachAutofillEventHandlers:function(){var t;e(document).on("focus","input",(function(){var a=e(this).parents("form").find("input").not("[type=file]");t=setInterval((function(){a.each((function(){var t=e(this);t.val()!==t.attr("value")&&t.trigger("change")}))}),100)})).on("blur",".form-group input",(function(){clearInterval(t)}))},init:function(t){this.options=e.extend({},this.options,t),e.fn.ripples&&this.options.ripples&&this.ripples(),this.options.input&&(this.input(),this.attachInputEventHandlers()),this.options.checkbox&&this.checkbox(),this.options.togglebutton&&this.togglebutton(),this.options.radio&&this.radio(),this.options.autofill&&(this.autofill(),this.attachAutofillEventHandlers()),document.arrive&&this.options.arrive&&(e.fn.ripples&&this.options.ripples&&document.arrive(this.options.withRipples,(function(){e.material.ripples(e(this))})),this.options.input&&document.arrive(this.options.inputElements,(function(){e.material.input(e(this))})),this.options.checkbox&&document.arrive(this.options.checkboxElements,(function(){e.material.checkbox(e(this))})),this.options.radio&&document.arrive(this.options.radioElements,(function(){e.material.radio(e(this))})),this.options.togglebutton&&document.arrive(this.options.togglebuttonElements,(function(){e.material.togglebutton(e(this))})))}}}(k.a),function(e,t,a,i){var n="ripples",r=null,s={};function l(t,a){(r=this).element=e(t),this.options=e.extend({},s,a),this._defaults=s,this._name=n,this.init()}l.prototype.init=function(){var a=this.element;a.on("mousedown touchstart",(function(i){if(!r.isTouch()||"mousedown"!==i.type){a.find(".ripple-container").length||a.append('<div class="ripple-container"></div>');var n=a.children(".ripple-container"),s=r.getRelY(n,i),l=r.getRelX(n,i);if(s||l){var o=r.getRipplesColor(a),c=e("<div></div>");c.addClass("ripple").css({left:l,top:s,"background-color":o}),n.append(c),t.getComputedStyle(c[0]).opacity,r.rippleOn(a,c),setTimeout((function(){r.rippleEnd(c)}),500),a.on("mouseup mouseleave touchend",(function(){c.data("mousedown","off"),"off"===c.data("animating")&&r.rippleOut(c)}))}}}))},l.prototype.getNewSize=function(e,t){return Math.max(e.outerWidth(),e.outerHeight())/t.outerWidth()*2.5},l.prototype.getRelX=function(e,t){var a=e.offset();return r.isTouch()?1===(t=t.originalEvent).touches.length&&t.touches[0].pageX-a.left:t.pageX-a.left},l.prototype.getRelY=function(e,t){var a=e.offset();return r.isTouch()?1===(t=t.originalEvent).touches.length&&t.touches[0].pageY-a.top:t.pageY-a.top},l.prototype.getRipplesColor=function(e){return e.data("ripple-color")?e.data("ripple-color"):t.getComputedStyle(e[0]).color},l.prototype.hasTransitionSupport=function(){var e=(a.body||a.documentElement).style;return e.transition!==i||e.WebkitTransition!==i||e.MozTransition!==i||e.MsTransition!==i||e.OTransition!==i},l.prototype.isTouch=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},l.prototype.rippleEnd=function(e){e.data("animating","off"),"off"===e.data("mousedown")&&r.rippleOut(e)},l.prototype.rippleOut=function(e){e.off(),r.hasTransitionSupport()?e.addClass("ripple-out"):e.animate({opacity:0},100,(function(){e.trigger("transitionend")})),e.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",(function(){e.remove()}))},l.prototype.rippleOn=function(e,t){var a=r.getNewSize(e,t);r.hasTransitionSupport()?t.css({"-ms-transform":"scale("+a+")","-moz-transform":"scale("+a+")","-webkit-transform":"scale("+a+")",transform:"scale("+a+")"}).addClass("ripple-on").data("animating","on").data("mousedown","on"):t.animate({width:2*Math.max(e.outerWidth(),e.outerHeight()),height:2*Math.max(e.outerWidth(),e.outerHeight()),"margin-left":-1*Math.max(e.outerWidth(),e.outerHeight()),"margin-top":-1*Math.max(e.outerWidth(),e.outerHeight()),opacity:.2},500,(function(){t.trigger("transitionend")}))},e.fn.ripples=function(t){return this.each((function(){e.data(this,"plugin_"+n)||e.data(this,"plugin_"+n,new l(this,t))}))}}(k.a,window,document),window.onresize=P;var E=window.onresize;function P(){for(var e=k()(".nav.nav-tabs"),t={},n={},r=0;r<e.length;r++){var l=r+1,o=k()(e[r]).children(),c=k()(e[r]).children().length;k()(o[o.length-1]).hasClass("ms-tabs-indicator")||(k()(e[r]).data("id",l),k()(e[r]).append('<span id="i'+l+'" class="ms-tabs-indicator"></span>'));var u=k()("#i"+l);t["tabW"+l]=[],n["tabL"+l]=[];var d=t["tabW"+l],p=n["tabL"+l],f=0;for(m=0;m<c;m++)p[m]=f,d[m]=k()(o[m]).width(),k()(o[m]).children().hasClass("active")&&u.css({left:p[m]+"px",width:d[m]+"px"}),f+=d[m]}k()(".nav.nav-tabs > li").click((function(e){var t=(s=k()(this).parent()).data("id");s.children().removeClass("current"),k()(this).addClass("current");for(var n=s.children(),r=0;r<n.length-1;r++)k()(n[r]).hasClass("current")&&k()("#i"+t).css({left:a["tabL"+t][r]+"px",width:i["tabW"+t][r]+"px"})}))}E.apply(window,[" On"]),k()("#ms-account-modal").on("shown.bs.modal",(function(e){setTimeout(P,700)})),F.initDom=function(){document.addEventListener("touchstart",(function(){}),!0),k.a.material.init(),Array.from(document.querySelectorAll(".js-player")).map((function(e){return new Plyr(e)})),L();var e,t=k()(".btn-back-top");k()(window).scroll((function(){400<k()(this).scrollTop()?t.addClass("back-show"):t.removeClass("back-show")})),(e=k.a)((function(){e(document).off("click.bs.tab.data-api",'[data-hover="tab"]'),e(document).on("mouseenter.bs.tab.data-api",'[data-hover="tab"]',(function(){e(this).tab("show")}))})),k()(".navbar").on("click mousedown mouseup touchstart","a.has_children",(function(){return k()(this).next("ul").hasClass("open_t")&&!k()(this).parents("ul").hasClass("open_t")?k()(".open_t").removeClass("open_t"):(k()(".open_t").not(k()(this).parents("ul")).removeClass("open_t"),k()(this).next("ul").addClass("open_t")),!1})),k()(document).on("click",":not(.has_children, .has_children *)",(function(){if(0<k()(".open_t").length)return k()(".open_t").removeClass("open_t"),k()(".open_t").parent().removeClass("open"),!1}));var a=k()(".ms-navbar"),i=(k()(".navbar-nav"),k()("body")),n=k()(".ms-site-container").hasClass("ms-nav-fixed");k()(window).scroll((function(){n||(120<k()(window).scrollTop()&&(a.addClass("shrink"),i.addClass("bd-scroll"),a.addClass("fixed-top"),k()("#selfcentercontent").css("min-height","calc(100% - 50px)")),k()(window).scrollTop()<121&&(a.removeClass("shrink"),i.removeClass("bd-scroll"),a.removeClass("fixed-top"),k()("#selfcentercontent").css("min-height","calc(100% - 118px)")))}));var r=!1;k()(".ms-conf-btn").click((function(){r?(r=!1,N()):(r=!0,A())})),k()(".ms-site-container").click((function(){r&&(r=!1,N())})),k()('[data-hover="dropdown"]').dropdownHover()};var $=F,M={name:"login",data:function(){return{info:window.infoConfig,loginData:{username:"",password:""},errorMessage:"",checkbox:!1}},mounted:function(){$.initDom(),this.getCookie()},destroyed:function(){j["a"].close()},methods:{submitForm:function(){var e=this;e.$refs.form.validate()&&(j["a"].load(),e.setCookie(),q()({url:"/api/Session",method:"post",data:this.loginData}).then((function(t){if(200==t.data.code){t.data.data.user&&(t.data.data.user.name=t.data.data.user.jobNumber+"("+t.data.data.user.username+")"),sessionStorage.setItem("token",t.data.data.token),sessionStorage.setItem("userViewModel",JSON.stringify(t.data.data.user)),sessionStorage.setItem("user",t.data.data.username);var a=t.data.data.user.id,i=t.data.data.user.username;if(sessionStorage.setItem("userId",a),sessionStorage.setItem("uname",i),""!=a){var n={userId:a};O["a"].http("/api/FunctionPermission?condition="+encodeURIComponent(JSON.stringify(n))+"&pageSize=0&pageIndex=0&orderBy=","get","",{success:function(t){sessionStorage.setItem("permission",JSON.stringify(t.data.data.rows)),e.$router.push({path:"/"})},error:function(t){j["a"].close(),e.errorMessage=t}})}else O["a"].http("/api/FunctionPermission","get","",{success:function(t){sessionStorage.setItem("permission",JSON.stringify(t.data.data.rows)),e.$router.push({path:"/"})},error:function(t){j["a"].close(),e.errorMessage=t}})}else j["a"].close(),e.errorMessage=t.data.msg})))},setCookie:function(){if(this.checkbox){var e=new Date;e.setDate(e.getDate()+60),document.cookie="tpmusername=".concat(this.loginData.username,"&password=").concat(this.loginData.password,";expires=").concat(e,";path=/")}else{var t=new Date;t.setDate(t.getDate()-1e3),document.cookie="tpmusername=".concat(this.loginData.username,"&password=").concat(this.loginData.password,";expires=").concat(t,";path=/")}},getCookie:function(){var e=this,t=(document.cookie||"").split("; ");t.forEach((function(t){if("tpmusername"==t.split("=")[0]){var a=(t||"").split("&"),i=[];a.length>0&&a.forEach((function(e){i.push((e||"").split("=")[1])})),e.loginData.username=i[0],e.loginData.password=i[1],e.checkbox=!0}else e.loginData.username="",e.loginData.password="",e.checkbox=!1}))}}},U=M,R=(r("decc"),Object(u["a"])(U,T,C,!1,null,"1125b11a",null)),V=R.exports,B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{staticClass:"ms-site-container"},[a("header",{staticClass:"ms-header ms-header-primary primary aaa"},[a("div",{staticClass:"container-full",staticStyle:{padding:"0px 20px"}},[a("div",{staticClass:"ms-title"},[a("div",{staticClass:"animated fadeInRight animation-delay-6"},[a("img",{staticStyle:{"vertical-align":"top",margin:"0px 20px 0px 0px"},attrs:{src:r("1f9c")}}),a("span",{staticStyle:{display:"inline-block","margin-top":"16px","font-weight":"bold","font-size":"24px"}},[e._v(e._s(e.info.systemName))])])]),a("div",{staticClass:"header-right",staticStyle:{"margin-top":"10px"}},[a("a",{staticClass:"btn-ms-power-off btn-circle btn-circle-primary ms-toggle-left animated zoomInDown animation-delay-10",attrs:{title:"回到主页"},on:{click:e.toHome}},[a("i",{staticClass:"iconfont iconfanhuizhuye"})]),a("a",{staticClass:"btn-ms-power-off btn-circle btn-circle-primary ms-toggle-left animated zoomInDown animation-delay-10",attrs:{title:"待办事项"},on:{click:e.toSchedule}},[a("i",{staticClass:"iconfont icondaibanshixiang"})]),a("a",{staticClass:"btn-circle btn-circle-primary no-focus animated zoomInDown animation-delay-8",staticStyle:{position:"relative"},attrs:{"data-toggle":"modal","data-target":"#ms-account-modal",title:"消息通知"},on:{click:e.showMessage}},[a("i",{staticClass:"iconfont iconxinxi"}),a("div",{staticStyle:{position:"absolute",top:"0px",left:"25px",width:"20px",height:"20px","line-height":"20px","font-size":"12px","background-color":"red","border-radius":"50%"}},[e._v("\n            "+e._s(e.msgcount))])]),a("a",{staticClass:"btn-ms-power-off btn-circle btn-circle-primary ms-toggle-left animated zoomInDown animation-delay-10",attrs:{title:"退出登录"},on:{click:e.logout}},[a("i",{staticClass:"iconfont icontuichu"})]),a("a",{staticClass:"btns",staticStyle:{position:"relative"}},[a("a",{staticClass:"btn-ms-menu animated zoomInDown animation-delay-10",staticStyle:{"margin-left":"8px"}},[a("i",{staticClass:"iconfont iconyonghuming",staticStyle:{"font-size":"20px"}})]),a("a",{staticClass:"btn-ms-menu animated zoomInDown animation-delay-10",staticStyle:{"margin-right":"5px"}},[a("span",{staticStyle:{display:"inline-block","vertical-align":"middle","padding-left":"5px"}},[e._v(e._s(e.username)),a("i",{staticClass:"zmdi zmdi-chevron-down",staticStyle:{"padding-left":"10px","vertical-align":"text-top"}})])]),a("div",{staticClass:"btns_div"},[a("v-card",[a("v-card-text",[a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:e.showChangePWD}},[e._v("修改密码")]),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:e.changeColor}},[e._v("主题配置")]),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:e.showForUs}},[e._v("关于我们")])],1)],1)],1)]),a("a",{staticClass:"btn-ms-menu btn-circle btn-circle-primary animated zoomInDown animation-delay-10",on:{click:function(t){return e.showLeftNav()}}},[a("i",{staticClass:"zmdi zmdi-menu"})])])])]),a("nav",{staticClass:"navbar navbar-expand-md navbar-static ms-navbar ms-navbar-primary primary",staticStyle:{"margin-bottom":"0px"}},[a("div",{staticClass:"container container-full",staticStyle:{padding:"0px"}},[a("div",{staticClass:"navbar-header"}),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"ms-navbar"}},[a("ul",{staticClass:"navbar-nav"},e._l(e.items,(function(t,i){return a("li",{key:i,class:e.classObject(i)},[a("a",{staticClass:"nav-link dropdowns-toggle animated fadeIn animation-delay-9",attrs:{"data-toggle":"dropdown","data-hover":"dropdown",role:"button","aria-haspopup":"true","aria-expanded":"false"}},[e._v(e._s(t.title)+"\n              "),a("i",{staticClass:"zmdi zmdi-chevron-down"})]),a("ul",{staticClass:"dropdown-menu"},e._l(t.items,(function(t,i){return a("li",{key:i},[a("router-link",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"subItem.isShow"}],staticClass:"dropdown-item",attrs:{to:t.toLink}},[e._v(e._s(t.title)+"\n                ")])],1)})),0)])})),0)]),a("a",{staticClass:"ms-toggle-left btn-navbar-menu",on:{click:function(t){return e.showLeftNav()}}},[a("i",{staticClass:"zmdi zmdi-menu"})])])]),a("div",{staticClass:"ms-paper",staticStyle:{"margin-bottom":"0px","min-height":"calc(100% - 118px)"},attrs:{id:"selfcentercontent"}},[a("div",{staticClass:"row secondary centercontent"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowLeftNav,expression:"isShowLeftNav"}],staticClass:"ms-paper-menu-left-container secondary lefcontent"},[a("div",{staticClass:"ms-paper-menu-left"},[a("div",{staticClass:"panel-menu collapse",attrs:{id:"collapseMenu"}},[a("ul",{staticClass:"panel-group ms-collapse-nav secondary",attrs:{id:"components-nav",role:"tablist","aria-multiselectable":"true"}},e._l(e.items,(function(t,i){return a("li",{key:i,staticClass:"card",attrs:{role:"tab"}},[t.items&&t.items.length>0?a("a",{staticClass:"collapsed withripple",attrs:{role:"button","data-toggle":"collapse",href:e.setDomid("#",i),"aria-expanded":"false","aria-controls":e.setDomid("",i)}},[a("i",{class:t.action}),a("span",{staticStyle:{"margin-top":"6px",display:"inline-block"}},[e._v(e._s(t.title))])]):e._e(),t.items&&t.items.length>0?a("ul",{staticClass:"panel-collapse collapse",attrs:{id:e.setDomid("",i),role:"tabpanel","data-parent":"#components-nav"}},e._l(t.items,(function(t,i){return a("li",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"subItem.isShow"}],key:i},[a("router-link",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"subItem.isShow"}],staticClass:"dropdown-item text-align",attrs:{to:t.toLink}},[e._v("\n                      "+e._s(t.title))])],1)})),0):e._e()])})),0)])])]),a("div",{staticClass:"ms-paper-content-container rightcontent fadeIn animated",style:{width:e.isShowLeftNav?"calc(100% - 220px)":"100%"}},[a("div",{staticClass:"ms-paper-content tertiary",staticStyle:{padding:"18px 30px 18px 25px"}},[a("router-view")],1)])])]),a("contentModal",{attrs:{title:"修改密码",IsShow:e.IsShow},on:{modalClosed:function(t){return e.hideWidow()},modalComfirmed:function(t){return e.confirm()}}},[a("v-container",{staticClass:"container_none"},[a("v-form",{ref:"form",attrs:{"lazy-validation":""}},[a("v-text-field",{attrs:{"append-icon":e.show1?"visibility":"visibility_off",rules:[e.rules.required],"error-messages":e.errorHints,type:e.show1?"text":"password",label:"原密码"},on:{blur:function(t){return t.preventDefault(),e.checkPwd(t)},"click:append":function(t){e.show1=!e.show1}},model:{value:e.oldpwd,callback:function(t){e.oldpwd=t},expression:"oldpwd"}}),a("v-text-field",{staticClass:"input-group--focused",attrs:{"append-icon":e.show2?"visibility":"visibility_off",type:e.show2?"text":"password",label:"新密码",rules:[e.rules.required,e.rules.min,e.rules.max]},on:{"click:append":function(t){e.show2=!e.show2}},model:{value:e.newPwd,callback:function(t){e.newPwd=t},expression:"newPwd"}}),a("v-text-field",{staticClass:"input-group--focused",attrs:{"append-icon":e.show3?"visibility":"visibility_off",type:e.show3?"text":"password",label:"重复密码",rules:[e.rules.required,e.rules.same,e.rules.min,e.rules.max]},on:{"click:append":function(t){e.show3=!e.show3}},model:{value:e.cnewPwd,callback:function(t){e.cnewPwd=t},expression:"cnewPwd"}})],1)],1)],1),a("contentModal",{attrs:{title:"关于我们",IsShow:e.IsShowForUs,IsShowComfirmed:"true",width:"600"},on:{modalClosed:function(t){return e.hideWidowForUs()}}},[a("v-container",{staticClass:"container_none",staticStyle:{padding:"15px"}},[a("iframe",{staticStyle:{width:"100%",border:"none",height:"220px"},attrs:{src:"/static/info.html",scrolling:"no"}})])],1),a("div",{staticClass:"ms-configurator primary",staticStyle:{right:"-310px"},attrs:{id:"ms-configurator"}},[a("div",{staticClass:"ms-configurator-title primary"},[a("h3",[a("i",{staticClass:"fa fa-gear"}),e._v("主题配置")]),a("a",{staticClass:"ms-conf-btn withripple",attrs:{href:"javascript:void(0);"}},[a("i",{staticClass:"zmdi zmdi-close"}),a("div",{staticClass:"ripple-container"})])]),a("div",{staticClass:"panel-group",attrs:{id:"accordion_conf",role:"tablist","aria-multiselectable":"true"}},[a("div",{staticClass:"panel panel-default"},[a("div",{staticClass:"card-collapse collapse show",attrs:{id:"ms-collapse-conf-1",role:"tabpanel","aria-labelledby":"ms-conf-header-color","data-parent":"#accordion_conf"}},[a("div",{staticClass:"panel-body"},[a("div",{staticClass:"ms-colors-container",attrs:{id:"color-options"}},e._l(e.colorbox,(function(t){return a("a",{key:t.key,class:e.setBoxClass(t.key),attrs:{href:"javascript:void(0);","data-color":t.key},on:{click:function(a){return e.boxClick(t.key,t.value)}}},[e._v(e._s(t.key))])})),0),a("div",{staticClass:"ms-color-shine",attrs:{id:"grad-options"}},[a("h4",{staticClass:"no-mb text-center"},[e._v("颜色亮度")]),a("span",[e._v("300")]),a("span",[e._v("400")]),a("span",[e._v("500")]),a("span",[e._v("600")]),a("span",[e._v("700")]),a("span",[e._v("800")]),e._l(e.getColorBrightness,(function(t,i){return a("a",{key:t,class:e.setColorBrightnessClass(t,i),attrs:{href:"javascript:void(0)","data-shine":t},on:{click:function(a){return e.colorClick(t)}}},[e._v(e._s(t))])}))],2)])])])])])],1)},z=[],Y=r("a2a7"),H=r("f81e"),J=r("8333"),G=new J["a"](new H["a"]),Z={name:"home",data:function(){var e=this;return{username:sessionStorage.getItem("uname"),isIe:window.isIe,selectColor:"",selectColorBrightness:"",colorbox:window.colors,info:window.infoConfig,drawer:!0,IsShowForUs:!1,mini:!0,right:null,IsShow:!1,show1:!1,show2:!1,show3:!1,oldpwd:"",newPwd:"",cnewPwd:"",currentUserName:"",errorHints:[],isShowLeftNav:!0,user:"",msgcount:0,version:"",timer:{},rules:{required:function(e){return!!e||"必填项"},same:function(t){return e.newPwd==t||"两次密码不一致"},min:function(e){return e&&e.length>=6||"至少6个字符"},max:function(e){return e&&e.length<=16||"至多16个字符"}},items:[{action:"nav_00",title:"主页",items:[{title:"主页",toLink:"/",isShow:!0}]},{action:"nav_01",title:"设备管理",items:[{title:"设备台账",toLink:"/equipment",isShow:this.$per("Equipment","m")},{title:"设备运行管理",toLink:"/runningEquipment",isShow:this.$per("RunningEquipment","m")},{title:"设备盘点",toLink:"/eqpInventoryTask",isShow:this.$per("EqpInventoryTask","m")},{title:"设备购置",toLink:"/eqpPurchaseTask",isShow:this.$per("EqpPurchaseTask","m")},{title:"验收标准管理",toLink:"/eqpAcceptanceStandard",isShow:this.$per("EqpAcceptanceStandard","m")},{title:"设备租赁",toLink:"/eqpRentalTask",isShow:this.$per("EqpRentalTask","m")},{title:"设备调拨",toLink:"/EqpAllocateTask",isShow:this.$per("EqpAllocateTask","m")},{title:"设备闲置处理",toLink:"/eqpUnusedTrendTask",isShow:this.$per("EqpUnusedTrendTask","m")},{title:"仪器校准管理",toLink:"/meteringEquipmentMain",isShow:this.$per("MeteringEquipment","m")}]},{action:"nav_04",title:"保养管理",items:[{title:"保养标准",toLink:"/maintainStandard",isShow:this.$per("MaintainStandard","m")},{title:"保养计划",toLink:"/maintenancePlan",isShow:this.$per("MaintenancePlan","m")},{title:"保养工单",toLink:"/maintainRecord",isShow:this.$per("MaintenanceRecord","m")}]},{action:"nav_06",title:"点巡检管理",items:[{title:"点巡检标准",toLink:"/pointCheckStd",isShow:this.$per("PointInspectionStandards","m")},{title:"点巡检计划",toLink:"/pointInspectionPlan",isShow:this.$per("PointInspectionPlan","m")},{title:"点巡检工单",toLink:"/pointInspectionTask",isShow:this.$per("PointInspectionRecord","m")}]},{action:"nav_02",title:"备件管理",items:[{title:"备件台账",toLink:"/spareParts",isShow:this.$per("SpareParts","m")},{title:"备件出入库",toLink:"/sparePartStorage",isShow:this.$per("SparePartsStorage","m")},{title:"备件盘点",toLink:"/sparePartsInventory",isShow:this.$per("SparePartsInventory","m")},{title:"备件购置",toLink:"/spPurchaseTask",isShow:this.$per("SpPurchaseTask","m")},{title:"备件领用",toLink:"/spReceiveTask",isShow:this.$per("SpReceiveTask","m")},{title:"备件送修",toLink:"/spRepairTask",isShow:this.$per("SpRepairTask","m")},{title:"备件报废",toLink:"/spScrapTask",isShow:this.$per("SpScrapTask","m")},{title:"工装治具",toLink:"/fixturetool",isShow:this.$per("Fixturetool","m")}]},{action:"nav_08",title:"维修管理",items:[{title:"维修标准",toLink:"/repairStandard",isShow:this.$per("RepairStandard","m")},{title:"维修工单",toLink:"/repairTask",isShow:this.$per("RepairTask","m")},{title:"故障报修",toLink:"/eqpStoppageTask",isShow:this.$per("EqpStoppageTask","m")}]},{action:"nav_09",title:"教育培训",items:[{title:"知识库",toLink:"/knowledge",isShow:this.$per("Knowledge","m")},{title:"培训路径",toLink:"/trainingPath",isShow:this.$per("TrainingPath","m")},{title:"培训管理",toLink:"/training",isShow:this.$per("Training","m")}]},{action:"nav_10",title:"持续改善",items:[{title:"持续改善",toLink:"/improveApply",isShow:this.$per("ImproveApply","m")}]},{action:"nav_05",title:"组织管理",items:[{title:"组织架构管理",toLink:"/organization",isShow:this.$per("Organization","m")},{title:"来往单位管理",toLink:"/company",isShow:this.$per("Company","m")},{title:"备件仓库管理",toLink:"/storage",isShow:this.$per("Storage","m")}]},{action:"nav_03",title:"系统管理",items:[{title:"用户管理",toLink:"/user",isShow:this.$per("User","m")},{title:"岗位管理",toLink:"/position",isShow:this.$per("Position","m")},{title:"角色权限管理",toLink:"/authority",isShow:this.$per("Permission","m")},{title:"文档管理",toLink:"/documentManage",isShow:this.$per("Document","m")},{title:"日志管理",toLink:"/operatelog",isShow:this.$per("Operatelog","m")},{title:"数据字典",toLink:"/datadict",isShow:this.$per("Datadict","m")},{title:"数据备份",toLink:"/databackuplog",isShow:this.$per("Databackuplog","m")},{title:"系统配置",toLink:"/systemSetup",isShow:this.$per("SystemSetup","m")},{title:"编码规则配置",toLink:"/codeRule",isShow:this.$per("Databackuplog","m")}]},{action:"nav_07",title:"工作流",items:[{title:"自定义表单",toLink:"/customForm",isShow:this.$per("CustomForm","m")},{title:"流程模型",toLink:"/processModel",isShow:this.$per("ProcessModel","m")},{title:"待办任务",toLink:"/processTask",isShow:this.$per("ProcessTask","m")},{title:"已办任务",toLink:"/processOverTask",isShow:this.$per("ProcessTask","m")},{title:"我发起的",toLink:"/processLaunchTaskForMe",isShow:this.$per("ProcessTask","m")}]},{action:"nav_11",title:"统计分析报表",items:[{title:"仪器统计",toLink:"/meteringEquipmentStatic",isShow:!0},{title:"保养统计",toLink:"/maintainStatistics",isShow:!0},{title:"点巡检统计",toLink:"/pointInspectionStatistics",isShow:!0},{title:"备件统计",toLink:"/spManageStatis",isShow:!0},{title:"设备统计",toLink:"/eqpManageStatis",isShow:!0},{title:"培训统计",toLink:"/trainingStatistics",isShow:!0},{title:"组织统计",toLink:"/organizeStatistics",isShow:!0},{title:"故障统计",toLink:"/faultStatistics",isShow:!0},{title:"改善统计",toLink:"/improveStatistics",isShow:!0},{title:"维修统计",toLink:"/repaireStatistics",isShow:!0}]}]}},components:{contentModal:Y["a"]},created:function(){this.selectColor=localStorage.getItem("selectColor"),this.selectColorBrightness=localStorage.getItem("selectColorBrightness")},computed:{getColorBrightness:function(){for(var e=0,t=0;t<this.colorbox.length;t++)if(this.colorbox[t].key==this.selectColor){e=t;break}return this.colorbox[e].value}},mounted:function(){var e=this;e.currentUserName=sessionStorage.getItem("user")||"游客",$.initDom(),e.getUnreadCount(),e.init()},destroyed:function(){clearInterval(this.timer)},methods:{toHome:function(){this.$router.push({path:"/"})},boxClick:function(e,t){this.selectColor=e,this.selectColorBrightness=t[2],localStorage.setItem("selectColor",e),localStorage.setItem("selectColorBrightness",t[2]),this.colorClick(t[2])},colorClick:function(e){this.selectColorBrightness=e,localStorage.setItem("selectColorBrightness",e),this.$vuetify.theme.primary=e,this.$vuetify.theme.accent=e},setColorBrightnessClass:function(e,t){var a={"ms-color-box":!0,grad:!0};return 0==t?a["c300"]=!0:1==t?a["c400"]=!0:2==t?a["c500"]=!0:3==t?a["c600"]=!0:4==t?a["c700"]=!0:5==t&&(a["c800"]=!0),e==this.selectColorBrightness&&(a["active"]=!0),a[this.selectColor]=!0,a},setBoxClass:function(e){var t={"ms-color-box":!0,"ms-color-box-primary":!0};return t[e]=!0,e==this.selectColor&&(t["active"]=!0),t},changeColor:function(){k()("#ms-configurator").animate({right:"0px"})},hideWidowForUs:function(){this.IsShowForUs=!1},showForUs:function(){this.IsShowForUs=!0},init:function(){var e=this;this.timer=setInterval(this.getUnreadCount,window.messageUpdateTime),O["a"].http("/anonymous/getTpmVersion ","GET",null,{success:function(t){200==t.data.code&&(e.version=t.data.data)}})},getUnreadCount:function(){var e=this;this.$Server.queryAll(G.getModelName(),null,{unreadCount:"unread"}).then((function(t){e.msgcount=t.page.total}),(function(e){return g["a"].alert(e)}))},showLeftNav:function(){this.isShowLeftNav=!this.isShowLeftNav},setDomid:function(e,t){return e+"first"+t},classObject:function(e){return{"nav-item":!0,dropdown:!0}},toggleNav:function(){this.$refs.childLaynav.toggleNav()},logout:function(){var e=this;O["a"].http("/api/Session","DELETE","",{success:function(t){e.$Console.showJson(t),200==t.data.code&&(sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),e.$router.push({path:"/login"}))}})},checkPwd:function(){var e=this;if(this.oldpwd.length<6&&(e.errorHints="至少6个字符"),this.oldpwd.length>=16&&(e.errorHints="至多16个字符"),this.oldpwd.length>0){var t={pwd:this.oldpwd};O["a"].http("/api/UserInfo?condition="+encodeURIComponent(JSON.stringify(t))+"&pageSize=0&pageIndex=0&orderBy=","get","",{success:function(t){1!=t.data.data.total?e.errorHints="密码错误":(e.errorHints="",e.user=t.data.data.rows[0].id)},error:function(t){e.errorMessage=t.data.msg}})}},showChangePWD:function(){this.IsShow=!0},hideWidow:function(){this.errorHints=[],this.$refs.form.reset(),this.IsShow=!1},confirm:function(){if(this.$refs.form.validate()){var e=this,t={id:this.user,password:this.newPwd};O["a"].http("/api/UserInfo?t="+Date.now(),"PUT",t,{success:function(){e.IsShow=!1,g["a"].alert("修改成功请重新登录"),e.logout()},error:function(t){e.errorMessage=t.data.msg}})}},showMessage:function(){this.$router.push({path:"/sysMsgRecevier"})},toSchedule:function(){this.$router.push({path:"/schedule"})}}},W=Z,Q=(r("d1ef"),r("81e3"),Object(u["a"])(W,B,z,!1,null,"8f3d9614",null)),K=Q.exports;l["default"].use(v["a"]);var X=new v["a"]({base:"",routes:[{path:"/login",name:"login",component:V},{path:"/print",login:"print",component:function(){return r.e("chunk-979cead2").then(r.bind(null,"0ea4"))}},{path:"/eqpInventoryPrint",name:"eqpInventoryPrint",component:function(){return r.e("chunk-2d2253e8").then(r.bind(null,"e425"))}},{path:"/sparePartsInventoryPrint",name:"./sparePartsInventoryPrint",component:function(){return r.e("chunk-6fdff16b").then(r.bind(null,"0673"))}},{path:"/eqpPrint",name:"eqpPrint",component:function(){return r.e("chunk-2d0cfea5").then(r.bind(null,"666e"))}},{path:"",component:K,children:[{path:"/",name:"home",component:D},{path:"/demo",name:"demo",component:function(){return r.e("chunk-2d0a2db3").then(r.bind(null,"0063"))}},{path:"/user",name:"user",component:function(){return Promise.all([r.e("chunk-7aa0aee5"),r.e("chunk-0ee9a171")]).then(r.bind(null,"1963"))}},{path:"/position",name:"position",component:function(){return Promise.all([r.e("chunk-7aa0aee5"),r.e("chunk-06d4a917")]).then(r.bind(null,"d5f9"))}},{path:"/authority",name:"authority",component:function(){return r.e("chunk-982dc07e").then(r.bind(null,"a38a"))}},{path:"/resourcesAuthority",name:"resourcesAuthority",component:function(){return r.e("chunk-b035ae2c").then(r.bind(null,"cfc7"))}},{path:"/organization",name:"organization",component:function(){return r.e("chunk-fba88358").then(r.bind(null,"ce8c"))}},{path:"/company",name:"company",component:function(){return Promise.all([r.e("chunk-7aa0aee5"),r.e("chunk-2d22498d")]).then(r.bind(null,"e18c"))}},{path:"/datadict",name:"datadict",component:function(){return r.e("chunk-200ea4ae").then(r.bind(null,"adb2"))}},{path:"/storage",name:"storage",component:function(){return Promise.all([r.e("chunk-7aa0aee5"),r.e("chunk-2d0b9bb5")]).then(r.bind(null,"33cb"))}},{path:"/storageLocation",name:"storageLocation",component:function(){return r.e("chunk-60eefe4f").then(r.bind(null,"6f16"))}},{path:"/databackuplog",name:"databackuplog",component:function(){return r.e("chunk-2d217a3f").then(r.bind(null,"c81e"))}},{path:"/operatelog",name:"operatelog",component:function(){return r.e("chunk-2d0d7c47").then(r.bind(null,"77e6"))}},{path:"/runningEquipment",name:"runningEquipment",component:function(){return r.e("chunk-a72f5926").then(r.bind(null,"a65e"))}},{path:"/systemSetup",name:"systemSetup",component:function(){return r.e("chunk-b6f792a0").then(r.bind(null,"34b5"))}},{path:"/documentManage",name:"documentManage",component:function(){return r.e("chunk-17cc8582").then(r.bind(null,"ccc7"))}},{path:"/formDesign",name:"formDesign",component:function(){return r.e("chunk-dd5b776e").then(r.bind(null,"8f31"))}},{path:"/customForm",name:"customForm",component:function(){return r.e("chunk-03453285").then(r.bind(null,"1b56"))}},{path:"/process",name:"process",component:function(){return Promise.all([r.e("chunk-1eeb1176"),r.e("chunk-2d21f820")]).then(r.bind(null,"d9b7"))}},{path:"/processTask",name:"processTask",component:function(){return Promise.all([r.e("chunk-1eeb1176"),r.e("chunk-2d21b499")]).then(r.bind(null,"beaa"))}},{path:"/processOverTask",name:"processOverTask",component:function(){return Promise.all([r.e("chunk-1eeb1176"),r.e("chunk-2d0cc437")]).then(r.bind(null,"4cd6"))}},{path:"/processModelDesign",name:"processModelDesign",component:function(){return r.e("chunk-33927d0c").then(r.bind(null,"2869"))}},{path:"/processModel",name:"processModel",component:function(){return Promise.all([r.e("chunk-1eeb1176"),r.e("chunk-2d21f2a9")]).then(r.bind(null,"d953"))}},{path:"/processLaunchTaskForMe",name:"processLaunchTaskForMe",component:function(){return Promise.all([r.e("chunk-1eeb1176"),r.e("chunk-c8a31db8")]).then(r.bind(null,"9c3d"))}},{path:"/equipment",name:"equipment",component:function(){return Promise.all([r.e("chunk-7aa0aee5"),r.e("chunk-2d0bd670")]).then(r.bind(null,"2c9b"))}},{path:"/meteringEquipment",name:"meteringEquipment",component:function(){return Promise.all([r.e("chunk-7aa0aee5"),r.e("chunk-8edddaca")]).then(r.bind(null,"c467"))}},{path:"/meteringEquipmentMain",name:"meteringEquipmentMain",component:function(){return Promise.all([r.e("chunk-7aa0aee5"),r.e("chunk-8edddaca"),r.e("chunk-7897b7c0")]).then(r.bind(null,"265d"))}},{path:"/eqpAcceptanceStandard",name:"eqpAcceptanceStandard",component:function(){return Promise.all([r.e("chunk-7aa0aee5"),r.e("chunk-2d0e5f15")]).then(r.bind(null,"9745"))}},{path:"/maintenancePlan",name:"maintenancePlan",component:function(){return Promise.all([r.e("chunk-7aa0aee5"),r.e("chunk-52dd456d")]).then(r.bind(null,"d9a3"))}},{path:"/maintainStandard",name:"maintainStandard",component:function(){return Promise.all([r.e("chunk-7aa0aee5"),r.e("chunk-04e686ee"),r.e("chunk-326976a8")]).then(r.bind(null,"30ff"))}},{path:"/spareParts",name:"spareParts",component:function(){return Promise.all([r.e("chunk-7aa0aee5"),r.e("chunk-2b098bcb")]).then(r.bind(null,"8202"))}},{path:"/maintainRecord",name:"maintainRecord",component:function(){return Promise.all([r.e("chunk-7aa0aee5"),r.e("chunk-62db736f")]).then(r.bind(null,"fe12"))}},{path:"/pointCheckStd",name:"pointCheckStd",component:function(){return Promise.all([r.e("chunk-7aa0aee5"),r.e("chunk-04e686ee"),r.e("chunk-01aef11d")]).then(r.bind(null,"b753"))}},{path:"/pointInspectionTask",name:"pointInspectionTask",component:function(){return r.e("chunk-0aa6530b").then(r.bind(null,"1d10"))}},{path:"/test",name:"test",component:function(){return r.e("chunk-2d0a2db3").then(r.bind(null,"0063"))}},{path:"/pointInspectionPlan",name:"pointInspectionPlan",component:function(){return Promise.all([r.e("chunk-7aa0aee5"),r.e("chunk-be66bcc8")]).then(r.bind(null,"123d"))}},{path:"/codeRule",name:"/codeRule",component:function(){return r.e("chunk-74a8262d").then(r.bind(null,"6e442"))}},{path:"/sysMsgRecevier",name:"/sysMsgRecevier",component:function(){return Promise.all([r.e("chunk-7aa0aee5"),r.e("chunk-2d21b2f9")]).then(r.bind(null,"bf65"))}},{path:"/eqpInventoryTask",name:"./eqpInventoryTask",component:function(){return r.e("chunk-0e503371").then(r.bind(null,"7683"))}},{path:"/eqpPurchaseTask",name:"./eqpPurchaseTask",component:function(){return Promise.all([r.e("chunk-7aa0aee5"),r.e("chunk-415329ba")]).then(r.bind(null,"8584"))}},{path:"/sparePartStorage",name:"sparePartStorage",component:function(){return r.e("chunk-2fc1d2cf").then(r.bind(null,"77e3"))}},{path:"/documentReview",name:"./documentReview",component:function(){return r.e("chunk-9edb8df8").then(r.bind(null,"585f"))}},{path:"/spPurchaseTask",name:"SpPurchaseTask",component:function(){return Promise.all([r.e("chunk-7aa0aee5"),r.e("chunk-282e281c")]).then(r.bind(null,"8131a"))}},{path:"/sparePartsInventory",name:"./sparePartsInventory",component:function(){return r.e("chunk-26e158eb").then(r.bind(null,"10ab"))}},{path:"/EqpAllocateTask",name:"./EqpAllocateTask",component:function(){return r.e("chunk-0e511b9a").then(r.bind(null,"9639"))}},{path:"/eqpRentalTask",name:"eqpRentalTask",component:function(){return r.e("chunk-df4fbd8e").then(r.bind(null,"85cb"))}},{path:"/eqpUnusedTrendTask",name:"eqpUnusedTrendTask",component:function(){return r.e("chunk-0e4feb54").then(r.bind(null,"5a0a"))}},{path:"/eqpStoppageTask",name:"eqpStoppageTask",component:function(){return r.e("chunk-0e511601").then(r.bind(null,"93b2"))}},{path:"/spReceiveTask",name:"SpReceiveTask",component:function(){return r.e("chunk-0e6640e4").then(r.bind(null,"fe3a"))}},{path:"/spRepairTask",name:"SprepairTask",component:function(){return r.e("chunk-0e658160").then(r.bind(null,"f241"))}},{path:"/spScrapTask",name:"spScrapTask",component:function(){return r.e("chunk-0e6549df").then(r.bind(null,"da9d"))}},{path:"/repairStandard",name:"repairStandard",component:function(){return r.e("chunk-58b555dc").then(r.bind(null,"69c1"))}},{path:"/repairTask",name:"repairTask",component:function(){return Promise.all([r.e("chunk-55031b22"),r.e("chunk-22de65ab")]).then(r.bind(null,"a306"))}},{path:"/knowledge",name:"knowledge",component:function(){return Promise.all([r.e("chunk-55031b22"),r.e("chunk-0cbacb0d")]).then(r.bind(null,"25c2"))}},{path:"/trainingPath",name:"trainingPath",component:function(){return r.e("chunk-0eefdee8").then(r.bind(null,"863f"))}},{path:"/training",name:"training",component:function(){return Promise.all([r.e("chunk-55031b22"),r.e("chunk-e1722276")]).then(r.bind(null,"99e9"))}},{path:"/improveApply",name:"improveApply",component:function(){return r.e("chunk-0e65ce56").then(r.bind(null,"edaa"))}},{path:"/schedule",name:"schedule",component:function(){return Promise.all([r.e("chunk-1eeb1176"),r.e("chunk-c8a31db8"),r.e("chunk-78369d26")]).then(r.bind(null,"764e"))}},{path:"/meteringEquipmentStatic",name:"meteringEquipmentStatic",component:function(){return r.e("chunk-7697ea0e").then(r.bind(null,"5666"))}},{path:"/maintainStatistics",name:"maintainStatistics",component:function(){return r.e("chunk-464658b8").then(r.bind(null,"0582"))}},{path:"/pointInspectionStatistics",name:"pointInspectionStatistics",component:function(){return r.e("chunk-2b1fd67e").then(r.bind(null,"4d85"))}},{path:"/pointcheckStatic",name:"pointcheckStatic",component:function(){return r.e("chunk-13cf8b80").then(r.bind(null,"9ed1"))}},{path:"/eqpManageStatis",name:"eqpManageStatis",component:function(){return r.e("chunk-405f0983").then(r.bind(null,"1395"))}},{path:"/trainingStatistics",name:"trainingStatistics",component:function(){return r.e("chunk-1fcc477e").then(r.bind(null,"b9e3"))}},{path:"/organizeStatistics",name:"organizeStatistics",component:function(){return r.e("chunk-57fb5987").then(r.bind(null,"c7a6"))}},{path:"/faultStatistics",name:"faultStatistics",component:function(){return r.e("chunk-4e351056").then(r.bind(null,"5754"))}},{path:"/spManageStatis",name:"spManageStatis",component:function(){return r.e("chunk-6ab08734").then(r.bind(null,"35dd"))}},{path:"/fixturetool",name:"fixturetool",component:function(){return r.e("chunk-2d221807").then(r.bind(null,"cb2d"))}},{path:"/improveStatistics",name:"improveStatistics",component:function(){return r.e("chunk-5dad86e1").then(r.bind(null,"2163"))}},{path:"/repaireStatistics",name:"repaireStatistics",component:function(){return r.e("chunk-4727f340").then(r.bind(null,"2214"))}}]}]}),ee=r("591a"),te=r("b490"),ae=new te["a"],ie={state:{DataSource:[],dateFormats:[],connectors:[],totalDatas:1},actions:{GetCodeRule:function(e,t){e.dispatch;var a=e.commit,i=t.page,n=t.rowsPerPage;ae.queryAll("CodeRule",{page:i,rowsPerPage:n}).then((function(e){a("GetCodeRule",e)}))},getDateFormat:function(e,t){e.dispatch;var a=e.commit;ae.queryAll("Datadict",{},t).then((function(e){a("getDateFormat",e)}))},getConnector:function(e,t){e.dispatch;var a=e.commit;ae.queryAll("Datadict",{},t).then((function(e){a("getConnector",e)}))}},mutations:{GetCodeRule:function(e,t){null!=t&&(e.DataSource=t.datas,e.totalDatas=t.page.total)},gridEdit:function(e,t){e.showItem=t},getDateFormat:function(e,t){null!=t&&(e.dateFormats=t.datas)},getConnector:function(e,t){t&&(e.connectors=t.datas)}}};l["default"].use(ee["a"]);var ne=new ee["a"].Store({modules:{CodeRule:ie},state:{forms:[],newPermisions:[],oldPermisions:[]},mutations:{regiterForms:function(e,t){var a=t.name,i=t.model;e.forms.push({name:a,model:i})}},actions:{}}),re=r("7c3d"),se=r.n(re),le=(r("7340"),r("ebd9"),r("7ebb"),r("b42a"),r("f661")),oe=r.n(le),ce=r("1e17"),ue=r("07c5"),de=r("8907"),pe=r("adf0"),me=(r("63ff"),r("f8f9")),fe=r("7300"),ve=r("e9e3"),he=(r("a49b"),function(){function e(){Object(fe["a"])(this,e),this.createType=1,this.restUrl="/"}return Object(ve["a"])(e,[{key:"setRed",value:function(e){return"<div style='color: red'>"+e+"</div>"}},{key:"setSuccess",value:function(e){return"<div style='color: #229f24'>"+e+"</div>"}},{key:"setWarn",value:function(e){return"<div style='color: #FB8C00'>"+e+"</div>"}},{key:"setStart",value:function(e){return"<div style='color: #808080'>"+e+"</div>"}},{key:"setRedBackground",value:function(e){return"<div style='border:0px;background: red;color: white;color: white;height: 48px;vertical-align: middle;line-height: 48px;'>"+e+"</div>"}},{key:"setBlueBackground",value:function(e){return"<div style='border:0px;background: #83d944;color: white;color: white;height: 48px;vertical-align: middle;line-height: 48px;'>"+e+"</div>"}},{key:"queryCodeType",value:function(){var e=Object(me["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(new te["a"]).queryAll("/CodeRule",{},{codeType:t}).then((function(e){a=e.datas[0].createType}),(function(e){return console.log(e)}));case 2:return e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"compareDate",value:function(e,t){var a=Date.parse(e),i=Date.parse(t);return a>i}},{key:"getLocalFotmatTime",value:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,i=e.getDate();e.getHours(),e.getMinutes(),e.getSeconds();a>=1&&a<=9&&(a="0"+a),i>=0&&i<=9&&(i="0"+i);var n=t+a+i;return n}},{key:"getLocalTime",value:function(){var e=new Date,t="-",a=":",i=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),s=e.getHours(),l=e.getMinutes(),o=e.getSeconds();n>=1&&n<=9&&(n="0"+n),r>=0&&r<=9&&(r="0"+r),s>=0&&s<=9&&(s="0"+s),l>=0&&l<=9&&(l="0"+l),o>=0&&o<=9&&(o="0"+o);var c=i+t+n+t+r+" "+s+a+l+a+o;return c}},{key:"getLocalReduceTime",value:function(e){var t=new Date,a="-",i=":",n=t.getFullYear(),r=t.getMonth()+1-e,s=t.getDate(),l=t.getHours(),o=t.getMinutes(),c=t.getSeconds();r>=1&&r<=9&&(r="0"+r),s>=0&&s<=9&&(s="0"+s),l>=0&&l<=9&&(l="0"+l),o>=0&&o<=9&&(o="0"+o),c>=0&&c<=9&&(c="0"+c);var u=n+a+r+a+s+" "+l+i+o+i+c;return u}},{key:"filterByName",value:function(e,t){for(var a=[],i=0;i<e.length;i++){var n=e[i];if(0==i)a.push(n);else{var r=a.filter((function(e){return e[t]==n[t]}));0==r.length&&a.push(n)}}return a}},{key:"unique1",value:function(e){for(var t=[],a=0;a<e.length;a++)-1===t.indexOf(e[a])&&t.push(e[a]);return t}}]),e}()),be={OperationPermission:!0,LoginPermission:!0,AllowConsole:!0},ge=function(){function e(t,a){Object(fe["a"])(this,e),this.debug=a,this.info("开启打印功能：".concat(t))}return Object(ve["a"])(e,[{key:"info",value:function(e){this.allowConsole(),window.console.info(e)}},{key:"log",value:function(e){this.allowConsole(),window.console.log(e)}},{key:"error",value:function(e){this.allowConsole(),window.console.error(e)}},{key:"warn",value:function(e){this.allowConsole(),window.console.error(e)}},{key:"groupBegin",value:function(e){this.allowConsole(),window.console.group(e)}},{key:"groupEnd",value:function(e){this.allowConsole(),window.console.groupEnd(e)}},{key:"timeBegin",value:function(e){this.allowConsole(),window.console.time(e)}},{key:"timeEnd",value:function(e){this.allowConsole(),window.console.timeEnd(e)}},{key:"count",value:function(e){this.allowConsole(),window.console.count(e)}},{key:"showJson",value:function(e){this.allowConsole(),window.console.dir(e)}},{key:"showTable",value:function(e){this.allowConsole(),window.console.table(e)}},{key:"allowConsole",value:function(){this.debug}}]),e}(),xe=(r("60be"),r("fc2c")),ye=r.n(xe),ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-text-field",{attrs:{label:"学生名称"},model:{value:e.student.name,callback:function(t){e.$set(e.student,"name",t)},expression:"student.name"}})},Se=[],_e={name:"studentform",data:function(){return{student:{}}},methods:{initForm:function(e){var t=this;this.student={},e&&this.$Server.queryObjectById("Order",e).then((function(e){t.student=e.data.data}))},getTitle:function(){return"学生"},getFormData:function(){return this.student},getSourceKey:function(){return"Order"}}},we=_e,De=Object(u["a"])(we,ke,Se,!1,null,"f3148056",null),Te=De.exports,Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("contentModal",{attrs:{title:e.title,IsShow:e.IsShow,isProcess:!0,isEnd:e.isProcessEnd},on:{modalClosed:function(t){return e.modalClosed()},modalComfirmed:function(t){return e.modalComfirmed()},processEnd:function(t){return e.processEnd()}}},[e._t("default"),e.hackReset?a(e.currentView,{ref:"mainForm",tag:"component",attrs:{formData:e.formData},on:{changeTaskid:e.changeTaskid}}):e._e(),0!=e.PreviewType&&e.commentSource?a("v-timeline",{staticStyle:{width:"100%"},attrs:{dense:"","align-top":""}},e._l(e.commentSource,(function(t,i){return a("v-timeline-item",{class:{clearpadding:i+1==e.commentSource.length},scopedSlots:e._u([{key:"icon",fn:function(){return[a("v-avatar",[a("img",{attrs:{src:e.getImage(t.avatar)}})])]},proxy:!0}],null,!0)},[a("div",[a("div",{staticClass:"timetitle"},[t.createdFullName?a("span",{staticClass:"userid"},[e._v(e._s("("+t.userId+")"+t.createdFullName))]):e._e(),t.action?a("span",{staticClass:"time",staticStyle:{"margin-right":"10px"}},[e._v("("+e._s(t.action)+")")]):e._e(),a("span",{staticClass:"time"},[e._v(e._s(t.createdTime))])]),a("div",{domProps:{innerHTML:e._s(e.setFullMessage(t.fullMessage))}})])])})),1):e._e()],2),a("contentModal",{attrs:{title:e.nexttitle,IsShow:e.IsNext},on:{modalClosed:function(t){return e.modalClosedForProcess()},modalComfirmed:function(t){return e.modalComfirmedForProcess()}}},[e._t("default"),a("div",[a("div",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("b",[e._v("审批结果：")]),a("v-radio-group",{attrs:{row:""},on:{change:e.comboboxChange},model:{value:e.flows,callback:function(t){e.flows=t},expression:"flows"}},e._l(e.flowitems,(function(e,t){return a("v-radio",{key:t,attrs:{label:e.name,value:e}})})),1)],1),a("selectUser",{ref:"selectUser",attrs:{value:e.excuteMan,required:!0,label:"执行人",multiple:!1,placeholder:e.placeholder,disabled:e.isdisabled}}),2==e.PreviewType?a("v-textarea",{attrs:{label:"审批意见"},model:{value:e.suggestion,callback:function(t){e.suggestion=t},expression:"suggestion"}}):e._e()],1)],1)])],2)],1)},Ie=[],qe=(r("c041"),r("8f42"),r("776f")),Oe=r("bd12"),je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.disabled?a("v-text-field",{attrs:{"append-icon":"fa-search",disabled:"",label:e.label,placeholder:e.placeholder},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n        "+e._s(e.label)+" "),e.required?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]},proxy:!0}]),model:{value:e.users,callback:function(t){e.users=t},expression:"users"}}):a("v-text-field",{attrs:{"append-icon":"zmdi-close",readonly:"",label:e.label,placeholder:e.placeholder,rules:[function(t){return!e.required||t&&""!=t||"必填项"}]},on:{"click:append":e.clearSelect,focus:e.selectPersons},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n        "+e._s(e.label)+" "),e.required?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]},proxy:!0}],null,!1,2637317356),model:{value:e.users,callback:function(t){e.users=t},expression:"users"}}),a("User",{ref:"usersAdd",attrs:{IsShowAddUser:e.IsShowAddUser,multiple:e.multiple},on:{userComfirmed:e.userComfirmed,userClosed:e.userClosed,getselectUserList:e.getselectUserList}})],1)},Fe=[],Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-dialog",{attrs:{width:"830px",persistent:!0,scrollable:""},model:{value:e.IsShowAddUser,callback:function(t){e.IsShowAddUser=t},expression:"IsShowAddUser"}},[a("v-form",{ref:"form",staticStyle:{width:"100%"},attrs:{valid:"true"}},[a("v-card",[a("v-card-title",{staticClass:"primary"},[a("span",{staticClass:"headline",staticStyle:{color:"#fff"}},[e._v("添加人员")])]),a("v-card-text",{staticStyle:{height:"500px"}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{staticStyle:{"border-right":"1px silver dashed",padding:"10px"},attrs:{xs6:""}},[a("div",{staticStyle:{"margin-bottom":"10px","margin-left":"10px"}},[a("v-text-field",{attrs:{clearable:"","hide-details":"","single-line":"",primary:"",label:"请输入工号或姓名"},on:{"click:clear":e.clearMessage},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a("v-icon",{on:{click:function(t){return e.doSearch()}}},[e._v("search")])]},proxy:!0}]),model:{value:e.searchfx,callback:function(t){e.searchfx=t},expression:"searchfx"}})],1),0==e.isSearch?a("v-tabs",{staticClass:"usertabs",attrs:{"slider-color":"primary"},model:{value:e.activeValue,callback:function(t){e.activeValue=t},expression:"activeValue"}},[a("v-tab",{key:1,attrs:{actives:1}},[e._v("\n                                    组织\n                                ")]),a("v-tab",{key:2,attrs:{actives:2}},[e._v("\n                                    岗位\n                                ")]),a("v-tab-item",{key:1},[a("div",{staticStyle:{"max-width":"370px",padding:"10px 0px"}},[a("treeView",{ref:"childTreeView",attrs:{Source:e.treeItems,radio:!0},on:{afterSelectChange:e.selectChanged}})],1)]),a("v-tab-item",{key:2},[a("div",{staticStyle:{"max-width":"370px",padding:"10px 0px"}},[a("treeView",{ref:"childTreeView",attrs:{Source:e.positionItems,radio:!0},on:{afterSelectChange:e.selectPosition}})],1)])],1):a("v-data-table",{staticClass:"elevation-1 usertable",attrs:{"hide-actions":"",items:e.userSource,headers:e.headers,"no-data-text":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-center"},[a("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s(t.item.name))]),a("span",{staticStyle:{"margin-left":"20px","margin-top":"10px",cursor:"pointer"},on:{click:function(a){return e.addUser(t.item,t.index)}}},[a("v-icon",{staticStyle:{"font-size":"18px"}},[e._v("add")])],1)])]}}])})],1),a("v-flex",{staticStyle:{padding:"10px"},attrs:{xs6:""}},[a("div",{staticStyle:{"margin-bottom":"20px","font-size":"16px","font-weight":"bold"}},[e._v("已选中人员")]),a("v-data-table",{staticClass:"elevation-1 usertable",attrs:{"hide-actions":"",items:e.selectUserSource,headers:e.headers,"no-data-text":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-center"},[a("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s(t.item.name))]),a("span",{staticStyle:{"margin-left":"20px","margin-top":"10px",cursor:"pointer"},on:{click:function(a){return e.removeUser(t.item,t.index)}}},[a("v-icon",{staticStyle:{"font-size":"18px"}},[e._v("clear")])],1)])]}}])})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{"margin-right":"30px"},attrs:{color:"primary"},on:{click:function(t){return e.userComfirmed()}}},[e._v("确定")]),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.userClosed()}}},[e._v("取消")])],1)],1)],1)],1),a("v-dialog",{attrs:{width:"500"},model:{value:e.IsShow,callback:function(t){e.IsShow=t},expression:"IsShow"}},[a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n                提示\n            ")]),a("v-card-text",[e._v("\n                "+e._s(e.message)+"\n            ")]),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.modalComfirmed()}}},[e._v("\n                    是\n                ")]),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.modalComfirmedClose()}}},[e._v("\n                    否\n                ")])],1)],1)],1)],1)},Ne=[],Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"selfvuetree",staticStyle:{margin:"0px 0px 0px 20px"}},[a("v-tree",{ref:"childTreeView",attrs:{data:e.treeValues,radio:!0},on:{"node-select":e.selectChanged},model:{value:e.treeValues,callback:function(t){e.treeValues=t},expression:"treeValues"}})],1)},Ee=[],Pe={data:function(){return{treeValues:[]}},watch:{Source:{handler:function(e,t){var a=this;this.treeValues=this.toTree(e,"-1"),null!=this.treeValues&&this.treeValues.forEach((function(e){e.userList&&e.userList.forEach((function(t){t.title=t.name,e.children?e.children.unshift(t):(e.children=[],e.children.unshift(t))})),e.children&&a.setName(e.children)}))},deep:!0}},methods:{setName:function(e){var t=this;e.forEach((function(e){e.children&&t.setName(e.children),e.userList&&(e.children?e.userList.forEach((function(t){t.title=t.name,e.children.filter((function(e){return e.id==t.id})).length>0||e.children.unshift(t)})):(e.children=[],e.userList.forEach((function(t){t.title=t.name,e.children.unshift(t)}))))}))},selectChanged:function(e){var t=[];if(e){t.push(e.id);var a={};this.$emit("afterSelectChange",a,e)}},toTree:function(e,t){if(e&&e.length){for(var a,i=this,n=[],r=0;r<e.length;r++)if(e[r].parentId==t){var s=Object.assign({},e[r]);s.title=e[r].name,s.expanded=!0,a=i.toTree(e,e[r].id),a.length>0&&(s.children=a),n.push(s)}return n}},setActiveVaules:function(){this.$refs.childTreeView.nodeSelected({})}},props:["Source"]},$e=Pe,Me=Object(u["a"])($e,Le,Ee,!1,null,null,null),Ue=Me.exports,Re=r("20d3"),Ve=r("0909"),Be=r("d9f7"),ze=r("a7fe"),Ye={data:function(){return{activeValue:null,treeItems:[],positionItems:[],userSource:[],headers:[{text:"工号(姓名)",align:"center",sortable:!1,value:"name"}],searchfx:"",isSearch:!1,selectUserSource:[],IsShow:!1,message:"",activeItem:{},orgUserList:[],IsPosition:!1}},watch:{IsShowAddUser:{handler:function(e){e||this.initialize(),this.resetPage()},deep:!0}},components:{treeView:Ue},props:["IsShowAddUser","multiple"],mounted:function(){this.initialize()},methods:{resetPage:function(){var e=[],t=this.$parent.getselectUserList();t&&t.length>0&&t.forEach((function(t){var a=Object.assign({},t);e.push(a)})),this.activeValue=0,this.userSource=[],this.searchfx="",this.isSearch=!1,this.selectUserSource=e,this.IsShow=!1,this.message="",this.activeItem={},this.orgUserList=[],this.IsPosition=!1},initialize:function(){var e=this;e.$Server.queryAll((new Re["a"]).__name).then((function(t){e.treeItems=t.datas})),e.$Server.queryAll((new Ve["a"]).__name).then((function(t){e.positionItems=t.datas}))},userClosed:function(){this.$emit("userClosed")},userComfirmed:function(){this.$emit("userComfirmed",this.selectUserSource)},selectChanged:function(e,t){t.loginName?this.selectUserSource.filter((function(e){return e.id==t.id})).length>0||(0==this.multiple&&(this.selectUserSource=[]),this.selectUserSource.push(t)):1==this.multiple&&(this.IsShow=!0,this.message="确认添加该组织下的所有人员？",this.activeItem=t,this.IsPosition=!1)},selectPosition:function(e,t){t.loginName?this.selectUserSource.filter((function(e){return e.id==t.id})).length>0||(0==this.multiple&&(this.selectUserSource=[]),this.selectUserSource.push(t)):1==this.multiple&&(this.IsShow=!0,this.IsPosition=!0,this.activeItem=t,this.message="确认添加该岗位下的所有人员？")},removeUser:function(e,t){this.selectUserSource.splice(t,1)},addUser:function(e,t){this.selectUserSource.filter((function(t){return t.id==e.id})).length>0||(0==this.multiple&&(this.selectUserSource=[]),this.selectUserSource.push(e))},doSearch:function(){var e=this;this.isSearch=!0,this.$Server.queryAll((new Be["a"]).__name,{},{like:this.searchfx}).then((function(t){e.userSource=t.datas}))},clearMessage:function(){this.isSearch=!1,this.initialize()},modalComfirmed:function(){var e=this;1==this.IsPosition?this.$Server.queryAll((new Be["a"]).__name,{},{positionId:this.activeItem.id}).then((function(t){e.orgUserList=t.datas,e.orgUserList.forEach((function(t){e.selectUserSource.filter((function(e){return e.id==t.id})).length>0||e.selectUserSource.push(t)}))})):this.$Server.queryAll((new Be["a"]).__name,{},{orgId:this.activeItem.id}).then((function(t){e.orgUserList=t.datas,e.orgUserList.forEach((function(t){e.selectUserSource.filter((function(e){return e.id==t.id})).length>0||e.selectUserSource.push(t)}))})),this.IsShow=!1},modalComfirmedClose:function(){this.IsShow=!1},clearSelectUser:function(){this.selectUserSource=[],this.isSearch=!1,this.searchfx="",this.initialize()}}},He=Ye,Je=(r("1b77"),Object(u["a"])(He,Ae,Ne,!1,null,null,null)),Ge=Je.exports,Ze={name:"selectUser",data:function(){return{users:"",IsShowAddUser:!1,selectUserList:[]}},computed:{},watch:{users:{handler:function(e,t){e&&e.length>0||(this.selectUserList=[]),e!=t&&this.changeValue()},deep:!0},value:{handler:function(e){this.users=e},deep:!0},initselect:{handler:function(e){e&&e.length>0?this.selectUserList=e:this.selectUserList=[]},deep:!0}},components:{User:Ge},mounted:function(){},methods:{changeValue:function(){this.$emit("changeValue",this.selectUserList)},clearSelect:function(){this.users="",this.selectUserList=[]},getselectUserList:function(){return this.selectUserList},selectPersons:function(){this.IsShowAddUser=!0},userClosed:function(){this.IsShowAddUser=!1},userComfirmed:function(e){var t=this;t.selectUserList=e;var a=[];t.users="",e&&e.length>0&&(e.forEach((function(e){a.push(e.uname)})),t.users=a.join(",")),t.IsShowAddUser=!1}},props:["required","label","multiple","value","initselect","disabled","placeholder"]},We=Ze,Qe=Object(u["a"])(We,je,Fe,!1,null,null,null),Ke=Qe.exports,Xe=r("0e3a"),et={name:"baseForm",props:{PreviewType:{type:Number,default:0},commentSource:{type:Array},objectId:{type:String},itemDetail:{type:Object}},data:function(){return{title:"",valid:!0,currentView:"",nexttitle:"",editedItem:{},IsShow:!1,excuteMan:"",suggestion:"",IsNext:!1,isdisabled:!1,placeholder:"",taskId:"",hackReset:!1,flows:"",flowitems:[],comboboxFlag:!1,allresult:{},formData:{},isProcessEnd:!1}},components:{contentModal:qe["a"],selectUser:Ke},beforeUpdate:function(){this.nexttitle=this.itemDetail.name+"审批"},methods:{setFullMessage:function(e){return e?e.replace("\n","<br/>"):e},getImage:function(e){return e&&e.length>0?e:r("ed19")},getTitle:function(){return this.$refs.mainForm.getTitle()},getSourceKey:function(){return this.$refs.mainForm.getSourceKey()},getIsProcessEnd:function(){return!!this.$refs.mainForm.getIsProcessEnd&&this.$refs.mainForm.getIsProcessEnd()},getVariables:function(){return this.$refs.mainForm.getVariables?this.$refs.mainForm.getVariables():{}},initForm:function(e,t,a){this.$refs.mainForm.initForm(e,t,a)},comboboxChange:function(e){null!=e&&(this.$refs.selectUser.clearSelect(),0==e.assignable?(this.isdisabled=!0,this.placeholder="[流程自动指定]"):(this.isdisabled=!1,this.placeholder=""))},modalOpen:function(e,t,a){var i=this;if(i.allresult=a,i.flowitems=a.flows,i.flowitems&&i.flowitems.length>1)i.comboboxFlag=!0,i.isdisabled=!1,i.placeholder="";else if(i.flowitems&&1==i.flowitems.length){if(i.comboboxFlag=!1,i.flowitems&&1==i.flowitems.length){var n=i.flowitems[0];0==n.assignable?(i.isdisabled=!0,i.placeholder="[流程自动指定]"):(i.isdisabled=!1,i.placeholder="")}}else i.isdisabled=!0,i.placeholder="[流程自动指定]";void 0==e||null==e?(i.IsShow=!1,i.IsNext=!0):(i.IsShow=!0,i.IsNext=!1,36==e.length||32==e.length?i.setCurrentViewForCustom(e,a,t):i.setCurrentView(e,a,t))},setCurrentViewForCustom:function(e,t,a){var i=this;i.$Server.queryAll("Customform",{},{id:e}).then((function(n){n.datas&&n.datas.length?(i.formData=JSON.parse(n.datas[0].content),i.setCurrentView("customForm",t,a)):i.setCurrentView(e,t,a)}))},setCurrentView:function(t,a,i){var n=this,r=n.$getFrom(t);r&&-1!=r&&(n.currentView=r,n.$nextTick((function(){n.hackReset=!0})),setTimeout((function(){if(a.businessKey)try{var t=JSON.parse(a.businessKey);k.a.map(t,(function(e,t){t==n.getSourceKey()&&(n.taskId=e)}))}catch(e){Oe["a"].alert("businessKey有错，请联系管理员！")}n.taskId?n.initForm(n.taskId,i,a.businessKey):n.initForm(n.objectId,i,a.businessKey),n.isProcessEnd=n.getIsProcessEnd(),n.title=n.getTitle()}),200))},modalClosed:function(){this.clear(),this.IsNext=!1,this.IsShow=!1,this.hackReset=!1,this.$refs.form.resetValidation()},modalClosedForProcess:function(){0==this.IsShow&&this.clear(),this.IsNext=!1,this.$refs.form.resetValidation()},getFormData:function(){return this.$refs.mainForm.getFormData()},clear:function(){this.$refs.selectUser.clearSelect(),this.flowitems=[],this.flows="",this.comboboxFlag=!1,this.isdisabled=!1,this.placeholder="",this.excuteMan="",this.suggestion=""},modalComfirmedForProcess:function(){var t=this;try{null!=t.allresult.formKey&&(t.editedItem=t.getFormData())}catch(e){return}if(this.$refs.form.validate()){j["a"].load();var a="";null!=t.allresult.formKey&&(a=t.getSourceKey());var i=[];this.$refs.selectUser.getselectUserList().forEach((function(e){void 0!=e.jobNumber&&null!=e.jobNumber&&i.push(e.jobNumber)})),t.allresult.nextUserId=i.join(","),t.allresult.variables=t.getVariables(),t.allresult.flows&&t.allresult.flows.length>1&&(t.allresult.nextFlowId=t.flows.id),t.allresult.fullMessage=t.suggestion;var n={resourceName:a,formData:null!=t.allresult.formKey?JSON.stringify(t.editedItem):"",businessKey:t.allresult.businessKey?t.taskId:t.objectId?t.objectId:"",task:t.allresult};2==t.PreviewType?x["a"].http(window.processForUrl.getUrlForExecution(a,t.allresult.id),"Post",n,{success:function(){j["a"].close(),t.modalClosed(),Oe["a"].alert("执行成功","success"),t.$emit("modalComfirmed")},error:function(e){j["a"].close(),Oe["a"].alert(e)}}):x["a"].http(window.processForUrl.getUrlForStart(a,t.allresult.processKey),"Post",n,{success:function(){j["a"].close(),t.modalClosed(),Oe["a"].alert("执行成功","success"),t.$emit("modalComfirmed")},error:function(e){j["a"].close(),Oe["a"].alert(e)}})}},processEnd:function(){var e=this;Xe["a"].confirm("确定结束流程?","提示",500,(function(){x["a"].http(window.processForUrl.getUrlForInstanceId(e.allresult.businessKey?e.taskId:e.objectId?e.objectId:""),"get","",{success:function(t){t.data&&t.data.data&&t.data.data.id?x["a"].http(window.processForUrl.getUrlForInstance(t.data.data.id),"Delete","",{success:function(t){e.modalClosed(),Oe["a"].alert("结束成功","success"),e.$emit("modalComfirmed")},error:function(e){Oe["a"].alert(e)}}):Oe["a"].alert("结束流程失败，请联系管理员！")},error:function(e){Oe["a"].alert(e)}})}),(function(){}))},changeTaskid:function(e){this.taskId=e},modalComfirmed:function(){try{this.getFormData()}catch(e){return void Oe["a"].alert(e,"warning")}this.IsNext=!0}}},tt=et,at=(r("dad7"),Object(u["a"])(tt,Ce,Ie,!1,null,"349c0c6c",null)),it=at.exports,nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-layout",{staticClass:"wrap"},e._l(e.formData.textboxs,(function(t){return e.hasfor?a("v-flex",{key:t.field,class:e.formData.inputLayout},[t.control==e.inputTypes["textInput"].value?a("v-text-field",{style:t.styleStr,attrs:{label:t.label,rules:[function(e){return!t.require||!!e||"必填项"},function(e){return e=e||"",0==t.sLength||e.length<=t.sLength||""}],counter:t.sLength,clearable:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                "+e._s(t.label)+" "),t.require?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]},proxy:!0}],null,!0),model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"box.value"}}):e._e(),t.control==e.inputTypes["comboInput"].value&&0==t.bingType?a("v-autocomplete",{attrs:{items:e.testBoxBindDatas[t.id],label:t.label,rules:[function(e){return!t.require||!!e||"必填项"}],"item-text":t.sourceBind.nameField,"item-value":t.sourceBind.keyField,clearable:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                "+e._s(t.label)+" "),t.require?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]},proxy:!0}],null,!0),model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"box.value"}}):e._e(),t.control==e.inputTypes["comboInput"].value&&1==t.bingType?a("v-autocomplete",{attrs:{items:t.cusSource,label:t.label,rules:[function(e){return!t.require||!!e||"必填项"}],"item-text":"name","item-value":"value",clearable:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                "+e._s(t.label)+" "),t.require?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]},proxy:!0}],null,!0),model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"box.value"}}):e._e(),t.control==e.inputTypes["selectsInput"].value&&0==t.bingType?a("v-autocomplete",{attrs:{items:e.testBoxBindDatas[t.id],label:t.label,"item-text":t.sourceBind.nameField,rules:[function(e){return!t.require||!!e||"必填项"}],"item-value":t.sourceBind.keyField,multiple:"",clearable:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                "+e._s(t.label)+" "),t.require?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]},proxy:!0}],null,!0),model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"box.value"}}):e._e(),t.control==e.inputTypes["selectsInput"].value&&1==t.bingType?a("v-autocomplete",{attrs:{items:t.cusSource,label:t.label,"item-text":"name",rules:[function(e){return!t.require||!!e||"必填项"}],"item-value":"value",multiple:"",clearable:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                "+e._s(t.label)+" "),t.require?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]},proxy:!0}],null,!0),model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"box.value"}}):e._e(),t.control==e.inputTypes["radio"].value&&0==t.bingType?a("v-radio-group",{attrs:{row:"",rules:[function(e){return!t.require||!!e||"必填项"}]},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"box.value"}},e._l(e.testBoxBindDatas[t.id],(function(e){return a("v-radio",{style:t.styleStr,attrs:{label:e[t.sourceBind.nameField],value:e[t.sourceBind.keyField]}})})),1):e._e(),t.control==e.inputTypes["radio"].value&&1==t.bingType?a("v-radio-group",{attrs:{row:"",rules:[function(e){return!t.require||!!e||"必填项"}]},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"box.value"}},e._l(t.cusSource,(function(e){return a("v-radio",{style:t.styleStr,attrs:{label:e.name,value:e.value}})})),1):e._e(),t.control==e.inputTypes["boolInput"].value?a("div",[a("span",{staticStyle:{color:"#989898"}},[e._v(e._s(t.label)+"：")]),a("v-radio-group",{staticStyle:{display:"inline-block","vertical-align":"middle"},attrs:{row:"",rules:[function(e){return!t.require||!!e||"必填项"}]},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"box.value"}},[a("v-radio",{key:"1",attrs:{label:"是",value:"1"}}),a("v-radio",{key:"0",attrs:{label:"否",value:"0"}})],1)],1):e._e(),t.control==e.inputTypes["datePick"].value?a("datePicker",{style:t.styleStr,attrs:{label:t.label,required:t.require,rules:[function(e){return!t.require||e&&""!=e||"必填项"}]},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"box.value"}}):e._e(),t.control==e.inputTypes["dateTimePick"].value?a("v-datetime-picker",{attrs:{label:t.label,clearText:"",okText:"确定",rules:[function(e){return!t.require||e&&""!=e||"必填项"}],appendIcon:"event",model:"String"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"box.value"}}):e._e(),t.control==e.inputTypes["intInput"].value?a("v-text-field",{attrs:{label:t.label,type:"number",clearable:"",rules:[function(e){return!t.require||!!e||"必填项"},function(e){return!e||/^(0|[1-9][0-9]*)$/.test(e)||"只能是正整数"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                "+e._s(t.label)+" "),t.require?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]},proxy:!0}],null,!0),model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"box.value"}}):e._e(),t.control==e.inputTypes["doubleInput"].value?a("v-text-field",{attrs:{label:t.label,type:"number",clearable:"",rules:[function(t){return!e.editor.require||!!t||"必填项"},function(e){return!e||/^[\+\-]?\d*?\.?\d*?$/.test(e)||"只能是数字或者小数！"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                "+e._s(t.label)+" "),t.require?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]},proxy:!0}],null,!0),model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"box.value"}},[e._v("\n                >")]):e._e(),t.control==e.inputTypes["textareaInput"].value?a("v-textarea",{style:t.styleStr,attrs:{clearable:"",label:t.label,rules:[function(e){return!t.require||!!e||"必填项"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                "+e._s(t.label)+" "),t.require?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]},proxy:!0}],null,!0),model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"box.value"}}):e._e()],1):e._e()})),1)],1)},rt=[],st=r("54f5"),lt=st["a"],ot=(r("25b0"),Object(u["a"])(lt,nt,rt,!1,null,"4b11f0a1",null)),ct=ot.exports,ut=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("\n            购置单编号："+e._s(e.EqpPurchaseTask.purchaseCode)+"\n            ")])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("\n            最迟到货日期："+e._s(e.EqpPurchaseTask.latestTime&&e.EqpPurchaseTask.latestTime.slice(0,10))+"\n            ")])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("\n            "+e._s(e.EqpPurchaseTask.applicantName)+"\n            ")])])],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("设备名称："+e._s(e.EqpPurchaseTask.equipmentDirectoryName))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("规格型号："+e._s(e.EqpPurchaseTask.equipmentDirectoryModel))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("设备类型："+e._s(e.EqpPurchaseTask.type))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("数量："+e._s(e.EqpPurchaseTask.purchaseCount))])])],1),a("v-layout",[a("v-flex",{attrs:{xs12:""}},[e._v("购置原因："+e._s(e.EqpPurchaseTask.reason))])],1)],1)},dt=[],pt={name:"eqpPurchaseStartTask",data:function(){return{EqpPurchaseTask:{}}},methods:{initForm:function(e){console.log("初始化列表");var t=this;console.log(this.objectId),this.$Server.queryObjectById("EqpPurchaseTask",this.objectId).then((function(e){console.log(e),t.EqpPurchaseTask=e.data.data}))},getTitle:function(){return"设备盘点任务开始"},getFormData:function(){return this.EqpPurchaseTask.stepDecription="开始执行",this.EqpPurchaseTask},getSourceKey:function(){return"EqpPurchaseTask"}},props:["objectId"]},mt=pt,ft=Object(u["a"])(mt,ut,dt,!1,null,null,null),vt=ft.exports,ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("eqpPurchaseDeatil",{ref:"addOrUpdate",attrs:{eqpPurchaseTaskModel:e.detailForUpdate}})},bt=[],gt=r("bee9"),xt=r("3edd"),yt=r("6bf2"),kt=r.n(yt),St=new J["a"](new xt["a"]),_t={name:"eqpPurchaseTaskDetailForm",data:function(){return{detailForUpdate:{id:"",purchaseCode:"",applicant:"",applicantName:"",latestTime:kt()(new Date).format("YYYY-MM-DD"),documentList:[],equipmentDirectory:"",type:"",reason:"",purchaseCount:"",model:"",documentVersion:""}}},components:{eqpPurchaseDeatil:gt["a"]},methods:{initForm:function(e){var t=this;e&&this.$Server.queryObjectById(St.getModelName(),e).then((function(e){t.detailForUpdate=e.data.data;var a=t.detailForUpdate.applicant,i=t.detailForUpdate.applicantName;t.detailForUpdate.selectAssign=[{uname:i,id:a,selected:!0,title:i,name:i}]}))},getTitle:function(){return"编辑设备购置任务"},getFormData:function(){if(1==this.$refs.addOrUpdate.validate())return this.detailForUpdate;throw"验证不通过！"},getSourceKey:function(){return St.getModelName()},getIsProcessEnd:function(){return!0}}},wt=_t,Dt=Object(u["a"])(wt,ht,bt,!1,null,null,null),Tt=Dt.exports,Ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[e._v("购置单编号："+e._s(e.taskDetail.purchaseCode))]),a("v-flex",{attrs:{xs3:""}},[e._v("最迟到货日期："+e._s(e.taskDetail.latestTime&&e.taskDetail.latestTime.split(" ")[0]))]),a("v-flex",{attrs:{xs3:""}},[e._v("申请人："+e._s(e.taskDetail.applicantName))])],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[e._v("设备名称："+e._s(e.taskDetail.equipmentDirectoryName))]),a("v-flex",{attrs:{xs3:""}},[e._v("规格型号："+e._s(e.taskDetail.equipmentDirectoryModel))]),a("v-flex",{attrs:{xs3:""}},[e._v("设备类型："+e._s(e.taskDetail.type))]),a("v-flex",{attrs:{xs3:""}},[e._v("数量："+e._s(e.taskDetail.purchaseCount))])],1),a("v-layout",[a("v-flex",{attrs:{xs12:""}},[e._v("购置原因："+e._s(e.taskDetail.reason))])],1),e.taskDetail.documentList?a("v-layout",{attrs:{wrap:""}},e._l(e.taskDetail.documentList,(function(e,t){return a("v-flex",{key:t,attrs:{xs12:""}},[a("view-file",{attrs:{documentViewModel:e.document}})],1)})),1):e._e()],1)},It=[],qt={name:"factoryManagerApproval",data:function(){return{taskDetail:{}}},methods:{initForm:function(e,t){var a=this;this.EqpPurchaseTask={},this.$Server.queryObjectById("EqpPurchaseTask",e).then((function(e){a.taskDetail=e.data.data}))},getTitle:function(){return"购置清单"},getFormData:function(){return this.taskDetail.stepDecription="第一步",this.taskDetail},getSourceKey:function(){return"EqpPurchaseTask"},downloadDocument:function(e,t){var a=document.createElement("a");a.href=e,a.download=t,a.click()}}},Ot=qt,jt=Object(u["a"])(Ot,Ct,It,!1,null,null,null),Ft=jt.exports,At=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("购置单编号："+e._s(e.taskDetail.purchaseCode))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("最迟到货日期："+e._s(e.taskDetail.latestTime&&e.taskDetail.latestTime.slice(0,10)))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("申请人："+e._s(e.taskDetail.applicantName))])])],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("设备名称："+e._s(e.taskDetail.equipmentDirectoryName))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("规格型号："+e._s(e.taskDetail.equipmentDirectoryModel))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("设备类型："+e._s(e.taskDetail.type))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("数量："+e._s(e.taskDetail.purchaseCount))])])],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("p",[e._v("购置原因："+e._s(e.taskDetail.reason))])])],1),a("v-layout",[e.taskDetail.documentName?a("v-flex",{attrs:{xs12:""}},[a("p",[a("span",[e._v(e._s(e.taskDetail.document.dname))]),a("v-btn",{on:{click:e.downloadDocument}},[e._v("下载附件")])],1)]):e._e()],1),a("v-layout",[a("v-flex",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",{on:{dblclick:function(e){}}},e._l(e.headers,(function(i,n){return a("td",{key:n,staticClass:"text-xs-center"},["acceptance"===i.value?a("span",[t.item[i.value]?[e._v("已验收")]:a("v-btn",{attrs:{small:""},on:{click:function(a){return e.handleCheck(t.item,t.index)}}},[e._v("\n                            验收\n                            ")])],2):"manufacturer"===i.value?a("v-combobox",{attrs:{items:e.manufacturerList1,label:i.text,disabled:t.item["acceptance"]},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"acceptanceResult"===i.value?[e._v("\n                            "+e._s(1===t.item[i.value]?"通过":0===t.item[i.value]?"未通过":"")+"\n                        ")]:"acceptanceDepart"===i.value?[e._v("\n                            "+e._s(e.deptIdToName(t.item[i.value]))+"\n                        ")]:"edit"===i.value?a("v-btn",{attrs:{disabled:t.item.status,small:""},on:{click:function(a){return e.handleEdit(t.item,t.index)}}},[e._v("\n                            编辑\n                        ")]):"operate"===i.value?a("v-btn",{attrs:{disabled:!t.item.acceptanceResult||t.item.status,small:""},on:{click:function(a){return e.updateAcceptanceList(t.item)}}},[e._v("\n                            更新台账\n                        ")]):"productionNo"===i.value||"description"===i.value?a("v-text-field",{attrs:{label:i.text,disabled:t.item["acceptance"]},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):a("v-text-field",{attrs:{label:i.text},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}})],2)})),0)]}}])})],1)],1)],1),a("EqpPurchaseTaskCheckList",{ref:"checkList",attrs:{organizSelect:e.organizSelect,items:e.items,manufacturerList:e.manufacturerList1,checkList:e.checkList,isEdit:e.isEdit,type:e.type,isShowCheckList:e.isShowCheckList,itemDetail:e.itemDetail},on:{checkListConfirm:e.checkListConfirm,checkListCancle:e.checkListCancle,checkListClose:e.checkListClose}}),a("contentModal",{attrs:{title:"设备详情",IsShow:e.IsShowDetails},on:{modalClosed:function(t){return e.modalClosed()},modalComfirmed:e.modalComfirmed}},[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"headline",attrs:{xs12:""}},[e._v("基本信息:")]),a("v-flex",{attrs:{xs4:""}},[a("upload-input",{staticStyle:{"margin-left":"50px"},attrs:{btnName:"上传设备图片"},model:{value:e.equipment.eqpimage,callback:function(t){e.$set(e.equipment,"eqpimage",t)},expression:"equipment.eqpimage"}})],1),a("v-flex",{attrs:{xs8:""}},[a("v-layout",[a("v-flex",[a("v-text-field",{attrs:{label:"设备编号"},model:{value:e.equipment.code,callback:function(t){e.$set(e.equipment,"code",t)},expression:"equipment.code"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:"条码编号"},model:{value:e.equipment.barCode,callback:function(t){e.$set(e.equipment,"barCode",t)},expression:"equipment.barCode"}})],1)],1),a("v-layout",[a("v-flex",[a("v-text-field",{attrs:{label:"设备名称"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                    设备名称 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.equipment.name,callback:function(t){e.$set(e.equipment,"name",t)},expression:"equipment.name"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:"规格型号"},model:{value:e.equipment.model,callback:function(t){e.$set(e.equipment,"model",t)},expression:"equipment.model"}})],1)],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-layout",[a("v-flex",[a("v-select",{attrs:{label:"设备类型","return-object":"",items:e.equipType,disabled:"","item-text":"dname"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                    设备类型 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.equipment.type,callback:function(t){e.$set(e.equipment,"type",t)},expression:"equipment.type"}})],1),a("v-flex",[a("treeComboForLastNode",{attrs:{itemName:"oname",label:"设备位置",Source:e.forgList,independentCheck:!1,require:!0},model:{value:e.equipment.position,callback:function(t){e.$set(e.equipment,"position",t)},expression:"equipment.position"}})],1),a("v-flex",[a("v-select",{attrs:{label:"来源",items:e.equipSourse,"item-text":"dname",disabled:"","return-object":""},model:{value:e.equipment.source,callback:function(t){e.$set(e.equipment,"source",t)},expression:"equipment.source"}})],1)],1),a("v-layout",[a("v-flex",[a("treeCombo",{ref:"treeCombo2",attrs:{require:!1,Source:e.organizSelect,MultipleSelect:!1,label:"所属部门",independentCheck:!1,independentSingleCheck:!0,"return-object":""},model:{value:e.equipment.departmentID,callback:function(t){e.$set(e.equipment,"departmentID",t)},expression:"equipment.departmentID"}})],1),a("v-flex",[a("treeCombo",{ref:"treeCombo3",attrs:{require:!1,Source:e.organizSelect,MultipleSelect:!1,label:"使用部门",independentCheck:!1,independentSingleCheck:!0,"return-object":""},model:{value:e.equipment.usedDepartmentID,callback:function(t){e.$set(e.equipment,"usedDepartmentID",t)},expression:"equipment.usedDepartmentID"}})],1),a("v-flex",[a("v-select",{attrs:{label:"状态",items:e.equipStatus,"item-text":"dname","return-object":""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                    状态 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.equipment.status,callback:function(t){e.$set(e.equipment,"status",t)},expression:"equipment.status"}})],1)],1),a("v-layout",[a("v-flex",[a("v-select",{attrs:{label:"供应商",items:e.supplierList,"item-text":"cname"},model:{value:e.equipment.supplier,callback:function(t){e.$set(e.equipment,"supplier",t)},expression:"equipment.supplier"}})],1),a("v-flex",[a("v-select",{attrs:{label:"租赁厂商",items:e.leaseholderList,"item-text":"cname"},model:{value:e.equipment.leaseholder,callback:function(t){e.$set(e.equipment,"leaseholder",t)},expression:"equipment.leaseholder"}})],1),a("v-flex",[a("v-select",{attrs:{label:"生产厂商",items:e.manufacturerList,"item-text":"cname"},model:{value:e.equipment.manufacturer,callback:function(t){e.$set(e.equipment,"manufacturer",t)},expression:"equipment.manufacturer"}})],1)],1),a("v-layout",[a("v-flex",[a("v-text-field",{attrs:{label:"产地"},model:{value:e.equipment.productionPlace,callback:function(t){e.$set(e.equipment,"productionPlace",t)},expression:"equipment.productionPlace"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:"出厂编号"},model:{value:e.equipment.productionNo,callback:function(t){e.$set(e.equipment,"productionNo",t)},expression:"equipment.productionNo"}})],1),a("v-flex",[a("datePicker",{attrs:{label:"出厂日期",required:!1},model:{value:e.equipment.productionDate,callback:function(t){e.$set(e.equipment,"productionDate",t)},expression:"equipment.productionDate"}})],1)],1),a("v-layout",[a("v-flex",[a("v-textarea",{attrs:{label:"备注"},model:{value:e.equipment.description,callback:function(t){e.$set(e.equipment,"description",t)},expression:"equipment.description"}})],1)],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"headline",attrs:{xs12:""}},[e._v("资产信息:")]),a("v-flex",{attrs:{xs4:""}},[a("datePicker",{attrs:{label:"购入日期",required:!1},model:{value:e.equipment.purchaseDate,callback:function(t){e.$set(e.equipment,"purchaseDate",t)},expression:"equipment.purchaseDate"}})],1),a("v-flex",{attrs:{xs4:""}},[a("datePicker",{attrs:{label:"验收日期",required:!1},model:{value:e.equipment.acceptDate,callback:function(t){e.$set(e.equipment,"acceptDate",t)},expression:"equipment.acceptDate"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:"保修期限(月)",type:"number"},model:{value:e.equipment.warrantyPeriod,callback:function(t){e.$set(e.equipment,"warrantyPeriod",t)},expression:"equipment.warrantyPeriod"}})],1),a("v-flex",{attrs:{xs4:""}},[a("datePicker",{attrs:{label:"投产日期",required:!1},model:{value:e.equipment.startProduceDate,callback:function(t){e.$set(e.equipment,"startProduceDate",t)},expression:"equipment.startProduceDate"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"设备原值(元)",rules:[function(e){return!e||/^[\+\-]?\d*?\.?\d*?$/.test(e)||"只能是数字或者小数！"}]},model:{value:e.equipment.originalValue,callback:function(t){e.$set(e.equipment,"originalValue",t)},expression:"equipment.originalValue"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"固资编号"},model:{value:e.equipment.fixedAssetNo,callback:function(t){e.$set(e.equipment,"fixedAssetNo",t)},expression:"equipment.fixedAssetNo"}})],1)],1)],1)],1)],1)],1)},Nt=[],Lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",e._l(e.headers,(function(i,n){return a("td",{key:n,staticClass:"text-xs-center"},["isCheck"===i.value?a("span",[t.item[i.value]?[e._v("已验收")]:a("v-btn",{attrs:{small:""}},[e._v("\n                验收\n              ")])],2):"enclosure"===i.value?a("span",[a("a",{staticStyle:{"text-decoration":"underline"},attrs:{href:"/abc"}},[e._v("下载")])]):a("v-text-field",{attrs:{label:"Regular"},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}})],1)})),0)]}}])})},Et=[],Pt={data:function(){return{headers:[{text:"出厂编号",align:"center",sortable:!1,value:"number"},{text:"生产厂商",align:"center",value:"factory",sortable:!1},{text:"是否验收",align:"center",value:"isCheck",sortable:!1},{text:"验收结果",align:"center",value:"checkResult",sortable:!1},{text:"验收人",align:"center",value:"checkPerson",sortable:!1},{text:"备注",align:"center",value:"remarks",sortable:!1},{text:"附件",align:"center",value:"enclosure",sortable:!1}],desserts:[{number:"Frozen Yogurt",factory:159,isCheck:!0,checkResult:24,checkPerson:4,remarks:"1%",enclosure:""},{number:"Honeycomb",factory:408,isCheck:!1,checkResult:87,checkPerson:6.5,remarks:"45%",enclosure:""}]}}},$t=Pt,Mt=Object(u["a"])($t,Lt,Et,!1,null,null,null),Ut=Mt.exports,Rt=r("815a"),Vt=r("a627"),Bt=r("4027"),zt=r("b27e"),Yt=r("f19a"),Ht=r("1d53"),Jt=r("0b43"),Gt=(r("e1e8"),{name:"productApproval",data:function(){return{valid:!0,taskDetail:{},headers:[{text:"出厂编号",align:"center",sortable:!1,value:"productionNo"},{text:"生产厂商",align:"center",value:"manufacturer",sortable:!1},{text:"是否验收",align:"center",value:"acceptance",sortable:!1},{text:"验收结果",align:"center",value:"acceptanceResult",sortable:!1},{text:"验收部门",align:"center",value:"acceptanceDepart",sortable:!1},{text:"备注",align:"center",value:"description",sortable:!1},{text:"编辑",align:"center",value:"edit",sortable:!1},{text:"操作",align:"center",value:"operate",sortable:!1}],items:[],backUpItems:[],isShowCheckList:!1,itemDetail:{},checkList:[],type:"",clickIndex:"",manufacturerList1:[],organizSelect:[],IsShowDetails:!1,initObj:{eqpimage:"",code:"",barCode:"",name:"",model:"",type:"",position:"",source:"",departmentID:"",usedDepartmentID:"",status:"",supplier:"",leaseholder:"",manufacturer:"",productionPlace:"",productionNo:"",productionDate:"",description:"",purchaseDate:"",acceptDate:"",warrantyPeriod:"",startProduceDate:"",originalValue:"",fixedAssetNo:""},equipment:{},forgList:[],equipType:[],equipSourse:[],equipStatus:[],companyList:[],supplierList:[],manufacturerList:[],leaseholderList:[],object:{},businessKey:"",isEdit:!1}},components:{checkTable:Ut,EqpPurchaseTaskCheckList:Vt["a"],contentModal:Y["a"],UploadInput:zt["a"],treeCombo:Yt["a"],datePicker:Ht["a"],treeComboForLastNode:Jt["a"]},methods:{initForm:function(e){this.businessKey=e;var t=this;this.$Server.queryAll((new Re["a"]).__name).then((function(a){t.organizSelect=a.datas,t.$Server.queryObjectById("EqpPurchaseTask",e).then((function(a){t.taskDetail=a.data.data;var i=a.data.data.equipmentDirectoryType;t.type=i,t.$Server.queryAll("EqpPurchaseRecord",{},{purchaseTaskID:e}).then((function(e){t.items=e.datas,t.backUpItems=JSON.parse(JSON.stringify(e.datas))}),(function(e){return g["a"].alert(e)}))}),(function(e){return g["a"].alert(e)}))}))},getTitle:function(){return"生产部/设备部审批"},getFormData:function(){return this.items.forEach((function(e){if(!e.acceptance)throw"请验收全部设备";if(e.acceptanceResult&&!e.status)throw"验收通过的设备需更新台账"})),this.taskDetail},getSourceKey:function(){return"EqpPurchaseTask"},downloadDocument:function(){var e=document.createElement("a");this.taskDetail.document.dname,this.taskDetail.documentName.substring(this.taskDetail.documentName.lastIndexOf("."));e.href="/documents/"+this.taskDetail.documentName,e.download=this.taskDetail.document.dname,e.click()},resetCheckList:function(){this.$refs.checkList.$refs.form.reset(),this.$refs.checkList.$refs.form.resetValidation()},handleCheck:function(e,t){var a=this,i=JSON.parse(JSON.stringify(this.items));i.splice(t,1);var n="";if(this.clickIndex=t,e.productionNo)if(e.manufacturer){for(var r=0;r<i.length;r++)if(n=i[r],n.productionNo===e.productionNo)return void g["a"].alert("该编号已存在，请重新输入编号");this.resetCheckList(),a.$Server.addOrUpdate("EqpPurchaseRecord",e,!0).then((function(t){a.$Server.queryAll("EqpPurchaseAcceptance",null,{type:a.type,eqpPurchaseRecordID:e.id}).then((function(t){a.checkList=t.datas;var i=[];t.datas.forEach((function(e){var t=a.organizSelect.find((function(t){return t.id===e.departmentID}));if(t){var n=i.find((function(e){return e.id===t.id}));n||i.push(t)}})),a.$refs.checkList.organizList=i,a.isShowCheckList=!0,a.itemDetail=e,a.isEdit=!1}),(function(e){return g["a"].alert(e)}))}),(function(e){return g["a"].alert(e)}))}else g["a"].alert("请填写生产厂商");else g["a"].alert("请填写出厂编号")},checkListConfirm:function(){var e=this;this.isShowCheckList=!1,e.$Server.queryAll("EqpPurchaseRecord",{},{purchaseTaskID:e.businessKey}).then((function(t){e.items=t.datas,e.backUpItems=JSON.parse(JSON.stringify(t.datas))}),(function(e){return g["a"].alert(e)}))},checkListCancle:function(){this.isShowCheckList=!1},checkListClose:function(){var e=this;this.isShowCheckList=!1,e.$Server.queryAll("EqpPurchaseRecord",{},{purchaseTaskID:e.businessKey}).then((function(t){e.items=t.datas,e.backUpItems=JSON.parse(JSON.stringify(t.datas))}),(function(e){return g["a"].alert(e)}))},handleEdit:function(e,t){var a=this;this.resetCheckList(),e.acceptance?a.$Server.queryAll("EqpPurchaseAcceptance",null,{type:a.type,eqpPurchaseRecordID:e.id}).then((function(t){a.checkList=t.datas;var i=[];t.datas.forEach((function(e){var t=a.organizSelect.find((function(t){return t.id===e.departmentID}));if(t){var n=i.find((function(e){return e.id===t.id}));n||i.push(t)}})),a.$refs.checkList.organizList=i,a.isShowCheckList=!0,a.itemDetail=e,a.isEdit=!0})):g["a"].alert("设备未验收")},resetequipment:function(){this.$refs.form.resetValidation()},updateAcceptanceList:function(e){var t=this;if(this.resetequipment(),e.acceptanceResult){this.equipment=JSON.parse(JSON.stringify(this.initObj)),this.object=e,this.IsShowDetails=!0,this.equipment.name=this.taskDetail.equipmentDirectoryName,this.equipment.model=this.taskDetail.equipmentDirectoryModel,this.equipment.productionNo=e.productionNo,this.equipment.manufacturer=e.manufacturer;var a=this.equipType.find((function(e){return e.dname===t.taskDetail.type}));this.equipment.type=a;var i=this.equipSourse.find((function(e){return"购置"===e.dname}));this.equipment.source=i}else g["a"].alert("验收未通过")},deptIdToName:function(e){var t="",a=this.organizSelect.find((function(t){return t.id===e}));return a&&(t=a.name?a.name:""),t},modalClosed:function(){this.IsShowDetails=!1},modalComfirmed:function(){var e=this,t="";this.equipment.name&&this.equipment.type&&this.equipment.position&&this.equipment.status?(t=JSON.parse(JSON.stringify(e.equipment)),t.departmentID&&Array.isArray(t.departmentID)&&t.departmentID.length>0&&(t.departmentID=t.departmentID[0]),t.position&&Array.isArray(t.position)&&t.position.length>0&&(t.position=t.position[0]),t.usedDepartmentID&&Array.isArray(t.usedDepartmentID)&&t.usedDepartmentID.length>0&&(t.usedDepartmentID=t.usedDepartmentID[0]),this.object.equipment=t,e.$Server.addOrUpdate("EqpPurchaseRecord",e.object,!0).then((function(t){t.success&&(g["a"].alert("保存成功","success"),e.$Server.queryAll("EqpPurchaseRecord",{},{purchaseTaskID:e.businessKey}).then((function(t){e.items=t.datas,e.backUpItems=JSON.parse(JSON.stringify(t.datas))}),(function(e){return g["a"].alert(e)})),e.IsShowDetails=!1)}),(function(e){return g["a"].alert(e)}))):g["a"].alert("请填写必填项")},dayFormat:function(e){return e?new Date(e.replace(/-/g,"/")).getDate():""}},mounted:function(){var e=this;this.$Server.queryAll((new Rt["a"]).__name,{},{searchfx:"生产厂商",deleted:!1}).then((function(t){e.manufacturerList1=t.datas.map((function(e){return e.cname}))})),this.$Server.queryAll((new Bt["a"]).__name,{},{searchEqpStation:!0}).then((function(t){e.forgList=t.datas})),this.$Server.queryAll((new ze["a"]).__name,{},{type:"4"}).then((function(t){e.equipType=t.datas})),this.$Server.queryAll((new ze["a"]).__name,{},{type:"7"}).then((function(t){e.equipSourse=t.datas})),this.$Server.queryAll((new ze["a"]).__name,{},{type:"5"}).then((function(t){e.equipStatus=t.datas})),this.$Server.queryAll((new Rt["a"]).__name,{},{deleted:"false"}).then((function(t){e.supplierList=t.datas.filter((function(e){return e.ctypeName&&e.ctypeName.indexOf("供应商")>-1})),e.manufacturerList=t.datas.filter((function(e){return void 0==e.ctypeName||null==e.ctypeName||e.ctypeName.indexOf("生产厂商")>-1})),e.leaseholderList=t.datas.filter((function(e){return void 0==e.ctypeName||null==e.ctypeName||e.ctypeName.indexOf("租赁厂商")>-1}))}))}}),Zt=Gt,Wt=Object(u["a"])(Zt,At,Nt,!1,null,null,null),Qt=Wt.exports,Kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("租赁单编号："+e._s(e.EqpRentalTask.rentalCode))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("最迟到货日期："+e._s(e.EqpRentalTask.latestTime&&e.EqpRentalTask.latestTime.substring(0,10)))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("申请人："+e._s(e.EqpRentalTask.applicantName))])])],1),a("v-layout",[a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("设备名称："+e._s(e.EqpRentalTask.equipmentDirectoryViewModel.name))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("规格型号："+e._s(e.EqpRentalTask.equipmentDirectoryViewModel.model))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("设备类型："+e._s(e.EqpRentalTask.type))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("数量："+e._s(e.EqpRentalTask.rentalCount))])])],1),a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("p",[e._v("租赁原因："+e._s(e.EqpRentalTask.reason))])])],1),a("v-layout",[e.EqpRentalTask.rRentalTaskDocumentList&&e.EqpRentalTask.rRentalTaskDocumentList.length>0?a("v-flex",{attrs:{xs12:""}},e._l(e.EqpRentalTask.rRentalTaskDocumentList,(function(e,t){return a("div",{key:t},[a("view-file",{attrs:{documentViewModel:e.documentViewModel}})],1)})),0):e._e()],1)],1)},Xt=[],ea={name:"DetailBlockForm",data:function(){return{params:{},EqpRentalTask:{equipmentDirectoryViewModel:{},rRentalTaskDocumentList:[]}}},methods:{initForm:function(e,t){var a=this;a.params=t,this.$Server.queryObjectById("EqpRentalTask",e).then((function(e){a.EqpRentalTask=e.data.data}))},getTitle:function(){return"租赁任务清单"},getFormData:function(){return this.EqpRentalTask.stepDecription="开始执行",this.EqpRentalTask},getSourceKey:function(){return"EqpRentalTask"},getDocumentName:function(e){if(e)return e.dname+e.newestFilePath.substring(e.newestFilePath.lastIndexOf("."))},downloadDocument:function(e,t){var a=document.createElement("a");a.href=e.newestFilePath,a.download=t,a.click()}}},ta=ea,aa=Object(u["a"])(ta,Kt,Xt,!1,null,null,null),ia=aa.exports,na=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",[a("DetailBlock",{attrs:{taskDetail:e.EqpRentalTask}}),a("v-layout",[a("v-flex",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",e._l(e.headers,(function(i,n){return a("td",{key:n,staticClass:"text-xs-center"},["acceptance"===i.value?a("span",[t.item[i.value]?[e._v("已验收")]:a("v-btn",{attrs:{small:""},on:{click:function(a){return e.handleCheck(t.item,t.index)}}},[e._v("\n                            验收\n                            ")])],2):"manufacturer"===i.value?a("v-combobox",{attrs:{items:e.manufacturerList1,label:i.text,disabled:t.item["acceptance"]},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"acceptanceResult"===i.value?[e._v("\n                            "+e._s(1===t.item[i.value]?"通过":0===t.item[i.value]?"未通过":"")+"\n                        ")]:"acceptanceDepart"===i.value?[e._v("\n                            "+e._s(e.deptIdToName(t.item[i.value]))+"\n                        ")]:"edit"===i.value?a("v-btn",{attrs:{disabled:t.item.status,small:""},on:{click:function(a){return e.handleEdit(t.item,t.index)}}},[e._v("\n                            编辑\n                        ")]):"operate"===i.value?a("v-btn",{attrs:{disabled:!t.item.acceptanceResult||t.item.status,small:""},on:{click:function(a){return e.updateAcceptanceList(t.item)}}},[e._v("\n                            更新台账\n                        ")]):"productionNo"===i.value||"description"===i.value?a("v-text-field",{attrs:{label:i.text,disabled:t.item["acceptance"]},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):a("v-text-field",{attrs:{label:i.text},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}})],2)})),0)]}}])})],1)],1)],1),a("EqpRentalTaskCheckList",{ref:"checkList",attrs:{organizSelect:e.organizSelect,checkList:e.checkList,isShowCheckList:e.isShowCheckList,itemDetail:e.itemDetail,items:e.items,isEdit:e.isEdit,type:e.type,manufacturerList:e.manufacturerList1},on:{checkListConfirm:e.checkListConfirm,checkListCancle:e.checkListCancle,checkListClose:e.checkListClose}}),a("contentModal",{attrs:{title:"设备详情",IsShow:e.IsShowDetails},on:{modalClosed:function(t){return e.modalClosed()},modalComfirmed:e.modalComfirmed}},[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"headline",attrs:{xs12:""}},[e._v("基本信息:")]),a("v-flex",{attrs:{xs4:""}},[a("upload-input",{staticStyle:{"margin-left":"50px"},attrs:{btnName:"上传设备图片"},model:{value:e.equipment.eqpimage,callback:function(t){e.$set(e.equipment,"eqpimage",t)},expression:"equipment.eqpimage"}})],1),a("v-flex",{attrs:{xs8:""}},[a("v-layout",[a("v-flex",[a("v-text-field",{attrs:{label:"设备编号"},model:{value:e.equipment.code,callback:function(t){e.$set(e.equipment,"code",t)},expression:"equipment.code"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:"条码编号"},model:{value:e.equipment.barCode,callback:function(t){e.$set(e.equipment,"barCode",t)},expression:"equipment.barCode"}})],1)],1),a("v-layout",[a("v-flex",[a("v-text-field",{attrs:{label:"设备名称"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                    设备名称 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.equipment.name,callback:function(t){e.$set(e.equipment,"name",t)},expression:"equipment.name"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:"规格型号"},model:{value:e.equipment.model,callback:function(t){e.$set(e.equipment,"model",t)},expression:"equipment.model"}})],1)],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-layout",[a("v-flex",[a("v-select",{attrs:{label:"设备类型","return-object":"",items:e.equipType,disabled:"","item-text":"dname"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                    设备类型 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.equipment.type,callback:function(t){e.$set(e.equipment,"type",t)},expression:"equipment.type"}})],1),a("v-flex",[a("treeComboForLastNode",{attrs:{itemName:"oname",label:"设备位置",Source:e.forgList,independentCheck:!1,require:!0},model:{value:e.equipment.position,callback:function(t){e.$set(e.equipment,"position",t)},expression:"equipment.position"}})],1),a("v-flex",[a("v-select",{attrs:{label:"来源",items:e.equipSourse,"item-text":"dname",disabled:"","return-object":""},model:{value:e.equipment.source,callback:function(t){e.$set(e.equipment,"source",t)},expression:"equipment.source"}})],1)],1),a("v-layout",[a("v-flex",[a("treeCombo",{ref:"treeCombo2",attrs:{require:!1,Source:e.organizSelect,MultipleSelect:!1,label:"所属部门",independentCheck:!1,independentSingleCheck:!0,"return-object":""},model:{value:e.equipment.departmentID,callback:function(t){e.$set(e.equipment,"departmentID",t)},expression:"equipment.departmentID"}})],1),a("v-flex",[a("treeCombo",{ref:"treeCombo3",attrs:{require:!1,Source:e.organizSelect,MultipleSelect:!1,label:"使用部门",independentCheck:!1,independentSingleCheck:!0,"return-object":""},model:{value:e.equipment.usedDepartmentID,callback:function(t){e.$set(e.equipment,"usedDepartmentID",t)},expression:"equipment.usedDepartmentID"}})],1),a("v-flex",[a("v-select",{attrs:{label:"状态",items:e.equipStatus,"item-text":"dname","return-object":""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                    状态 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.equipment.status,callback:function(t){e.$set(e.equipment,"status",t)},expression:"equipment.status"}})],1)],1),a("v-layout",[a("v-flex",[a("v-select",{attrs:{label:"供应商",items:e.supplierList,"item-text":"cname"},model:{value:e.equipment.supplier,callback:function(t){e.$set(e.equipment,"supplier",t)},expression:"equipment.supplier"}})],1),a("v-flex",[a("v-select",{attrs:{label:"租赁厂商",items:e.leaseholderList,"item-text":"cname"},model:{value:e.equipment.leaseholder,callback:function(t){e.$set(e.equipment,"leaseholder",t)},expression:"equipment.leaseholder"}})],1),a("v-flex",[a("v-select",{attrs:{label:"生产厂商",items:e.manufacturerList,"item-text":"cname"},model:{value:e.equipment.manufacturer,callback:function(t){e.$set(e.equipment,"manufacturer",t)},expression:"equipment.manufacturer"}})],1)],1),a("v-layout",[a("v-flex",[a("v-text-field",{attrs:{label:"产地"},model:{value:e.equipment.productionPlace,callback:function(t){e.$set(e.equipment,"productionPlace",t)},expression:"equipment.productionPlace"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:"出厂编号"},model:{value:e.equipment.productionNo,callback:function(t){e.$set(e.equipment,"productionNo",t)},expression:"equipment.productionNo"}})],1),a("v-flex",[a("datePicker",{attrs:{label:"出厂日期",required:!1},model:{value:e.equipment.productionDate,callback:function(t){e.$set(e.equipment,"productionDate",t)},expression:"equipment.productionDate"}})],1)],1),a("v-layout",[a("v-flex",[a("v-textarea",{attrs:{label:"备注"},model:{value:e.equipment.description,callback:function(t){e.$set(e.equipment,"description",t)},expression:"equipment.description"}})],1)],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"headline",attrs:{xs12:""}},[e._v("资产信息:")]),a("v-flex",{attrs:{xs4:""}},[a("datePicker",{attrs:{label:"购入日期",required:!1},model:{value:e.equipment.purchaseDate,callback:function(t){e.$set(e.equipment,"purchaseDate",t)},expression:"equipment.purchaseDate"}})],1),a("v-flex",{attrs:{xs4:""}},[a("datePicker",{attrs:{label:"验收日期",required:!1},model:{value:e.equipment.acceptDate,callback:function(t){e.$set(e.equipment,"acceptDate",t)},expression:"equipment.acceptDate"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:"保修期限(月)",type:"number"},model:{value:e.equipment.warrantyPeriod,callback:function(t){e.$set(e.equipment,"warrantyPeriod",t)},expression:"equipment.warrantyPeriod"}})],1),a("v-flex",{attrs:{xs4:""}},[a("datePicker",{attrs:{label:"投产日期",required:!1},model:{value:e.equipment.startProduceDate,callback:function(t){e.$set(e.equipment,"startProduceDate",t)},expression:"equipment.startProduceDate"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"设备原值(元)",rules:[function(e){return!e||/^[\+\-]?\d*?\.?\d*?$/.test(e)||"只能是数字或者小数！"}]},model:{value:e.equipment.originalValue,callback:function(t){e.$set(e.equipment,"originalValue",t)},expression:"equipment.originalValue"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"固资编号"},model:{value:e.equipment.fixedAssetNo,callback:function(t){e.$set(e.equipment,"fixedAssetNo",t)},expression:"equipment.fixedAssetNo"}})],1)],1)],1)],1)],1)],1)},ra=[],sa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("租赁单编号："+e._s(e.taskDetail.rentalCode))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("最迟到货日期："+e._s(e.taskDetail.latestTime&&e.taskDetail.latestTime.substring(0,10)))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("申请人："+e._s(e.taskDetail.applicantName))])])],1),a("v-layout",[a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("备件名称："+e._s(e.taskDetail.equipmentDirectoryViewModel.name))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("规格型号："+e._s(e.taskDetail.equipmentDirectoryViewModel.model))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("设备类型："+e._s(e.taskDetail.type))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("数量："+e._s(e.taskDetail.rentalCount))])])],1),a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("p",[e._v("租赁原因："+e._s(e.taskDetail.reason))])])],1),a("v-layout",[e.taskDetail.rRentalTaskDocumentList&&e.taskDetail.rRentalTaskDocumentList.length>0?a("v-flex",{attrs:{xs12:""}},e._l(e.taskDetail.rRentalTaskDocumentList,(function(e,t){return a("div",{key:t},[a("view-file",{attrs:{documentViewModel:e.documentViewModel}})],1)})),0):e._e()],1)],1)},la=[],oa={name:"DetailBlock",props:{taskDetail:Object},methods:{getDocumentName:function(e){if(e)return e.dname+e.newestFilePath.substring(e.newestFilePath.lastIndexOf("."))},downloadDocument:function(e,t){var a=document.createElement("a");a.href=e.newestFilePath,a.download=t,a.click()}}},ca=oa,ua=Object(u["a"])(ca,sa,la,!1,null,null,null),da=ua.exports,pa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-dialog",{attrs:{persistent:!0,width:"1200"},model:{value:e.isShowCheckList,callback:function(t){e.isShowCheckList=t},expression:"isShowCheckList"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card",[a("v-card-title",{staticClass:"primary"},[a("span",{staticClass:"headline",staticStyle:{color:"#fff"}},[e._v("验收单")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{"align-center":"",row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[e.itemDetail.acceptance?a("v-text-field",{attrs:{label:"出厂编号"},model:{value:e.itemDetail.productionNo,callback:function(t){e.$set(e.itemDetail,"productionNo",t)},expression:"itemDetail.productionNo"}}):a("span",[e._v("\n                                出厂编号："+e._s(e.itemDetail.productionNo)+"\n                             ")])],1),a("v-flex",{attrs:{xs3:""}},[e.itemDetail.acceptance?a("v-combobox",{attrs:{items:e.manufacturerList,label:"生产厂商"},model:{value:e.itemDetail.manufacturer,callback:function(t){e.$set(e.itemDetail,"manufacturer",t)},expression:"itemDetail.manufacturer"}}):a("span",[e._v("\n                                生产厂商："+e._s(e.itemDetail.manufacturer)+"\n                             ")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.organizList,"item-text":"oname","item-value":"id",label:"验收部门"},model:{value:e.itemDetail.acceptanceDepart,callback:function(t){e.$set(e.itemDetail,"acceptanceDepart",t)},expression:"itemDetail.acceptanceDepart"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.printList}},[e._v("打印验收清单")])],1)],1),a("acceptTable",{ref:"acceptTable",attrs:{checkList:e.useList}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{"margin-right":"20px"},attrs:{color:"primary"},on:{click:e.checkListConfirm}},[e._v("通过")]),a("v-btn",{staticStyle:{"margin-right":"20px"},attrs:{color:"primary"},on:{click:e.checkListCancle}},[e._v("未通过")]),a("v-btn",{staticStyle:{"margin-right":"30px"},attrs:{color:"primary"},on:{click:e.checkListClose}},[e._v("关闭")])],1)],1)],1)],1)],1)},ma=[],fa=r("97a3"),va=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.checkList,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",e._l(e.headers,(function(i,n){return a("td",{key:n,staticClass:"text-xs-center"},["acceptanceClusion"===i.value?a("v-radio-group",{attrs:{row:""},on:{change:e.handleRadioChange},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}},[a("v-radio",{attrs:{label:"通过",value:1}}),a("v-radio",{attrs:{label:"未通过",value:0}})],1):"description"===i.value?a("v-text-field",{staticClass:"input-text",attrs:{rules:[],required:!1},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"document"===i.value?a("uploadFile",{ref:"uploadFile",refInFor:!0,staticStyle:{height:"32px"},attrs:{label:"上传附件",fileNames:e.getDocumentName(t.item[i.value]),multiple:!1,uploadBase64:!1},on:{formData:e.formData},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"acceptanceType"===i.value?[e._v(e._s(t.item[i.value].dname))]:"acceptanceResult"===i.value?a("v-text-field",{staticClass:"input-text",attrs:{required:!0},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):[e._v(e._s(t.item[i.value]))]],2)})),0)]}}])})},ha=[],ba=r("3876"),ga={data:function(){return{headers:[{text:"验收类别",align:"center",value:"acceptanceType",sortable:!1},{text:"负责部门",align:"center",value:"departmentName",sortable:!1},{text:"验收内容",align:"center",value:"content",sortable:!1},{text:"验收标准",align:"center",value:"standard",sortable:!1},{text:"验收结果",align:"center",value:"acceptanceResult",sortable:!1},{text:"验收结论",align:"center",value:"acceptanceClusion",sortable:!1},{text:"备注",align:"center",value:"description",sortable:!1},{text:"附件",align:"center",value:"document",sortable:!1}],items:[]}},props:{checkList:Array},components:{uploadFile:ba["a"]},methods:{handleRadioChange:function(e){},formData:function(e){},getDocumentName:function(e){return e&&e.dname&&e.newestFilePath?e.dname+e.newestFilePath.substring(e.newestFilePath.lastIndexOf(".")):""}}},xa=ga,ya=(r("1fba"),Object(u["a"])(xa,va,ha,!1,null,"28fdb87c",null)),ka=ya.exports,Sa=Object(fa["a"])({name:"EqpRentalTaskCheckList",data:function(){return{valid:!0,organizList:[],restList:[],useList:[]}},props:{isShowCheckList:Boolean,itemDetail:Object,checkList:Array,type:[String,Number],manufacturerList:Array,items:Array,isEdit:Boolean,organizSelect:Array},components:{acceptTable:ka,treeCombo:Yt["a"]},watch:{"itemDetail.acceptanceDepart":{handler:function(e){e&&this.checkList.length>0&&(this.useList=this.checkList.filter((function(t){return t.departmentID===e})))}}},mounted:function(){},methods:{init:function(){},printList:function(){this.itemDetail.acceptance?window.open("#eqpPrint?type=".concat(this.type,"&id=").concat(this.itemDetail.id,"&flag=2")):g["a"].alert("设备未验收")},isPass:function(e){var t=this,a=!0;t.useList.forEach((function(e){""!==e.acceptanceResult&&null!==e.acceptanceResult&&""!==e.acceptanceClusion&&null!==e.acceptanceClusion||(a=!1)}));var i=[];if(t.isEdit){for(var n=0;n<t.items.length;n++)t.itemDetail.productionNo===t.items[n].productionNo&&i.push(1);if(i.length>1)return void g["a"].alert("该编号已存在，请重新输入编号");if(""==this.itemDetail.productionNo||null==this.itemDetail.productionNo)return void g["a"].alert("出厂编号不能为空");if(""==this.itemDetail.manufacturer||null==this.itemDetail.manufacturer)return void g["a"].alert("生产厂商不能为空")}a?(t.itemDetail.acceptanceResult=e?1:0,t.itemDetail.acceptance=!0,t.checkList.forEach((function(e){e.eqpRentalRecordViewModel=t.itemDetail})),t.$Server.batchUpdate("EqpRentalAcceptance",t.checkList).then((function(e){e.success&&(g["a"].alert("保存成功","success"),t.$emit("checkListConfirm"))}),(function(e){return g["a"].alert(e)}))):g["a"].alert("结果和结论为必填项")},checkListConfirm:function(){this.isPass(!0),this.useList=[]},checkListClose:function(){this.$emit("checkListClose"),this.useList=[]},checkListCancle:function(){this.isPass(!1),this.useList=[]}}},"mounted",(function(){this.init()})),_a=Sa,wa=(r("a513"),Object(u["a"])(_a,pa,ma,!1,null,"00c39373",null)),Da=wa.exports,Ta={name:"productForm",data:function(){return{valid:!0,EqpRentalTask:{equipmentDirectoryViewModel:{}},headers:[{text:"出厂编号",align:"center",sortable:!1,value:"productionNo"},{text:"生产厂商",align:"center",value:"manufacturer",sortable:!1},{text:"是否验收",align:"center",value:"acceptance",sortable:!1},{text:"验收结果",align:"center",value:"acceptanceResult",sortable:!1},{text:"验收部门",align:"center",value:"acceptanceDepart",sortable:!1},{text:"备注",align:"center",value:"description",sortable:!1},{text:"编辑",align:"center",value:"edit",sortable:!1},{text:"操作",align:"center",value:"operate",sortable:!1}],items:[],backUpItems:[],organizSelect:[],manufacturerList1:[],isShowCheckList:!1,itemDetail:{},checkList:[],type:"",isEdit:!1,clickIndex:"",IsShowDetails:!1,initObj:{eqpimage:"",code:"",barCode:"",name:"",model:"",type:"",position:"",source:"",departmentID:"",usedDepartmentID:"",status:"",supplier:"",leaseholder:"",manufacturer:"",productionPlace:"",productionNo:"",productionDate:"",description:"",purchaseDate:"",acceptDate:"",warrantyPeriod:"",startProduceDate:"",originalValue:"",fixedAssetNo:""},equipment:{},forgList:[],equipType:[],equipSourse:[],equipStatus:[],companyList:[],object:{},businessKey:"",supplierList:[],manufacturerList:[],leaseholderList:[]}},components:{DetailBlock:da,EqpRentalTaskCheckList:Da,contentModal:Y["a"],UploadInput:zt["a"],treeCombo:Yt["a"],datePicker:Ht["a"],treeComboForLastNode:Jt["a"]},methods:{initForm:function(e){var t=this;t.businessKey=e,this.$Server.queryAll((new Re["a"]).__name).then((function(a){t.organizSelect=a.datas,t.$Server.queryObjectById("EqpRentalTask",e).then((function(a){t.EqpRentalTask=a.data.data;var i=a.data.data.equipmentDirectoryViewModel.type;t.type=i,t.$Server.queryAll("EqpRentalRecord",{},{rentalTaskID:e}).then((function(e){t.items=e.datas,t.backUpItems=JSON.parse(JSON.stringify(e.datas))}),(function(e){return g["a"].alert(e)}))}),(function(e){return g["a"].alert(e)}))}))},getTitle:function(){return"租赁任务清单"},getFormData:function(){return this.items.forEach((function(e){if(!e.acceptance)throw"请验收全部设备";if(e.acceptanceResult&&!e.status)throw"验收通过的设备需更新台账"})),this.EqpRentalTask},getSourceKey:function(){return"EqpRentalTask"},downloadDocument:function(){var e=document.createElement("a");this.taskDetail.document.dname,this.taskDetail.documentName.substring(this.taskDetail.documentName.lastIndexOf("."));e.href="/documents/"+this.taskDetail.documentName,e.download=this.taskDetail.document.dname,e.click()},resetCheckList:function(){this.$refs.checkList.$refs.form.reset(),this.$refs.checkList.$refs.form.resetValidation()},handleCheck:function(e,t){var a=this,i=JSON.parse(JSON.stringify(this.items));i.splice(t,1);var n="";if(this.clickIndex=t,e.productionNo)if(e.manufacturer){for(var r=0;r<i.length;r++)if(n=i[r],n.productionNo===e.productionNo)return void g["a"].alert("该编号已存在，请重新输入编号");this.resetCheckList(),a.$Server.addOrUpdate("EqpRentalRecord",e,!0).then((function(t){a.$Server.queryAll("EqpRentalAcceptance",null,{type:a.type,eqpRentalRecordID:e.id}).then((function(t){a.checkList=t.datas;var i=[];t.datas.forEach((function(e){var t=a.organizSelect.find((function(t){return t.id===e.departmentID}));if(t){var n=i.find((function(e){return e.id===t.id}));n||i.push(t)}})),a.$refs.checkList.organizList=i,a.isShowCheckList=!0,a.itemDetail=e,a.isEdit=!1}),(function(e){return g["a"].alert(e)}))}),(function(e){return g["a"].alert(e)}))}else g["a"].alert("请填写生产厂商");else g["a"].alert("请填写出厂编号")},checkListConfirm:function(){var e=this;this.isShowCheckList=!1,e.$Server.queryAll("EqpRentalRecord",{},{rentalTaskID:e.businessKey}).then((function(t){e.items=t.datas,e.backUpItems=JSON.parse(JSON.stringify(t.datas))}),(function(e){return g["a"].alert(e)}))},checkListCancle:function(){this.isShowCheckList=!1},checkListClose:function(){var e=this;this.isShowCheckList=!1,e.$Server.queryAll("EqpRentalRecord",{},{rentalTaskID:e.businessKey}).then((function(t){e.items=t.datas,e.backUpItems=JSON.parse(JSON.stringify(t.datas))}),(function(e){return g["a"].alert(e)}))},handleEdit:function(e,t){var a=this;this.resetCheckList(),e.acceptance?a.$Server.queryAll("EqpRentalAcceptance",null,{type:a.type,eqpRentalRecordID:e.id}).then((function(t){a.checkList=t.datas;var i=[];t.datas.forEach((function(e){var t=a.organizSelect.find((function(t){return t.id===e.departmentID}));if(t){var n=i.find((function(e){return e.id===t.id}));n||i.push(t)}})),a.$refs.checkList.organizList=i,a.isShowCheckList=!0,a.itemDetail=e,a.$refs.checkList.departmentID=[e.acceptanceDepart],a.isEdit=!0})):g["a"].alert("设备未验收")},resetequipment:function(){this.$refs.form.resetValidation()},updateAcceptanceList:function(e){var t=this;if(this.$refs.form.resetValidation(),e.acceptanceResult){this.equipment=JSON.parse(JSON.stringify(this.initObj)),this.object=e,this.IsShowDetails=!0,this.equipment.name=this.EqpRentalTask.equipmentDirectoryViewModel.name,this.equipment.model=this.EqpRentalTask.equipmentDirectoryViewModel.model,this.equipment.productionNo=e.productionNo,this.equipment.manufacturer=e.manufacturer;var a=this.equipType.find((function(e){return e.dname===t.EqpRentalTask.type}));this.equipment.type=a;var i=this.equipSourse.find((function(e){return"租赁"===e.dname}));this.equipment.source=i}else g["a"].alert("验收未通过")},deptIdToName:function(e){var t="",a=this.organizSelect.find((function(t){return t.id===e}));return a&&(t=a.name?a.name:""),t},modalClosed:function(){this.IsShowDetails=!1},modalComfirmed:function(){var e=this,t="";this.equipment.name&&this.equipment.type&&this.equipment.position&&this.equipment.status?(t=JSON.parse(JSON.stringify(e.equipment)),t.departmentID&&Array.isArray(t.departmentID)&&t.departmentID.length>0&&(t.departmentID=t.departmentID[0]),t.position&&Array.isArray(t.position)&&t.position.length>0&&(t.position=t.position[0]),t.usedDepartmentID&&Array.isArray(t.usedDepartmentID)&&t.usedDepartmentID.length>0&&(t.usedDepartmentID=t.usedDepartmentID[0]),this.object.equipment=t,e.$Server.addOrUpdate("EqpRentalRecord",e.object,!0).then((function(t){t.success&&(g["a"].alert("保存成功","success"),e.$Server.queryAll("EqpRentalRecord",{},{rentalTaskID:e.businessKey}).then((function(t){e.items=t.datas,e.backUpItems=JSON.parse(JSON.stringify(t.datas))}),(function(e){return g["a"].alert(e)})),e.IsShowDetails=!1)}),(function(e){return g["a"].alert(e)}))):g["a"].alert("请填写必填项")},dayFormat:function(e){return e?new Date(e.replace(/-/g,"/")).getDate():""}},mounted:function(){var e=this;this.$Server.queryAll((new Rt["a"]).__name,{},{searchfx:"生产厂商",deleted:!1}).then((function(t){e.manufacturerList1=t.datas.map((function(e){return e.cname}))})),this.$Server.queryAll((new Bt["a"]).__name,{},{searchEqpStation:!0}).then((function(t){e.forgList=t.datas})),this.$Server.queryAll((new ze["a"]).__name,{},{type:"4"}).then((function(t){e.equipType=t.datas})),this.$Server.queryAll((new ze["a"]).__name,{},{type:"7"}).then((function(t){e.equipSourse=t.datas})),this.$Server.queryAll((new ze["a"]).__name,{},{type:"5"}).then((function(t){e.equipStatus=t.datas})),this.$Server.queryAll((new Rt["a"]).__name,{},{deleted:"false"}).then((function(t){e.supplierList=t.datas.filter((function(e){return e.ctypeName&&e.ctypeName.indexOf("供应商")>-1})),e.manufacturerList=t.datas.filter((function(e){return void 0==e.ctypeName||null==e.ctypeName||e.ctypeName.indexOf("生产厂商")>-1})),e.leaseholderList=t.datas.filter((function(e){return void 0==e.ctypeName||null==e.ctypeName||e.ctypeName.indexOf("租赁厂商")>-1}))}))}},Ca=Ta,Ia=Object(u["a"])(Ca,na,ra,!1,null,null,null),qa=Ia.exports,Oa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("EqpRentalTaskDetail",{ref:"addOrUpdate",attrs:{item:e.detailForUpdate}})},ja=[],Fa=r("ab47"),Aa=r("f800"),Na=new J["a"](new Aa["a"]),La={name:"eqpRentalTaskDetailForm",data:function(){return{detailForUpdate:{id:"",rentalCode:"",name:"",model:"",type:"",latestTime:"",applicant:"",applicantName:"",rentalCount:"",reason:"",status:"",rRentalTaskDocumentList:[{documentViewModel:{}}],equipmentDirectory:"",equipmentDirectoryName:"",equipmentDirectoryViewModel:{}}}},components:{EqpRentalTaskDetail:Fa["a"]},methods:{initForm:function(e){var t=this;e&&this.$Server.queryObjectById(Na.getModelName(),e).then((function(e){var a=e.data.data;t.$refs.addOrUpdate.displayCheck=!0,t.$refs.addOrUpdate.$refs.form.resetValidation(),t.$refs.addOrUpdate.getEqp().then((function(e){t.detailForUpdate=a,t.$refs.addOrUpdate.equipmentDirectory=[a.equipmentDirectory],t.$refs.addOrUpdate.type={dvalue:a.equipmentDirectoryType,dname:a.type},t.detailForUpdate.userViewModel&&(t.detailForUpdate.userViewModel=[t.detailForUpdate.userViewModel].first()),t.IsShow=!0}))}))},getTitle:function(){return"编辑租赁任务"},getFormData:function(){if(1==this.$refs.addOrUpdate.validate())return this.detailForUpdate.changeCount=!0,this.detailForUpdate;throw"验证不通过！"},getSourceKey:function(){return Na.getModelName()},getIsProcessEnd:function(){return!0}}},Ea=La,Pa=Object(u["a"])(Ea,Oa,ja,!1,null,null,null),$a=Pa.exports,Ma=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("购置单编号："+e._s(e.taskDetail.purchaseCode))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("最迟到货日期："+e._s(e.taskDetail.latestTime&&e.taskDetail.latestTime.substring(0,10)))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("申请人："+e._s(e.taskDetail.applicantName))])])],1),e._l(e.taskDetail.rspsList,(function(t,i){return a("v-layout",{key:i},[a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("备件名称："+e._s(t.name))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("规格型号："+e._s(t.model))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("供应商："+e._s(t.supplierName))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("数量："+e._s(t.purchaseCount))])])],1)})),a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("p",[e._v("购置原因："+e._s(e.taskDetail.reason))])])],1)],2)},Ua=[],Ra={name:"DetailBlockForm",data:function(){return{taskDetail:{},params:{}}},methods:{initForm:function(e,t){var a=this;a.params=t,this.$Server.queryObjectById("SpPurchaseTask",e).then((function(e){a.taskDetail=e.data.data}))},getTitle:function(){return 1===this.params.step?"购置任务开始":"购置任务清单"},getFormData:function(){return this.taskDetail.stepDecription="开始执行",this.taskDetail},getSourceKey:function(){return"SpPurchaseTask"}},props:["objectId"]},Va=Ra,Ba=Object(u["a"])(Va,Ma,Ua,!1,null,"4c6df94e",null),za=Ba.exports,Ya=r("b216"),Ha=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",[a("DetailBlock",{attrs:{taskDetail:e.taskDetail}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",e._l(e.headers,(function(i,n){return a("td",{key:n,staticClass:"text-xs-center"},["acceptance"===i.value?[e._v("\r\n                                "+e._s(t.item[i.value]?"已检验":"未检验")+"\r\n                            ")]:"document"===i.value?a("span",[t.item.documentName?a("v-btn",{attrs:{small:""},on:{click:function(a){return e.downloadDocument(t.item.documentName)}}},[e._v("下载")]):e._e()],1):"acceptancePerson"===i.value?[e._v("\r\n                                "+e._s(t.item.acceptancePersonName)+"\r\n                            ")]:"acceptanceResult"===i.value?[e._v("\r\n                                "+e._s(1===t.item[i.value]?"通过":0===t.item[i.value]?"未通过":"")+"\r\n                            ")]:[e._v(e._s(t.item[i.value]))]],2)})),0)]}}])})],1),a("v-layout",[a("v-flex",[a("v-btn",{attrs:{disabled:e.IsSubmit},on:{click:function(t){return e.inStorage()}}},[e._v("入库")])],1)],1),a("contentModal",{attrs:{title:e.title,IsShow:e.IsShow,width:"1100"},on:{modalClosed:function(t){return e.modalClosed()},modalComfirmed:function(t){return e.modalComfirmed()}}},[a("sparePartInStorageDetail",{ref:"addOrUpdate",attrs:{item:e.detailForUpdate,sparePartsList:e.sparePartsList,isCannotEdit:!0}})],1)],1)},Ja=[],Ga=r("3596"),Za=r("0721"),Wa=r("88a5"),Qa=r("681f"),Ka={name:"CheckPanel",data:function(){return{headers:[{text:"备件名称",align:"center",sortable:!1,value:"sparePartsName"},{text:"规格型号",align:"center",sortable:!1,value:"sparePartsModel"},{text:"是否检验",align:"center",sortable:!1,value:"acceptance"},{text:"检验结果",align:"center",sortable:!1,value:"acceptanceResult"},{text:"检验人",align:"center",sortable:!1,value:"acceptancePerson"},{text:"备注",align:"center",sortable:!1,value:"description"},{text:"附件",align:"center",sortable:!1,value:"document"}],dialog:!0,isShow:!1,taskDetail:{},items:[],IsShow:!1,title:"备件入库",sparePartsList:[],detailForUpdate:{type:{dname:"",dvalue:""},rInStorageSparePartViewModels:[]},outTypeList:[],initObject:{id:"",inStorageNo:"",inStorageDate:"",inStoragePerson:"",source:"",type:{dname:"",dvalue:""},sparePartcode:[],sparePartName:[],inventory:[],amount:[],rInStorageSparePartViewModels:[]},IsSubmit:!1}},components:{DetailBlock:Wa["a"],sparePartInStorageDetail:Za["a"],contentModal:Y["a"]},mounted:function(){var e=this;this.$Server.queryAll((new ze["a"]).__name,{},{dname:"入库类型"}).then((function(t){e.outTypeList=t.datas}))},methods:{initForm:function(e,t){var a=this;a.params=t,this.$Server.queryObjectById("SpPurchaseTask",e).then((function(e){a.taskDetail=e.data.data,a.taskDetail.inStorage&&1==a.taskDetail.inStorage&&(a.IsSubmit=!0)})),a.$Server.queryAll("SpPurchaseAcceptance",{},{purchaseTaskID:e}).then((function(e){a.items=e.datas}),(function(e){return g["a"].alert(e)}))},getTitle:function(){return"购置任务清单"},getFormData:function(){if(1==this.IsSubmit)return this.taskDetail;throw"请先入库"},getSourceKey:function(){return"SpPurchaseTask"},inStorage:function(){this.IsShow=!0,this.detailForUpdate=JSON.parse(JSON.stringify(this.initObject)),this.detailForUpdate.inStoragePersonName=window.sessionStorage.getItem("uname"),this.detailForUpdate.inStorageDate=kt()(new Date).format("YYYY-MM-DD"),this.detailForUpdate.type=this.outTypeList.find((function(e){return"购置"==e.dname})),this.detailForUpdate.source="备件购置（"+this.taskDetail.purchaseCode+"）",this.detailForUpdate.inStorageDate=kt()(new Date).format("YYYY-MM-DD");var e=[],t=[];this.taskDetail.rspsList&&this.taskDetail.rspsList.length>0&&this.taskDetail.rspsList.forEach((function(a,i){e.push({codeName:a.code+"("+a.name+")",model:a.model,id:a.sparePartsID,name:a.name,code:a.code,applyAmount:a.purchaseCount,inventory:a.inventory}),t.push({spareCode:a.code,model:a.model,spareName:a.name,applyAmount:a.purchaseCount,amount:a.purchaseCount,storageLocationID:"",sparePartsID:a.sparePartsID,spareObj:{id:a.sparePartsID,codeName:a.code+"("+a.name+")",inventory:a.inventory},inventory:a.inventory,id:i+1})})),this.sparePartsList=e,this.detailForUpdate.rInStorageSparePartViewModels=t},modalClosed:function(){this.IsShow=!1},modalComfirmed:function(){var e=this,t=Object.assign({},e.taskDetail),a=e.detailForUpdate.rInStorageSparePartViewModels;if(0!==a.length){for(var i=0;i<a.length;i++)if(""==a[i].storageLocationID||null==a[i].storageLocationID||void 0==a[i].storageLocationID)return void g["a"].alert("入库位置不能为空");console.log(a);for(var n={},r="",s=0;s<a.length;s++)r=a[s].sparePartsID,n[r]||(n[r]=!0);var l=[],o=[],c=0,u=function(e){if(l=a.filter((function(t){return t.sparePartsID===e})),o=l.map((function(e){return 1*e.amount})),c=o.reduce((function(e,t){return e+t})),c>1*l[0].applyAmount)return g["a"].alert(l[0].spareName+"的入库数量不能大于申请数量"),{v:void 0}};for(var d in n){var p=u(d);if("object"===Object(Ga["a"])(p))return p.v}var m=[],f=[],v=0,h=[],b=function(e){m=a.filter((function(t){return t.sparePartsID===e})),f=m.map((function(e){return 1*e.amount})),v=f.reduce((function(e,t){return e+t})),v<1*m[0].applyAmount&&h.push(m[0].spareName)};for(var x in n)b(x);h.length>0?Qa["a"].confirm(h.join()+"的入库数量小于申请数量,确认入库吗","提示",500,(function(){t.inStorageViewModel=e.detailForUpdate,1==e.$refs.addOrUpdate.validate()&&e.$Server.addOrUpdate("SpPurchaseTask",t,!0).then((function(t){t.success&&(e.IsShow=!1,g["a"].alert("保存成功","success"),e.IsSubmit=!0)}),(function(e){g["a"].alert(e)}))}),(function(){})):(t.inStorageViewModel=e.detailForUpdate,1==e.$refs.addOrUpdate.validate()&&e.$Server.addOrUpdate("SpPurchaseTask",t,!0).then((function(t){t.success&&(e.IsShow=!1,g["a"].alert("保存成功","success"),e.IsSubmit=!0)}),(function(e){g["a"].alert(e)})))}else g["a"].alert("请添加入库明细")},downloadDocument:function(e){var t=document.createElement("a"),a=e.substring(e.lastIndexOf("_")+1);t.href=e,t.download=a,t.click()}}},Xa=Ka,ei=Object(u["a"])(Xa,Ha,Ja,!1,null,null,null),ti=ei.exports,ai=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("spPurchaseDetail",{ref:"addOrUpdate",attrs:{spPurchaseTaskModal:e.detailForUpdate}})},ii=[],ni=r("f891"),ri=r("5b9b"),si=new J["a"](new ri["a"]),li={name:"spPurchaseTaskDetailForm",data:function(){return{detailForUpdate:{purchaseCode:"",applicant:"",applicantName:"",latestTime:kt()(new Date).format("YYYY-MM-DD"),reason:"",rspsList:[{}]}}},components:{spPurchaseDetail:ni["a"]},methods:{initForm:function(e){var t=this;e&&t.$refs.addOrUpdate.getData().then((function(a){t.$Server.queryObjectById(si.getModelName(),e).then((function(e){t.detailForUpdate=e.data.data;var a=t.detailForUpdate.applicant,i=t.detailForUpdate.applicantName;t.detailForUpdate.selectAssign=[{uname:i,id:a,selected:!0,title:i,name:i}]}))}))},getTitle:function(){return"编辑备件购置任务"},getFormData:function(){if(1==this.$refs.addOrUpdate.validate())return this.detailForUpdate.rspsList=this.$refs.addOrUpdate.rspsList,this.detailForUpdate;throw"验证不通过！"},getSourceKey:function(){return si.getModelName()},getIsProcessEnd:function(){return!0}}},oi=li,ci=Object(u["a"])(oi,ai,ii,!1,null,null,null),ui=ci.exports,di=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("盘点单编号："+e._s(e.SpInventoryTask.inventoryCode))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("开始日期："+e._s(e.SpInventoryTask.startDate?e.SpInventoryTask.startDate.substring(0,10):""))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("结束日期："+e._s(e.SpInventoryTask.endDate?e.SpInventoryTask.endDate.substring(0,10):""))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("负责人："+e._s(e.SpInventoryTask.assignName))])]),"2"==e.params.step?a("v-flex",{attrs:{xs12:""}},[a("v-btn",{staticStyle:{margin:"0px"},attrs:{depressed:"",small:"",color:"primary"},on:{click:function(t){return e.print()}}},[e._v("打印盘点清单")])],1):e._e()],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("div",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},["2"==e.params.step?a("mergeTable",{ref:"childDataTable",attrs:{fieldName:"positionViewModel.positionName",headers:e.merheaders,hideHeaders:!1,sort:!1,items:e.getItems,allowActive:!1,hideOperation:!0}}):e._e()],1),"3"==e.params.step||"4"==e.params.step||"5"==e.params.step?a("mergeTable",{ref:"childDataTable",attrs:{fieldName:"positionViewModel.positionName",headers:e.headers,hideHeaders:!1,sort:!1,items:e.getItems,allowActive:!1,hideOperation:!0}}):e._e()],1),"3"==e.params.step?a("div",[e._v("是否有差异：\n                    "),a("v-radio-group",{staticStyle:{display:"inline-block","vertical-align":"middle"},attrs:{column:!1},model:{value:e.SpInventoryTask.hasDifference,callback:function(t){e.$set(e.SpInventoryTask,"hasDifference",t)},expression:"SpInventoryTask.hasDifference"}},[a("v-radio",{key:!0,attrs:{label:"是",value:!0}}),a("v-radio",{key:!1,attrs:{label:"否",value:!1}})],1)],1):e._e(),"4"==e.params.step||"5"==e.params.step?a("div",{staticStyle:{"margin-top":"17px"}},[e._v("是否有差异："+e._s(e.SpInventoryTask.hasDifference?"是":"否"))]):e._e(),"4"==e.params.step||"5"==e.params.step?a("div",{staticStyle:{"margin-top":"7px"}},[e._v("盘点报告："+e._s(e.SpInventoryTask.inventoryReport))]):e._e()])],1)],1)],1)},pi=[],mi=r("73e5"),fi=r("52d6"),vi=new J["a"](new mi["a"]),hi={name:"sparePartsInventoryForm",data:function(){return{SpInventoryTask:{},valid:!0,params:{},merheaders:[{text:"备件位置",value:"positionViewModel.positionName",align:"center",sortable:!1},{text:"备件编号",value:"positionViewModel.code",align:"center",sortable:!1},{text:"备件名称",value:"positionViewModel.name",align:"center",sortable:!1},{text:"规格型号",value:"positionViewModel.model",align:"center",sortable:!1},{text:"库存量",value:"positionViewModel.inventory",align:"center",sortable:!1},{text:"实际数量",value:"actualInventory",align:"center",sortable:!1,fieldType:"numberField",inlineEdit:!0,required:!0}],headers:[{text:"备件位置",value:"positionViewModel.positionName",align:"center",sortable:!1},{text:"备件编号",value:"positionViewModel.code",align:"center",sortable:!1},{text:"备件名称",value:"positionViewModel.name",align:"center",sortable:!1},{text:"规格型号",value:"positionViewModel.model",align:"center",sortable:!1},{text:"库存量",value:"positionViewModel.inventory",align:"center",sortable:!1},{text:"实际数量",value:"actualInventory",align:"center",sortable:!1},{text:"盈亏数量",value:"differenceCountStr",align:"center",sortable:!1}]}},computed:{getItems:function(){var e=this,t=[];return t=e.SpInventoryTask.recordList?e.SpInventoryTask.recordList:[],t.forEach((function(e){e.differenceCount<0?e.differenceCountStr='<span style="color:red">'+e.differenceCount+"</span>":e.differenceCount>0?e.differenceCountStr='<span style="color:#83d944">'+e.differenceCount+"</span>":e.differenceCountStr=e.differenceCount})),t}},components:{mergeTable:fi["a"]},methods:{initForm:function(e,t){var a=this;a.params=t,e&&a.$Server.queryObjectById(vi.getModelName(),e).then((function(e){a.SpInventoryTask=e.data.data,"3"==a.params.step&&(a.SpInventoryTask.hasDifference=!0)}))},getTitle:function(){return"盘点任务清单"},getFormData:function(){if("2"==this.params.step&&0==this.$refs.form.validate())throw"请填写实际数量！";return this.SpInventoryTask},getSourceKey:function(){return"SpInventoryTask"},print:function(){var e=this;window.open("/#/sparePartsInventoryPrint?id="+e.SpInventoryTask.id,"_blank")}}},bi=hi,gi=(r("d058"),Object(u["a"])(bi,di,pi,!1,null,"d074711a",null)),xi=gi.exports,yi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[e._v("\n            闲置处理单编号："),a("span",[e._v(e._s(e.EqpUnusedTrendTask.trendCode))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n            截止日期："),a("span",[e._v(e._s((e.EqpUnusedTrendTask.deadline||"").split(" ")[0]))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n            申请人："),a("span",[e._v(e._s(e.EqpUnusedTrendTask.applicantName))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n            处理方式："),a("span",[e._v(e._s(e.EqpUnusedTrendTask.trendMode.dname))])]),a("v-flex",{attrs:{xs12:""}},[e._v("\n            闲置处理原因："),a("span",[e._v(e._s(e.EqpUnusedTrendTask.reason))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n            设备名称："),a("span",[e._v(e._s(e.EqpUnusedTrendTask.equipment.name))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n            规格型号："),a("span",[e._v(e._s(e.EqpUnusedTrendTask.equipment.model))])]),a("v-flex",{attrs:{xs12:""}},[e._v("\n            设备类型："),a("span",[e._v(e._s(e.EqpUnusedTrendTask.equipment.type.dname))])]),e._l(e.EqpUnusedTrendTask.rUnusedTrendDocumentList,(function(e,t){return a("v-flex",{key:e.id,attrs:{xs12:""}},[a("view-file",{attrs:{documentViewModel:e.documentViewModel,color:"primary"}})],1)}))],2)],1)},ki=[],Si={name:"eqpUnusedTrendTaskForm",data:function(){return{EqpUnusedTrendTask:{trendMode:{},equipment:{type:{}},rUnusedTrendDocumentList:[{documentViewModel:{}}]}}},methods:{initForm:function(e,t){var a=this;a.params=t,e&&a.$Server.queryObjectById("EqpUnusedTrendTask",e).then((function(e){a.EqpUnusedTrendTask=e.data.data}))},getTitle:function(){return"闲置处理任务清单"},getFormData:function(){return this.EqpUnusedTrendTask},getSourceKey:function(){return"EqpUnusedTrendTask"},downloadTemp:function(e,t){var a=document.createElement("a");a.href=t,a.download=e,a.click()}}},_i=Si,wi=Object(u["a"])(_i,yi,ki,!1,null,"1498ddeb",null),Di=wi.exports,Ti=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("eqpUnusedTrendTaskDetail",{ref:"addOrUpdate",attrs:{item:e.detailForUpdate}})},Ci=[],Ii=r("a8b8"),qi=r("1d40"),Oi=new J["a"](new qi["a"]),ji={name:"eqpUnusedTrendTaskDetailForm",data:function(){return{detailForUpdate:{id:"",trendCode:"",deadline:"",trendMode:{dname:""},applicantName:"",status:{},reason:"",equipment:{id:"",name:"",model:"",type:{dname:""},position:""},rentCompany:"",userViewModel:{},documentList:[],rUnusedTrendDocumentList:[]}}},components:{eqpUnusedTrendTaskDetail:Ii["a"]},mounted:function(){var e=this;e.$refs.addOrUpdate.$refs.form.resetValidation()},methods:{initForm:function(e){var t=this;e&&this.$Server.queryObjectById(Oi.getModelName(),e).then((function(e){t.detailForUpdate=e.data.data,t.detailForUpdate.equipmentID=[t.detailForUpdate.equipmentID],t.$refs.addOrUpdate.changeSelected(t.detailForUpdate.equipmentID),t.detailForUpdate.deadline=t.detailForUpdate.deadline.substring(0,10)}))},getTitle:function(){return"编辑闲置处理任务"},getFormData:function(){if(1==this.$refs.addOrUpdate.validate())return Array.isArray(this.detailForUpdate.equipmentID)&&this.detailForUpdate.equipmentID.length>0&&(this.detailForUpdate.equipmentID=this.detailForUpdate.equipmentID[0]),this.detailForUpdate;throw"验证不通过！"},getSourceKey:function(){return Oi.getModelName()},getIsProcessEnd:function(){return!0}}},Fi=ji,Ai=Object(u["a"])(Fi,Ti,Ci,!1,null,null,null),Ni=Ai.exports,Li=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[e._v("\n            闲置处理单编号："),a("span",[e._v(e._s(e.EqpUnusedTrendTask.trendCode))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n            截止日期："),a("span",[e._v(e._s((e.EqpUnusedTrendTask.deadline||"").split(" ")[0]))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n            申请人："),a("span",[e._v(e._s(e.EqpUnusedTrendTask.applicantName))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n            处理方式："),a("span",[e._v(e._s(e.EqpUnusedTrendTask.trendMode.dname))])]),a("v-flex",{attrs:{xs12:""}},[e._v("\n            闲置处理原因："),a("span",[e._v(e._s(e.EqpUnusedTrendTask.reason))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n            设备名称："),a("span",[e._v(e._s(e.EqpUnusedTrendTask.equipment.name))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n            规格型号："),a("span",[e._v(e._s(e.EqpUnusedTrendTask.equipment.model))])]),a("v-flex",{attrs:{xs12:""}},[e._v("\n            设备类型："),a("span",[e._v(e._s(e.EqpUnusedTrendTask.equipment.type.dname))])]),e._l(e.EqpUnusedTrendTask.rUnusedTrendDocumentList,(function(e,t){return a("v-flex",{key:e.id,attrs:{xs12:""}},[a("view-file",{attrs:{documentViewModel:e.documentViewModel,color:"primary"}})],1)})),a("v-flex",{attrs:{xs12:""}},[a("v-btn",{staticClass:"primary",attrs:{disabled:e.IsSubmit},on:{click:e.updateAccounts}},[e._v("更新台账")])],1)],2)],1)},Ei=[],Pi=new J["a"](new qi["a"]),$i={name:"eqpUnusedTrendTaskAccountsForm",data:function(){return{EqpUnusedTrendTask:{trendMode:{},equipment:{type:{}},rUnusedTrendDocumentList:[{documentViewModel:{}}]},IsSubmit:!1}},methods:{initForm:function(e,t){var a=this;a.params=t,e&&a.$Server.queryObjectById("EqpUnusedTrendTask",e).then((function(e){a.EqpUnusedTrendTask=e.data.data,a.EqpUnusedTrendTask&&a.EqpUnusedTrendTask.updateEquipment&&1==a.EqpUnusedTrendTask.updateEquipment&&(a.IsSubmit=!0)}))},getTitle:function(){return"闲置处理任务清单"},getFormData:function(){if(1==this.IsSubmit)return this.EqpUnusedTrendTask;throw"请先更新台账"},getSourceKey:function(){return"EqpUnusedTrendTask"},downloadTemp:function(e,t){var a=document.createElement("a");a.href=t,a.download=e,a.click()},updateAccounts:function(){var e=this,t=[];t.push(this.EqpUnusedTrendTask),e.$Server.batchUpdate(Pi.getModelName(),t).then((function(t){t.success&&(g["a"].alert("更新成功","success"),e.IsSubmit=!0)}),(function(e){g["a"].alert(e)}))}}},Mi=$i,Ui=Object(u["a"])(Mi,Li,Ei,!1,null,"8b1f518c",null),Ri=Ui.exports,Vi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[""!=e.EqpStoppageTask?a("v-layout",{staticStyle:{padding:"0 20px"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[e._v("\n            报修单编号："),a("span",[e._v(e._s(e.EqpStoppageTask.stoppageTaskCode))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n            设备编号："),a("span",[e._v(e._s(e.EqpStoppageTask.equipment.code))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n            设备名称："),a("span",[e._v(e._s(e.EqpStoppageTask.equipment.name))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n            规格型号："),a("span",[e._v(e._s(e.EqpStoppageTask.equipment.model))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n            设备类型："),a("span",[e._v(e._s(e.EqpStoppageTask.equipment.type.dname))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n            设备位置："),a("span",[e._v(e._s(e.EqpStoppageTask.equipment.factoryName))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n            异常类型："),a("span",[e._v(e._s(e.EqpStoppageTask.stoppageType.dname))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n            报修日期："),a("span",[e._v(e._s((e.EqpStoppageTask.applicantTime||"").substring(0,16)))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n            报修人："),a("span",[e._v(e._s(e.EqpStoppageTask.applicantName))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n            紧急程度："),a("span",[e._v(e._s(e.EqpStoppageTask.urgency.dname))])]),a("v-flex",{attrs:{xs12:""}},[e._v("\n            异常描述："),a("span",[e._v(e._s(e.EqpStoppageTask.description))])]),e._l(e.EqpStoppageTask.rStoppageTaskDocumentList,(function(e,t){return a("v-flex",{key:e.id,attrs:{xs12:""}},[a("view-file",{attrs:{documentViewModel:e.documentViewModel,color:"primary"}})],1)}))],2):e._e()],1)},Bi=[],zi={name:"eqpStoppageTaskForm",data:function(){return{EqpStoppageTask:{equipment:{type:{}},stoppageType:{},urgency:{dname:""},rStoppageTaskDocumentList:[{documentViewModel:{}}]}}},methods:{initForm:function(e,t){var a=this;a.params=t,e&&a.$Server.queryObjectById("EqpStoppageTask",e).then((function(e){a.EqpStoppageTask=e.data.data}))},getTitle:function(){return"故障报修任务清单"},getFormData:function(){return this.EqpStoppageTask},getSourceKey:function(){return"EqpStoppageTask"},downloadTemp:function(e,t){var a=document.createElement("a");a.href=t,a.download=e,a.click()}}},Yi=zi,Hi=Object(u["a"])(Yi,Vi,Bi,!1,null,"197ef280",null),Ji=Hi.exports,Gi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("eqpStoppageTaskDetail",{ref:"addOrUpdate",attrs:{item:e.detailForUpdate}})},Zi=[],Wi=r("e11a"),Qi=r("d712"),Ki=new J["a"](new Qi["a"]),Xi={name:"spReceiveTaskDetailForm",data:function(){return{detailForUpdate:{id:"",stoppageTaskCode:"",stoppageType:{dvalue:null},urgency:{dname:"",dvalue:null},applicantTime:new Date,applicantName:"",status:{},description:"",equipment:{type:{}},userViewModel:[],rStoppageTaskDocumentList:[],equipmentID:[]}}},components:{eqpStoppageTaskDetail:Wi["a"]},mounted:function(){var e=this;e.$refs.addOrUpdate.$refs.form.resetValidation()},methods:{initForm:function(e){var t=this;e&&this.$Server.queryObjectById(Ki.getModelName(),e).then((function(e){e.data.data&&e.data.data.equipmentID&&(e.data.data.equipmentID=[e.data.data.equipmentID]),t.detailForUpdate=e.data.data,t.detailForUpdate.userViewModel=[t.detailForUpdate.userViewModel]}))},getTitle:function(){return"编辑故障报修任务"},getFormData:function(){if(1==this.$refs.addOrUpdate.validate())return this.detailForUpdate;throw"验证不通过！"},getSourceKey:function(){return Ki.getModelName()},getIsProcessEnd:function(){return!0}}},en=Xi,tn=Object(u["a"])(en,Gi,Zi,!1,null,null,null),an=tn.exports,nn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("spScrapTaskDetail",{ref:"addOrUpdate",attrs:{item:e.detailForUpdate}})},rn=[],sn=r("bbe0"),ln=r("e5dc"),on=new J["a"](new ln["a"]),cn={name:"spScrapTaskDetailForm",data:function(){return{detailForUpdate:{id:"",scrapCode:"",scrapDate:"",applicantName:"",status:"",applicant:"",document:"",reason:"",spareCodes:[],spareNames:[],sparePositions:[],spareCounts:[],userVersion:"",userViewModel:[],spscrapSparepartList:[{}]}}},components:{spScrapTaskDetail:sn["a"]},methods:{initForm:function(e){var t=this;e&&this.$Server.queryObjectById(on.getModelName(),e).then((function(e){t.detailForUpdate=e.data.data,t.$refs.addOrUpdate.initEditLoacation(t.detailForUpdate)}))},getTitle:function(){return"编辑备件报废任务"},getFormData:function(){if(1==this.$refs.addOrUpdate.validate())return this.detailForUpdate;throw"验证不通过！"},getSourceKey:function(){return on.getModelName()},getIsProcessEnd:function(){return!0}}},un=cn,dn=Object(u["a"])(un,nn,rn,!1,null,null,null),pn=dn.exports,mn=r("643a"),fn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-layout",{staticStyle:{padding:"0 20px"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs4:""}},[e._v("\n      报废单编号："),a("span",[e._v(e._s(e.SpScrapTask.scrapCode))])]),a("v-flex",{attrs:{xs4:""}},[e._v("\n      报废日期："),a("span",[e._v(e._s((e.SpScrapTask.scrapDate||"").split(" ")[0]))])]),a("v-flex",{attrs:{xs4:""}},[e._v("\n      申请人："),a("span",[e._v(e._s(e.SpScrapTask.applicantName))])])],1),e._l(e.SpScrapTask.spscrapSparepartList,(function(t){return a("v-layout",{key:t.id,staticStyle:{padding:"10px 20px"},attrs:{row:"",wrap:""}},[a("v-flex",[e._v("\n      备件编号："),a("span",[e._v(e._s(t.spareCode))])]),a("v-flex",[e._v("\n      备件位置："),a("span",[e._v(e._s(t.sparePosition))])]),a("v-flex",[e._v("\n      备件名称："),a("span",[e._v(e._s(t.spareName))])]),a("v-flex",[e._v("\n      规格型号："),a("span",[e._v(e._s(t.spareModel))])]),a("v-flex",[e._v("\n      数量："),a("span",[e._v(e._s(t.scrapCount))])])],1)})),a("v-flex",{attrs:{xs12:""}},[e._v("\n    报废原因："),a("span",[e._v(e._s(e.SpScrapTask.reason))])]),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:null!==e.SpScrapTask.document.newestFilePath,expression:"SpScrapTask.document.newestFilePath !== null"}],attrs:{xs12:""}},[a("view-file",{attrs:{documentViewModel:e.SpScrapTask.document,color:"primary"}})],1),3==e.params?a("v-flex",{attrs:{xs12:""}},[e._v("\n    备件是否在库："),a("span",[e._v(e._s(e.SpScrapTask.isSparePosition))])]):e._e(),a("v-flex",{attrs:{xs12:""}},[a("v-btn",{staticClass:"primary",attrs:{disabled:e.IsSubmit},on:{click:e.updateAccounts}},[e._v("报废并更新台账")])],1)],2)},vn=[],hn=new J["a"](new ln["a"]),bn={name:"spScrapTaskAccountsForm",data:function(){return{item:{},params:"",SpScrapTask:{},IsSubmit:!1}},methods:{initForm:function(e,t){var a=this;a.params=t,e&&a.$Server.queryObjectById("SpScrapTask",e).then((function(e){a.SpScrapTask=e.data.data,a.SpScrapTask&&a.SpScrapTask.scrapSpare&&1==a.SpScrapTask.scrapSpare&&(a.IsSubmit=!0)}))},getTitle:function(){return"备件报废任务清单"},getFormData:function(){if(1==this.IsSubmit)return this.SpScrapTask;throw"请先报废备件"},getSourceKey:function(){return"SpScrapTask"},downloadTemp:function(){},updateAccounts:function(){var e=this,t=[];t.push(this.SpScrapTask),e.$Server.batchUpdate(hn.getModelName(),t).then((function(t){t.success&&(g["a"].alert("操作成功","success"),e.IsSubmit=!0)}),(function(e){g["a"].alert(e)}))}}},gn=bn,xn=Object(u["a"])(gn,fn,vn,!1,null,"00ec261b",null),yn=xn.exports,kn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[e._v("\n            调拨单编号："),a("span",[e._v(e._s(e.EqpAllocateTask.allocateCode))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n            截止日期："),a("span",[e._v(e._s((e.EqpAllocateTask.deadline||" ").split(" ")[0]))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n            申请人："),a("span",[e._v(e._s(e.EqpAllocateTask.applicantName))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n            需求部门："),a("span",[e._v(e._s(e.EqpAllocateTask.demandDepartName))])]),a("v-flex",{attrs:{xs12:""}},[e._v("\n            调拨原因："),a("span",[e._v(e._s(e.EqpAllocateTask.reason))])]),a("v-flex",{attrs:{xs12:""}},[a("span",{staticStyle:{"font-weight":"bold",width:"100%","padding-top":"20px"}},[e._v("调拨明细:")])]),a("v-flex",{attrs:{xs12:""}},[a("simpleDataTable",{ref:"childDataTable",attrs:{headers:e.headers,hideHeaders:!1,sort:!0,items:e.EqpAllocateTask.equipmentList,hideOperation:!0,formatFields:e.FormatFields}})],1),e._l(e.EqpAllocateTask.allocateDocumentList,(function(e,t){return a("v-flex",{key:e.id,attrs:{xs12:""}},[a("view-file",{attrs:{documentViewModel:e.documentViewModel,color:"primary"}})],1)}))],2)],1)},Sn=[],_n=r("ef3e"),wn=r("9ee5"),Dn=new J["a"](new wn["a"]),Tn={name:"EqpAllocateTask",data:function(){return{EqpAllocateTask:{equipmentList:[]},headers:[{text:"设备编号",value:"code",align:"center",sortable:!1},{text:"设备名称",value:"name",align:"center",sortable:!1},{text:"规格型号",value:"model",align:"center",sortable:!1},{text:"设备类型",value:"type",align:"center",sortable:!1},{text:"使用部门",value:"usedDepartName",align:"center",sortable:!1}],FormatFields:Dn.getFormatFields()}},components:{simpleDataTable:_n["a"]},methods:{initForm:function(e,t){var a=this;a.params=t,e&&a.$Server.queryObjectById("EqpAllocateTask",e).then((function(e){a.EqpAllocateTask=e.data.data}))},getTitle:function(){return"设备调拨任务清单"},getFormData:function(){return this.EqpAllocateTask},getSourceKey:function(){return"EqpAllocateTask"},downloadTemp:function(e,t){var a=document.createElement("a");a.href=t,a.download=e,a.click()}}},Cn=Tn,In=Object(u["a"])(Cn,kn,Sn,!1,null,"89ac566a",null),qn=In.exports,On=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("EqpAllocateTaskDetail",{ref:"addOrUpdate",attrs:{item:e.detailForUpdate}})},jn=[],Fn=r("ccfe"),An=r("95d5"),Nn=new J["a"](new An["a"]),Ln={name:"EqpAllocateTaskDetailForm",data:function(){return{detailForUpdate:{id:"",allocateCode:"",deadline:"",demandDepartment:"",applicant:"",applicantName:"",status:{},reason:"",demandDepartName:"",equipmentList:[],allocateDocumentList:[],taskEquipmentList:[]}}},components:{EqpAllocateTaskDetail:Fn["a"]},methods:{initForm:function(e){var t=this;e&&this.$Server.queryObjectById(Nn.getModelName(),e).then((function(e){t.detailForUpdate=e.data.data,t.detailForUpdate.deadline=t.detailForUpdate.deadline.substring(0,10)}))},getTitle:function(){return"编辑设备调拨任务"},getFormData:function(){if(1==this.$refs.addOrUpdate.validate())return this.detailForUpdate;throw"验证不通过！"},getSourceKey:function(){return Nn.getModelName()},getIsProcessEnd:function(){return!0}}},En=Ln,Pn=Object(u["a"])(En,On,jn,!1,null,null,null),$n=Pn.exports,Mn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[e._v("\n      调拨单编号："),a("span",[e._v(e._s(e.EqpAllocateTask.allocateCode))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n      截止日期："),a("span",[e._v(e._s((e.EqpAllocateTask.deadline||" ").split(" ")[0]))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n      申请人："),a("span",[e._v(e._s(e.EqpAllocateTask.applicantName))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n      需求部门："),a("span",[e._v(e._s(e.EqpAllocateTask.demandDepartName))])]),a("v-flex",{attrs:{xs12:""}},[e._v("\n      调拨原因："),a("span",[e._v(e._s(e.EqpAllocateTask.reason))])]),a("v-flex",{attrs:{xs12:""}},[a("span",{staticStyle:{"font-weight":"bold",width:"100%","padding-top":"20px"}},[e._v("调拨明细:")])]),a("v-flex",{attrs:{xs12:""}},[a("simpleDataTable",{ref:"childDataTable",attrs:{headers:e.headers,hideHeaders:!1,sort:!0,items:e.EqpAllocateTask.equipmentList,hideOperation:!0,formatFields:e.FormatFields}})],1),e._l(e.EqpAllocateTask.allocateDocumentList,(function(e,t){return a("v-flex",{key:e.id,attrs:{xs12:""}},[a("view-file",{attrs:{documentViewModel:e.documentViewModel,color:"primary"}})],1)})),a("v-flex",{attrs:{xs12:""}},[a("v-btn",{staticClass:"primary",attrs:{disabled:e.IsSubmit},on:{click:e.updateAccounts}},[e._v("更新台账")])],1)],2)],1)},Un=[],Rn=new J["a"](new wn["a"]),Vn={name:"EqpAllocateTask",data:function(){return{EqpAllocateTask:{equipmentList:[]},headers:[{text:"设备编号",value:"code",align:"center",sortable:!1},{text:"设备名称",value:"name",align:"center",sortable:!1},{text:"规格型号",value:"model",align:"center",sortable:!1},{text:"设备类型",value:"type",align:"center",sortable:!1},{text:"使用部门",value:"usedDepartName",align:"center",sortable:!1}],FormatFields:Rn.getFormatFields(),IsSubmit:!1}},components:{simpleDataTable:_n["a"]},methods:{initForm:function(e,t){var a=this;a.params=t,e&&a.$Server.queryObjectById("EqpAllocateTask",e).then((function(e){a.EqpAllocateTask=e.data.data,a.EqpAllocateTask&&a.EqpAllocateTask.updateEquipment&&1==a.EqpAllocateTask.updateEquipment&&(a.IsSubmit=!0)}))},getTitle:function(){return"设备调拨任务清单"},getFormData:function(){if(1==this.IsSubmit)return this.EqpAllocateTask;throw"请先更新台账"},getSourceKey:function(){return"EqpAllocateTask"},downloadTemp:function(e,t){var a=document.createElement("a");a.href=t,a.download=e,a.click()},updateAccounts:function(){var e=this,t=[];t.push(this.EqpAllocateTask),e.$Server.batchUpdate("EqpAllocateTask",t).then((function(t){t.success&&(g["a"].alert("更新成功","success"),e.IsSubmit=!0)}),(function(e){g["a"].alert(e)}))}}},Bn=Vn,zn=Object(u["a"])(Bn,Mn,Un,!1,null,"5de1b48c",null),Yn=zn.exports,Hn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("DetailBlock",{attrs:{taskDetail:e.SpRepairTask}}),e.step&&2==e.step?a("v-layout",[a("v-btn",{staticClass:"primary",attrs:{disabled:e.IsSubmit},on:{click:function(t){return e.outStorageSpare()}}},[e._v("出库")])],1):e._e(),a("contentModal",{attrs:{title:e.outTitle,IsShow:e.IsShow,width:"1100"},on:{modalClosed:function(t){return e.modalClosed()},modalComfirmed:function(t){return e.modalComfirmed()}}},[a("sparePartOutStorageDetail",{ref:"addOrUpdate",attrs:{item:e.detailForUpdate,sparePartsList:e.sparePartsList,isCheck:!0}})],1)],1)},Jn=[],Gn=r("53b8"),Zn=r("2080"),Wn={name:"spRepairTaskForm",data:function(){return{SpRepairTask:{},title:"",step:"",detailForUpdate:{type:{dvalue:1,dname:"送修"},source:"",outStorageSparePartList:[]},IsShow:!1,outTitle:"备件出库",sparePartsList:[],IsSubmit:!1,storageLocationIDList:[]}},components:{DetailBlock:Zn["a"],contentModal:Y["a"],sparePartOutStorageDetail:Gn["a"]},methods:{initForm:function(e,t){var a=this;e&&(a.$Server.queryObjectById("SpRepairTask",e).then((function(e){a.SpRepairTask=e.data.data,a.SpRepairTask.outStorage&&1==a.SpRepairTask.outStorage&&(a.IsSubmit=!0)})),a.$Server.queryAll("SparePosition").then((function(e){a.storageLocationIDList=e.datas}))),t&&t.step&&(a.params=t,a.step=parseInt(t.step),0===a.step?a.title="备件送修开始":1===a.step?a.title="备件送修审批":2===a.step?a.title="出库审批":3===a.step?a.title="维修完成审批":4===a.step&&(a.title="入库审批"))},getFormData:function(){if(!this.IsSubmit&&2==this.step)throw"请先出库";return this.SpRepairTask.outStorage=this.IsSubmit,this.SpRepairTask},getSourceKey:function(){return"SpRepairTask"},detailClose:function(){this.$emit("detailClose")},getTitle:function(){return this.title},outStorageSpare:function(){var e=this,t=[],a="",i="";this.IsShow=!0,this.detailForUpdate.outStoragePerson=window.sessionStorage.getItem("userId"),this.detailForUpdate.outStoragePersonName=window.sessionStorage.getItem("uname"),this.detailForUpdate.source="备件送修（"+this.SpRepairTask.repairCode+"）",this.detailForUpdate.outStorageDate=kt()(new Date).format("YYYY-MM-DD");var n=[];this.SpRepairTask.rsrtsList.forEach((function(r){t=e.storageLocationIDList.filter((function(e){return e.storageLocationID===r.storageLocationID})),a=t.find((function(e){return e.sparePartsID===r.sparePartsID})),a&&a.inventory&&(i=a.inventory),n.push({sparePartsID:r.sparePartsID,storageLocationID:r.storageLocationID,amount:r.receiveCount,spareCode:r.sparePartsCode,model:r.sparePartsModel,spareName:r.sparePartsName,storageLocationName:r.storageLocationName,applyAmount:r.receiveCount,inventory:i})})),this.detailForUpdate.outStorageSparePartList=n},modalClosed:function(){this.IsShow=!1},modalComfirmed:function(){var e=this,t=Object.assign({},e.SpRepairTask);t.outStorageViewModel=e.detailForUpdate,1==e.$refs.addOrUpdate.validate()&&e.$Server.addOrUpdate("SpRepairTask",t,!0).then((function(t){t.success&&(e.IsShow=!1,g["a"].alert("保存成功","success"),e.IsSubmit=!0)}),(function(e){g["a"].alert(e)}))}}},Qn=Wn,Kn=Object(u["a"])(Qn,Hn,Jn,!1,null,"79e17324",null),Xn=Kn.exports,er=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("spRepairTaskDetail",{ref:"addOrUpdate",attrs:{item:e.detailForUpdate}})},tr=[],ar=r("0d46"),ir=r("e557"),nr=new J["a"](new ar["a"]),rr={name:"spRepairTaskDetailForm",data:function(){return{detailForUpdate:{id:"",repairCode:"",repairUser:"",repairName:"",repairType:"",repairDate:"",documentVersion:"",reason:"",document:[],rsrtsList:[{}],documentName:"",assignedUser:"",assignName:"",sparePartsList:[],userViewModel:[]}}},components:{spRepairTaskDetail:ir["a"]},methods:{initForm:function(e){var t=this;e&&t.$Server.queryObjectById(nr.getModelName(),e).then((function(e){t.detailForUpdate=e.data.data,t.detailForUpdate.userViewModel=[t.detailForUpdate.userViewModel]}))},getTitle:function(){return"编辑备件送修任务"},getFormData:function(){if(1==this.$refs.addOrUpdate.validate())return Array.isArray(this.detailForUpdate.userViewModel)&&this.detailForUpdate.userViewModel.length>0&&(this.detailForUpdate.userViewModel=this.detailForUpdate.userViewModel[0]),this.detailForUpdate;throw"验证不通过！"},getSourceKey:function(){return nr.getModelName()},getIsProcessEnd:function(){return!0}}},sr=rr,lr=Object(u["a"])(sr,er,tr,!1,null,"16182ab9",null),or=lr.exports,cr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("DetailBlock",{attrs:{taskDetail:e.SpRepairTask}}),a("v-container",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},["3"===e.step||"4"===e.step?a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.SpRepairAcceptanceList,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",e._l(e.headers,(function(i,n){return a("td",{key:n,staticClass:"text-xs-center"},["passCount"===i.value?a("v-text-field",{attrs:{label:i.text,disabled:e.isDisabled,type:"number",rules:[function(e){return/^(0|[1-9][0-9]*$)/.test(e)||"只能是正整数"}],min:"0"},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"failedCount"===i.value?a("v-text-field",{attrs:{label:i.text,disabled:e.isDisabled,type:"number",rules:[function(e){return/^(0|[1-9][0-9]*$)/.test(e)||"只能是正整数"}],min:"0"},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"description"===i.value?a("v-text-field",{attrs:{label:i.text,disabled:e.isDisabled},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"document"===i.value?[t.item.documentName&&e.isDisabled?a("view-file",{attrs:{fileName:!1,documentViewModel:{newestFilePath:t.item.documentName}}}):e._e(),e.isDisabled?e._e():a("uploadFile",{staticStyle:{padding:"0",height:"40px"},attrs:{label:"上传附件",multiple:!1,uploadBase64:!1},on:{formData:e.formData},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}})]:[e._v(e._s(t.item[i.value]))]],2)})),0)]}}],null,!1,2433716376)}):e._e()],1),e.step&&4==e.step?a("v-layout",[a("v-flex",[a("v-btn",{staticClass:"primary",attrs:{disabled:e.IsSubmit},on:{click:function(t){return e.inStorageSpare()}}},[e._v("入库")])],1)],1):e._e(),a("contentModal",{attrs:{title:e.inTitle,IsShow:e.IsShow,width:"1100"},on:{modalClosed:function(t){return e.modalClosed()},modalComfirmed:function(t){return e.modalComfirmed()}}},[a("sparePartInStorageDetail",{ref:"addOrUpdate",attrs:{isCannotEdit:!0,item:e.detailForUpdate,sparePartsList:e.sparePartsList}})],1)],1)],1)},ur=[],dr={name:"spRepairTaskWarehousing",data:function(){return{valid:!0,headers:[{text:"备件编号",align:"center",sortable:!1,value:"sparePartsCode"},{text:"备件名称",align:"center",value:"sparePartsName",sortable:!1},{text:"数量",align:"center",value:"receiveCount",sortable:!1},{text:"验收通过",align:"center",value:"passCount",sortable:!1},{text:"验收未通过",align:"center",value:"failedCount",sortable:!1},{text:"备注",align:"center",value:"description",sortable:!1},{text:"附件",align:"center",value:"document",sortable:!1}],items:[],SpRepairTask:{},title:"",SpRepairAcceptanceList:[],inTitle:"备件入库",IsShow:!1,detailForUpdate:{type:{dvalue:1,dname:"送修"},rInStorageSparePartViewModels:[]},sparePartsList:[],step:"",IsSubmit:!1,isDisabled:!1}},components:{DetailBlock:Zn["a"],uploadFile:ba["a"],sparePartInStorageDetail:Za["a"],contentModal:Y["a"]},methods:{initForm:function(e,t){var a=this;a.params=t,a.step=t.step?t.step:"",3==a.step?a.title="验收":(a.title="入库审批",a.isDisabled=!0),e&&(a.$Server.queryObjectById("SpRepairTask",e).then((function(e){a.SpRepairTask=e.data.data})),a.$Server.queryAll("SpRepairAcceptance",null,{repairTaskID:e}).then((function(e){a.SpRepairAcceptanceList=e.datas})))},getFormData:function(){var e=this;if(3==this.step){if(!this.$refs.form.validate())throw"验证不通过";this.SpRepairTask.sraList=e.SpRepairAcceptanceList,this.SpRepairTask.sraList.forEach((function(e){if(e.acceptancePerson=sessionStorage.getItem("userId"),parseInt(e.passCount)+parseInt(e.failedCount)!==parseInt(e.receiveCount))throw"请检查通过和未通过的数量！"}))}if(!e.IsSubmit&&4==e.step)throw"请先入库";return this.SpRepairTask},getSourceKey:function(){return"SpRepairTask"},detailClose:function(){this.$emit("detailClose")},getTitle:function(){return this.title},formData:function(){},inStorageSpare:function(){var e=this,t=!1;if(this.SpRepairTask.sraList=e.SpRepairAcceptanceList,this.SpRepairTask.sraList.forEach((function(e){parseInt(e.passCount)+parseInt(e.failedCount)!==parseInt(e.receiveCount)&&(t=!0)})),1==t)g["a"].alert("请检查通过和未通过的数量!");else{this.IsShow=!0,this.detailForUpdate.inStoragePersonName=window.sessionStorage.getItem("uname"),this.detailForUpdate.inStorageDate=kt()(new Date).format("YYYY-MM-DD"),this.detailForUpdate.rInStorageSparePartViewModels=[],this.detailForUpdate.source="备件送修（"+this.SpRepairTask.repairCode+"）";var a=[],i=[];this.SpRepairTask.rsrtsList.forEach((function(e,t){a.push({codeName:e.sparePartsCode+"("+e.sparePartsName+")",code:e.sparePartsCode,name:e.sparePartsName,model:e.sparePartsModel,id:e.sparePartsID,inventory:e.inventory,applyAmount:e.receiveCount}),i.push({spareCode:e.sparePartsCode,model:e.sparePartsModel,spareName:e.sparePartsName,applyAmount:e.receiveCount,amount:e.purchaseCount,storageLocationID:"",sparePartsID:e.sparePartsID,spareObj:{id:e.sparePartsID,codeName:e.sparePartsCode+"("+e.sparePartsCode+")",inventory:e.inventory},inventory:e.inventory,id:t+1})})),this.sparePartsList=a,this.detailForUpdate.rInStorageSparePartViewModels=i}},modalClosed:function(){this.IsShow=!1},modalComfirmed:function(){for(var e=this,t=this.detailForUpdate.rInStorageSparePartViewModels,a=0;a<t.length;a++){if(void 0==t[a].amount||null==t[a].amount||""==t[a].amount)return void g["a"].alert("请填写入库数量");if(void 0==t[a].storageLocationID||null==t[a].storageLocationID||""==t[a].storageLocationID)return void g["a"].alert("请填写入库位置")}var i=this,n=!1;if(this.SpRepairTask.sraList.forEach((function(t){var a=e.detailForUpdate.rInStorageSparePartViewModels.filter((function(e){return e.sparePartsID==t.sparePartsId}));if(a&&a.length>0){var i=0;a.forEach((function(e){i=parseInt(i)+parseInt(e.amount)})),parseInt(i)!=parseInt(t.passCount)&&(n=!0)}})),1==n)g["a"].alert("备件入库数量需要与通过数量保持一致!");else{var r=Object.assign({},i.SpRepairTask);r.inStorageViewModel=i.detailForUpdate,1==i.$refs.addOrUpdate.validate()&&i.$Server.addOrUpdate("SpRepairTask",r,!0).then((function(e){e.success&&(i.IsShow=!1,g["a"].alert("保存成功","success"),i.IsSubmit=!0)}),(function(e){g["a"].alert(e)}))}}}},pr=dr,mr=Object(u["a"])(pr,cr,ur,!1,null,"6736a123",null),fr=mr.exports,vr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("spScrapTaskDetail",{ref:"addOrUpdate",attrs:{item:e.detailForUpdate,IsSubmit:!0}})},hr=[],br={name:"spRepairScrapDetailForm",components:{spScrapTaskDetail:sn["a"]},data:function(){return{detailForUpdate:{id:"",scrapCode:"",scrapDate:"",applicantName:"",status:"",applicant:"",document:"",reason:"",spareCodes:[],spareNames:[],sparePositions:[],spareCounts:[],userVersion:"1",userViewModel:[],spscrapSparepartList:[{}]},source:"SpRepairTask"}},methods:{initForm:function(e){var t=this;e&&this.$Server.queryObjectById("SpRepairTask",e).then((function(e){t.detailForUpdate=e.data.data,t.detailForUpdate.applicant=window.sessionStorage.getItem("userId"),t.detailForUpdate.applicantName=window.sessionStorage.getItem("uname");var a=[];t.detailForUpdate.rsrtsList&&t.detailForUpdate.rsrtsList.length>0&&t.detailForUpdate.rsrtsList.forEach((function(e){a.push({sparePartsID:e.sparePartsID,storageLocationID:e.storageLocationID,scrapCount:e.receiveCount,spareName:e.sparePartsName,spareModel:e.sparePartsModel})})),t.detailForUpdate.spscrapSparepartList=a,t.detailForUpdate.document={},t.$refs.addOrUpdate.$refs.form.resetValidation(),t.$refs.addOrUpdate.initEditLoacation(t.detailForUpdate),t.source="SpScrapTask",t.$emit("changeTaskid",null)}))},getTitle:function(){return"备件报废任务审批"},getFormData:function(){if(1==this.$refs.addOrUpdate.validate())return this.detailForUpdate.id=null,this.detailForUpdate.status={dvalue:1,dname:"进行中"},void 0!=this.detailForUpdate.outStorage&&null!=this.detailForUpdate.outStorage&&1==this.detailForUpdate.outStorage?this.detailForUpdate.outStorage=!0:this.detailForUpdate.outStorage=!1,this.detailForUpdate;throw"验证不通过！"},getSourceKey:function(){return this.source}}},gr=br,xr=Object(u["a"])(gr,vr,hr,!1,null,"e548617e",null),yr=xr.exports,kr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-layout",{staticStyle:{padding:"0 20px"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs4:""}},[e._v("\n            报废单编号："),a("span",[e._v(e._s(e.SpScrapTask.scrapCode))])]),a("v-flex",{attrs:{xs4:""}},[e._v("\n            报废日期："),a("span",[e._v(e._s(e.SpScrapTask.scrapDate))])]),a("v-flex",{attrs:{xs4:""}},[e._v("\n            申请人："),a("span",[e._v(e._s(e.SpScrapTask.applicantName))])])],1),e._l(e.SpScrapTask.spscrapSparepartList,(function(t){return a("v-layout",{key:t.id,staticStyle:{padding:"10px 20px"},attrs:{row:"",wrap:""}},[a("v-flex",[e._v("\n            备件编号："),a("span",[e._v(e._s(t.spareCode))])]),a("v-flex",[e._v("\n            备件位置："),a("span",[e._v(e._s(t.sparePosition))])]),a("v-flex",[e._v("\n            备件名称："),a("span",[e._v(e._s(t.spareName))])]),a("v-flex",[e._v("\n            规格型号："),a("span",[e._v(e._s(t.spareModel))])]),a("v-flex",[e._v("\n            数量："),a("span",[e._v(e._s(t.scrapCount))])])],1)})),a("v-flex",{attrs:{xs12:""}},[e._v("\n        报废原因："),a("span",[e._v(e._s(e.SpScrapTask.reason))])]),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:null!==e.SpScrapTask.document.newestFilePath,expression:"SpScrapTask.document.newestFilePath !== null"}],attrs:{xs12:""}},[a("view-file",{attrs:{documentViewModel:e.SpScrapTask.document,color:"primary"}})],1),3==e.params?a("v-flex",{attrs:{xs12:""}},[e._v("\n        备件是否在库："),a("span",[e._v(e._s(e.SpScrapTask.isSparePosition))])]):e._e(),a("v-flex",{attrs:{xs12:""}},[a("v-btn",{staticClass:"primary",attrs:{disabled:e.IsSubmit&&e.IsOutStorage},on:{click:e.updateAccounts}},[e._v("报废")])],1)],2)},Sr=[],_r=new J["a"](new ln["a"]),wr={name:"spRepairScrapAccountsForm",data:function(){return{item:{},params:"",SpScrapTask:{},IsSubmit:!1,IsOutStorage:!1}},methods:{initForm:function(e,t){var a=this;a.params=t,e&&a.$Server.queryObjectById("SpScrapTask",e).then((function(e){a.SpScrapTask=e.data.data,a.SpScrapTask&&a.SpScrapTask.scrapSpare&&1==a.SpScrapTask.scrapSpare&&(a.IsSubmit=!0),a.SpScrapTask&&a.SpScrapTask.outStorage&&1==a.SpScrapTask.outStorage&&(a.IsOutStorage=!0)}))},getTitle:function(){return"备件报废任务清单"},getFormData:function(){if(1==this.IsSubmit)return this.SpScrapTask;throw"请先报废备件"},getSourceKey:function(){return"SpScrapTask"},downloadTemp:function(){},updateAccounts:function(){var e=this,t=[];this.SpScrapTask.scrapSpare=e.IsSubmit,this.SpScrapTask.outStorage=e.IsOutStorage,t.push(this.SpScrapTask),e.$Server.batchUpdate(_r.getModelName(),t).then((function(t){t.success&&(g["a"].alert("操作成功","success"),e.IsSubmit=!0)}),(function(e){g["a"].alert(e)}))}}},Dr=wr,Tr=Object(u["a"])(Dr,kr,Sr,!1,null,"230b9027",null),Cr=Tr.exports,Ir=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("领用单编号："+e._s(e.SpReceiveTask.receiveCode))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("领用日期："+e._s(e.SpReceiveTask.receiveDate&&e.SpReceiveTask.receiveDate.substring(0,10)))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("申请人："+e._s(e.SpReceiveTask.applicantName))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("领用原因："+e._s(e.SpReceiveTask.reason))])])],1),e._l(e.SpReceiveTask.receiveSparepartsList,(function(t,i){return a("v-layout",{key:i},[a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("备件编号："+e._s(t.spareCode))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("备件名称："+e._s(t.spareName))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("规格型号："+e._s(t.spareModel))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("数量："+e._s(t.receiveCount))])])],1)}))],2)},qr=[],Or={name:"SpReceiveTaskForm",data:function(){return{SpReceiveTask:{}}},methods:{initForm:function(e,t){var a=this;a.params=t,e&&a.$Server.queryObjectById("SpReceiveTask",e).then((function(e){a.SpReceiveTask=e.data.data}))},getTitle:function(){return"备件领用清单"},getFormData:function(){return this.SpReceiveTask},getSourceKey:function(){return"SpReceiveTask"}}},jr=Or,Fr=Object(u["a"])(jr,Ir,qr,!1,null,null,null),Ar=Fr.exports,Nr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("领用单编号："+e._s(e.SpReceiveTask.receiveCode))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("领用日期："+e._s(e.SpReceiveTask.receiveDate&&e.SpReceiveTask.receiveDate.substring(0,10)))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("申请人："+e._s(e.SpReceiveTask.applicantName))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("领用原因："+e._s(e.SpReceiveTask.reason))])])],1),e._l(e.SpReceiveTask.receiveSparepartsList,(function(t,i){return a("div",{key:i,attrs:{row:"",wrap:"","align-center":""}},[a("v-layout",[a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("备件编号："+e._s(t.spareCode))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("备件名称："+e._s(t.spareName))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("规格型号："+e._s(t.spareModel))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("申请数量: "+e._s(t.receiveCount))])])],1),a("v-layout",[a("v-flex",[e._v("\n              出库明细：  "),a("v-icon",{attrs:{disabled:e.IsSubmit},on:{click:function(e){return t.saveList.push({amount:"",storageLocationID:""})}}},[e._v("add")])],1)],1),e._l(t.saveList,(function(i,n){return a("v-layout",{key:n,attrs:{"align-center":""}},[a("v-flex",{attrs:{xs4:""}},[a("v-select",{attrs:{items:t.storageLocationIDList,label:"备件出库位置","item-text":"positionName","item-value":"storageLocationID",clearable:"",disabled:e.IsSubmit,rules:[function(e){return!!e||"必填项"}]},model:{value:i.storageLocationID,callback:function(t){e.$set(i,"storageLocationID",t)},expression:"item.storageLocationID"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"数量",type:"number",disabled:e.IsSubmit,rules:[function(e){return!!e||"必填项"},function(e){return!/^0$/.test(e)||"数量不能为0"},function(e){return/^[1-9][0-9]*$/.test(e)||"数量必须是正整数"}]},model:{value:i.amount,callback:function(t){e.$set(i,"amount",t)},expression:"item.amount"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-icon",{attrs:{disabled:e.IsSubmit},on:{click:function(e){return t.saveList.splice(n,1)}}},[e._v("delete")])],1)],1)}))],2)})),a("v-layout",[a("v-btn",{staticClass:"primary",attrs:{disabled:e.IsSubmit},on:{click:e.outStorage}},[e._v("出库")])],1)],2)],1)},Lr=[],Er={name:"SpReceiveTaskForm1",data:function(){return{SpReceiveTask:{},value:[],items:[],IsSubmit:!1,valid:!0}},methods:{initForm:function(e,t){var a=this;a.params=t,a.$Server.queryAll("SparePosition").then((function(t){a.storageLocationIDList=t.datas,e&&a.$Server.queryObjectById("SpReceiveTask",e).then((function(e){var t=e.data.data,i=[];t.receiveSparepartsList&&t.receiveSparepartsList.forEach((function(e){i=a.storageLocationIDList.filter((function(t){return t.sparePartsID===e.sparePartsID})),e.storageLocationIDList=i,e.saveList&&e.saveList.length>0||(e.saveList=[{amount:"",storageLocationID:""}])})),a.SpReceiveTask=t,t.outStorage&&1==t.outStorage&&(a.IsSubmit=!0)}))}))},getTitle:function(){return"备件领用出库流程"},getFormData:function(){if(1==this.IsSubmit)return this.SpReceiveTask;throw"请先出库"},getSourceKey:function(){return"SpReceiveTask"},outStorage:function(){var e=this;if(this.$refs.form.validate()){var t=[],a=this.SpReceiveTask.receiveSparepartsList;if(a&&Array.isArray(a)&&a.length>0){var i=function(){for(var i="",n=0,r=0;r<a.length;r++){i=a[r].saveList;for(var s=function(e){if(n+=parseInt(i[e].amount),""===i[e].amount||void 0===i[e].amount)return g["a"].alert("数量不能为空"),{v:{v:void 0}};if(""===i[e].storageLocationID||void 0===i[e].storageLocationID)return g["a"].alert("位置不能为空"),{v:{v:void 0}};var s=a[r].storageLocationIDList,l=s.find((function(t){return t.storageLocationID===i[e].storageLocationID}));if(i[e].amount>l.inventory)return g["a"].alert(l.positionName+"库存量为"+l.inventory+",不够出库数量"),{v:{v:void 0}};var o=Object.assign({},a[r]);o.amount=i[e].amount,o.storageLocationID=i[e].storageLocationID,t.push(o)},l=0;l<i.length;l++){var o=s(l);if("object"===Object(Ga["a"])(o))return o.v}if(n>a[r].receiveCount)return g["a"].alert("出库数量不能大于申请数量"),{v:void 0};n=0}var c={},u=sessionStorage.getItem("userId");c.userId=u,c.outStorageSparePartList=t;var d=Object.assign({},e.SpReceiveTask);d.outStorageSparePartList=t;var p=e;e.IsSubmit=!0,e.$Server.addOrUpdate("SpReceiveTask",d,!0).then((function(e){e.success?(g["a"].alert("出库完成","success"),p.IsSubmit=!0):p.IsSubmit=!1}),(function(e){p.IsSubmit=!1,g["a"].alert(e)}))}();if("object"===Object(Ga["a"])(i))return i.v}}else g["a"].alert("验证不通过")}}},Pr=Er,$r=Object(u["a"])(Pr,Nr,Lr,!1,null,null,null),Mr=$r.exports,Ur=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("spReceiveTaskDetail",{ref:"addOrUpdate",attrs:{item:e.detailForUpdate}})},Rr=[],Vr=r("3045"),Br=r("1c0f"),zr=new J["a"](new Br["a"]),Yr={name:"spReceiveTaskDetailForm",data:function(){return{detailForUpdate:{id:"",receiveCode:"",receiveDate:"",endDate:"",applicant:"",status:"",receiveSparepartsList:[{}],ReceiveCount:"",reason:"",applicantName:"",userViewModel:""}}},components:{spReceiveTaskDetail:Vr["a"]},methods:{initForm:function(e){var t=this;e&&this.$Server.queryObjectById(zr.getModelName(),e).then((function(e){t.detailForUpdate=e.data.data,t.$refs.addOrUpdate.initEditLoacation(t.detailForUpdate)}))},getTitle:function(){return"编辑领用任务"},getFormData:function(){if(1==this.$refs.addOrUpdate.validate())return this.detailForUpdate;throw"验证不通过！"},getSourceKey:function(){return zr.getModelName()},getIsProcessEnd:function(){return!0}}},Hr=Yr,Jr=Object(u["a"])(Hr,Ur,Rr,!1,null,null,null),Gr=Jr.exports,Zr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs4:""}},[a("p",[e._v("仪器编号："+e._s(e.CalibrationTask.meteringEquipmentCode))])]),a("v-flex",{attrs:{xs4:""}},[a("p",[e._v("仪器名称："+e._s(e.CalibrationTask.meteringEquipmentName))])]),a("v-flex",{attrs:{xs4:""}},[a("p",[e._v("规格型号："+e._s(e.CalibrationTask.meteringEquipmentModel))])]),a("v-flex",{attrs:{xs4:""}},[a("p",[e._v("使用位置："+e._s(e.CalibrationTask.meModel&&e.CalibrationTask.meModel.usedPart))])]),a("v-flex",{attrs:{xs4:""}},[a("p",[e._v("所属部门："+e._s(e.CalibrationTask.departmentName))])]),a("v-flex",{attrs:{xs4:""}},[a("p",[e._v("使用部门："+e._s(e.CalibrationTask.meModel&&e.CalibrationTask.meModel.usedDepartmentName))])]),a("v-flex",{attrs:{xs4:""}},[a("p",[e._v("校准周期："+e._s(e.CalibrationTask.periodData))])]),a("v-flex",{attrs:{xs4:""}},[a("p",[e._v("校准类型："+e._s(e.CalibrationTask.calibrationType))])]),a("v-flex",{attrs:{xs4:""}},[a("p",[e._v("提前提醒时间："+e._s(e.CalibrationTask.preDate))])])],1),a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("p",[e._v("校验标准："),a("span",{staticStyle:{"text-decoration":"underline"}},[e._v(e._s(e.CalibrationTask.meteringStandardVName))])])])],1),e.params.step>=1?a("v-layout",["1"===e.params.step?a("v-flex",{attrs:{xs12:""}},[a("div",[e._v("\n        校准是否异常：\n        "),a("v-radio-group",{staticStyle:{display:"inline-block"},attrs:{row:""},model:{value:e.CalibrationTask.abnormal,callback:function(t){e.$set(e.CalibrationTask,"abnormal",t)},expression:"CalibrationTask.abnormal"}},[a("v-radio",{attrs:{label:"是",value:!0}}),a("v-radio",{attrs:{label:"否",value:!1}})],1)],1),a("div",[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"备注"},model:{value:e.CalibrationTask.abnormalDescription,callback:function(t){e.$set(e.CalibrationTask,"abnormalDescription",t)},expression:"CalibrationTask.abnormalDescription"}})],1)],1)]):[a("v-flex",{attrs:{xs4:""}},[e._v("校准是否异常："+e._s(!0===e.CalibrationTask.abnormal?"是":!1===e.CalibrationTask.abnormal?"否":""))]),a("v-flex",{attrs:{xs8:""}},[e._v("异常描述："+e._s(e.CalibrationTask.abnormalDescription))])]],2):e._e(),e.params.step>=2?a("v-layout",["2"===e.params.step?a("v-flex",{attrs:{xs12:""}},[a("div",[e._v("\n        仪器是否可用：\n        "),a("v-radio-group",{staticStyle:{display:"inline-block"},attrs:{row:""},model:{value:e.CalibrationTask.availability,callback:function(t){e.$set(e.CalibrationTask,"availability",t)},expression:"CalibrationTask.availability"}},[a("v-radio",{attrs:{label:"是",value:!0}}),a("v-radio",{attrs:{label:"否",value:!1}})],1)],1),a("div",[a("v-text-field",{attrs:{label:"备注"},model:{value:e.CalibrationTask.availabilityDescription,callback:function(t){e.$set(e.CalibrationTask,"availabilityDescription",t)},expression:"CalibrationTask.availabilityDescription"}})],1)]):[a("v-flex",{attrs:{xs4:""}},[e._v("仪器是否可用："+e._s(!0===e.CalibrationTask.availability?"是":!1===e.CalibrationTask.availability?"否":""))]),a("v-flex",{attrs:{xs8:""}},[e._v("备注："+e._s(e.CalibrationTask.availabilityDescription))])]],2):e._e(),e.params.step>=3?a("v-layout",["3"===e.params.step?a("v-flex",{attrs:{xs12:""}},[a("div",[e._v("\n        仪器能否维修：\n        "),a("v-radio-group",{staticStyle:{display:"inline-block"},attrs:{row:""},model:{value:e.CalibrationTask.canRepair,callback:function(t){e.$set(e.CalibrationTask,"canRepair",t)},expression:"CalibrationTask.canRepair"}},[a("v-radio",{attrs:{label:"是",value:!0}}),a("v-radio",{attrs:{label:"否",value:!1}})],1)],1),a("div",[a("v-text-field",{attrs:{label:"备注"},model:{value:e.CalibrationTask.repairDescription,callback:function(t){e.$set(e.CalibrationTask,"repairDescription",t)},expression:"CalibrationTask.repairDescription"}})],1)]):[a("v-flex",{attrs:{xs4:""}},[e._v("仪器能否维修："+e._s(!0===e.CalibrationTask.canRepair?"是":!1===e.CalibrationTask.canRepair?"否":""))]),a("v-flex",{attrs:{xs8:""}},[e._v("备注："+e._s(e.CalibrationTask.repairDescription))])]],2):e._e()],1)},Wr=[],Qr={data:function(){return{row:"",CalibrationTask:{},params:{}}},methods:{initForm:function(e,t){var a=this;a.params=t,console.log(t),e&&a.$Server.queryObjectById("CalibrationTask",e).then((function(e){var t=e.data.data;t.meModel&&(t.meteringEquipmentCode=t.meModel.code,t.meteringEquipmentName=t.meModel.name,t.meteringEquipmentModel=t.meModel.model,t.departmentName=t.meModel.departmentName,t.periodData=t.meModel.periodData,t.meModel.type&&(t.calibrationType=t.meModel.type.dname)),a.CalibrationTask=t}))},getTitle:function(){return this.params&&this.params.step&&5==this.params.step?"报废仪器发起采购流程":"校准工单任务"},getFormData:function(){return this.CalibrationTask},getSourceKey:function(){return"CalibrationTask"},getVariables:function(){return this.params&&1==this.params.step?{isAbnormal:this.CalibrationTask.abnormal}:this.params&&2==this.params.step?{isCanUsed:this.CalibrationTask.availability}:this.params&&3==this.params.step?{isCanRepair:this.CalibrationTask.canRepair}:!this.params||void 0!=this.params.step&&null!=this.params.step.step?void 0:{type:this.CalibrationTask.calibrationType}}}},Kr=Qr,Xr=Object(u["a"])(Kr,Zr,Wr,!1,null,null,null),es=Xr.exports,ts=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("DetailBlock",{attrs:{taskDetail:e.EqpInventoryTask}}),a("simpleDataTable",{ref:"childDataTable",attrs:{headers:e.headers,hideHeaders:!1,sort:!0,items:[],allowActive:!0,hideOperation:!0}})],1)},as=[],is=r("64cf"),ns={name:"SpReceiveTaskForm",data:function(){return{EqpInventoryTask:{},headers:[{text:"设备编号",value:"code",align:"center",sortable:!1},{text:"设备名称",value:"name",align:"center",sortable:!1},{text:"设备类型",value:"typeChinese",align:"center",sortable:!1},{text:"规格型号",value:"model",align:"center",sortable:!1},{text:"所属部门",value:"departmentName",align:"center",sortable:!1},{text:"来源",value:"departmentName2",align:"center",sortable:!1},{text:"设备位置",value:"departmentName3",align:"center",sortable:!1},{text:"设备状态",value:"departmentName4",align:"center",sortable:!1}]}},components:{DetailBlock:is["a"],simpleDataTable:_n["a"]},methods:{initForm:function(e,t){var a=this;a.params=t},getTitle:function(){return"盘点任务审批单"},getFormData:function(){return this.SpReceiveTask},getSourceKey:function(){return"EqpInventoryTask"}}},rs=ns,ss=Object(u["a"])(rs,ts,as,!1,null,null,null),ls=ss.exports,os=r("8b35"),cs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{staticStyle:{padding:"0 20px"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("p",{staticClass:"title"},[e._v("报修情况")])]),a("v-flex",{attrs:{xs4:""}},[e._v("\n                工单编号："),a("span",[e._v(e._s(e.RepairTask.code))])]),a("v-flex",{attrs:{xs4:""}},[e._v("\n                报修人："),a("span",[e._v(e._s(e.RepairTask.applicantName))])]),a("v-flex",{attrs:{xs4:""}},[e._v("\n                报修时间："),a("span",[e._v(e._s((e.RepairTask.reportTime||"").substring(0,16)))])]),a("v-flex",{attrs:{xs4:""}},[e._v("\n                报修设备："),a("span",[e._v(e._s(e.RepairTask.equipmentName))])]),a("v-flex",{attrs:{xs8:""}},[e._v("\n                设备位置："),a("span",[e._v(e._s(e.RepairTask.equipmentPosition))])]),a("v-flex",{attrs:{xs4:""}},[e._v("\n                故障类型："),a("span",[e._v(e._s(e.RepairTask.faultType&&e.RepairTask.faultType.dname))])]),a("v-flex",{attrs:{xs8:""}},[e._v("\n                故障位置："),a("span",[e._v(e._s(e.RepairTask.faultPosition))])]),a("v-flex",{attrs:{xs12:""}},[e._v("\n                故障描述："),a("span",[e._v(e._s(e.RepairTask.faultDescription))])]),a("v-flex",{attrs:{xs7:""}},[e._v("\n                紧急程度："),a("span",[e._v(e._s(e.RepairTask.urgency&&e.RepairTask.urgency.dname))])]),a("v-flex",{attrs:{xs12:""}},[e._v("\n                紧急备注："),a("span",[e._v(e._s(e.RepairTask.urgentDescription))])])],1),a("div",{staticClass:"line"}),"未开始"!==(e.RepairTask.state&&e.RepairTask.state.dname)?a("v-layout",{staticStyle:{padding:"0 20px"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("p",{staticClass:"title"},[e._v("维修情况")])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n                维修时间："),a("span",[e._v(e._s((e.RepairTask.startTime||"").substring(0,16)))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n                维修人员："),a("span",[e._v(e._s(e.RepairTask.repairPersonListString))])]),a("v-flex",{attrs:{xs12:""}},[e._v("\n                维修详情："),a("span",[e._v(e._s(e.RepairTask.repairDetail))])])],1):e._e()],1)],1)},us=[],ds={name:"repairTaskForm",data:function(){return{RepairTask:{urgency:{},state:{},faultType:{}}}},methods:{initForm:function(e,t){var a=this;a.params=t,e&&a.$Server.queryObjectById("RepairTask",e).then((function(e){a.RepairTask=e.data.data}))},getTitle:function(){return"维修验收单"},getFormData:function(){return this.RepairTask},getSourceKey:function(){return"RepairTask"}}},ps=ds,ms=Object(u["a"])(ps,cs,us,!1,null,null,null),fs=ms.exports,vs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("repairTaskDeal",{ref:"addOrUpdate",attrs:{item:e.detailForUpdate}})},hs=[],bs=r("bb20"),gs=r("83b4"),xs=new J["a"](new gs["a"]),ys={name:"repairTaskDetailForm",data:function(){return{detailForUpdate:{},source:xs.getModelName()}},components:{repairTaskDeal:bs["a"]},methods:{initForm:function(e){var t=this;e&&this.$Server.queryObjectById(xs.getModelName(),e).then((function(e){t.detailForUpdate=e.data.data,t.$Server.queryAll("RepairRecord",null,{repairTaskID:t.detailForUpdate.id}).then((function(e){t.detailForUpdate.id=e.datas[0].id,t.detailForUpdate.repairTaskID=e.datas[0].repairTaskID,t.detailForUpdate.startTime=null==e.datas[0].startTime?t.detailForUpdate.startTime:e.datas[0].startTime,t.detailForUpdate.endTime=e.datas[0].endTime,t.detailForUpdate.repairDetail=e.datas[0].repairDetail,t.detailForUpdate.synchronized=e.datas[0].synchronized,t.$refs.addOrUpdate.dealSpareParts(),t.source="RepairRecord"})),t.$refs.addOrUpdate.initEditLoacation(t.detailForUpdate)}))},getTitle:function(){return"编辑维修工单任务"},getFormData:function(){if(1==this.$refs.addOrUpdate.validate())return this.detailForUpdate;throw"验证不通过！"},getSourceKey:function(){return this.source},getIsProcessEnd:function(){return!0}}},ks=ys,Ss=Object(u["a"])(ks,vs,hs,!1,null,null,null),_s=Ss.exports,ws=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("repairTaskDetail",{ref:"addOrUpdate",attrs:{item:e.detailForUpdate,isRepair:"true"}})],1)},Ds=[],Ts=r("ce72"),Cs=new J["a"](new gs["a"]),Is={name:"eqpStoppageRepairDetailForm",data:function(){return{detailForUpdate:{id:"",stoppageTaskCode:"",stoppageType:"",urgency:{},deadline:"",applicantName:"",state:{dname:""},description:"",eqpId:[],equipmentName:{},selectAssign:[],documentList:[],reportTime:"",assignmentTime:"",planRepairTime:"",knowledgeDocumentList:[{documentViewModel:{}}],faultType:{},equipmentPosition:"",repairPersonList:[]},userList:[],source:"EqpStoppageTask"}},components:{repairTaskDetail:Ts["a"]},created:function(){var e=this;e.$Server.queryAll("UserList",null,{deleted:!1,tpmSkill:3}).then((function(t){e.userList=t.datas}))},mounted:function(){var e=this;e.$refs.addOrUpdate.$refs.form.resetValidation()},methods:{initForm:function(e){var t=this;e&&this.$Server.queryObjectById("EqpStoppageTask",e).then((function(e){t.detailForUpdate=e.data.data,t.detailForUpdate.faultDescription=e.data.data.description,t.detailForUpdate.applicantName=sessionStorage.getItem("uname"),t.detailForUpdate.applicant=sessionStorage.getItem("userId"),t.detailForUpdate.equipmentPosition=t.detailForUpdate.equipment.factoryName,t.detailForUpdate.reportTime=t.detailForUpdate.createdTime,t.detailForUpdate.userList=t.userList,t.detailForUpdate.equipmentID=[t.detailForUpdate.equipmentID],t.detailForUpdate.documentList=[],t.detailForUpdate.state={dvalue:1},t.detailForUpdate.id=null,t.source=Cs.getModelName(),t.$refs.addOrUpdate.resetVaildate(),t.$emit("changeTaskid",null)}))},getTitle:function(){return"创建维修工单任务"},getFormData:function(){if(1==this.$refs.addOrUpdate.validate())return this.detailForUpdate;throw"验证不通过！"},getSourceKey:function(){return this.source}}},qs=Is,Os=Object(u["a"])(qs,ws,Ds,!1,null,null,null),js=Os.exports,Fs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("repairTaskDeal",{ref:"addOrUpdate",attrs:{item:e.detailForUpdate,isRepair:"true"}})],1)},As=[],Ns=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[""!=e.item?a("v-layout",{staticStyle:{padding:"0 30px"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[e._v("\n      报修单编号："),a("span",[e._v(e._s(e.item.stoppageTaskCode))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n      设备编号："),a("span",[e._v(e._s(e.item.equipment&&e.item.equipment.code))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n      设备名称："),a("span",[e._v(e._s(e.item.equipment&&e.item.equipment.name))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n      规格型号："),a("span",[e._v(e._s(e.item.equipment&&e.item.equipment.model))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n      设备类型："),a("span",[e._v(e._s(e.item.equipment&&e.item.equipment.type.dname))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n      设备位置："),a("span",[e._v(e._s(e.item.equipment&&e.item.equipment.factoryName))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n      异常类型："),a("span",[e._v(e._s(e.item.stoppageType.dname))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n      报修日期："),a("span",[e._v(e._s((e.item.applicantTime||"").substring(0,16)))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n      报修人："),a("span",[e._v(e._s(e.item.applicantName))])]),a("v-flex",{attrs:{xs6:""}},[e._v("\n      紧急程度："),a("span",[e._v(e._s(e.item.urgency.dname))])]),a("v-flex",{attrs:{xs12:""}},[e._v("\n      异常描述："),a("span",[e._v(e._s(e.item.description))])]),e._l(e.item.rStoppageTaskDocumentList,(function(e){return a("v-flex",{key:e.id,attrs:{xs12:""}},[a("view-file",{attrs:{documentViewModel:e.documentViewModel,color:"primary"}})],1)}))],2):e._e()],1)},Ls=[],Es={name:"eqpStoppageTaskBlock",data:function(){return{}},props:["item"],methods:{downloadTemp:function(e,t){var a=document.createElement("a");a.href=t,a.download=e,a.click()}}},Ps=Es,$s=Object(u["a"])(Ps,Ns,Ls,!1,null,"12adb230",null),Ms=$s.exports,Us=new J["a"](new gs["a"]),Rs={name:"eqpStoppageRepairRecordForm",data:function(){return{detailForUpdate:{id:"",stoppageTaskCode:"",stoppageType:"",urgency:{},deadline:"",applicantName:"",state:{dname:""},description:"",eqpId:[],equipmentName:{},selectAssign:[],documentList:[],planRepairTime:"",knowledgeDocumentList:[{documentViewModel:{}}],faultType:{}},detailForUpdate2:{},source:Us.getModelName(),eqpStoppageTaskId:[]}},components:{repairTaskDeal:bs["a"],eqpStoppageTaskBlock:Ms},methods:{initForm:function(e,t,a){var i=this;e&&i.$Server.queryObjectById(Us.getModelName(),e).then((function(t){i.detailForUpdate=t.data.data,i.detailForUpdate.startTime=i.$Utils.getLocalTime(),i.detailForUpdate.synchronized=!1,i.detailForUpdate.id=i.detailForUpdate.repairRecordID,i.detailForUpdate.repairTaskID=e,i.$refs.addOrUpdate.$refs.form1.resetValidation(),i.source="RepairRecord",i.$emit("changeTaskid",null)}))},getTitle:function(){return"填写维修工单记录"},getFormData:function(){if(1==this.$refs.addOrUpdate.validate())return this.detailForUpdate;throw"验证不通过！"},getSourceKey:function(){return this.source}}},Vs=Rs,Bs=Object(u["a"])(Vs,Fs,As,!1,null,null,null),zs=Bs.exports,Ys=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("improveApplySee",{attrs:{item:e.improveApply}})],1)},Hs=[],Js=r("ceaa"),Gs={name:"improveApplyForm",data:function(){return{improveApply:{urgency:{},state:{},faultType:{}}}},components:{improveApplySee:Js["a"]},methods:{initForm:function(e,t){var a=this;a.params=t,e&&a.$Server.queryObjectById("ImproveApply",e).then((function(e){a.improveApply=e.data.data,a.improveApply.startTime=a.improveApply.startTime.substring(0,10),a.improveApply.endTime=a.improveApply.endTime.substring(0,10),a.improveApply.createdTime=a.improveApply.createdTime.substring(0,10)}))},getTitle:function(){return"改善申请审批单"},getFormData:function(){return this.improveApply},getSourceKey:function(){return"ImproveApply"},getVariables:function(){if(!this.params||!this.params.step)return{type:this.improveApply.initiator==this.improveApply.assignedUser}}}},Zs=Gs,Ws=Object(u["a"])(Zs,Ys,Hs,!1,null,null,null),Qs=Ws.exports,Ks=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("improveApplySee",{attrs:{item:e.improveApply}}),a("v-container",{staticStyle:{backgraound:"white"},attrs:{"grid-list-md":""}},[a("v-layout",{staticStyle:{padding:"0 20px"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("p",{staticClass:"title"},[e._v("改善报告")])])],1),a("v-layout",{staticStyle:{padding:"0 20px"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[e._v("\n        改善小组成员\n      ")]),a("v-flex",{attrs:{xs12:""}},[a("simpleDataTable",{ref:"improveTeamRef",attrs:{headers:e.improveTeamHeader,hideHeaders:!1,items:e.improveReport.improveTeamViewModelList,hideOperation:!0}})],1)],1),a("v-layout",{staticStyle:{padding:"0 20px"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"问题描述",disabled:""},model:{value:e.improveReport.problemDescription,callback:function(t){e.$set(e.improveReport,"problemDescription",t)},expression:"improveReport.problemDescription"}})],1),e.improveReport.documentViewModelList.length>0?a("v-flex",{attrs:{xs12:""}},[a("v-btn",{on:{click:function(t){return e.downloadDocument()}}},[e._v("下载")])],1):e._e()],1),a("v-layout",{staticStyle:{padding:"0 20px"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[e._v("\n        操作层面\n      ")]),a("v-flex",{attrs:{xs12:""}},[a("simpleDataTable",{ref:"improveStepRef",attrs:{headers:e.improveStepHeader,hideHeaders:!1,items:e.improveReport.improveStepViewModelList,hideOperation:!0}})],1)],1),a("v-layout",{staticStyle:{padding:"0 20px"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[e._v("\n        系统层面\n      ")]),a("v-flex",{attrs:{xs12:""}},[a("simpleDataTable",{ref:"preventiveStepRef",attrs:{headers:e.preventiveStepHeader,hideHeaders:!1,items:e.improveReport.preventiveStepViewModelList,hideOperation:!0}})],1)],1),a("v-layout",{staticStyle:{padding:"0 20px"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-textarea",{attrs:{disabled:"",label:"标准化"},model:{value:e.improveReport.standardMethod,callback:function(t){e.$set(e.improveReport,"standardMethod",t)},expression:"improveReport.standardMethod"}})],1)],1)],1)],1)},Xs=[],el={name:"improveApplyReportDetailForm",data:function(){return{improveReport:{problemDescription:"",standardMethod:"",documentViewModelList:[],improveTeamViewModelList:[],preventiveStepViewModelList:[],improveStepViewModelList:[]},improveApply:{},improveTeamHeader:[{text:"工号",align:"center",sortable:!1,value:"jobNumber"},{text:"姓名",align:"center",value:"userName",sortable:!1},{text:"所属部门",align:"center",value:"organizations",sortable:!1},{text:"联系方式",align:"center",value:"phone",sortable:!1},{text:"邮箱",align:"center",value:"mail",sortable:!1},{text:"团队角色",align:"center",value:"teamRole",sortable:!1}],improveStepHeader:[{text:"原因分析",align:"center",value:"reasonAnalysis",sortable:!1},{text:"提出人",align:"center",value:"raiseUserName",sortable:!1},{text:"提出时间",align:"center",value:"raiseTime",sortable:!1},{text:"改善措施",align:"center",value:"improveAction",sortable:!1},{text:"执行人",align:"center",value:"executionUserName",sortable:!1},{text:"执行时间",align:"center",value:"executionTime",sortable:!1},{text:"改善效果",align:"center",value:"improveResult",sortable:!1},{text:"验收人",align:"center",value:"acceptanceUserName",sortable:!1},{text:"验收时间",align:"center",value:"acceptanceTime",sortable:!1}],preventiveStepHeader:[{text:"原因分析",align:"center",value:"reasonAnalysis",sortable:!1},{text:"提出人",align:"center",value:"raiseUserName",sortable:!1},{text:"提出时间",align:"center",value:"raiseTime",sortable:!1},{text:"预防措施",align:"center",value:"preventiveAction",sortable:!1},{text:"执行人",align:"center",value:"executionUserName",sortable:!1},{text:"执行时间",align:"center",value:"executionTime",sortable:!1},{text:"预防效果",align:"center",value:"preventiveResult",sortable:!1},{text:"验收人",align:"center",value:"acceptanceUserName",sortable:!1},{text:"验收时间",align:"center",value:"acceptanceTime",sortable:!1}],source:"ImproveApply",documentViewModelList:[]}},components:{simpleDataTable:_n["a"],improveApplySee:Js["a"]},created:function(){},methods:{getFormData2:function(){},downloadDocument:function(){var e=this,t=document.createElement("a");t.href=e.improveReport.documentViewModelList[0].document.newestFilePath,t.download=e.improveReport.documentViewModelList[0].document.dname,t.click()},initForm:function(e,t){var a=this;a.params=t,e&&(a.$Server.queryObjectById("ImproveApply",e).then((function(e){a.improveApply=e.data.data,a.improveApply.startTime=a.improveApply.startTime.substring(0,10),a.improveApply.endTime=a.improveApply.endTime.substring(0,10),a.improveApply.createdTime=a.improveApply.createdTime.substring(0,10)})),a.$Server.queryAll("ImproveReport",null,{improveApplyID:e}).then((function(e){e.datas.length>0&&(a.improveReport=e.datas[0],a.improveReport.preventiveStepViewModelList.forEach((function(e){e.raiseTime=e.raiseTime.substring(0,10),e.executionTime=e.executionTime.substring(0,10),e.acceptanceTime=e.acceptanceTime.substring(0,10)})),a.improveReport.improveStepViewModelList.forEach((function(e){e.raiseTime=e.raiseTime.substring(0,10),e.executionTime=e.executionTime.substring(0,10),e.acceptanceTime=e.acceptanceTime.substring(0,10)})))}),(function(e){})))},getFormData:function(){return self.improveApply},getTitle:function(){return"改善任务完成审批单"},getSourceKey:function(){return this.source}}},tl=el,al=Object(u["a"])(tl,Ks,Xs,!1,null,null,null),il=al.exports,nl=r("8af4"),rl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("improveApplyDetail",{attrs:{item:e.improveApply}})],1)},sl=[],ll=r("d0da"),ol={name:"improveApplyDetailForm",data:function(){return{improveApply:{urgency:{},state:{},faultType:{}}}},components:{improveApplyDetail:ll["a"]},methods:{initForm:function(e,t){var a=this;a.params=t,e&&a.$Server.queryObjectById("ImproveApply",e).then((function(e){a.improveApply=e.data.data,a.improveApply.startTime=a.improveApply.startTime.substring(0,10),a.improveApply.endTime=a.improveApply.endTime.substring(0,10),a.improveApply.createdTime=a.improveApply.createdTime.substring(0,10)}))},getTitle:function(){return"编辑改善申请审"},getFormData:function(){return this.improveApply},getSourceKey:function(){return"ImproveApply"}}},cl=ol,ul=Object(u["a"])(cl,rl,sl,!1,null,null,null),dl=ul.exports,pl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"overflow-x":"scroll"}},[a("DetailBlock",{attrs:{item:e.EqpInventoryTask}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.EqpInventoryTask.recordList,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",e._l(e.headers,(function(i,n){return a("td",{key:n,staticClass:"text-xs-center"},["inventoryResult"===i.fildType?[t.item[i.value]?a("span",[a("span",{domProps:{innerHTML:e._s(t.item[i.value])}})]):e._e()]:"eqpStatus"===i.fildType?[e._v(e._s(t.item[i.value]&&t.item[i.value].dname))]:"file"===i.fildType?[t.item[i.value]&&t.item[i.value].length>0?a("div",e._l(t.item[i.value],(function(t,i){return a("div",{key:i},[a("div",{staticClass:"file-name"},[e._v("\n                                         "+e._s(t.documentViewModel.dname+t.documentViewModel.newestFileExt)+"\n                                     ")]),a("v-btn",{attrs:{small:""},on:{click:function(a){return e.priviewDocument(t.documentViewModel)}}},[e._v("查看")])],1)})),0):e._e()]:[e._v(e._s(t.item[i.value]))]],2)})),0)]}}])}),a("div",{staticStyle:{"margin-top":"15px"}},["1"==e.params.step?a("div",[e._v("是否有差异：\n             "),a("v-radio-group",{staticStyle:{display:"inline-block","vertical-align":"middle"},attrs:{row:""},model:{value:e.EqpInventoryTask.hasDifference,callback:function(t){e.$set(e.EqpInventoryTask,"hasDifference",t)},expression:"EqpInventoryTask.hasDifference"}},[a("v-radio",{key:!0,attrs:{label:"是",value:!0}}),a("v-radio",{key:!1,attrs:{label:"否",value:!1}})],1)],1):e._e(),"2"==e.params.step||"3"==e.params.step?a("div",[a("div",[e._v("是否有差异："+e._s(e.EqpInventoryTask.hasDifference?"是":"否"))]),a("div",[a("strong",[e._v("盘点报告：")]),e._v(e._s(e.EqpInventoryTask.inventoryReport))])]):e._e()]),a("viewer",{staticClass:"images images-viewer",attrs:{options:e.viewerOptions},on:{inited:e.inited}},[a("img",{attrs:{src:e.imageSrc,"data-source":e.imageSrc,alt:"img"}})])],1)},ml=[],fl={name:"EqpInventoryFinanceForm",data:function(){return{EqpInventoryTask:{},headers:[{text:"设备编号",value:"eqpCode",align:"center",sortable:!1},{text:"设备名称",value:"eqpName",align:"center",sortable:!1},{text:"状态",value:"eqpStatus",align:"center",sortable:!1,fildType:"eqpStatus"},{text:"盘点结果",value:"result1",align:"center",sortable:!1,fildType:"inventoryResult"},{text:"备注",value:"description",align:"center",sortable:!1,fildType:"description"},{text:"附件",value:"documentList",align:"center",sortable:!1,fildType:"file"}],test:"",items:[],params:{},imageSrc:"",viewerOptions:{inline:!1,navbar:!1}}},components:{DetailBlock:is["a"],mergeTable:fi["a"],uploadFile2:ba["a"]},methods:{formatColor:function(e){return 0===e?"存在":1===e?'<span style="color: red">不存在</span>':2===e?'<span style="color: orange">不存在</span>':""},initForm:function(e,t){var a=this;a.params=t,e&&a.$Server.queryObjectById("EqpInventoryTask",e).then((function(e){e.data.data.inventoryType&&1===e.data.data.inventoryType.dvalue&&a.headers.splice(2,1),null===e.data.data.recordList&&(e.data.data.recordList=[]);var t=e.data.data;t.recordList.forEach((function(e){0==e.result.dvalue?e.result1="存在":1==e.result.dvalue?e.result1='<span style="color:red">不存在</span>':2==e.result.dvalue?e.result1='<span style="color: orange">不一致</span>':e.result=""})),a.EqpInventoryTask=t}))},getTitle:function(){return"盘点任务审批单"},getFormData:function(){if(null===this.EqpInventoryTask.hasDifference||void 0===this.EqpInventoryTask.hasDifference||""===this.EqpInventoryTask.hasDifference)throw"请填写是否有差异";return this.EqpInventoryTask},getSourceKey:function(){return"EqpInventoryTask"},inited:function(e){this.$viewer=e},priviewDocument:function(e){var t=this;if(e&&e.newestFileExt&&e.newestFilePath){var a=e.newestFileExt,i=e.newestFilePath;".png"==a||".gif"==a||".jpg"==a||".bmp"==a||".jpeg"==a?(t.imageSrc=i,t.$viewer.show()):g["a"].alert("只支持查看图片")}}},mounted:function(){}},vl=fl,hl=(r("0768"),Object(u["a"])(vl,pl,ml,!1,null,null,null)),bl=hl.exports,gl=r("431e"),xl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"view-file-content"},[a("div",{staticClass:"file-wrap"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.fileName,expression:"fileName"}],staticClass:"file-name"},[e._v(e._s(e.documentName()))]),a("span",[e._v(e._s(e.getSuffix()))]),a("v-btn",{attrs:{color:e.selfColor[0],small:""},on:{click:e.downloadDocument}},[e._v("\n            下载\n        ")]),a("v-btn",{attrs:{color:e.selfColor[1],small:""},on:{click:e.preViewContainer}},[e._v("\n            查看\n        ")])],1),a("viewer",{staticClass:"images images-viewer",attrs:{options:e.viewerOptions},on:{inited:e.inited}},[a("img",{attrs:{src:e.imageSrc,"data-source":e.imageSrc,alt:"12"}})]),a("contentModal",{attrs:{title:"视频播放",IsShow:e.VideoIsShow,isDetails:!0},on:{modalClosed:function(t){return e.videoComfirmed()}}},[a("video-player",{ref:"videoPlayer",staticClass:"vjs-custom-skin",attrs:{options:e.playerOptions,playsinline:!0}})],1)],1)},yl=[],kl=r("7f51"),Sl=(r("2fa0"),r("e248"));r("48b0");function _l(){var e=Object(kl["a"])(["文件地址无效"]);return _l=function(){return e},e}var wl={name:"ViewFile",data:function(){return{imageSrc:"",viewerOptions:{inline:!1,navbar:!1},VideoIsShow:!1,playerOptions:{language:"zh-CN",playbackRates:[.7,1,1.5,2],sources:[{type:"video/mp4",src:"http://vjs.zencdn.net/v/oceans.mp4"}],poster:"https://avatars0.githubusercontent.com/u/24718510?s=460&v=4"},player:null}},props:{color:{type:[String,Array],default:function(){return["primary","primary"]}},documentViewModel:Object,fileName:{type:Boolean,default:!0}},computed:{selfColor:function(){var e=this.color;return Array.isArray(e)?e.length<1?["primary","primary"]:1===e.length?e.concat(e):e.splice(0,2):"string"===typeof e?new Array(2).fill(e):["primary","primary"]}},components:{contentModal:Y["a"],videoPlayer:Sl["videoPlayer"]},methods:{inited:function(e){this.$viewer=e},getSuffix:function(){var e=this.documentViewModel.newestFileExt,t=this.documentViewModel.newestFilePath;return e||(t?t.substring(t.lastIndexOf(".")):"")},documentName:function(){var e=this.documentViewModel.newestFilePath;if(e){var t=this.documentViewModel.dname;this.documentViewModel.newestFileExt;if(t)return t;var a=e.split("_");return a[a.length-1].split(".")[0]}return""},downloadDocument:function(){var e=this.documentViewModel.newestFilePath;if(e){var t=document.createElement("a");t.href=e;var a=e.split("/");t.download=a[a.length-1],t.click()}else g["a"].alert("文件地址无效")},preViewContainer:function(){var e=this.documentViewModel.newestFilePath,t=this.documentViewModel.newestFileExt;if(e){t||(t=this.getFileType(e));var a=this;if(".png"==t||".gif"==t||".jpg"==t||".bmp"==t||".jpeg"==t)a.imageSrc=e,a.$viewer.show();else if(".mp4"==t)a.playerOptions.sources[0].src=e,a.VideoIsShow=!0;else if(".pdf"==t)window.open(e);else if(".doc"==t||".docx"==t||".ppt"==t||".pptx"==t){var i=e.replace(/documents/g,"documents/ToPdf"),n=i.split(".");n[2]="pdf",window.open(n.join("."))}else if(".xls"==t||".xlsx"==t){var r=e.replace(/documents/g,"documents/ToPdf"),s=r.split(".");s[2]="pdf",window.open(s.join("."))}else g["a"].alert("暂不提供改类型文件在线预览！")}else g["a"].alert(_l())},getFileType:function(e){var t=e.substring(e.lastIndexOf("."));return t},videoComfirmed:function(){this.VideoIsShow=!1,this.$refs.videoPlayer.player.pause()}}},Dl=wl,Tl=(r("8318"),Object(u["a"])(Dl,xl,yl,!1,null,"70d31dd4",null)),Cl=Tl.exports,Il=(r("2d09"),r("ac2c")),ql=r.n(Il),Ol=r("0d58"),jl=r.n(Ol),Fl=r("d84b"),Al=r.n(Fl),Nl=void 0;l["default"].use(ql.a),l["default"].use(gl["a"]),l["default"].prototype.$echarts=Al.a;var Ll=localStorage.getItem("selectColor"),El=localStorage.getItem("selectColorBrightness");Ll||localStorage.setItem("selectColor","light-blue"),El||localStorage.setItem("selectColorBrightness","#03a9f4"),l["default"].use(se.a,{lang:{locales:{zhHans:jl.a},current:"zhHans"},theme:{primary:localStorage.getItem("selectColorBrightness"),secondary:"#eeeeee",tertiary:"#f5f5f5",accent:localStorage.getItem("selectColorBrightness"),error:oe.a.red.base,warning:"#fb8c00",info:oe.a.cyan.base,success:oe.a.green.base},options:{customProperties:!0}}),l["default"].component("layContent",ce["a"]),l["default"].component("layContentHeader",ue["a"]),l["default"].component("layContentLeft",de["a"]),l["default"].component("layContentRight",pe["a"]),l["default"].component("ViewFile",Cl);var Pl=function(e,t){window.console.error("抛出全局异常"),window.console.error(t),window.console.error(e)};l["default"].config.errorHandler=Pl,l["default"].prototype.$throw=function(e){return Pl(e,Nl)},l["default"].prototype.$Server=new te["a"],l["default"].prototype.$Utils=new he,ne.commit("regiterForms",{name:"studentform",model:Te}),ne.commit("regiterForms",{name:"baseForm",model:it}),ne.commit("regiterForms",{name:"customForm",model:ct}),ne.commit("regiterForms",{name:"eqpPurchaseTaskDetailForm",model:Tt}),ne.commit("regiterForms",{name:"eqpPurchaseForm",model:vt}),ne.commit("regiterForms",{name:"factoryManagerApproval",model:Ft}),ne.commit("regiterForms",{name:"productApproval1",model:Qt}),ne.commit("regiterForms",{name:"sparePartsInventoryForm",model:xi}),ne.commit("regiterForms",{name:"eqpUnusedTrendTaskForm",model:Di}),ne.commit("regiterForms",{name:"eqpUnusedTrendTaskAccountsForm",model:Ri}),ne.commit("regiterForms",{name:"eqpUnusedTrendTaskDetailForm",model:Ni}),ne.commit("regiterForms",{name:"spPurchaseTaskForm",model:za}),ne.commit("regiterForms",{name:"checkPanel",model:Ya["a"]}),ne.commit("regiterForms",{name:"checkPanel1",model:ti}),ne.commit("regiterForms",{name:"spPurchaseTaskDetailForm",model:ui}),ne.commit("regiterForms",{name:"eqpRentalTaskForm",model:ia}),ne.commit("regiterForms",{name:"eqpRentalTaskForm1",model:qa}),ne.commit("regiterForms",{name:"eqpRentalTaskDetailForm",model:$a}),ne.commit("regiterForms",{name:"eqpStoppageTaskForm",model:Ji}),ne.commit("regiterForms",{name:"eqpStoppageTaskDetailForm",model:an}),ne.commit("regiterForms",{name:"spScrapTaskDetailForm",model:pn}),ne.commit("regiterForms",{name:"spScrapTaskForm",model:mn["a"]}),ne.commit("regiterForms",{name:"spScrapTaskAccountsForm",model:yn}),ne.commit("regiterForms",{name:"EqpAllocateTaskForm",model:qn}),ne.commit("regiterForms",{name:"EqpAllocateTaskDetailForm",model:$n}),ne.commit("regiterForms",{name:"EqpAllocateTaskAccountsForm",model:Yn}),ne.commit("regiterForms",{name:"spRepairTaskForm",model:Xn}),ne.commit("regiterForms",{name:"spRepairTaskWarehousing",model:fr}),ne.commit("regiterForms",{name:"spRepairTaskDetailForm",model:or}),ne.commit("regiterForms",{name:"spRepairScrapDetailForm",model:yr}),ne.commit("regiterForms",{name:"spRepairScrapAccountsForm",model:Cr}),ne.commit("regiterForms",{name:"spReceiveTaskForm",model:Ar}),ne.commit("regiterForms",{name:"spReceiveTaskForm1",model:Mr}),ne.commit("regiterForms",{name:"spReceiveTaskDetailForm",model:Gr}),ne.commit("regiterForms",{name:"CalibrationTaskForm",model:es}),ne.commit("regiterForms",{name:"eqpInventoryPlanForm",model:ls}),ne.commit("regiterForms",{name:"eqpInventoryProductForm",model:os["a"]}),ne.commit("regiterForms",{name:"eqpInventoryFinanceForm",model:bl}),ne.commit("regiterForms",{name:"repairTaskForm",model:fs}),ne.commit("regiterForms",{name:"repairTaskDetailForm",model:_s}),ne.commit("regiterForms",{name:"eqpStoppageRepairDetailForm",model:js}),ne.commit("regiterForms",{name:"eqpStoppageRepairRecordForm",model:zs}),ne.commit("regiterForms",{name:"improveApplyForm",model:Qs}),ne.commit("regiterForms",{name:"improveApplyReportDetailForm",model:il}),ne.commit("regiterForms",{name:"improveApplyReportForm",model:nl["a"]}),ne.commit("regiterForms",{name:"improveApplyDetailForm",model:dl}),l["default"].prototype.$getFrom=function(e){var t=ne.state.forms.find((function(t){return t.name==e}));return-1!=t?t.model:-1},l["default"].prototype.$per=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!be.OperationPermission)return null!=t;var i={c_b:"PATCH",c:"POST",d:"DELETE",u:"PUT",r:"GET",e:!0,import:!0,m:!0,re:"RSET",exe:!0,cancel:!0},n=t[0],r=t[1];if(sessionStorage.getItem("permission")){var s=JSON.parse(sessionStorage.getItem("permission"));if("m"==r)return-1!=s.findIndex((function(e){return e.pvalue=="/api/"+n}));if("e"==r)return-1!=s.findIndex((function(e){return e.pvalue=="/api/"+n+"/Excel"&&"导出"==e.pname}));if("import"==r)return-1!=s.findIndex((function(e){return e.pvalue=="/api/"+n&&"导入"==e.pname}));if("exe"==r)return-1!=s.findIndex((function(e){return e.pvalue=="/api/"+n&&"执行"==e.pname}));if("cancel"==r)return-1!=s.findIndex((function(e){return e.pvalue=="/api/"+n&&"取消"==e.pname}));var l=s.findIndex((function(e){return e.pvalue=="/api/"+n&&e.method==i[r]}));return-1!=l}},l["default"].prototype.$Console=new ge("",be.AllowConsole),l["default"].use(ye.a);var $l=new l["default"]({router:X,store:ne,render:function(e){return e(f)}}).$mount("#app");X.beforeEach((function(e,t,a){if($l.$vuetify.theme.primary=localStorage.getItem("selectColorBrightness"),$l.$vuetify.theme.accent=localStorage.getItem("selectColorBrightness"),be.LoginPermission&&!sessionStorage.getItem("token")&&"login"!=e.name)return a({path:"/login"});if("authority"==t.name){var i=ne.state.newPermisions.sort().toString(),n=ne.state.oldPermisions.sort().toString();i!=n?Qa["a"].confirm("是否要离开角色权限界面？未保存的数据可能会丢失！","提示",500,(function(){a(!0)}),(function(){})):a(!0)}else a()}))},"58c5":function(t,a,i){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.editConfig?a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-layout",{attrs:{row:""}},[a("p",{staticStyle:{"margin-top":"15px","font-size":"16px"}},[e._v(e._s(e.headerLabel))]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){e.editConfig.find((function(e){return"add"==e.userfor})).click()}}},i),[a("v-icon",[e._v("\n                            add\n                        ")])],1)]}}],null,!1,2126990002)},[a("span",[e._v("新增")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){return e.deleteItem()}}},i),[a("v-icon",[e._v("\n                            remove\n                        ")])],1)]}}],null,!1,3581463561)},[a("span",[e._v("删除")])])],1)],1):e._e(),a("v-flex",{staticStyle:{"margin-bottom":"10px"},attrs:{xs2:"","offset-xs10":""}},[e.allowSearch?a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":"",light:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}):e._e()],1),a("v-data-table",{staticClass:"elevation-1",attrs:{items:e.items,headers:e.headers,"hide-actions":"","hide-headers":e.hideHeaders,search:e.search,"select-all":e.allowActive},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",{style:e.activeItem==t.item?"background-color:#E3F2FD":"",on:{dblclick:function(a){return e.rowDbClick(t.item)},click:function(a){return e.setActiveItem(t.item,t.index)}}},[e.allowActive?a("td",[a("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"props.selected"}})],1):e._e(),e._l(e.fheader,(function(i){return a("td",{key:i.value,staticClass:"text-xs-center"},["charField"==i.fieldType?a("v-text-field",{staticClass:"center-input",attrs:{rules:i.rules},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                            "+e._s(i.fieldName)+" "),i.require?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]},proxy:!0}],null,!0),model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):e._e()],1)}))],2)]}}]),model:{value:e.checkedItem,callback:function(t){e.checkedItem=t},expression:"checkedItem"}})],1)},r=[],s=(i("bada"),i("cc1d"),i("55b3")),l=i("d5b3"),o={components:{UploadFile:s["a"]},data:function(){return{search:"",checkedItem:[],activeItem:{},index:""}},props:{items:{type:Array,required:!0},editConfig:{default:!1},headers:{type:Array},hideHeaders:{default:!0},resourceName:{default:!1},allowSearch:{default:!1,type:Boolean},allowActive:{default:!1},formatFields:{type:Object},fieldName:{default:""},headerLabel:{default:""}},computed:{fheader:function(){return console.log(this.headers),this.headers.filter((function(e){return e.value}))}},watch:{checkedItem:{handler:function(e){this.$emit("changeItems",e)}},items:{handler:function(e){var t=this;console.log(e),this.IsLoading=!1,this.mergeConfig=e.map((function(a,i){return{field:t.fieldName,index:i,rowspan:e.filter((function(e){return e[t.fieldName]==a[t.fieldName]})).length,isHead:0==i||!(e[i-1<0?0:i-1][t.fieldName]==e[i][t.fieldName])}}))}}},methods:{setActiveItem:function(e,t){console.log(e),this.activeItem=e,this.index=t,this.allowActive&&(this.activeItem=e,this.index=t)},setCheckItems:function(e){this.checkedItem.push(e)},getCheckItems:function(){return this.checkedItem},unCheckItems:function(){this.checkedItem=[]},addOrUpdate:function(e){var t=this;this.resourceName?t.$Server.addOrUpdate(t.resourceName,e,e.id).then((function(e){e.success&&t.$Console.info("修改成功")}),(function(e){l["a"].alert(e.toString())})):this.editConfig.find((function(e){return"save"==e.userfor})).click(e)},deleteItem:function(){var t=this;if(null!=this.activeItem)if(this.resourceName)this.$Server.batchDelete(t.resourceName,[this.activeItem]).then((function(e){var a=this;t.$Console.info("删除成功"),t.items=t.items.filter((function(e){return e.id!=a.activeItem.id}))}),(function(){l["a"].alert(e.toString())}));else{var a=this.index;this.editConfig.find((function(e){return"delete"==e.userfor})).click(this.activeItem,a)}}}},c=o,u=(i("5c9c"),i("6691")),d=Object(u["a"])(c,n,r,!1,null,null,null);a["a"]=d.exports},"5b9b":function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=a("a7fe"),p=new c["a"],m=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","SpPurchaseTask"),Object(o["a"])(Object(s["a"])(a),"purchaseCode",p.charField({require:!0,fieldName:"购置单编号"})),Object(o["a"])(Object(s["a"])(a),"name",p.charField({require:!0,fieldName:"备件名称"})),Object(o["a"])(Object(s["a"])(a),"model",p.charField({require:!0,fieldName:"规格型号"})),Object(o["a"])(Object(s["a"])(a),"supplierName",p.charField({require:!0,fieldName:"供应商"})),Object(o["a"])(Object(s["a"])(a),"purchaseCount",p.numberField("int",{require:!0,fieldName:"购置数量"})),Object(o["a"])(Object(s["a"])(a),"reason",p.charField({require:!0,fieldName:"购置原因",visible:!0})),Object(o["a"])(Object(s["a"])(a),"latestTime",p.dateField({require:!0,fieldName:"最迟到货时间",format:function(e){if(e)return e.substring(0,10)}})),Object(o["a"])(Object(s["a"])(a),"applicantName",p.charField({require:!0,editable:!1,fieldName:"申请人"})),Object(o["a"])(Object(s["a"])(a),"applicant",p.charField({require:!0,visible:!1,fieldName:"申请人"})),Object(o["a"])(Object(s["a"])(a),"equipmentDirectory",p.charField({require:!0,fieldName:"购置备件",visible:!1})),Object(o["a"])(Object(s["a"])(a),"code",p.charField({require:!0,fieldName:"备件编号",visible:!1})),Object(o["a"])(Object(s["a"])(a),"supplier",p.charField({require:!0,visible:!1,fieldName:"供应商"})),Object(o["a"])(Object(s["a"])(a),"status",p.comboBoxField(d["a"],{require:!1,fieldName:"状态",editable:!1,visible:!1,format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"statusName",p.charField({require:!1,editable:!1,fieldName:"状态"})),a}return Object(l["a"])(t,e),t}(u["a"])},"5bf7":function(e,t,a){"use strict";t["a"]={textInput:{name:"输入框",value:0},comboInput:{name:"下拉框",value:1},selectsInput:{name:"下拉多选",value:2},datePick:{name:"日期选择框",value:3},dateTimePick:{name:"日期时间选择框",value:4},radio:{name:"单选",value:5},intInput:{name:"整型框",value:6},doubleInput:{name:"小数框",value:7},boolInput:{name:"布尔框",value:8},textareaInput:{name:"多行输入框",value:9}}},"5c64":function(e,t,a){},"5c9c":function(e,t,a){"use strict";var i=a("0c04"),n=a.n(i);n.a},"641b":function(e,t,a){},"643a":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-layout",{staticStyle:{padding:"0 20px"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs4:""}},[e._v("\n            报废单编号："),a("span",[e._v(e._s(e.SpScrapTask.scrapCode))])]),a("v-flex",{attrs:{xs4:""}},[e._v("\n            报废日期："),a("span",[e._v(e._s((e.SpScrapTask.scrapDate||"").split(" ")[0]))])]),a("v-flex",{attrs:{xs4:""}},[e._v("\n            申请人："),a("span",[e._v(e._s(e.SpScrapTask.applicantName))])])],1),e._l(e.SpScrapTask.spscrapSparepartList,(function(t){return a("v-layout",{key:t.id,staticStyle:{padding:"10px 20px"},attrs:{row:"",wrap:""}},[a("v-flex",[e._v("\n            备件编号："),a("span",[e._v(e._s(t.spareCode))])]),a("v-flex",[e._v("\n            备件位置："),a("span",[e._v(e._s(t.sparePosition))])]),a("v-flex",[e._v("\n            备件名称："),a("span",[e._v(e._s(t.spareName))])]),a("v-flex",[e._v("\n            规格型号："),a("span",[e._v(e._s(t.spareModel))])]),a("v-flex",[e._v("\n            数量："),a("span",[e._v(e._s(t.scrapCount))])])],1)})),a("v-flex",{attrs:{xs12:""}},[e._v("\n        报废原因："),a("span",[e._v(e._s(e.SpScrapTask.reason))])]),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:null!==e.SpScrapTask.document.newestFilePath,expression:"SpScrapTask.document.newestFilePath !== null"}],attrs:{xs12:""}},[a("view-file",{attrs:{documentViewModel:e.SpScrapTask.document,color:"primary"}})],1),3==e.params?a("v-flex",{attrs:{xs12:""}},[e._v("\n        备件是否在库："),a("span",[e._v(e._s(e.SpScrapTask.isSparePosition))])]):e._e()],2)},n=[],r={name:"spScrapTaskForm",data:function(){return{item:{},params:"",SpScrapTask:{document:{}}}},methods:{initForm:function(e,t){var a=this;a.params=t,e&&a.$Server.queryObjectById("SpScrapTask",e).then((function(e){a.SpScrapTask=e.data.data}))},getTitle:function(){return"备件报废任务清单"},getFormData:function(){return this.SpScrapTask},getSourceKey:function(){return"SpScrapTask"},downloadTemp:function(){}}},s=r,l=a("6691"),o=Object(l["a"])(s,i,n,!1,null,"bd788404",null);t["a"]=o.exports},"64be":function(e,t,a){},"64cf":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("盘点单编号："+e._s(e.item.inventoryCode))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("开始日期："+e._s(e.item.startDate&&e.item.startDate.substring(0,10)))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("结束日期："+e._s(e.item.endDate&&e.item.endDate.substring(0,10)))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("负责人："+e._s(e.item.assignName))])])],1),a("v-layout",[a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("盘点类型："+e._s(e.item.inventoryType&&e.item.inventoryType.dname))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("盘点维度："+e._s(e.item.inventoryDimension&&e.item.inventoryDimension.dname))])])],1),a("v-layout",[a("v-flex",{attrs:{xs3:""}},[a("v-btn",{attrs:{color:"primary",small:""},on:{click:e.handldPrint}},[e._v("打印盘点单")])],1)],1),e.item.documentList&&e.item.documentList.length>0?a("v-layout",e._l(e.item.documentList,(function(e){return a("v-flex",{key:e.id},[a("view-file",{attrs:{documentViewModel:e.documentViewModel}})],1)})),1):e._e()],1)},n=[],r={name:"DetailBlock",props:{item:Object},updated:function(){},methods:{getDocumentName:function(e){return e.documentViewModel&&e.documentViewModel.dname?e.documentViewModel.dname+e.documentViewModel.newestFileExt:""},downloadDocument:function(e){var t=document.createElement("a");t.href=e.newestFilePath,t.download=this.getDocumentName(e),t.click()},handldPrint:function(){window.open("#eqpInventoryPrint?id=".concat(this.item.id))}}},s=r,l=a("6691"),o=Object(l["a"])(s,i,n,!1,null,"5ef5ff28",null);t["a"]=o.exports},"652a":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("efce"),a("4634"),a("ed8b");var i=a("97a3"),n=a("7300"),r=a("e9e3");function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(a,!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var o=function(){function e(){Object(n["a"])(this,e),this.charFieldConfig={fieldType:"charField",fieldName:"",visible:!0,require:!1,maxLength:100,editable:!0,validType:"",readonly:!1},this.boolFieldConfig={fieldType:"boolField",fieldName:"",require:!1,visible:!0,editable:!0},this.oneToManyFieldConfig={fieldType:"toManyByField",editable:!0,visible:!1},this.manyToManyFieldConfig={fieldType:"manyToManyField",editable:!0,visible:!1},this.imageFieldConfig={fieldType:"imageField",editable:!0,visible:!1},this.numberFieldConfig={fieldType:"numberField",fieldName:"",visible:!0,require:!1,maxLength:100,editable:!0},this.dateFieldConfig={fieldType:"dateField",fieldName:"",visible:!0,require:!1,maxLength:10,editable:!0},this.comboBoxConfig={fieldType:"comboboxField",fieldName:"",visible:!0,require:!1,editable:!0},this.comboTreeConfig={fieldType:"comboTree",fieldName:"",visible:!1,require:!1,editable:!0},this.fileConfig={fieldType:"fileField",fieldName:"",visible:!1,require:!0,editable:!0}}return Object(r["a"])(e,[{key:"charField",value:function(e){return l({},this.charFieldConfig,{},e)}},{key:"boolField",value:function(e){return l({},this.boolFieldConfig,{},e)}},{key:"oneToManyField",value:function(e,t){return l({model:new e},this.oneToManyFieldConfig,{},t)}},{key:"manyToManyField",value:function(e,t){return l({model:new e},this.manyToManyFieldConfig,{},t)}},{key:"imageField",value:function(e){return l({},this.imageFieldConfig,{},e)}},{key:"numberField",value:function(e,t){return l({type:e},this.numberFieldConfig,{},t)}},{key:"dateField",value:function(e){return l({},this.dateFieldConfig,{},e)}},{key:"comboBoxField",value:function(e,t){return l(null!=e?{model:new e}:{},this.comboBoxConfig,{},t)}},{key:"fileField",value:function(e){return l({},this.fileConfig,{},e)}},{key:"comboTree",value:function(e,t){return l(null!=e?{model:new e}:{},this.comboTreeConfig,{},t)}}]),e}()},6722:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=new c["a"],p=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","Role"),Object(o["a"])(Object(s["a"])(a),"rname",d.charField({require:!0,fieldName:"角色名"})),Object(o["a"])(Object(s["a"])(a),"description",d.charField({require:!0,fieldName:"描述"})),Object(o["a"])(Object(s["a"])(a),"isAdministrative",d.boolField({require:!0,fieldName:"管理员",boolSelect:["是","否"],format:function(e){return e?"是":"否"}})),a}return Object(l["a"])(t,e),t}(u["a"])},"681f":function(e,t,a){"use strict";var i=a("6e6d"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:"","max-width":e.width},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"primary"},[a("span",{staticClass:"headline",staticStyle:{color:"#fff"}},[e._v(e._s(e.title))])]),a("v-card-text",[e._v(e._s(e.content))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary darken-1",flat:""},on:{click:function(t){return e.confirmEvent()}}},[e._v("确定")]),a("v-btn",{attrs:{color:"primary darken-1",flat:""},on:{click:function(t){return e.cancelEvent()}}},[e._v("取消")])],1)],1)],1)},r=[],s={name:"Confirm",data:function(){return{dialog:!1,width:"",title:"",content:"",confirm:null,cancel:null}},mounted:function(){},methods:{confirmEvent:function(){this.dialog=!1,this.confirm()},cancelEvent:function(){this.dialog=!1,this.cancel()}}},l=s,o=a("6691"),c=Object(o["a"])(l,n,r,!1,null,null,null),u=c.exports,d=i["default"].extend(u),p=null;u.confirm=function(e,t,a,n,r){var s={content:e,title:t,width:a||600,confirm:n,cancel:r};null==p?(p=new d({data:s}).$mount(),document.body.appendChild(p.$el),i["default"].nextTick((function(){p.dialog=!0}))):i["default"].nextTick((function(){p.content=s.content,p.title=s.title,p.width=s.width,p.confirm=s.confirm,p.cancel=s.cancel,p.dialog=!0}))};t["a"]=u},"6dc6":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAeCAYAAAAVdY8wAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjIzQUIxMjUzQjFBRDExRTlBRDMxQzBCQkFCOUEwMTMyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjIzQUIxMjU0QjFBRDExRTlBRDMxQzBCQkFCOUEwMTMyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjNBQjEyNTFCMUFEMTFFOUFEMzFDMEJCQUI5QTAxMzIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MjNBQjEyNTJCMUFEMTFFOUFEMzFDMEJCQUI5QTAxMzIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz45BWQXAAAAcElEQVR42mI8cvYyAyFgbaTDwMRAJEBWyAbEE4H4LRC/g7LZYJIsSAq7gDgPiQ9ifwfiCnQTY7HYmIrNaqLduBiL/BxsbiwDYkYkJ4A01mJT+AuI86EYr9VEu5H6CkdjZjRmhkzMMP7//58oNwIEGADdsSlIezxYNAAAAABJRU5ErkJggg=="},"6e44":function(e,t,a){},"71a6":function(e,t,a){},7340:function(e,t,a){},"73e5":function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=a("a7fe"),p=new c["a"],m=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","SpInventoryTask"),Object(o["a"])(Object(s["a"])(a),"inventoryCode",p.charField({require:!0,fieldName:"盘点单编号",colspan:"md4",rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"startDate",p.dateField({require:!0,fieldName:"开始日期",format:function(e){if(e)return e.substring(0,10)}})),Object(o["a"])(Object(s["a"])(a),"endDate",p.dateField({require:!0,fieldName:"结束日期",format:function(e){if(e)return e.substring(0,10)}})),Object(o["a"])(Object(s["a"])(a),"actualStartDate",p.dateField({require:!1,fieldName:"实际开始日期",editable:!1,visible:!1})),Object(o["a"])(Object(s["a"])(a),"actualEndDate",p.dateField({require:!1,fieldName:"实际结束日期",editable:!1,visible:!1})),Object(o["a"])(Object(s["a"])(a),"inventoryType",p.comboBoxField(d["a"],{require:!1,visible:!0,fieldName:"盘点类型",bindSource:{parms:{dname:"设备盘点类型"}},colspan:"md4",editable:!1,format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"inventoryDimension",p.comboBoxField(d["a"],{require:!1,visible:!0,fieldName:"盘点维度",bindSource:{parms:{dname:"备件盘点维度"}},colspan:"md4",editable:!1,format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"assignName",p.charField({editable:!1,fieldName:"负责人"})),Object(o["a"])(Object(s["a"])(a),"status",p.comboBoxField(d["a"],{require:!1,fieldName:"状态",visible:!1,editable:!1,format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"statusName",p.charField({require:!1,editable:!1,fieldName:"状态"})),a}return Object(l["a"])(t,e),t}(u["a"])},"73e9":function(e,t,a){"use strict";var i=a("4a73"),n=a.n(i);n.a},7499:function(e,t,a){"use strict";var i=a("ffb3"),n=a.n(i);n.a},7677:function(e,t,a){"use strict";var i=a("3e5e"),n=a.n(i);n.a},"768e":function(e,t,a){"use strict";var i=a("556c"),n=a.n(i);n.a},"776f":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:!0,scrollable:"",width:e.width?e.width:1e3,"content-class":"selfdialog"},model:{value:e.IsShow,callback:function(t){e.IsShow=t},expression:"IsShow"}},[a("v-card",[a("v-card-title",{staticClass:"primary"},[a("span",{staticClass:"headline",staticStyle:{color:"#fff"}},[e._v(e._s(e.title))]),e.IsShowComfirmed?a("v-spacer"):e._e(),e.IsShowComfirmed?a("v-btn",{attrs:{icon:"",dark:"",flat:""},on:{click:e.modalClosed}},[a("v-icon",[e._v("close")])],1):e._e()],1),a("v-card-text",[e._t("default")],2),e.IsShowComfirmed?e._e():a("v-card-actions",{staticClass:"marginbottom"},[a("v-spacer"),1==e.isDetails?a("div",[a("v-btn",{staticStyle:{"margin-right":"30px"},attrs:{color:"primary"},on:{click:function(t){return e.modalClosed()}}},[e._v("关闭")])],1):a("div",[e.isEnd?a("v-btn",{staticStyle:{"margin-right":"30px"},attrs:{color:"primary"},on:{click:function(t){return e.processEnd()}}},[e._v("结束流程")]):e._e(),e.isProcess?a("v-btn",{staticStyle:{"margin-right":"30px"},attrs:{color:"primary"},on:{click:function(t){return e.modalComfirmed()}}},[e._v("下一步")]):a("v-btn",{staticStyle:{"margin-right":"30px"},attrs:{color:"primary"},on:{click:function(t){return e.modalComfirmed()}}},[e._v("确定")]),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.modalClosed()}}},[e._v("取消")])],1)],1)],1)],1)},n=[],r=a("a0a8"),s=a.n(r),l={name:"contentModal",methods:{modalClosed:function(){this.$emit("modalClosed")},modalComfirmed:function(){this.$emit("modalComfirmed")},modalStorageClosed:function(){this.$emit("modalStorageClosed")},modalSubmit:function(){this.$emit("modalSubmit")},processEnd:function(){this.$emit("processEnd")}},mounted:function(){new s.a(".selfdialog",{})},props:["title","IsShow","width","IsShowComfirmed","isDetails","isSubmit","isProcess","isEnd"]},o=l,c=(a("01c9"),a("6691")),u=Object(c["a"])(o,i,n,!1,null,"50333a65",null);t["a"]=u.exports},"77d2":function(e,t,a){var i={"./af":"fbac","./af.js":"fbac","./ar":"f96f","./ar-dz":"e63c","./ar-dz.js":"e63c","./ar-kw":"b7bd","./ar-kw.js":"b7bd","./ar-ly":"968f","./ar-ly.js":"968f","./ar-ma":"9f9d","./ar-ma.js":"9f9d","./ar-sa":"aea5","./ar-sa.js":"aea5","./ar-tn":"d44b","./ar-tn.js":"d44b","./ar.js":"f96f","./az":"c7ed","./az.js":"c7ed","./be":"5a28","./be.js":"5a28","./bg":"1251","./bg.js":"1251","./bm":"2809","./bm.js":"2809","./bn":"b4fc","./bn.js":"b4fc","./bo":"5484","./bo.js":"5484","./br":"5adc","./br.js":"5adc","./bs":"ac10","./bs.js":"ac10","./ca":"e381","./ca.js":"e381","./cs":"aef2","./cs.js":"aef2","./cv":"6566","./cv.js":"6566","./cy":"1390","./cy.js":"1390","./da":"1ece","./da.js":"1ece","./de":"5f10","./de-at":"09c4","./de-at.js":"09c4","./de-ch":"89a2","./de-ch.js":"89a2","./de.js":"5f10","./dv":"e662","./dv.js":"e662","./el":"196b","./el.js":"196b","./en-SG":"0a32","./en-SG.js":"0a32","./en-au":"94ed","./en-au.js":"94ed","./en-ca":"2806","./en-ca.js":"2806","./en-gb":"b0dd","./en-gb.js":"b0dd","./en-ie":"7a6e","./en-ie.js":"7a6e","./en-il":"1f0f","./en-il.js":"1f0f","./en-nz":"1606","./en-nz.js":"1606","./eo":"f214","./eo.js":"f214","./es":"7d58","./es-do":"737b","./es-do.js":"737b","./es-us":"a894","./es-us.js":"a894","./es.js":"7d58","./et":"a888","./et.js":"a888","./eu":"1357","./eu.js":"1357","./fa":"0a48","./fa.js":"0a48","./fi":"c2b1","./fi.js":"c2b1","./fo":"52c4","./fo.js":"52c4","./fr":"04e6","./fr-ca":"6ad1","./fr-ca.js":"6ad1","./fr-ch":"b12f","./fr-ch.js":"b12f","./fr.js":"04e6","./fy":"ad13","./fy.js":"ad13","./ga":"369e","./ga.js":"369e","./gd":"22de","./gd.js":"22de","./gl":"f808","./gl.js":"f808","./gom-latn":"50d5","./gom-latn.js":"50d5","./gu":"e67a","./gu.js":"e67a","./he":"037c","./he.js":"037c","./hi":"3d53","./hi.js":"3d53","./hr":"678b","./hr.js":"678b","./hu":"1783","./hu.js":"1783","./hy-am":"2873","./hy-am.js":"2873","./id":"de99","./id.js":"de99","./is":"6aa2","./is.js":"6aa2","./it":"1f93","./it-ch":"2db9","./it-ch.js":"2db9","./it.js":"1f93","./ja":"6bf8","./ja.js":"6bf8","./jv":"6e55","./jv.js":"6e55","./ka":"e65f","./ka.js":"e65f","./kk":"7167","./kk.js":"7167","./km":"4668","./km.js":"4668","./kn":"e3d2","./kn.js":"e3d2","./ko":"b058","./ko.js":"b058","./ku":"017e","./ku.js":"017e","./ky":"b2bd","./ky.js":"b2bd","./lb":"e50c","./lb.js":"e50c","./lo":"ca14","./lo.js":"ca14","./lt":"3e84","./lt.js":"3e84","./lv":"ce1d","./lv.js":"ce1d","./me":"9d38","./me.js":"9d38","./mi":"3e2e","./mi.js":"3e2e","./mk":"d532","./mk.js":"d532","./ml":"db61","./ml.js":"db61","./mn":"7493","./mn.js":"7493","./mr":"52d8","./mr.js":"52d8","./ms":"b559","./ms-my":"7462","./ms-my.js":"7462","./ms.js":"b559","./mt":"c055","./mt.js":"c055","./my":"49e0","./my.js":"49e0","./nb":"eb1c","./nb.js":"eb1c","./ne":"0acb","./ne.js":"0acb","./nl":"7497","./nl-be":"3114","./nl-be.js":"3114","./nl.js":"7497","./nn":"9a9c","./nn.js":"9a9c","./pa-in":"c595","./pa-in.js":"c595","./pl":"801c","./pl.js":"801c","./pt":"5b08","./pt-br":"155f","./pt-br.js":"155f","./pt.js":"5b08","./ro":"05fc","./ro.js":"05fc","./ru":"90b3","./ru.js":"90b3","./sd":"99bf","./sd.js":"99bf","./se":"20d6","./se.js":"20d6","./si":"7c0b","./si.js":"7c0b","./sk":"90fc","./sk.js":"90fc","./sl":"871b","./sl.js":"871b","./sq":"b045","./sq.js":"b045","./sr":"ac81","./sr-cyrl":"a2d0","./sr-cyrl.js":"a2d0","./sr.js":"ac81","./ss":"b093","./ss.js":"b093","./sv":"12e5","./sv.js":"12e5","./sw":"38a0","./sw.js":"38a0","./ta":"a462","./ta.js":"a462","./te":"18cb","./te.js":"18cb","./tet":"0c11","./tet.js":"0c11","./tg":"d707","./tg.js":"d707","./th":"883f","./th.js":"883f","./tl-ph":"6cc0","./tl-ph.js":"6cc0","./tlh":"ab53","./tlh.js":"ab53","./tr":"e523","./tr.js":"e523","./tzl":"b192","./tzl.js":"b192","./tzm":"5604","./tzm-latn":"9f95","./tzm-latn.js":"9f95","./tzm.js":"5604","./ug-cn":"9f4f","./ug-cn.js":"9f4f","./uk":"8bd6","./uk.js":"8bd6","./ur":"9a78","./ur.js":"9a78","./uz":"4d4c","./uz-latn":"da73","./uz-latn.js":"da73","./uz.js":"4d4c","./vi":"b766","./vi.js":"b766","./x-pseudo":"2a69","./x-pseudo.js":"2a69","./yo":"fd2e","./yo.js":"fd2e","./zh-cn":"35d0","./zh-cn.js":"35d0","./zh-hk":"7b45","./zh-hk.js":"7b45","./zh-tw":"fa66","./zh-tw.js":"fa66"};function n(e){var t=r(e);return a(t)}function r(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=r,e.exports=n,n.id="77d2"},7878:function(e,t,a){},"7b9d":function(e,t,a){},"7bb8":function(e,t,a){"use strict";var i=a("8b72"),n=a.n(i);n.a},"7c02":function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=a("a7fe"),p=new c["a"],m=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","Equipment"),Object(o["a"])(Object(s["a"])(a),"code",p.charField({require:!0,fieldName:"设备编号"})),Object(o["a"])(Object(s["a"])(a),"name",p.charField({require:!0,fieldName:"设备名称"})),Object(o["a"])(Object(s["a"])(a),"model",p.charField({require:!1,fieldName:"规格型号"})),Object(o["a"])(Object(s["a"])(a),"factoryName",p.charField({require:!1,fieldName:"设备位置"})),Object(o["a"])(Object(s["a"])(a),"type",p.comboBoxField(d["a"],{require:!0,fieldName:"设备类型",bindSource:{parms:{type:"4"}},format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),a}return Object(l["a"])(t,e),t}(u["a"])},"7c48":function(e,t,a){"use strict";var i=a("b695"),n=a.n(i);n.a},"7e38":function(e,t,a){"use strict";var i=a("c4ed"),n=a.n(i);n.a},"7e3d":function(e,t,a){"use strict";var i=a("a003"),n=a.n(i);n.a},8023:function(e,t,a){"use strict";var i=a("3dba"),n=a.n(i);n.a},"815a":function(e,t,a){"use strict";var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=new c["a"],p=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","Companycontact"),Object(o["a"])(Object(s["a"])(a),"cname",d.charField({require:!0,fieldName:"单位联系人",editable:!0,rules:[function(e){return!!e||"必填项"},function(e){return/^[\u0391-\uFFE5A-Za-z]+$/.test(e)||"数据格式不正确"}]})),Object(o["a"])(Object(s["a"])(a),"phone",d.charField({require:!1,fieldName:"电话",editable:!0})),Object(o["a"])(Object(s["a"])(a),"telephone",d.charField({require:!0,fieldName:"手机",editable:!0,rules:[function(e){return!!e||"必填项"},function(e){return/^1[3456789]\d{9}$/.test(e)||"请输入正确的电话号码"}]})),Object(o["a"])(Object(s["a"])(a),"position",d.charField({require:!0,fieldName:"职位",editable:!0,rules:[function(e){return!!e||"必填项"},function(e){return/^[\u0391-\uFFE5A-Za-z]+$/.test(e)||"数据格式不正确"}]})),a}return Object(l["a"])(t,e),t}(u["a"]),m=a("a7fe");a("20d3");a.d(t,"a",(function(){return v}));var f=new c["a"],v=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","Company"),Object(o["a"])(Object(s["a"])(a),"comCode",f.charField({require:!1,fieldName:"单位编号",colspan:"md4",rules:[function(e){return!e||/^[\w|-]+$/.test(e)||"只能是数字,字母,下划线"}]})),Object(o["a"])(Object(s["a"])(a),"cname",f.charField({require:!0,fieldName:"单位名称",rules:[function(e){return!!e||"必填项"}],colspan:"md4"})),Object(o["a"])(Object(s["a"])(a),"ctypeName",f.charField({fieldName:"单位类型",editable:!0,colspan:"md4"})),Object(o["a"])(Object(s["a"])(a),"ctypeList",f.manyToManyField(m["a"],{require:!1,fieldName:"单位类型",colspan:"md4",bindSource:{text:"dname",value:"dvalue",parms:{dname:"来往单位管理类型"}}})),Object(o["a"])(Object(s["a"])(a),"industry",f.comboBoxField(m["a"],{require:!1,fieldName:"行业",colspan:"md4",bindSource:{parms:{dname:"来往单位行业"}},format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"region",f.comboBoxField(m["a"],{require:!1,fieldName:"区域",colspan:"md4",format:function(e){if(e&&e.dname)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"address",f.charField({require:!0,fieldName:"地址",colspan:"md4"})),Object(o["a"])(Object(s["a"])(a),"postalCode",f.charField({require:!1,fieldName:"邮政编码",colspan:"md4",visible:!1})),Object(o["a"])(Object(s["a"])(a),"hasCooperate",f.boolField({require:!0,fieldName:"有无合作",boolSelect:[],parms:{dname:"有无合作"},format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"companycontacts",f.oneToManyField(p,"companyId",{editableMode:"grid",fieldName:"操作权"})),Object(o["a"])(Object(s["a"])(a),"deleted",f.charField({require:!1,visible:!1,editable:!1})),a}return Object(l["a"])(t,e),t}(u["a"])},"81e3":function(e,t,a){"use strict";var i=a("b07b"),n=a.n(i);n.a},"82f6":function(e,t,a){},8318:function(e,t,a){"use strict";var i=a("641b"),n=a.n(i);n.a},8333:function(e,t,a){"use strict";a("de90");var i=a("7300"),n=a("e9e3"),r=a("5873"),s=a("ddf2"),l=a("bdd6"),o=a("ae0a"),c=a("3596"),u=function(){function e(t){Object(i["a"])(this,e),this.obj=t,this.baseFields=[{id:String,createTime:String,updateTime:String}],this.IndependFields=["chatField","boolField"]}return Object(n["a"])(e,[{key:"getModelName",value:function(){return this.obj.__name}},{key:"getAllFields",value:function(){var e=[];for(var t in this.obj)e.push(this.obj[t]);return e}},{key:"getVisibleFields",value:function(){var e=[];for(var t in this.obj)if(this.obj[t].visible){var a=this.obj[t];d(a)&&(a["field"]=t,e.push(a))}return e}},{key:"getEditFields",value:function(){var e=[];for(var t in this.obj)if(this.obj[t].editable){var a=this.obj[t];d(a)&&(a["field"]=t,e.push(a))}return e}},{key:"getIndependEditFields",value:function(){var e=[];for(var t in this.obj)if(this.obj[t].editable&&this.IndependFields.indexOf(this.obj[t].fieldType)>-1){var a=this.obj[t];d(a)&&(a["field"]=t,e.push(a))}return e}},{key:"getRelativeEditFields",value:function(){var e=[];for(var t in this.obj)if(this.obj[t].editable&&-1==this.IndependFields.indexOf(this.obj[t].fieldType)){var a=this.obj[t];d(a)&&(a["field"]=t,e.push(a))}return e}},{key:"getIndependFields",value:function(){var e=[];for(var t in this.obj)if(this.IndependFields.indexOf(this.obj[t].fieldType)>-1){var a=this.obj[t];d(a)&&(a["field"]=t,e.push(a))}return e}},{key:"getFormatFields",value:function(){var e={};for(var t in this.obj)this.obj[t].format&&(e[t]=this.obj[t].format);return e}}]),e}();function d(e){return"object"==Object(c["a"])(e)&&"number"!=typeof e.length}a.d(t,"a",(function(){return p}));var p=function(e){function t(e){return Object(i["a"])(this,t),Object(r["a"])(this,Object(s["a"])(t).call(this,e))}return Object(o["a"])(t,e),Object(n["a"])(t,[{key:"formatGridHeader",value:function(){var e=Object(l["a"])(Object(s["a"])(t.prototype),"getVisibleFields",this).call(this);return e.sort((function(e,t){var a=0;return e.tableOrder<t.tableOrder&&(a=-1),e.tableOrder>t.tableOrder&&(a=1),a})),e.map((function(e){var t=e.fieldName,a=e.align,i=void 0===a?"center":a,n=e.sortable,r=void 0!==n&&n,s=e.field,l=e.fieldType,o=e.comboboxSelect,c=e.require,u=e.rules;return{text:t,align:i,sortable:r,value:s,fieldType:l,select:o,require:c,rules:u}}))}}]),t}(u)},"83b4":function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=a("a7fe"),p=new c["a"],m=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","RepairTask"),Object(o["a"])(Object(s["a"])(a),"code",p.charField({require:!0,fieldName:"维修单编号",rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"equipmentCode",p.charField({require:!0,fieldName:"设备编号"})),Object(o["a"])(Object(s["a"])(a),"equipmentName",p.charField({require:!0,fieldName:"设备名称"})),Object(o["a"])(Object(s["a"])(a),"faultType",p.charField({require:!0,fieldName:"故障类型",format:function(e){return e&&e.dname}})),Object(o["a"])(Object(s["a"])(a),"faultDescription",p.charField({require:!0,fieldName:"故障描述"})),Object(o["a"])(Object(s["a"])(a),"urgency",p.charField({require:!0,fieldName:"紧急程度",format:function(e){return e&&e.dname}})),Object(o["a"])(Object(s["a"])(a),"equipmentPosition",p.charField({require:!0,fieldName:"设备位置",visible:!1})),Object(o["a"])(Object(s["a"])(a),"reportTime",p.dateField({require:!0,fieldName:"报修时间",rules:[function(e){return!!e||"必填项"}],format:function(e){if(e)return e.substring(0,16)}})),Object(o["a"])(Object(s["a"])(a),"assignmentTime",p.dateField({require:!0,fieldName:"派工时间",rules:[function(e){return!!e||"必填项"}],format:function(e){if(e)return e.substring(0,16)}})),Object(o["a"])(Object(s["a"])(a),"startTime",p.dateField({require:!0,fieldName:"维修开始时间",rules:[function(e){return!!e||"必填项"}],format:function(e){if(e)return e.substring(0,16)}})),Object(o["a"])(Object(s["a"])(a),"endTime",p.dateField({require:!0,fieldName:"维修结束时间",rules:[function(e){return!!e||"必填项"}],format:function(e){if(e)return e.substring(0,16)}})),Object(o["a"])(Object(s["a"])(a),"repairPersonListString",p.charField({require:!0,fieldName:"维修人员",rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"applicant",p.charField({require:!0,fieldName:"报修人",visible:!1,rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"faultPosition",p.charField({require:!0,fieldName:"故障位置",visible:!1})),Object(o["a"])(Object(s["a"])(a),"repairPersonList",p.charField({require:!1,visible:!1,fieldName:"维修人"})),Object(o["a"])(Object(s["a"])(a),"urgentDescription",p.charField({require:!0,fieldName:"紧急备注",rules:[function(e){return!!e||"必填项"}],visible:!1})),Object(o["a"])(Object(s["a"])(a),"accualDescription",p.charField({require:!0,fieldName:"现场情况描述",rules:[function(e){return!!e||"必填项"}],visible:!1})),Object(o["a"])(Object(s["a"])(a),"planRepairTime",p.dateField({require:!0,fieldName:"计划维修时间",visible:!1,rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"state",p.comboBoxField(d["a"],{require:!1,fieldName:"处理状态",visible:!1,editable:!1,format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"stateName",p.charField({require:!1,editable:!1,fieldName:"任务状态"})),Object(o["a"])(Object(s["a"])(a),"repairDetail",p.charField({require:!0,fieldName:"维修详情",visible:!1})),Object(o["a"])(Object(s["a"])(a),"isSynchronized",p.charField({require:!0,fieldName:"是否同步到知识库",visible:!1})),Object(o["a"])(Object(s["a"])(a),"rspList",p.charField({require:!0,fieldName:"维修使用备件",visible:!1})),Object(o["a"])(Object(s["a"])(a),"rdocumentList",p.charField({require:!0,fieldName:"维修附件",visible:!1})),a}return Object(l["a"])(t,e),t}(u["a"])},8511:function(e,t,a){"use strict";var i=a("bb45"),n=a.n(i);n.a},"87e0":function(e,t,a){"use strict";var i=a("87f3"),n=a.n(i);n.a},"87f3":function(e,t,a){},"88a5":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticStyle:{padding:"10px"},attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("购置单编号："+e._s(e.taskDetail.purchaseCode))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("最迟到货日期："+e._s(e.taskDetail.latestTime&&e.taskDetail.latestTime.substring(0,10)))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("申请人："+e._s(e.taskDetail.applicantName))])])],1),e._l(e.taskDetail.rspsList,(function(t,i){return a("v-layout",{key:i},[a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("备件名称："+e._s(t.name))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("规格型号："+e._s(t.model))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("供应商："+e._s(t.supplierName))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("数量："+e._s(t.purchaseCount))])])],1)})),a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("p",[e._v("购置原因："+e._s(e.taskDetail.reason))])])],1),a("v-layout",[e.taskDetail.status&&"已取消"==e.taskDetail.status.dname?a("v-flex",{staticStyle:{"margin-top":"15px"},attrs:{xs12:""}},[a("p",[e._v("取消原因："+e._s(e.taskDetail.cancelReason))])]):e._e()],1)],2)},n=[],r={name:"DetailBlock",props:{taskDetail:Object}},s=r,l=a("6691"),o=Object(l["a"])(s,i,n,!1,null,"2d12e847",null);t["a"]=o.exports},8907:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"table-cell","white-space":"nowrap","word-break":"keep-all","vertical-align":"top"}},[a("v-card",{staticClass:"elevation-3 content_left secondary",staticStyle:{"min-width":"220px","min-height":"100%"}},[e.IsShowTitle?a("v-card-title",{staticClass:"leftContentTitle primary"},[a("h3",[e._v(e._s(e.title))])]):e._e(),e._t("default")],2)],1)},n=[],r={props:{title:{type:String},IsShowTitle:{type:Boolean,default:!0}}},s=r,l=(a("d2fa"),a("6691")),o=Object(l["a"])(s,i,n,!1,null,"10f7bb0e",null);t["a"]=o.exports},"8af4":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("improveApplySee",{attrs:{item:e.improveApply}}),a("v-container",{staticStyle:{backgraound:"white"},attrs:{"grid-list-md":""}},[a("v-layout",{staticStyle:{padding:"0 20px"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("p",{staticClass:"title"},[e._v("改善报告")])])],1),a("v-layout",{staticStyle:{padding:"0 20px"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[e._v("\n        改善小组成员\n        "),a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){return e.addImproveTeam()}}},[a("v-icon",[e._v("add")])],1),a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){return e.deleteImproveTeam()}}},[a("v-icon",[e._v("remove")])],1)],1),a("v-flex",{attrs:{xs2:""}},[a("v-select",{attrs:{items:e.userList,label:"工号","item-text":"name","item-value":"jobNumber"},model:{value:e.improveTeam.jobNumber,callback:function(t){e.$set(e.improveTeam,"jobNumber",t)},expression:"improveTeam.jobNumber"}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-text-field",{attrs:{label:"姓名",disabled:""},model:{value:e.improveTeam.userName,callback:function(t){e.$set(e.improveTeam,"userName",t)},expression:"improveTeam.userName"}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-text-field",{attrs:{label:"所属部门",disabled:""},model:{value:e.improveTeam.organizations,callback:function(t){e.$set(e.improveTeam,"organizations",t)},expression:"improveTeam.organizations"}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-text-field",{attrs:{label:"联系方式",disabled:""},model:{value:e.improveTeam.phone,callback:function(t){e.$set(e.improveTeam,"phone",t)},expression:"improveTeam.phone"}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-text-field",{attrs:{label:"邮箱"},model:{value:e.improveTeam.mail,callback:function(t){e.$set(e.improveTeam,"mail",t)},expression:"improveTeam.mail"}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-text-field",{attrs:{label:"团队角色"},model:{value:e.improveTeam.teamRole,callback:function(t){e.$set(e.improveTeam,"teamRole",t)},expression:"improveTeam.teamRole"}})],1),a("v-flex",{attrs:{xs12:""}},[a("simpleDataTable",{ref:"improveTeamRef",attrs:{headers:e.improveTeamHeader,hideHeaders:!1,items:e.improveTeamViewModelList,allowActive:!0,hideOperation:!0},on:{rowDbClick:e.rowImproveTeamDbClick}})],1)],1),a("v-layout",{staticStyle:{padding:"0 20px"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-textarea",{attrs:{label:"问题描述"},model:{value:e.improveReport.problemDescription,callback:function(t){e.$set(e.improveReport,"problemDescription",t)},expression:"improveReport.problemDescription"}})],1),a("v-flex",{attrs:{xs6:""}},[a("uploadFile2",{ref:"uploadFile2",attrs:{label:"上传附件",multiple:!1,fileNames:e.fileNames,uploadBase64:!1},on:{formData:e.getFormData2},model:{value:e.documentViewModelList,callback:function(t){e.documentViewModelList=t},expression:"documentViewModelList"}})],1)],1),a("v-layout",{staticStyle:{padding:"0 20px"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[e._v("\n        操作层面\n        "),a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){return e.addImproveStep()}}},[a("v-icon",[e._v("add")])],1),a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){return e.deleteImproveStep()}}},[a("v-icon",[e._v("remove")])],1)],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"原因分析"},model:{value:e.improveStep.reasonAnalysis,callback:function(t){e.$set(e.improveStep,"reasonAnalysis",t)},expression:"improveStep.reasonAnalysis"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-select",{attrs:{items:e.userList2,label:"提出人","item-text":"uname","item-value":"id"},model:{value:e.improveStep.raiseUser,callback:function(t){e.$set(e.improveStep,"raiseUser",t)},expression:"improveStep.raiseUser"}})],1),a("v-flex",{attrs:{xs3:""}},[a("datePicker",{attrs:{label:"提出时间"},model:{value:e.improveStep.raiseTime,callback:function(t){e.$set(e.improveStep,"raiseTime",t)},expression:"improveStep.raiseTime"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"改善措施"},model:{value:e.improveStep.improveAction,callback:function(t){e.$set(e.improveStep,"improveAction",t)},expression:"improveStep.improveAction"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-select",{attrs:{items:e.userList2,label:"执行人员","item-text":"uname","item-value":"id"},model:{value:e.improveStep.executionUser,callback:function(t){e.$set(e.improveStep,"executionUser",t)},expression:"improveStep.executionUser"}})],1),a("v-flex",{attrs:{xs3:""}},[a("datePicker",{attrs:{label:"执行时间"},model:{value:e.improveStep.executionTime,callback:function(t){e.$set(e.improveStep,"executionTime",t)},expression:"improveStep.executionTime"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"改善效果"},model:{value:e.improveStep.improveResult,callback:function(t){e.$set(e.improveStep,"improveResult",t)},expression:"improveStep.improveResult"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-select",{attrs:{items:e.userList2,label:"验收人员","item-text":"uname","item-value":"id"},model:{value:e.improveStep.acceptanceUser,callback:function(t){e.$set(e.improveStep,"acceptanceUser",t)},expression:"improveStep.acceptanceUser"}})],1),a("v-flex",{attrs:{xs3:""}},[a("datePicker",{attrs:{label:"验收时间"},model:{value:e.improveStep.acceptanceTime,callback:function(t){e.$set(e.improveStep,"acceptanceTime",t)},expression:"improveStep.acceptanceTime"}})],1),a("v-flex",{attrs:{xs12:""}},[a("simpleDataTable",{ref:"improveStepRef",attrs:{headers:e.improveStepHeader,hideHeaders:!1,items:e.improveStepViewModelList,allowActive:!0,hideOperation:!0},on:{rowDbClick:e.rowImproveStepDbClick}})],1)],1),a("v-layout",{staticStyle:{padding:"0 20px"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[e._v("\n        系统层面\n        "),a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){return e.addPreventiveStep()}}},[a("v-icon",[e._v("add")])],1),a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){return e.deletePreventiveStep()}}},[a("v-icon",[e._v("remove")])],1)],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"原因分析"},model:{value:e.preventiveStep.reasonAnalysis,callback:function(t){e.$set(e.preventiveStep,"reasonAnalysis",t)},expression:"preventiveStep.reasonAnalysis"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-select",{attrs:{items:e.userList2,label:"提出人","item-text":"uname","item-value":"id"},model:{value:e.preventiveStep.raiseUser,callback:function(t){e.$set(e.preventiveStep,"raiseUser",t)},expression:"preventiveStep.raiseUser"}})],1),a("v-flex",{attrs:{xs3:""}},[a("datePicker",{attrs:{label:"提出时间"},model:{value:e.preventiveStep.raiseTime,callback:function(t){e.$set(e.preventiveStep,"raiseTime",t)},expression:"preventiveStep.raiseTime"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"预防措施"},model:{value:e.preventiveStep.preventiveAction,callback:function(t){e.$set(e.preventiveStep,"preventiveAction",t)},expression:"preventiveStep.preventiveAction"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-select",{attrs:{items:e.userList2,label:"执行人员","item-text":"uname","item-value":"id"},model:{value:e.preventiveStep.executionUser,callback:function(t){e.$set(e.preventiveStep,"executionUser",t)},expression:"preventiveStep.executionUser"}})],1),a("v-flex",{attrs:{xs3:""}},[a("datePicker",{attrs:{label:"执行时间"},model:{value:e.preventiveStep.executionTime,callback:function(t){e.$set(e.preventiveStep,"executionTime",t)},expression:"preventiveStep.executionTime"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"预防效果"},model:{value:e.preventiveStep.preventiveResult,callback:function(t){e.$set(e.preventiveStep,"preventiveResult",t)},expression:"preventiveStep.preventiveResult"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-select",{attrs:{items:e.userList2,label:"验收人员","item-text":"uname","item-value":"id"},model:{value:e.preventiveStep.acceptanceUser,callback:function(t){e.$set(e.preventiveStep,"acceptanceUser",t)},expression:"preventiveStep.acceptanceUser"}})],1),a("v-flex",{attrs:{xs3:""}},[a("datePicker",{attrs:{label:"验收时间"},model:{value:e.preventiveStep.acceptanceTime,callback:function(t){e.$set(e.preventiveStep,"acceptanceTime",t)},expression:"preventiveStep.acceptanceTime"}})],1),a("v-flex",{attrs:{xs12:""}},[a("simpleDataTable",{ref:"preventiveStepRef",attrs:{headers:e.preventiveStepHeader,hideHeaders:!1,items:e.preventiveStepViewModelList,allowActive:!0,hideOperation:!0},on:{rowDbClick:e.rowPreventiveStepDbClick}})],1)],1),a("v-layout",{staticStyle:{padding:"0 20px"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-textarea",{attrs:{label:"标准化"},model:{value:e.improveReport.standardMethod,callback:function(t){e.$set(e.improveReport,"standardMethod",t)},expression:"improveReport.standardMethod"}})],1)],1)],1)],1)},n=[],r=(a("4634"),a("3876")),s=a("1d53"),l=a("ef3e"),o=a("ceaa"),c=a("d5b3"),u={name:"improveApplyReportForm",data:function(){return{improveTeamId:0,improveStepId:0,preventiveStepId:0,improveReport:{problemDescription:"",standardMethod:"",documentViewModelList:[{document:{}}]},improveApply:{},improveTeam:{userID:"",userName:"",jobNumber:"",phone:"",organizations:"",teamRole:"",mail:"",id:""},userList:[],userList2:[],improveTeamViewModelList:[],improveStepViewModelList:[],preventiveStepViewModelList:[],improveTeamHeader:[{text:"工号",align:"center",sortable:!1,value:"jobNumber"},{text:"姓名",align:"center",value:"userName",sortable:!1},{text:"所属部门",align:"center",value:"organizations",sortable:!1},{text:"联系方式",align:"center",value:"phone",sortable:!1},{text:"邮箱",align:"center",value:"mail",sortable:!1},{text:"团队角色",align:"center",value:"teamRole",sortable:!1}],improveStep:{reasonAnalysis:"",raiseUser:"",raiseUserName:"",raiseTime:"",improveAction:"",executionUser:"",executionUserName:"",executionTime:"",improveResult:"",acceptanceUser:"",acceptanceUserName:"",acceptanceTime:"",id:""},improveStepHeader:[{text:"原因分析",align:"center",value:"reasonAnalysis",sortable:!1},{text:"提出人",align:"center",value:"raiseUserName",sortable:!1},{text:"提出时间",align:"center",value:"raiseTime",sortable:!1},{text:"改善措施",align:"center",value:"improveAction",sortable:!1},{text:"执行人",align:"center",value:"executionUserName",sortable:!1},{text:"执行时间",align:"center",value:"executionTime",sortable:!1},{text:"改善效果",align:"center",value:"improveResult",sortable:!1},{text:"验收人",align:"center",value:"acceptanceUserName",sortable:!1},{text:"验收时间",align:"center",value:"acceptanceTime",sortable:!1}],preventiveStep:{reasonAnalysis:"",raiseUser:"",raiseUserName:"",raiseTime:"",preventiveAction:"",executionUser:"",executionUserName:"",executionTime:"",preventiveResult:"",acceptanceUser:"",acceptanceUserName:"",acceptanceTime:"",id:""},preventiveStepHeader:[{text:"原因分析",align:"center",value:"reasonAnalysis",sortable:!1},{text:"提出人",align:"center",value:"raiseUserName",sortable:!1},{text:"提出时间",align:"center",value:"raiseTime",sortable:!1},{text:"预防措施",align:"center",value:"preventiveAction",sortable:!1},{text:"执行人",align:"center",value:"executionUserName",sortable:!1},{text:"执行时间",align:"center",value:"executionTime",sortable:!1},{text:"预防效果",align:"center",value:"preventiveResult",sortable:!1},{text:"验收人",align:"center",value:"acceptanceUserName",sortable:!1},{text:"验收时间",align:"center",value:"acceptanceTime",sortable:!1}],source:"ImproveApply",documentViewModelList:[],fileNames:""}},components:{simpleDataTable:l["a"],datePicker:s["a"],uploadFile2:r["a"],improveApplySee:o["a"]},watch:{"improveTeam.jobNumber":{handler:function(e,t){var a=this.userList.filter((function(t){return t.jobNumber==e}));a.length>0&&(this.improveTeam.userID=a[0].id,this.improveTeam.userName=a[0].uname,this.improveTeam.jobNumber=a[0].jobNumber,this.improveTeam.phone=a[0].phone,this.improveTeam.organizations=a[0].organizationNameList)}},"improveStep.raiseUser":{handler:function(e,t){var a=this.userList.filter((function(t){return t.id==e}));a.length>0&&(this.improveStep.raiseUserName=a[0].uname)}},"improveStep.executionUser":{handler:function(e,t){var a=this.userList.filter((function(t){return t.id==e}));a.length>0&&(this.improveStep.executionUserName=a[0].uname)}},"improveStep.acceptanceUser":{handler:function(e,t){var a=this.userList.filter((function(t){return t.id==e}));a.length>0&&(this.improveStep.acceptanceUserName=a[0].uname)}},"preventiveStep.raiseUser":{handler:function(e,t){var a=this.userList.filter((function(t){return t.id==e}));a.length>0&&(this.preventiveStep.raiseUserName=a[0].uname)}},"preventiveStep.executionUser":{handler:function(e,t){var a=this.userList.filter((function(t){return t.id==e}));a.length>0&&(this.preventiveStep.executionUserName=a[0].uname)}},"preventiveStep.acceptanceUser":{handler:function(e,t){var a=this.userList.filter((function(t){return t.id==e}));a.length>0&&(this.preventiveStep.acceptanceUserName=a[0].uname)}},improveTeamViewModelList:{handler:function(e,t){var a=[];this.improveTeamViewModelList.forEach((function(e){a.push({uname:e.userName,id:e.userID})})),this.userList2=a}}},created:function(){var e=this;e.$Server.queryAll("User",null,{deleted:!1}).then((function(t){e.userList=t.datas}),(function(e){}))},methods:{getFormData2:function(){},rowImproveStepDbClick:function(e){var t=this,a=JSON.parse(JSON.stringify(e));t.improveStepViewModelList.forEach((function(e,i){a.id==e.id&&t.improveStepViewModelList.splice(i,1)})),t.improveStep={reasonAnalysis:a.reasonAnalysis,raiseUser:a.raiseUser,raiseUserName:a.raiseUserName,raiseTime:a.raiseTime,improveAction:a.improveAction,executionUser:a.executionUser,executionUserName:a.executionUserName,executionTime:a.executionTime,improveResult:a.improveResult,acceptanceUser:a.acceptanceUser,acceptanceUserName:a.acceptanceUserName,acceptanceTime:a.acceptanceTime,id:a.id}},rowImproveTeamDbClick:function(e){var t=this,a=JSON.parse(JSON.stringify(e));t.improveTeamViewModelList.forEach((function(e,i){a.id==e.id&&t.improveTeamViewModelList.splice(i,1)})),t.improveTeam={userID:a.userID,userName:a.userName,jobNumber:a.jobNumber,phone:a.phone,organizations:a.organizations,teamRole:a.teamRole,mail:a.mail,id:a.id}},rowPreventiveStepDbClick:function(e){var t=this,a=JSON.parse(JSON.stringify(e));t.preventiveStepViewModelList.forEach((function(e,i){a.id==e.id&&t.preventiveStepViewModelList.splice(i,1)})),t.preventiveStep={reasonAnalysis:a.reasonAnalysis,raiseUser:a.raiseUser,raiseUserName:a.raiseUserName,raiseTime:a.raiseTime,preventiveAction:a.preventiveAction,executionUser:a.executionUser,executionUserName:a.executionUserName,executionTime:a.executionTime,preventiveResult:a.preventiveResult,acceptanceUser:a.acceptanceUser,acceptanceUserName:a.acceptanceUserName,acceptanceTime:a.acceptanceTime,id:a.id}},addImproveTeam:function(){var e=this;if(""!=e.improveTeam.userID){var t=e.improveTeamViewModelList.filter((function(t){return t.userID==e.improveTeam.userID}));t.length>0?c["a"].alert("不能选择重复的用户"):(e.improveTeam.id=e.improveTeamId,e.improveTeamId++,e.improveTeamViewModelList.push(e.improveTeam),e.improveTeam={userID:"",userName:"",jobNumber:"",phone:"",organizations:"",teamRole:"",mail:"",id:""})}else c["a"].alert("请填写后再增加")},deleteImproveTeam:function(){var e=this;if(e.$refs.improveTeamRef.getCheckItems().length<=0)c["a"].alert("请选中需要删除的项");else for(var t=e.$refs.improveTeamRef.getCheckItems(),a=0;a<t.length;a++)this.improveTeamViewModelList.splice(this.improveTeamViewModelList.indexOf(t[a]),1)},addImproveStep:function(){var e=this;if(""!=e.improveStep.raiseUser){if(e.improveStep.id=e.improveStepId,e.improveStepId++,null!=e.improveStep.raiseTime&&e.$Utils.compareDate(e.improveStep.raiseTime,new Date))return void c["a"].alert("提出时间不能大于当前时间");if(null!=e.improveStep.executionTime&&e.$Utils.compareDate(e.improveStep.executionTime,new Date))return void c["a"].alert("执行时间不能大于当前时间");if(null!=e.improveStep.acceptanceTime&&e.$Utils.compareDate(e.improveStep.acceptanceTime,new Date))return void c["a"].alert("验收时间不能大于当前时间");if(!(e.improveStep.raiseTime&&e.improveStep.executionTime&&e.improveStep.acceptanceTime))return void c["a"].alert("时间不能为空");if(!(new Date(e.improveStep.raiseTime)<=new Date(e.improveStep.executionTime)&&new Date(e.improveStep.executionTime)<=new Date(e.improveStep.acceptanceTime)))return void c["a"].alert("验收时间>执行时间>提出时间");e.improveStepViewModelList.push(e.improveStep),e.improveStep={reasonAnalysis:"",raiseUser:"",raiseUserName:"",raiseTime:"",improveAction:"",executionUser:"",executionUserName:"",executionTime:"",improveResult:"",acceptanceUser:"",acceptanceUserName:"",acceptanceTime:"",id:""}}else c["a"].alert("请填写后再增加")},deleteImproveStep:function(){var e=this;if(e.$refs.improveStepRef.getCheckItems().length<=0)c["a"].alert("请选中需要删除的项");else for(var t=e.$refs.improveStepRef.getCheckItems(),a=0;a<t.length;a++)this.improveStepViewModelList.splice(this.improveStepViewModelList.indexOf(t[a]),1)},addPreventiveStep:function(){var e=this;if(""!=e.preventiveStep.raiseUser){if(e.preventiveStep.id=e.preventiveStepId,e.preventiveStepId++,null!=e.preventiveStep.raiseTime&&e.$Utils.compareDate(e.preventiveStep.raiseTime,new Date))return void c["a"].alert("提出时间不能大于当前时间");if(null!=e.preventiveStep.executionTime&&e.$Utils.compareDate(e.preventiveStep.executionTime,new Date))return void c["a"].alert("执行时间不能大于当前时间");if(null!=e.preventiveStep.acceptanceTime&&e.$Utils.compareDate(e.preventiveStep.acceptanceTime,new Date))return void c["a"].alert("验收时间不能大于当前时间");if(!(e.preventiveStep.raiseTime&&e.preventiveStep.executionTime&&e.preventiveStep.acceptanceTime))return void c["a"].alert("时间不能为空");if(!(new Date(e.preventiveStep.raiseTime)<=new Date(e.preventiveStep.executionTime)&&new Date(e.preventiveStep.executionTime)<=new Date(e.preventiveStep.acceptanceTime)))return void c["a"].alert("验收时间>执行时间>提出时间");e.preventiveStepViewModelList.push(e.preventiveStep),e.preventiveStep={reasonAnalysis:"",raiseUser:"",raiseUserName:"",raiseTime:"",preventiveAction:"",executionUser:"",executionUserName:"",executionTime:"",preventiveResult:"",acceptanceUser:"",acceptanceUserName:"",acceptanceTime:"",id:""}}else c["a"].alert("请填写后再增加")},deletePreventiveStep:function(){var e=this;if(e.$refs.preventiveStepRef.getCheckItems().length<=0)c["a"].alert("请选中需要删除的项");else for(var t=e.$refs.preventiveStepRef.getCheckItems(),a=0;a<t.length;a++)this.preventiveStepViewModelList.splice(this.preventiveStepViewModelList.indexOf(t[a]),1)},initForm:function(e,t){var a=this;a.params=t,e&&(a.$Server.queryObjectById("ImproveApply",e).then((function(e){a.improveApply=e.data.data,a.improveApply.startTime=a.improveApply.startTime.substring(0,10),a.improveApply.endTime=a.improveApply.endTime.substring(0,10),a.improveApply.createdTime=a.improveApply.createdTime.substring(0,10),a.source="ImproveReport"})),a.$Server.queryAll("ImproveReport",null,{improveApplyID:e}).then((function(e){e.datas.length>0&&(a.improveReport=e.datas[0],a.improveReport.preventiveStepViewModelList.forEach((function(e){e.raiseTime=e.raiseTime.substring(0,10),e.executionTime=e.executionTime.substring(0,10),e.acceptanceTime=e.acceptanceTime.substring(0,10)})),a.improveReport.improveStepViewModelList.forEach((function(e){e.raiseTime=e.raiseTime.substring(0,10),e.executionTime=e.executionTime.substring(0,10),e.acceptanceTime=e.acceptanceTime.substring(0,10)})),a.improveTeamViewModelList=a.improveReport.improveTeamViewModelList,a.improveStepViewModelList=a.improveReport.improveStepViewModelList,a.preventiveStepViewModelList=a.improveReport.preventiveStepViewModelList,a.improveReport.documentViewModelList[0]?a.improveReport.documentViewModelList[0].document&&a.improveReport.documentViewModelList[0].document.dname&&(a.fileNames=a.improveReport.documentViewModelList[0].document.dname+a.improveReport.documentViewModelList[0].document.newestFilePath.substring(a.improveReport.documentViewModelList[0].document.newestFilePath.lastIndexOf("."))):a.fileNames="")}),(function(e){})))},getTitle:function(){return"编辑改善报告"},add:function(){var e=this;e.improveTeamViewModelList.forEach((function(e){e.id=""})),e.improveStepViewModelList.forEach((function(e){e.id=""})),e.preventiveStepViewModelList.forEach((function(e){e.id=""})),e.improveReport.improveTeamViewModelList=e.improveTeamViewModelList,e.improveReport.improveStepViewModelList=e.improveStepViewModelList,e.improveReport.preventiveStepViewModelList=e.preventiveStepViewModelList;var t={document:e.documentViewModelList};e.improveReport.documentViewModelList.push(t)},getFormData:function(){var e=this;if(e.improveTeamViewModelList.length>0&&e.improveStepViewModelList.length>0&&e.preventiveStepViewModelList.length>0){e.improveTeamViewModelList.forEach((function(e){e.id=""})),e.improveStepViewModelList.forEach((function(e){e.id=""})),e.preventiveStepViewModelList.forEach((function(e){e.id=""})),e.improveReport.improveTeamViewModelList=e.improveTeamViewModelList,e.improveReport.improveStepViewModelList=e.improveStepViewModelList,e.improveReport.preventiveStepViewModelList=e.preventiveStepViewModelList;var t=[{document:e.documentViewModelList}];return e.improveReport.documentViewModelList=t,e.improveReport}throw"请填写报告"},getSourceKey:function(){return this.source}}},d=u,p=a("6691"),m=Object(p["a"])(d,i,n,!1,null,null,null);t["a"]=m.exports},"8b35":function(e,t,a){"use strict";var i,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("DetailBlock",{attrs:{item:e.item}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.item.recordList,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",e._l(e.headers,(function(i,n){return a("td",{key:n,staticClass:"text-xs-center"},["index"===i.fildType?[e._v(e._s(t.index+1))]:"inventoryResult"===i.fildType?[a("v-radio-group",{attrs:{column:""},on:{change:function(a){return e.handleResultChange(a,t.item)}},model:{value:t.item[i.value].dvalue,callback:function(a){e.$set(t.item[i.value],"dvalue",a)},expression:"props.item[h.value].dvalue"}},[a("v-radio",{attrs:{label:"存在",value:0}}),a("v-radio",{attrs:{label:"不存在",value:1}}),a("v-radio",{attrs:{label:"不一致",value:2}})],1)]:"description"===i.fildType?[a("v-textarea",{attrs:{label:"备注"},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}})]:"file"===i.fildType?[a("v-layout",[a("strong",[e._v("上传附件:")]),a("v-icon",{on:{click:function(e){t.item[i.value].push({})}}},[e._v("add")])],1),e._l(t.item[i.value],(function(n,r){return a("v-layout",{key:r,attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs10:""}},[a("uploadFile2",{ref:"uploadFile",refInFor:!0,attrs:{label:"附件",multiple:!1,fileNames:n.documentViewModel&&n.documentViewModel.dname,uploadBase64:!1},on:{formData:e.getFormData},model:{value:n.documentViewModel,callback:function(t){e.$set(n,"documentViewModel",t)},expression:"doc.documentViewModel"}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-icon",{on:{click:function(e){t.item[i.value].splice(r,1)}}},[e._v("delete")])],1)],1)}))]:"eqpStatus"===i.fildType?[e._v(e._s(t.item[i.value]&&t.item[i.value].dname))]:[e._v(e._s(t.item[i.value]))]],2)})),0)]}}])}),a("contentModal",{attrs:{title:"设备详情",IsShow:e.IsShowDetails},on:{modalClosed:function(t){return e.modalClosed()},modalComfirmed:e.modalComfirmed}},[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"headline",attrs:{xs12:""}},[e._v("基本信息:")]),a("v-flex",{attrs:{xs4:""}},[a("upload-input",{staticStyle:{"margin-left":"50px"},attrs:{btnName:"上传设备图片"},model:{value:e.equipment.eqpimage,callback:function(t){e.$set(e.equipment,"eqpimage",t)},expression:"equipment.eqpimage"}})],1),a("v-flex",{attrs:{xs8:""}},[a("v-layout",[a("v-flex",[a("v-text-field",{attrs:{label:"设备编号"},model:{value:e.equipment.code,callback:function(t){e.$set(e.equipment,"code",t)},expression:"equipment.code"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:"条码编号"},model:{value:e.equipment.barCode,callback:function(t){e.$set(e.equipment,"barCode",t)},expression:"equipment.barCode"}})],1)],1),a("v-layout",[a("v-flex",[a("v-text-field",{attrs:{label:"设备名称"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                         设备名称 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.equipment.name,callback:function(t){e.$set(e.equipment,"name",t)},expression:"equipment.name"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:"规格型号"},model:{value:e.equipment.model,callback:function(t){e.$set(e.equipment,"model",t)},expression:"equipment.model"}})],1)],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-layout",[a("v-flex",[a("v-select",{attrs:{label:"设备类型","return-object":"",items:e.equipType,"item-text":"dname"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                         设备类型 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.equipment.type,callback:function(t){e.$set(e.equipment,"type",t)},expression:"equipment.type"}})],1),a("v-flex",[a("treeComboForLastNode",{attrs:{itemName:"oname",label:"设备位置",Source:e.forgList,independentCheck:!1,require:!0},model:{value:e.equipment.position,callback:function(t){e.$set(e.equipment,"position",t)},expression:"equipment.position"}})],1),a("v-flex",[a("v-select",{attrs:{label:"来源",items:e.equipSourse,"item-text":"dname","return-object":""},model:{value:e.equipment.source,callback:function(t){e.$set(e.equipment,"source",t)},expression:"equipment.source"}})],1)],1),a("v-layout",[a("v-flex",[a("treeCombo",{ref:"treeCombo2",attrs:{require:!1,Source:e.organizSelect,MultipleSelect:!1,label:"所属部门",independentCheck:!1,independentSingleCheck:!0,"return-object":""},model:{value:e.equipment.departmentID,callback:function(t){e.$set(e.equipment,"departmentID",t)},expression:"equipment.departmentID"}})],1),a("v-flex",[a("treeCombo",{ref:"treeCombo3",attrs:{require:!1,Source:e.organizSelect,MultipleSelect:!1,label:"使用部门",independentCheck:!1,independentSingleCheck:!0,"return-object":""},model:{value:e.equipment.usedDepartmentID,callback:function(t){e.$set(e.equipment,"usedDepartmentID",t)},expression:"equipment.usedDepartmentID"}})],1),a("v-flex",[a("v-select",{attrs:{label:"状态",items:e.equipStatus,"item-text":"dname","return-object":""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                         状态 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.equipment.status,callback:function(t){e.$set(e.equipment,"status",t)},expression:"equipment.status"}})],1)],1),a("v-layout",[a("v-flex",[a("v-select",{attrs:{label:"供应商",items:e.supplierList,"item-text":"cname"},model:{value:e.equipment.supplier,callback:function(t){e.$set(e.equipment,"supplier",t)},expression:"equipment.supplier"}})],1),a("v-flex",[a("v-select",{attrs:{label:"租赁厂商",items:e.leaseholderList,"item-text":"cname"},model:{value:e.equipment.leaseholder,callback:function(t){e.$set(e.equipment,"leaseholder",t)},expression:"equipment.leaseholder"}})],1),a("v-flex",[a("v-select",{attrs:{label:"生产厂商",items:e.manufacturerList,"item-text":"cname"},model:{value:e.equipment.manufacturer,callback:function(t){e.$set(e.equipment,"manufacturer",t)},expression:"equipment.manufacturer"}})],1)],1),a("v-layout",[a("v-flex",[a("v-text-field",{attrs:{label:"产地"},model:{value:e.equipment.productionPlace,callback:function(t){e.$set(e.equipment,"productionPlace",t)},expression:"equipment.productionPlace"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:"出厂编号"},model:{value:e.equipment.productionNo,callback:function(t){e.$set(e.equipment,"productionNo",t)},expression:"equipment.productionNo"}})],1),a("v-flex",[a("datePicker",{attrs:{label:"出厂日期",required:!1},model:{value:e.equipment.productionDate,callback:function(t){e.$set(e.equipment,"productionDate",t)},expression:"equipment.productionDate"}})],1)],1),a("v-layout",[a("v-flex",[a("v-textarea",{attrs:{label:"备注"},model:{value:e.equipment.description,callback:function(t){e.$set(e.equipment,"description",t)},expression:"equipment.description"}})],1)],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"headline",attrs:{xs12:""}},[e._v("资产信息:")]),a("v-flex",{attrs:{xs4:""}},[a("datePicker",{attrs:{label:"购入日期",required:!1},model:{value:e.equipment.purchaseDate,callback:function(t){e.$set(e.equipment,"purchaseDate",t)},expression:"equipment.purchaseDate"}})],1),a("v-flex",{attrs:{xs4:""}},[a("datePicker",{attrs:{label:"验收日期",required:!1},model:{value:e.equipment.acceptDate,callback:function(t){e.$set(e.equipment,"acceptDate",t)},expression:"equipment.acceptDate"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:"保修期限(月)",type:"number"},model:{value:e.equipment.warrantyPeriod,callback:function(t){e.$set(e.equipment,"warrantyPeriod",t)},expression:"equipment.warrantyPeriod"}})],1),a("v-flex",{attrs:{xs4:""}},[a("datePicker",{attrs:{label:"投产日期",required:!1},model:{value:e.equipment.startProduceDate,callback:function(t){e.$set(e.equipment,"startProduceDate",t)},expression:"equipment.startProduceDate"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"设备原值(元)",rules:[function(e){return!e||/^[\+\-]?\d*?\.?\d*?$/.test(e)||"只能是数字或者小数！"}]},model:{value:e.equipment.originalValue,callback:function(t){e.$set(e.equipment,"originalValue",t)},expression:"equipment.originalValue"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"固资编号"},model:{value:e.equipment.fixedAssetNo,callback:function(t){e.$set(e.equipment,"fixedAssetNo",t)},expression:"equipment.fixedAssetNo"}})],1)],1)],1)],1)],1),a("contentModal",{attrs:{title:"设备详情",IsShow:e.IsShowDetailsCalibration},on:{modalClosed:function(t){return e.modalClosedCalibration()},modalComfirmed:e.modalComfirmedCalibration}},[a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"仪器编号"},model:{value:e.meteringEqp.code,callback:function(t){e.$set(e.meteringEqp,"code",t)},expression:"meteringEqp.code"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                             仪器名称"),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.meteringEqp.name,callback:function(t){e.$set(e.meteringEqp,"name",t)},expression:"meteringEqp.name"}})],1),a("v-flex",{attrs:{label:"规格型号"},model:{value:e.meteringEqp.model,callback:function(t){e.$set(e.meteringEqp,"model",t)},expression:"meteringEqp.model"}}),a("v-flex",{attrs:{label:"使用位置"},model:{value:e.meteringEqp.usedPart,callback:function(t){e.$set(e.meteringEqp,"usedPart",t)},expression:"meteringEqp.usedPart"}}),a("v-flex",{attrs:{xs6:""}},[a("treeCombo",{ref:"treeCombo",attrs:{require:!0,Source:e.organizSelect,MultipleSelect:!1,label:"所属部门",disabled:!1,independentCheck:!1,independentSingleCheck:!0,"return-object":""},model:{value:e.meteringEqp.departmentID,callback:function(t){e.$set(e.meteringEqp,"departmentID",t)},expression:"meteringEqp.departmentID"}})],1),a("v-flex",{attrs:{xs6:""}},[a("treeCombo",{ref:"treeCombo",attrs:{require:!1,Source:e.organizSelect,MultipleSelect:!1,label:"使用部门",disabled:!1,independentCheck:!1,independentSingleCheck:!0,"return-object":""},model:{value:e.meteringEqp.usedDepartmentID,callback:function(t){e.$set(e.meteringEqp,"usedDepartmentID",t)},expression:"meteringEqp.usedDepartmentID"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-select",{attrs:{label:"校准类型",items:e.typeData,"item-text":"dname","return-object":"",rules:[e.rules.selectRe]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                             校准类型"),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.meteringEqp.type,callback:function(t){e.$set(e.meteringEqp,"type",t)},expression:"meteringEqp.type"}})],1),a("v-flex",{attrs:{xs6:"",sm3:""}},[2!=e.meteringEqp.type.dvalue?a("v-text-field",{attrs:{label:"校准周期",type:"number",rules:[function(e){return!!e||"只能是正整数."},function(e){return!e||/^(0|[1-9][0-9]*)$/.test(e)||"只能是正整数"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                             校准周期"),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}],null,!1,3171337601),model:{value:e.meteringEqp.period,callback:function(t){e.$set(e.meteringEqp,"period",t)},expression:"meteringEqp.period"}}):e._e()],1),a("v-flex",{attrs:{xs6:"",sm3:""}},[2!=e.meteringEqp.type.dvalue?a("v-select",{attrs:{label:"周期单位",items:e.periodUnitData,"item-text":"dname","return-object":"",rules:[e.rules.selectRe]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                         周期单位"),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}],null,!1,344802654),model:{value:e.meteringEqp.periodUnit,callback:function(t){e.$set(e.meteringEqp,"periodUnit",t)},expression:"meteringEqp.periodUnit"}}):e._e()],1),2!=e.meteringEqp.type.dvalue?a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-dialog",{ref:"dialog",attrs:{"return-value":e.meteringEqp.lastCalibrationDate,"full-width":"",width:"290"},model:{value:e.lastCalibrationDateModal,callback:function(t){e.lastCalibrationDateModal=t},expression:"lastCalibrationDateModal"}},[a("v-text-field",{attrs:{slot:"activator","prepend-icon":"event",readonly:"",maxlength:"10",label:"上次校准时间"},slot:"activator",model:{value:e.meteringEqp.lastCalibrationDate,callback:function(t){e.$set(e.meteringEqp,"lastCalibrationDate",t)},expression:"meteringEqp.lastCalibrationDate"}}),a("v-date-picker",{attrs:{locale:"zh-cn",dayFormat:e.dayFormat},on:{change:function(t){e.lastCalibrationDateModal=!1}},model:{value:e.meteringEqp.lastCalibrationDate,callback:function(t){e.$set(e.meteringEqp,"lastCalibrationDate",t)},expression:"meteringEqp.lastCalibrationDate"}})],1)],1):e._e(),a("v-flex",{attrs:{xs12:"",sm6:""}}),a("v-divider",{staticStyle:{"border-style":"dashed","border-width":"thin"},attrs:{xs12:"",sm12:""}})],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:"",sm4:""}},[a("v-text-field",{staticStyle:{"margin-top":"-9px"},attrs:{label:"计量标准文件名称"},model:{value:e.meteringEqp.meteringStandardVName,callback:function(t){e.$set(e.meteringEqp,"meteringStandardVName",t)},expression:"meteringEqp.meteringStandardVName"}})],1),a("v-flex",{attrs:{xs6:"",sm2:""}},[a("v-text-field",{staticStyle:{"margin-top":"-9px"},attrs:{label:"版本",prefix:"V",rules:[function(e){return!e||/^\d+$/.test(e)||/^\d+(\.\d+)+$/.test(e)||"只能是数字或者小数点！"}]},model:{value:e.meteringEqp.meteringStandardVersion,callback:function(t){e.$set(e.meteringEqp,"meteringStandardVersion",t)},expression:"meteringEqp.meteringStandardVersion"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("uploadFile2",{ref:"uploadFile1",attrs:{label:"选择文件",fileNames:e.meteringEqp.meteringStandardName,uploadBase64:!1,hint:"支持文档格式：doc,docx,xls,xlsx,ppt,pptx,pdf"},on:{formData:e.meteringStandardUpload},model:{value:e.meteringEqp.meteringStandardVM,callback:function(t){e.$set(e.meteringEqp,"meteringStandardVM",t)},expression:"meteringEqp.meteringStandardVM"}})],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:"",sm4:""}},[a("v-text-field",{staticStyle:{"margin-top":"-9px"},attrs:{label:"校准报告文件名称"},model:{value:e.meteringEqp.calibrationReportVName,callback:function(t){e.$set(e.meteringEqp,"calibrationReportVName",t)},expression:"meteringEqp.calibrationReportVName"}})],1),a("v-flex",{attrs:{xs6:"",sm2:""}},[a("v-text-field",{staticStyle:{"margin-top":"-9px"},attrs:{label:"版本",prefix:"V",rules:[function(e){return!e||/^\d+$/.test(e)||/^\d+(\.\d+)+$/.test(e)||"只能是数字或者小数点！"}]},model:{value:e.meteringEqp.calibrationReportVersion,callback:function(t){e.$set(e.meteringEqp,"calibrationReportVersion",t)},expression:"meteringEqp.calibrationReportVersion"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("uploadFile2",{ref:"uploadFile2",attrs:{label:"选择文件",uploadBase64:!1,fileNames:e.meteringEqp.calibrationReportName,hint:"支持文档格式：doc,docx,xls,xlsx,ppt,pptx,pdf"},on:{formData:e.calibrationReportUpload},model:{value:e.meteringEqp.calibrationReportVM,callback:function(t){e.$set(e.meteringEqp,"calibrationReportVM",t)},expression:"meteringEqp.calibrationReportVM"}})],1)],1)],1)],1)],1)},r=[],s=(a("7cfd"),a("c041"),a("97a3")),l=a("0b43"),o=a("64cf"),c=a("52d6"),u=a("3876"),d=a("a2a7"),p=a("b27e"),m=a("f19a"),f=a("1d53"),v=a("815a"),h=a("20d3"),b=a("4027"),g=a("a7fe"),x=a("681f"),y=a("d5b3"),k=a("a1de"),S={name:"EqpInventoryProductForm",data:function(){return Object(s["a"])({EqpInventoryTask:{},headers:[],headers1:[{text:"序号",value:"index",align:"center",sortable:!1,fildType:"index"},{text:"设备编号",value:"eqpCode",align:"center",sortable:!1},{text:"设备名称",value:"eqpName",align:"center",sortable:!1},{text:"状态",value:"eqpStatus",align:"center",sortable:!1,fildType:"eqpStatus"},{text:"盘点结果",value:"result",align:"center",sortable:!1,fildType:"inventoryResult"},{text:"备注",value:"description",align:"center",sortable:!1,fildType:"description"},{text:"附件",value:"documentList",align:"center",sortable:!1,fildType:"file"}],headers2:[{text:"序号",value:"index",align:"center",sortable:!1,fildType:"index"},{text:"设备编号",value:"eqpCode",align:"center",sortable:!1},{text:"设备名称",value:"eqpName",align:"center",sortable:!1},{text:"盘点结果",value:"result",align:"center",sortable:!1,fildType:"inventoryResult"},{text:"备注",value:"description",align:"center",sortable:!1,fildType:"description"},{text:"附件",value:"documentList",align:"center",sortable:!1,fildType:"file"}],IsShowDetails:!1,equipment:{},forgList:[],equipType:[],equipSourse:[],equipStatus:[],supplierList:[],manufacturerList:[],leaseholderList:[],companyList:[],organizSelect:[],object:{},valid:!0,rules:{required:function(e){return!!e||"必填项."},min:function(e){return e.length>=8||"Min 8 characters"},selectRe:function(e){return!!/^(0)$/.test(e)||!!e||"必填项"}},lastCalibrationDateModal:!1,periodUnitData:[],typeData:[],IsShowDetailsCalibration:!1,meteringEqp:{type:{}}},"organizSelect",[])},beforeUpdate:function(){this.item.recordList||(this.item.recordList=[])},props:{item:Object},components:{DetailBlock:o["a"],mergeTable:c["a"],uploadFile2:u["a"],contentModal:d["a"],UploadInput:p["a"],treeCombo:m["a"],datePicker:f["a"],fileUploader:k["a"],treeComboForLastNode:l["a"]},methods:(i={initForm:function(e,t){var a=this;a.params=t},getTitle:function(){return"盘点任务审批单"},getFormData:function(){return this.SpReceiveTask},getSourceKey:function(){return"EqpInventoryTask"},dayFormat:function(e){return e?new Date(e.replace(/-/g,"/")).getDate():""}},Object(s["a"])(i,"getFormData",(function(e){})),Object(s["a"])(i,"modalClosed",(function(){this.IsShowDetails=!1})),Object(s["a"])(i,"modalComfirmed",(function(){var e="";this.$refs.form.validate()?(e=JSON.parse(JSON.stringify(this.equipment)),e.departmentID&&Array.isArray(e.departmentID)&&e.departmentID.length>0&&(e.departmentID=e.departmentID[0]),e.position&&Array.isArray(e.position)&&e.position.length>0&&(e.position=e.position[0]),e.usedDepartmentID&&Array.isArray(e.usedDepartmentID)&&e.usedDepartmentID.length>0&&(e.usedDepartmentID=e.usedDepartmentID[0]),this.$Server.addOrUpdate("Equipment",e,!0).then((function(e){e.success&&y["a"].alert("修改成功","success")})).catch((function(e){return y["a"].alert(e)}))):y["a"].alert("验证不通过")})),Object(s["a"])(i,"handleResultChange",(function(e,t){var a=this;if(2===e){var i=a.item.inventoryType.dname;x["a"].confirm("该".concat(i,"与台账信息不一致，是否立即修改？"),"提示",500,(function(){"设备"===i?a.$Server.queryObjectById("Equipment",t.equipmentID).then((function(e){var t=e.data.data;a.equipment=t,a.IsShowDetails=!0})):"计量仪器"===i&&a.$Server.queryObjectById("MeteringEquipment",t.equipmentID).then((function(e){var t=e.data.data;t.lastCalibrationDate&&(t.lastCalibrationDate=t.lastCalibrationDate.substring(0,10)),a.meteringEqp=t,a.IsShowDetailsCalibration=!0}))}),(function(){}))}})),Object(s["a"])(i,"modalClosedCalibration",(function(){this.IsShowDetailsCalibration=!1})),Object(s["a"])(i,"modalComfirmedCalibration",(function(){var e=this,t="";if(this.meteringEqp.name)if(null!=this.meteringEqp.departmentID&&void 0!=this.meteringEqp.departmentID&&""!=this.meteringEqp.departmentID)if(this.meteringEqp.type)if("免校"!=this.meteringEqp.type.dname){if(null==this.meteringEqp.period||void 0==this.meteringEqp.period||""==this.meteringEqp.period)return void y["a"].alert("校验周期不能为空");if(null==this.meteringEqp.periodUnit.dname||void 0==this.meteringEqp.periodUnit.dname||""==this.meteringEqp.periodUnit.dname)return void y["a"].alert("校验单位不能为空");t=JSON.parse(JSON.stringify(e.meteringEqp)),t.departmentID&&Array.isArray(t.departmentID)&&t.departmentID.length>0&&(t.departmentID=t.departmentID[0]),t.usedDepartmentID&&Array.isArray(t.usedDepartmentID)&&t.usedDepartmentID.length>0&&(t.usedDepartmentID=t.usedDepartmentID[0]),this.$Server.addOrUpdate("MeteringEquipment",t,!0).then((function(e){e.success&&y["a"].alert("修改成功","success")})).catch((function(e){return y["a"].alert(e)}))}else this.$Server.addOrUpdate("MeteringEquipment",this.meteringEqp,!0).then((function(t){t.success?y["a"].alert("修改成功","success"):e.IsShowDetailsCalibration=!1})).catch((function(e){return y["a"].alert(e)}));else y["a"].alert("校验类型不能为空");else y["a"].alert("所属部门不能为空");else y["a"].alert("设备名称不能为空")})),Object(s["a"])(i,"getDataForEquipment",(function(){var e=this;this.$Server.queryAll((new b["a"]).__name,{},{searchEqpStation:!0}).then((function(t){e.forgList=t.datas})),this.$Server.queryAll((new g["a"]).__name,{},{type:"4"}).then((function(t){e.equipType=t.datas})),this.$Server.queryAll((new g["a"]).__name,{},{type:"7"}).then((function(t){e.equipSourse=t.datas})),this.$Server.queryAll((new g["a"]).__name,{},{type:"5"}).then((function(t){e.equipStatus=t.datas})),this.$Server.queryAll((new v["a"]).__name,{},{deleted:"false"}).then((function(t){e.supplierList=t.datas.filter((function(e){return e.ctypeName&&e.ctypeName.indexOf("供应商")>-1})),e.manufacturerList=t.datas.filter((function(e){return void 0==e.ctypeName||null==e.ctypeName||e.ctypeName.indexOf("生产厂商")>-1})),e.leaseholderList=t.datas.filter((function(e){return void 0==e.ctypeName||null==e.ctypeName||e.ctypeName.indexOf("租赁厂商")>-1}))}))})),Object(s["a"])(i,"getDataForMeteringEqp",(function(){var e=this;e.$Server.queryAll((new g["a"]).__name,null,{dname:"保养周期单位"}).then((function(t){e.periodUnitData=t.datas})),e.$Server.queryAll((new g["a"]).__name,null,{dname:"校准标准"}).then((function(t){e.typeData=t.datas})),this.$Server.queryAll((new h["a"]).__name).then((function(t){e.organizSelect=t.datas}))})),Object(s["a"])(i,"meteringStandardUpload",(function(e){var t=this,a=e.get("data");if(a){var i=a.name.substring(a.name.lastIndexOf(".")+1,a.name.length),n=["doc","docx","xls","xlsx","ppt","pptx","pdf"];console.log(0==n.filter((function(e){return e===i})).length),console.log(n.filter((function(e){return e===i}))),0==n.filter((function(e){return e===i})).length&&(y["a"].alert("请检查文件是否为符合条件的文件！"),t.$refs.uploadFile1.clearFile())}})),Object(s["a"])(i,"calibrationReportUpload",(function(e){var t=this,a=e.get("data");if(a){var i=a.name.substring(a.name.lastIndexOf(".")+1,a.name.length),n=["doc","docx","xls","xlsx","ppt","pptx","pdf"];0==n.filter((function(e){return e===i})).length&&(y["a"].alert("请检查文件是否为符合条件的文件！"),t.$refs.uploadFile2.clearFile())}})),i),mounted:function(){var e=this;e.getDataForEquipment(),e.getDataForMeteringEqp()}},_=S,w=a("6691"),D=Object(w["a"])(_,n,r,!1,null,null,null);t["a"]=D.exports},"8b72":function(e,t,a){},"905a":function(e,t,a){"use strict";var i=a("4b30"),n=a.n(i);n.a},"951a":function(e,t,a){},"95d5":function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=(a("20d3"),a("d685")),p=new c["a"],m=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","EqpAllocateTask"),Object(o["a"])(Object(s["a"])(a),"allocateCode",p.charField({require:!0,fieldName:"调拨单编号",rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"eqpCode",p.charField({require:!0,fieldName:"设备编号",rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"eqpName",p.charField({require:!0,fieldName:"设备名称",rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"usedDepartName",p.charField({require:!0,fieldName:"使用部门",rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"demandDepartName",p.charField({require:!0,fieldName:"需求部门",rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"reason",p.charField({require:!0,fieldName:"调拨原因",rules:[function(e){return!!e||"必填项"}],visible:!0})),Object(o["a"])(Object(s["a"])(a),"deadline",p.charField({require:!0,fieldName:"最迟调拨日期",rules:[function(e){return!!e||"必填项"}],format:function(e){if(e)return e.substring(0,10)}})),Object(o["a"])(Object(s["a"])(a),"applicantName",p.charField({require:!0,fieldName:"申请人",rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"equipmentDirectory",p.comboBoxField(d["a"],{require:!0,fieldName:"设备名称",bindSource:{value:"id",text:"name"},visible:!1,editable:!1})),Object(o["a"])(Object(s["a"])(a),"allocateTCount",p.charField({require:!0,fieldName:"调拨数量",rules:[function(e){return!!e||"必填项"}],visible:!1})),Object(o["a"])(Object(s["a"])(a),"status",p.charField({require:!0,visible:!1,fieldName:"状态",rules:[function(e){return!!e||"必填项"}],format:function(e){if(e)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"statusName",p.charField({require:!1,editable:!1,fieldName:"任务状态"})),a}return Object(l["a"])(t,e),t}(u["a"])},"96d6":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkRCQTYzNTE0QjFBQzExRTlBRDE1REZGNkJGQTZCRjMwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkRCQTYzNTE1QjFBQzExRTlBRDE1REZGNkJGQTZCRjMwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6REJBNjM1MTJCMUFDMTFFOUFEMTVERkY2QkZBNkJGMzAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6REJBNjM1MTNCMUFDMTFFOUFEMTVERkY2QkZBNkJGMzAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4WAsMKAAABO0lEQVR42mL8//8/Az0BC4jo6J9Bc4sqCjPANBMDnQGxFsoB8X8isTcQnwZiYUosJBWYAPFBIJakl4UgoA3Eh4FYASPRIIEOHJrXkWmpMtRSWVwWluPQeJgESwSAOAxvtqAyWIJFjJFcC78AsQORanmA+AClPgSpdyFSLQc1gpQdTzzjDEZiLFwAxL+Q+O+g9CcgFiLSQn4g/kCshQVA/BGtpAEBLiBeRaSFrKSUNB/QiitdqtYWOHz4HYn/FEp/w5fHKAnSB0D8FYkPi08+pPikaqLZgMb3gdI/gbiThGzRQKyFBkD8GUtc/wHiPSRkfKJ9GADEP5D4e5AMOUOLRJMAxP+Q+KeA+B4tU6kBWj6EVTU0s3ADNL5IAdFA/IpcCx3IcDwHNRtRDLQqaRhpbSEjvVvedA9SgAADAKmRQYyLNL6LAAAAAElFTkSuQmCC"},"9ee5":function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=a("815a"),p=a("20d3"),m=a("a7fe"),f=new c["a"],v=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","Equipment"),Object(o["a"])(Object(s["a"])(a),"eqpimage",f.imageField({require:!1,fieldName:"上传设备图片",visible:!1})),Object(o["a"])(Object(s["a"])(a),"code",f.charField({require:!0,fieldName:"设备编号",rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"barCode",f.charField({require:!0,fieldName:"条码编号",rules:[function(e){return!!e||"必填项"}],visible:!1})),Object(o["a"])(Object(s["a"])(a),"name",f.charField({require:!0,fieldName:"设备名称",rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"model",f.charField({require:!1,fieldName:"规格型号"})),Object(o["a"])(Object(s["a"])(a),"type",f.comboBoxField(m["a"],{require:!0,fieldName:"设备类型",bindSource:{parms:{type:"4"}},format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"factoryName",f.charField({editable:!1,fieldName:"设备位置"})),Object(o["a"])(Object(s["a"])(a),"position",f.charField({require:!0,fieldName:"设备位置",visible:!1})),Object(o["a"])(Object(s["a"])(a),"source",f.comboBoxField(m["a"],{require:!0,fieldName:"来源",bindSource:{parms:{type:"7"}},format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"departmentID",f.comboTree(p["a"],{require:!0,fieldName:"所属部门",related:"oneToOne",editable:!1})),Object(o["a"])(Object(s["a"])(a),"departmentName",f.charField({require:!1,fieldName:"所属部门",editable:!1})),Object(o["a"])(Object(s["a"])(a),"usedDepartmentID",f.comboTree(p["a"],{require:!1,fieldName:"使用部门",related:"oneToOne",editable:!1})),Object(o["a"])(Object(s["a"])(a),"usedDepartName",f.charField({visible:!1,editable:!1})),Object(o["a"])(Object(s["a"])(a),"status",f.comboBoxField(m["a"],{require:!0,fieldName:"状态",bindSource:{parms:{type:"5"}},format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"supplier",f.comboBoxField(d["a"],{require:!1,fieldName:"供应商",visible:!1,bindSource:{text:"cname",value:"id",parms:{company:"company"}}})),Object(o["a"])(Object(s["a"])(a),"leaseholder",f.comboBoxField(d["a"],{require:!1,fieldName:"租赁厂商",visible:!1,bindSource:{text:"cname",value:"id",parms:{company:"company"}}})),Object(o["a"])(Object(s["a"])(a),"manufacturer",f.comboBoxField(d["a"],{require:!1,fieldName:"生产厂商",visible:!1,bindSource:{text:"cname",value:"id",parms:{company:"company"}}})),Object(o["a"])(Object(s["a"])(a),"productionPlace",f.charField({require:!1,fieldName:"产地",visible:!1})),Object(o["a"])(Object(s["a"])(a),"productionNo",f.charField({require:!1,fieldName:"产品编号",visible:!1})),Object(o["a"])(Object(s["a"])(a),"productionDate",f.dateField({require:!1,fieldName:"出厂日期",visible:!1})),Object(o["a"])(Object(s["a"])(a),"abcType",f.comboBoxField(m["a"],{require:!1,fieldName:"ABC类",visible:!1,bindSource:{parms:{type:"6"}},format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"purchaseDate",f.dateField({require:!1,fieldName:"购入日期",visible:!1,menu:"purchase",modal:!1})),Object(o["a"])(Object(s["a"])(a),"acceptDate",f.dateField({require:!1,fieldName:"验收日期",visible:!1,menu:"accept",modal:!1})),Object(o["a"])(Object(s["a"])(a),"warrantyPeriod",f.numberField("int",{require:!1,fieldName:"保修期限（月）",visible:!1})),Object(o["a"])(Object(s["a"])(a),"startProduceDate",f.dateField({require:!1,fieldName:"投产日期",visible:!1,modal:!1})),Object(o["a"])(Object(s["a"])(a),"originalValue",f.numberField("float",{require:!1,fieldName:"设备原值（元）",visible:!1})),Object(o["a"])(Object(s["a"])(a),"codeName",f.charField({require:!1,editable:!1,visible:!1})),Object(o["a"])(Object(s["a"])(a),"typeValue",f.charField({require:!1,visible:!1,editable:!1})),Object(o["a"])(Object(s["a"])(a),"fixedAssetNo",f.charField({require:!1,fieldName:"固资编号",visible:!1})),Object(o["a"])(Object(s["a"])(a),"description",f.charField({require:!1,fieldName:"备注",visible:!1})),Object(o["a"])(Object(s["a"])(a),"deleted",f.charField({require:!1,visible:!1})),Object(o["a"])(Object(s["a"])(a),"existPointStand",f.boolField({require:!1,editable:!1,fieldName:"有无点巡检标准",format:function(e){return 1==e?"有":"无"}})),Object(o["a"])(Object(s["a"])(a),"existMainStand",f.boolField({require:!1,editable:!1,fieldName:"有无保养标准",format:function(e){return 1==e?"有":"无"}})),Object(o["a"])(Object(s["a"])(a),"objectName",f.charField({require:!1,editable:!1,fieldName:"购置/租赁编号"})),a}return Object(l["a"])(t,e),t}(u["a"])},a003:function(e,t,a){},a1de:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{staticStyle:{padding:"0","margin-bottom":"0"},attrs:{"prepend-icon":"attach_file","single-line":"",label:e.label,hint:e.hint,"persistent-hint":"",disabled:e.ndisabled},nativeOn:{click:function(t){return e.onFocus(t)}},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}})],1),a("input",{ref:"fileInput",staticClass:"nicai",attrs:{type:"file",accept:e.accept,multiple:e.multiple},on:{change:e.onFileChange}}),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{staticStyle:{"margin-top":"-9px"},attrs:{label:"附件版本",disabled:e.tdisabled||e.ndisabled},model:{value:e.version,callback:function(t){e.version=t},expression:"version"}})],1)],1)},n=[],r=a("3596"),s=(a("7cfd"),a("dea4")),l=(a("4634"),{data:function(){return{filename:"",filedate:[],version:"",tdisabled:!0}},mounted:function(){null!=this.fileNames&&void 0!=this.fileNames&&(this.filename=this.fileNames),null!=this.userVersion&&void 0!=this.userVersion&&(this.version=this.userVersion.userVersion)},watch:{version:{handler:function(e){e&&(this.userVersion.userVersion=e)},deep:!0},fileNames:{handler:function(e){void 0!=e&&null!=e&&(this.filename=e)},deep:!0},filename:{handler:function(e){e||(this.clearFile(),this.$emit("input",""))}}},props:{label:{type:String,default:"Please choose..."},hint:{type:String,default:""},multiple:{type:Boolean,default:!1},uploadBase64:{type:Boolean,default:!0},fileNames:{type:String},userVersion:{type:Object},ndisabled:{type:Boolean,default:!1},accept:{type:String,default:"*"}},methods:{getFormData:function(e){var t=new FormData;return Object(s["a"])(e).forEach((function(e){t.append("data",e,e.name)})),t},onFocus:function(){this.disabled||this.$refs.fileInput.click()},onFileChange:function(e){var t=this;t.tdisabled=!1,this.filedata=[];var a=e.target.files||e.dataTransfer.files,i=this.getFormData(a);t.$emit("formData",i);var n=function(a){var i=e.target.files[a];if("object"==Object(r["a"])(i)){var n=new FileReader;n.readAsDataURL(i),n.onload=function(a){t.filedata.push({dname:i.name,docuFile:a.target.result,newestFileSize:i.size}),t.filename=t.filedata.map((function(e){return e.dname})).join(","),0==t.uploadBase64?0==t.multiple?(t.$emit("input",t.filedata[0]),e.target.value=""):(t.$emit("input",t.filedata),e.target.value=""):(t.$emit("input",t.filedata.map((function(e){return e.docuFile}))[0]),e.target.value="")}}};for(var s in e.target.files)n(s)},clearFile:function(){this.filename="",this.version="",this.$refs.fileInput.value=""}}}),o=l,c=(a("3be8"),a("6691")),u=Object(c["a"])(o,i,n,!1,null,"4c779808",null);t["a"]=u.exports},a2a7:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:!0,scrollable:"",width:e.width?e.width:1e3,"content-class":"selfdialog"},model:{value:e.IsShow,callback:function(t){e.IsShow=t},expression:"IsShow"}},[a("v-card",[a("v-card-title",{staticClass:"primary"},[a("span",{staticClass:"headline",staticStyle:{color:"#fff"}},[e._v(e._s(e.title))]),e.IsShowComfirmed?a("v-spacer"):e._e(),e.IsShowComfirmed?a("v-btn",{attrs:{icon:"",dark:"",flat:""},on:{click:e.modalClosed}},[a("v-icon",[e._v("close")])],1):e._e()],1),a("v-card-text",[e._t("default")],2),e.IsShowComfirmed?e._e():a("v-card-actions",{staticClass:"marginbottom"},[a("v-spacer"),1==e.isDetails?a("div",[a("v-btn",{staticStyle:{"margin-right":"30px"},attrs:{color:"primary"},on:{click:function(t){return e.modalClosed()}}},[e._v("关闭")])],1):1==e.isSubmit?a("div",[1==e.eqpInventoryTask?a("v-btn",{staticStyle:{"margin-right":"30px"},attrs:{color:"primary"},on:{click:function(t){return e.modalAutoVoluation()}}},[e._v("自动赋值")]):e._e(),a("v-btn",{staticStyle:{"margin-right":"30px"},attrs:{color:"primary"},on:{click:function(t){return e.modalStorageClosed()}}},[e._v("暂存并关闭")]),a("v-btn",{staticStyle:{"margin-right":"30px"},attrs:{color:"primary"},on:{click:function(t){return e.modalSubmit()}}},[e._v(e._s(1==e.eqpInventoryTask?"完成":"提交"))]),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.modalClosed()}}},[e._v("取消")])],1):a("div",[a("v-btn",{staticStyle:{"margin-right":"30px"},attrs:{color:"primary"},on:{click:function(t){return e.modalComfirmed()}}},[e._v("确定")]),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.modalClosed()}}},[e._v("取消")])],1)],1)],1)],1)},n=[],r=a("a0a8"),s=a.n(r),l={name:"contentModal",methods:{modalClosed:function(){this.$emit("modalClosed")},modalComfirmed:function(){this.$emit("modalComfirmed")},modalStorageClosed:function(){this.$emit("modalStorageClosed")},modalSubmit:function(){this.$emit("modalSubmit")},modalAutoVoluation:function(){this.$emit("modalAutoVoluation")}},mounted:function(){if(!this.cancelDrag)new s.a(".selfdialog",{})},props:["title","IsShow","width","IsShowComfirmed","isDetails","isSubmit","eqpInventoryTask","cancelDrag"]},o=l,c=(a("b193"),a("6691")),u=Object(c["a"])(o,i,n,!1,null,"40ff7d3e",null);t["a"]=u.exports},a49b:function(e,t){},a513:function(e,t,a){"use strict";var i=a("64be"),n=a.n(i);n.a},a627:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-dialog",{attrs:{persistent:!0,width:"1200"},model:{value:e.isShowCheckList,callback:function(t){e.isShowCheckList=t},expression:"isShowCheckList"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card",[a("v-card-title",{staticClass:"primary"},[a("span",{staticClass:"headline",staticStyle:{color:"#fff"}},[e._v("验收单")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{"align-center":"",row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[e.itemDetail.acceptance?a("v-text-field",{attrs:{label:"出厂编号"},model:{value:e.itemDetail.productionNo,callback:function(t){e.$set(e.itemDetail,"productionNo",t)},expression:"itemDetail.productionNo"}}):a("span",[e._v("\n                                出厂编号："+e._s(e.itemDetail.productionNo)+"\n                             ")])],1),a("v-flex",{attrs:{xs3:""}},[e.itemDetail.acceptance?a("v-combobox",{attrs:{items:e.manufacturerList,label:"生产厂商"},model:{value:e.itemDetail.manufacturer,callback:function(t){e.$set(e.itemDetail,"manufacturer",t)},expression:"itemDetail.manufacturer"}}):a("span",[e._v("\n                                生产厂商："+e._s(e.itemDetail.manufacturer)+"\n                             ")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.organizList,"item-text":"oname","item-value":"id",label:"验收部门"},model:{value:e.itemDetail.acceptanceDepart,callback:function(t){e.$set(e.itemDetail,"acceptanceDepart",t)},expression:"itemDetail.acceptanceDepart"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:e.printList}},[e._v("打印验收清单")])],1)],1),a("acceptTable",{ref:"acceptTable",attrs:{checkList:e.useList}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{"margin-right":"20px"},attrs:{color:"primary"},on:{click:e.checkListConfirm}},[e._v("通过")]),a("v-btn",{staticStyle:{"margin-right":"20px"},attrs:{color:"primary"},on:{click:e.checkListCancle}},[e._v("未通过")]),a("v-btn",{staticStyle:{"margin-right":"30px"},attrs:{color:"primary"},on:{click:e.checkListClose}},[e._v("关闭")])],1)],1)],1)],1)],1)},n=[],r=a("97a3"),s=(a("4634"),a("8f42"),a("f19a")),l=(a("20d3"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.checkList,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",e._l(e.headers,(function(i,n){return a("td",{key:n,staticClass:"text-xs-center"},["acceptanceClusion"===i.value?a("v-radio-group",{attrs:{row:""},on:{change:e.handleRadioChange},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}},[a("v-radio",{attrs:{label:"通过",value:1}}),a("v-radio",{attrs:{label:"未通过",value:0}})],1):"description"===i.value?a("v-text-field",{staticClass:"input-text",attrs:{rules:[],required:!1},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"document"===i.value?a("uploadFile",{ref:"uploadFile",refInFor:!0,staticStyle:{height:"32px"},attrs:{label:"上传附件",fileNames:e.getDocumentName(t.item[i.value]),multiple:!1,uploadBase64:!1},on:{formData:e.formData},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"acceptanceType"===i.value?[e._v(e._s(t.item[i.value]&&t.item[i.value].dname))]:"acceptanceResult"===i.value?a("v-text-field",{staticClass:"input-text",attrs:{required:!0},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):[e._v(e._s(t.item[i.value]))]],2)})),0)]}}])})}),o=[],c=a("3876"),u={data:function(){return{headers:[{text:"验收类别",align:"center",value:"acceptanceType",sortable:!1},{text:"负责部门",align:"center",value:"departmentName",sortable:!1},{text:"验收内容",align:"center",value:"content",sortable:!1},{text:"验收标准",align:"center",value:"standard",sortable:!1},{text:"验收结果",align:"center",value:"acceptanceResult",sortable:!1},{text:"验收结论",align:"center",value:"acceptanceClusion",sortable:!1},{text:"备注",align:"center",value:"description",sortable:!1},{text:"附件",align:"center",value:"document",sortable:!1}],items:[]}},props:{checkList:Array},components:{uploadFile:c["a"]},methods:{handleRadioChange:function(e){},formData:function(e){},getDocumentName:function(e){return e&&e.dname&&e.newestFilePath?e.dname+e.newestFilePath.substring(e.newestFilePath.lastIndexOf(".")):""}}},d=u,p=(a("87e0"),a("6691")),m=Object(p["a"])(d,l,o,!1,null,"8da328a6",null),f=m.exports,v=a("d5b3"),h=Object(r["a"])({name:"EqpPurchaseTaskCheckList",data:function(){return{valid:!0,organizList:[],restList:[],useList:[]}},props:{isShowCheckList:Boolean,itemDetail:Object,checkList:Array,organizSelect:Array,type:[String,Number],manufacturerList:Array,items:Array,isEdit:Boolean},components:{acceptTable:f,treeCombo:s["a"]},watch:{"itemDetail.acceptanceDepart":{handler:function(e){e&&this.checkList.length>0&&(this.useList=this.checkList.filter((function(t){return t.departmentID===e})))}}},mounted:function(){},methods:{init:function(){},printList:function(){this.itemDetail.acceptance?window.open("#eqpPrint?type=".concat(this.type,"&id=").concat(this.itemDetail.id,"&flag=1")):v["a"].alert("设备未验收")},isPass:function(e){var t=this,a=!0;t.useList.forEach((function(e){""!==e.acceptanceResult&&null!==e.acceptanceResult&&""!==e.acceptanceClusion&&null!==e.acceptanceClusion||(a=!1)}));var i=[];if(t.isEdit){for(var n=0;n<t.items.length;n++)t.itemDetail.productionNo===t.items[n].productionNo&&i.push(1);if(i.length>1)return void v["a"].alert("该编号已存在，请重新输入编号");if(""==this.itemDetail.productionNo||null==this.itemDetail.productionNo)return void v["a"].alert("出厂编号不能为空");if(""==this.itemDetail.manufacturer||null==this.itemDetail.manufacturer)return void v["a"].alert("生产厂商不能为空")}a?(t.itemDetail.acceptanceResult=e?1:0,t.itemDetail.acceptance=!0,t.checkList.forEach((function(e){e.eqpPurchaseRecord=t.itemDetail})),t.$Server.batchUpdate("EqpPurchaseAcceptance",t.checkList).then((function(e){e.success&&(v["a"].alert("保存成功","success"),t.$emit("checkListConfirm"))}),(function(e){return v["a"].alert(e)}))):v["a"].alert("结果和结论为必填项")},checkListConfirm:function(){this.isPass(!0),this.useList=[]},checkListClose:function(){this.$emit("checkListClose"),this.useList=[]},checkListCancle:function(){this.isPass(!1),this.useList=[]},handleRecode:function(){this.isShowRecode=!this.isShowRecode}}},"mounted",(function(){this.init()})),b=h,g=(a("dfc4"),Object(p["a"])(b,i,n,!1,null,"19a14a2e",null));t["a"]=g.exports},a7fe:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=new c["a"],p=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","Datadict"),Object(o["a"])(Object(s["a"])(a),"dname",d.charField({require:!0,fieldName:"名称",align:"left"})),Object(o["a"])(Object(s["a"])(a),"dcode",d.charField({require:!1,fieldName:"编码",align:"left"})),Object(o["a"])(Object(s["a"])(a),"dvalue",d.charField({require:!0,fieldName:"值",editable:!1,visible:!1})),Object(o["a"])(Object(s["a"])(a),"description",d.charField({fieldName:"备注",align:"left",require:!1})),Object(o["a"])(Object(s["a"])(a),"typeId",d.charField({require:!1,fieldName:"类型",visible:!1,editable:!1})),Object(o["a"])(Object(s["a"])(a),"parentId",d.charField({require:!1,fieldName:"父级",visible:!1,editable:!1})),Object(o["a"])(Object(s["a"])(a),"viewType",d.boolField({require:!0,editable:!1,fieldName:"类型",visible:!1,boolSelect:["树形","集合"],format:function(e){return e?"树形":"集合"}})),Object(o["a"])(Object(s["a"])(a),"editable",d.boolField({require:!0,editable:!1,fieldName:"是否可修改",visible:!1,boolSelect:["可修改","不可修改"],format:function(e){return e?"可修改":"不可修改"}})),a}return Object(l["a"])(t,e),t}(u["a"])},a8b8:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("p",{staticStyle:{"font-weight":"bold"}},[e._v("基本信息")]),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs4:"",md4:""}},[a("v-text-field",{attrs:{rules:[function(e){return!e||/^[\w|-]+$/.test(e)||"只能是数字,字母,下划线"}],label:"闲置处理单编号"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              闲置处理单编号\n            ")]},proxy:!0}]),model:{value:e.item.trendCode,callback:function(t){e.$set(e.item,"trendCode",t)},expression:"item.trendCode"}})],1),a("v-flex",{attrs:{xs4:""}},[a("datePicker",{attrs:{label:"最迟处理日期",required:!0,rules:[function(e){return e&&""!=e||"必填项"},function(t){return new Date(t)>=new Date(e.today)||"截至日期不能小于当前时间"}]},model:{value:e.item.deadline,callback:function(t){e.$set(e.item,"deadline",t)},expression:"item.deadline"}})],1),a("v-flex",{attrs:{xs4:"",md4:""}},[a("selectUser",{ref:"selectUser",attrs:{value:e.item.applicantName,required:!0,label:"申请人",multiple:!1,initselect:e.item.userViewModel}})],1),a("v-flex",{attrs:{xs4:"",md4:""}},[a("v-select",{attrs:{items:e.processingMethodList,"item-text":"dname","return-object":"",rules:[function(e){return!!e&&e.dname&&e.dname.length>0||"必填项"}]},on:{change:function(t){return e.changeEuipment(e.item.trendMode)}},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              处理方式 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.item.trendMode,callback:function(t){e.$set(e.item,"trendMode",t)},expression:"item.trendMode"}})],1),"出租"==e.item.trendMode.dname?a("v-flex",{attrs:{xs4:"",md4:""}},[a("v-combobox",{attrs:{items:e.leaseCompanyList,"item-text":"cname","return-object":"","item-value":"id"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              出租厂商\n            ")]},proxy:!0}],null,!1,1192712506),model:{value:e.item.rentCompany,callback:function(t){e.$set(e.item,"rentCompany",t)},expression:"item.rentCompany"}})],1):e._e(),"出租"==e.item.trendMode.dname?a("v-flex",{attrs:{xs2:"",md2:""}},[a("div",{staticStyle:{"padding-top":"20px"}},[a("v-icon",{on:{click:function(t){return e.companyAdd()}}},[e._v("add")])],1)]):e._e(),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"闲置处理原因"},model:{value:e.item.reason,callback:function(t){e.$set(e.item,"reason",t)},expression:"item.reason"}})],1),a("v-flex",{attrs:{xs12:""}},[a("span",{staticStyle:{"font-weight":"bold",width:"100%","padding-top":"20px"}},[e._v("上传附件")]),a("v-icon",{on:{click:function(t){return e.addUpload()}}},[e._v("add")]),a("v-icon",{on:{click:function(t){return e.removeUpload()}}},[e._v("remove")])],1)],1),e._l(e.item.rUnusedTrendDocumentList,(function(t,i){return a("v-layout",{key:t.id,style:e.selectLocation.includes(t)?"background: #E3F2FD":"",attrs:{row:"",wrap:""},on:{click:function(a){return e.getClick(t,i)}}},[a("fileUploader",{ref:"uploadFile",refInFor:!0,attrs:{label:"上传附件",multiple:!1,fileNames:t.documentViewModel.dname,uploadBase64:!1,userVersion:t},on:{formData:e.getFormData},model:{value:t.documentViewModel,callback:function(a){e.$set(t,"documentViewModel",a)},expression:"doc.documentViewModel"}})],1)})),a("div",{staticClass:"line"}),a("v-layout",{attrs:{row:"",wrap:""}},[a("p",{staticStyle:{"font-weight":"bold",width:"100%","padding-top":"20px"}},[e._v("设备信息")]),a("v-flex",{attrs:{xs3:"",md3:""}},[a("treeView",{ref:"treeView",attrs:{independentCheck:!0,Source:e.equipments,MultipleSelect:!1,label:"设备名称",require:!0,independentSingleCheck:!0,"return-object":""},on:{input:function(t){return e.changeSelected(e.item.equipmentID)}},model:{value:e.item.equipmentID,callback:function(t){e.$set(e.item,"equipmentID",t)},expression:"item.equipmentID"}})],1),a("v-flex",{attrs:{xs3:"",md3:""}},[a("v-text-field",{attrs:{label:"设备型号",disabled:""},model:{value:e.eqp.model,callback:function(t){e.$set(e.eqp,"model",t)},expression:"eqp.model"}})],1),a("v-flex",{attrs:{xs3:"",md3:""}},[a("v-text-field",{attrs:{label:"设备类型",disabled:""},model:{value:e.eqp.typeChinese,callback:function(t){e.$set(e.eqp,"typeChinese",t)},expression:"eqp.typeChinese"}})],1),a("v-flex",{attrs:{xs3:"",md3:""}},[a("v-text-field",{attrs:{label:"设备位置",disabled:""},model:{value:e.eqp.factoryName,callback:function(t){e.$set(e.eqp,"factoryName",t)},expression:"eqp.factoryName"}})],1)],1)],2),a("contentModal",{attrs:{title:"添加来往单位",IsShow:e.IsShowCompany,width:"1100"},on:{modalClosed:function(t){return e.modalClosedCompany()},modalComfirmed:function(t){return e.modalComfirmedCompany()}}},[a("companyAdd",{ref:"company",attrs:{companyInfo:e.companyInfo}})],1)],1)],1)},n=[],r=(a("23cc"),a("bada"),a("7cfd"),a("40c5"),a("4634"),a("1d18")),s=a("a1de"),l=a("9ee5"),o=a("f19a"),c=a("815a"),u=a("d5b3"),d=a("a2a7"),p=a("15ad"),m=a("a7fe"),f=a("1d53"),v=a("6bf2"),h=a.n(v),b={name:"eqpUnusedTrendTaskDetail",props:["item"],data:function(){return{today:h()(new Date).format("YYYY-MM-DD"),valid:!0,timeModal:!1,rules:{required:function(e){return!!e||"必填项"}},processingMethodList:[],exportDdc:[],equipmentList:[],equipmentList1:[],leaseCompanyList:[],eqp:{},documentList:[],selectLocation:[],deleteIndex:"",IsShowCompany:!1,companyInfo:{},cooperateList:[]}},components:{selectUser:r["a"],fileUploader:s["a"],treeView:o["a"],Message:u["a"],contentModal:d["a"],companyAdd:p["a"],datePicker:f["a"]},computed:{equipments:function(){var e=[],t=[];if(this.equipmentList.forEach((function(a){void 0==a.typeChinese||null==a.typeChinese||0==a.typeChinese.length?(a.typeChinese="无",e.push(a)):e.push(a),-1==t.indexOf(a.typeChinese)&&(void 0==a.typeChinese||null==a.typeChinese||0==a.typeChinese.length?t.includes("无")||t.push("无"):t.push(a.typeChinese))})),t.forEach((function(t,a){e.push({name:t,id:a+1,parentId:-1,isshow:!1})})),void 0==this.equipmentList||null==this.equipmentList||0==this.equipmentList.length);else{this.equipmentList.forEach((function(e){e.name=e.codeName}));for(var a=0;a<e.length;a++)for(var i=0;i<e.length;i++)if(e[a].typeChinese==e[i].name){e[a].parentId=e[i].id;break}}return e}},created:function(){this.init()},methods:{init:function(){var e=this;this.$Server.queryAll((new m["a"]).__name,{},{dname:"有无合作"}).then((function(t){e.cooperateList=t.datas})),this.$Server.queryAll((new c["a"]).__name,{},{deleted:"false"}).then((function(t){e.leaseCompanyList=t.datas.filter((function(e){return e.ctypeName&&e.ctypeName.indexOf("租赁厂商")>-1||void 0==e.ctypeName||null==e.ctypeName}))})),this.$Server.queryAll("Datadict",{},{dname:"设备闲置处理方式"}).then((function(t){e.processingMethodList=t.datas})),this.$Server.queryAll((new l["a"]).__name,{},{deleted:!1}).then((function(t){e.equipmentList=t.datas,e.equipmentList1=t.datas}))},validate:function(){if(1==this.$refs.form.validate()){if(!(this.item.equipmentID&&this.item.equipmentID.length>0))return u["a"].alert("闲置设备不能为空"),!1;var e=!0;if(this.item.rUnusedTrendDocumentList&&this.item.rUnusedTrendDocumentList.forEach((function(t){null==t||null!=t.documentViewModel&&""!=t.documentViewModel||(e=!1)})),0==e)return u["a"].alert("请选择上传文件或者删除当前文件选项列"),!1;this.item.rentCompany&&(this.item.rentCompany=this.item.rentCompany.id);var t=this.$refs.selectUser.getselectUserList();return t&&t.length>0&&(this.item.userViewModel=this.$refs.selectUser.getselectUserList()[0],this.item.applicant=this.$refs.selectUser.getselectUserList()[0].id),!0}return!1},changeSelected:function(e){var t=this;this.equipmentList.forEach((function(a){e[0]==a.id&&(t.eqp.model=a.model,t.eqp.typeChinese=a.typeChinese,t.eqp.factoryName=a.factoryName)}))},getFormData:function(e){console.log(e)},addUpload:function(){this.item.rUnusedTrendDocumentList?this.item.rUnusedTrendDocumentList.push({documentViewModel:{}}):this.item.rUnusedTrendDocumentList=[{documentViewModel:{}}]},removeUpload:function(){var e=this;this.selectLocation.length>0?e.item.rUnusedTrendDocumentList.length>0&&e.item.rUnusedTrendDocumentList.splice(this.deleteIndex,1):u["a"].alert("选择一个需要删除的位置")},getClick:function(e,t){this.selectLocation=[],this.selectLocation.push(e),this.deleteIndex=t},companyAdd:function(){this.resetForm(),this.IsShowCompany=!0,this.companyInfo={},this.companyInfo.hasCooperate=this.cooperateList.find((function(e){return"有"==e.dname})),this.companyInfo.region="",this.$refs.company.beforeAdd(this.companyInfo)},resetForm:function(){this.$refs.company.$refs.formCompanyAdd.reset(),this.$refs.company.$refs.formCompanyAdd.resetValidation()},modalClosedCompany:function(){this.IsShowCompany=!1,this.companyInfo={}},modalComfirmedCompany:function(){var e=this;1==e.$refs.company.validate()&&e.$Server.addOrUpdate("Company",e.companyInfo,!1).then((function(t){t.success&&(e.IsShowCompany=!1,e.init(),u["a"].alert("保存成功","success"))}),(function(e){u["a"].alert(e)}))},changeEuipment:function(e){var t=JSON.parse(JSON.stringify(this.equipmentList1)),a=e.dvalue;switch(a){case 0:this.equipmentList=t.filter((function(e){return[0].includes(e.status.dvalue)}));break;case 1:this.equipmentList=t.filter((function(e){return[1,2].includes(e.status.dvalue)}));break;case 2:this.equipmentList=t.filter((function(e){return[0,1,2].includes(e.status.dvalue)}));break;case 3:this.equipmentList=t.filter((function(e){return[2].includes(e.status.dvalue)}));break;case 4:this.equipmentList=t.filter((function(e){return[2].includes(e.status.dvalue)}));break;default:this.equipmentList=t}}}},g=b,x=(a("1b24"),a("6691")),y=Object(x["a"])(g,i,n,!1,null,"35f22ff1",null);t["a"]=y.exports},a9ac:function(e,t,a){},aa64:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkQyNzEyOTMyQjFBQzExRTlBODQwREIwNjA4MEY1RUJCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkQyNzEyOTMzQjFBQzExRTlBODQwREIwNjA4MEY1RUJCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RDI3MTI5MzBCMUFDMTFFOUE4NDBEQjA2MDgwRjVFQkIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RDI3MTI5MzFCMUFDMTFFOUE4NDBEQjA2MDgwRjVFQkIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5t9DAXAAAAUUlEQVR42mL8//8/Az0BEwOdAd0tZOnonzFygvQ/AYwMKohQj47bR0iiIVNfBxQP33w4mmiISjSMwz7RjJY0oyXNaEkzQkoaxtF26ZC3ECDAAM32T+jtMFz6AAAAAElFTkSuQmCC"},ab47:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("b",[e._v("基本信息")])]),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"租赁单编号",rules:[function(e){return!e||/^[\w|-]+$/.test(e)||"只能是数字,字母,下划线"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                            租赁单编号\n                        ")]},proxy:!0}]),model:{value:e.item.rentalCode,callback:function(t){e.$set(e.item,"rentalCode",t)},expression:"item.rentalCode"}})],1),a("v-flex",{attrs:{xs4:""}},[a("datePicker",{attrs:{label:"最迟到货时间",required:!0,rules:[function(e){return e&&""!=e||"必填项"},function(t){return new Date(t)>=new Date(e.today)||"最迟到货时间不能小于当前时间"}]},model:{value:e.item.latestTime,callback:function(t){e.$set(e.item,"latestTime",t)},expression:"item.latestTime"}})],1),a("v-flex",{attrs:{xs4:""}},[a("selectUser",{ref:"selectUser",attrs:{value:e.item.applicantName,required:!0,label:"申请人",multiple:!1,initselect:e.item.userViewModel},on:{changeValue:e.changeValue}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"数量",rules:[function(e){return!("0"===e)||"数量不能为0"},function(e){return!!e||"数量不能为空"},function(e){return!e||/^(0|[1-9][0-9]*)$/.test(e)||"只能是正整数"}],type:"number"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                            数量"),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.item.rentalCount,callback:function(t){e.$set(e.item,"rentalCount",t)},expression:"item.rentalCount"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"租赁原因"},model:{value:e.item.reason,callback:function(t){e.$set(e.item,"reason",t)},expression:"item.reason"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("span",{staticStyle:{"font-weight":"normal",width:"100%","padding-top":"20px"}},[e._v("上传附件:")]),a("v-icon",{on:{click:function(t){return e.addUpload()}}},[e._v("add")])],1)],1),e._l(e.item.rRentalTaskDocumentList,(function(t,i){return a("v-layout",{key:t.id,style:e.selectLocation.includes(t)?"background: #E3F2FD":"",attrs:{row:"",wrap:""},on:{click:function(a){return e.getClick(t,i)}}},[a("v-flex",{attrs:{xs10:""}},[a("fileUploader",{ref:"uploadFile",refInFor:!0,attrs:{label:"上传附件",multiple:!1,fileNames:t.documentViewModel&&t.documentViewModel.dname,uploadBase64:!1,userVersion:t},on:{formData:e.getFormData},model:{value:t.documentViewModel,callback:function(a){e.$set(t,"documentViewModel",a)},expression:"doc.documentViewModel"}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-icon",{on:{click:function(t){return e.item.rRentalTaskDocumentList.splice(i,1)}}},[e._v("delete")])],1)],1)}))],2),a("v-flex",{attrs:{xs12:""}},[a("b",[e._v("设备信息")]),a("v-radio-group",{attrs:{mandatory:!1,row:""},model:{value:e.displayCheck,callback:function(t){e.displayCheck=t},expression:"displayCheck"}},[a("v-radio",{attrs:{label:"从名录中选择",value:!0}}),a("v-radio",{attrs:{label:"新增设备",value:!1}})],1)],1),e.displayCheck?a("v-flex",{attrs:{xs4:""}},[a("treeView",{ref:"treeView",attrs:{independentCheck:!0,Source:e.equipments,MultipleSelect:!1,label:"设备名称",require:!0,independentSingleCheck:!0,"return-object":""},on:{input:function(t){return e.changeSelected(e.equipmentDirectory)}},model:{value:e.equipmentDirectory,callback:function(t){e.equipmentDirectory=t},expression:"equipmentDirectory"}})],1):e._e(),e.displayCheck?a("v-flex",{attrs:{xs4:""}},[a("v-combobox",{attrs:{label:"设备类型",disabled:"",items:e.typeList,"item-text":"dname","item-value":"dvalue"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                            设备类型 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}],null,!1,2686932376),model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1):e._e(),e.displayCheck?a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{disabled:"",label:"规格型号"},model:{value:e.item.model,callback:function(t){e.$set(e.item,"model",t)},expression:"item.model"}})],1):e._e(),e.displayCheck?e._e():a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"设备名称",rules:[function(e){return!!e||"必填项"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                            设备名称 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}],null,!1,205336597),model:{value:e.item.equipmentDirectory,callback:function(t){e.$set(e.item,"equipmentDirectory",t)},expression:"item.equipmentDirectory"}})],1),e.displayCheck?e._e():a("v-flex",{attrs:{xs4:""}},[a("v-combobox",{attrs:{label:"设备类型",items:e.typeList,"item-text":"dname","item-value":"dvalue",rules:[function(e){return!!e||"必填项"}]},on:{change:e.handelTypeChange},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                            设备类型 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}],null,!1,2686932376),model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),e.displayCheck?e._e():a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"规格型号"},model:{value:e.item.model,callback:function(t){e.$set(e.item,"model",t)},expression:"item.model"}})],1)],1)],1)],1)],1)},n=[],r=(a("7cfd"),a("40c5"),a("4634"),a("f19a")),s=a("1d53"),l=a("1d18"),o=a("d5b3"),c=a("a2a7"),u=a("2c75"),d=a("d685"),p=a("8333"),m=a("3876"),f=a("f855"),v=a("f05f"),h=a("a1de"),b=a("a7fe"),g=a("6bf2"),x=a.n(g),y=new p["a"](new u["a"]),k={name:"EqpRentalTaskDetail",data:function(){return{today:x()(new Date).format("YYYY-MM-DD"),valid:!0,inventoryTypes:[],childInventoryTypes:[],IsSelectShow:!1,IsShowForSpareparts:!1,sort:!0,searchfx:"",total:0,DataSource:[],headers:[{text:"序号",align:"center",sortable:!1},{text:"备件编号",value:"code",align:"center",sortable:!1},{text:"备件名称",value:"name",align:"center",sortable:!1},{text:"规格型号",value:"model",align:"center",sortable:!1},{text:"类型",value:"type",align:"center",sortable:!1},{text:"库存数量",value:"inventoryStr",align:"center",sortable:!1}],equipmentDirectoryList:[],errorHints2:"最迟到货时间不能小于当前时间",test:new Date,isDisabled:!1,equipmentDirectory:"",selectLocation:[],deleteIndex:"",displayCheck:!0,equipments:[],equipments1:[],typeList:[],type:""}},components:{datePicker:s["a"],selectUser:l["a"],contentModal:c["a"],localDataTable:f["a"],dataTable:v["a"],uploadFile2:m["a"],fileUploader:h["a"],treeView:r["a"]},watch:{displayCheck:{handler:function(e,t){var a=this;this.type="",this.equipmentDirectory="",this.item.equipmentDirectory="",this.item.model="",this.$refs.form.resetValidation(),e||(this.equipments=[]),e&&this.$nextTick((function(){a.equipments=a.equipments1,a.$refs.form.resetValidation()}))}},equipmentDirectoryList:{handler:function(e,t){var a=[],i=[];if(this.equipmentDirectoryList.forEach((function(e){void 0==e.eType||null==e.eType||0==e.eType.length?(e.typeChinese="无",a.push(e)):a.push(e),-1==i.indexOf(e.eType)&&(void 0==e.eType||null==e.eType||0==e.eType.length?i.includes("无")||i.push("无"):i.push(e.eType))})),i.forEach((function(e,t){a.push({name:e,id:t+1,parentId:-1,isshow:!1})})),void 0==this.equipmentDirectoryList||null==this.equipmentDirectoryList||0==this.equipmentDirectoryList.length);else{this.equipmentDirectoryList.forEach((function(e){e.name=e.nameAndModel}));for(var n=0;n<a.length;n++)for(var r=0;r<a.length;r++)if(a[n].eType==a[r].name){a[n].parentId=a[r].id;break}}this.equipments=a,this.equipments1=JSON.parse(JSON.stringify(a))}}},created:function(){var e=this;e.$Server.queryAll("Datadict",{},{dname:"备件盘点类型"}).then((function(t){e.inventoryTypes=t.datas}),(function(e){}))},computed:{formatFields:function(){return y.getFormatFields()}},props:["item"],methods:{handelTypeChange:function(e){e.dname?this.item.type=e.dvalue:this.item.type=e},changeSelected:function(e){var t=this;if(0===e.length)return t.type="",void(t.item.model="");console.log(e),this.equipmentDirectoryList.forEach((function(a){e[0]==a.id&&(t.type=a.eType,t.item.type=a.eType,t.item.model=a.model,t.item.equipmentDirectory=a.id,t.item.equipmentDirectoryName=a.name)}))},validate:function(){if(1==this.$refs.form.validate()){if(!this.item.latestTime)return o["a"].alert("请填写最迟到货时间"),!1;var e=this.$refs.selectUser.getselectUserList();return e&&e.length>0&&(this.item.applicant=this.$refs.selectUser.getselectUserList()[0].id),!0}return!1},init:function(){var e=this;e.$Server.queryAll((new b["a"]).__name,null,{dname:"设备类型"}).then((function(t){e.typeList=t.datas}))},getEqp:function(){var e=this;return new Promise((function(t,a){e.$Server.queryAll((new d["a"]).__name,{},{all:"all"}).then((function(a){e.equipmentDirectoryList=a.datas,t(a)})).catch((function(e){a(e)}))}))},getFormData:function(e){},addSpareparts:function(){var e=this;e.IsShowForSpareparts=!0},removeSpareparts:function(){var e=this,t=this.$refs.childDataTable.getCheckItems();0===t.length?o["a"].alert("请选择删除的备件"):t.forEach((function(t){e.item.sparePartsList.forEach((function(e,a,i){e.code==t.code&&i.splice(a,1)}))}))},doSearch:function(){var e=this.$refs.childDataTableForSpareparts.getPagination();1==e.page?this.initTable(e):this.$refs.childDataTableForSpareparts.setPage(1)},clearMessage:function(){this.searchfx="",this.doSearch()},initTable:function(e){var t=this;e&&e.page||(e=this.$refs.childDataTableForSpareparts.getPagination()),t.$Server.queryAll(y.getModelName(),{page:e.page,rowsPerPage:e.rowsPerPage},{nameOrCode:t.searchfx?t.searchfx:""}).then((function(e){t.$refs.childDataTableForSpareparts.unCheckItems(),t.DataSource=e.datas,t.total=e.page.total}),(function(e){}))},modalComfirmedForSpareparts:function(){var e=this,t=e.$refs.childDataTableForSpareparts.getCheckItems();t&&t.forEach((function(t){for(var a=!0,i=0;i<e.item.sparePartsList.length;i++)if(t.code==e.item.sparePartsList[i].code){a=!1;break}a&&e.item.sparePartsList.push(Object.assign({},t))})),e.IsShowForSpareparts=!1,e.clearMessage()},modalClosedForSpareparts:function(){this.IsShowForSpareparts=!1,this.clearMessage()},inventoryTypesChange:function(e){var t=this;t.IsSelectShow=!1,t.childInventoryTypes=[],0==e?t.inventoryTypes.forEach((function(a){a.dvalue==e&&t.$Server.queryAll("Datadict",{},{dname:a.dname}).then((function(e){t.childInventoryTypes=e.datas,t.IsSelectShow=!0}),(function(e){}))})):1==e?t.$Server.queryAll("Storage",{},{}).then((function(e){var a=[];e.datas&&e.datas.forEach((function(e){var t={};t.id=e.id,t.dname=e.sname,t.dvalue=e.id,a.push(t)})),t.childInventoryTypes=a,t.IsSelectShow=!0}),(function(e){})):2==e&&(t.item.sparePartsList=[],t.IsSelectShow=!0)},changeValue:function(e){},addUpload:function(){this.item.rRentalTaskDocumentList.push({documentViewModel:{}})},removeUpload:function(){var e=this;this.selectLocation.length>0?e.item.rRentalTaskDocumentList.length>0&&e.item.rRentalTaskDocumentList.splice(this.deleteIndex,1):o["a"].alert("选择一个需要删除的位置")},getClick:function(e,t){this.selectLocation=[],this.selectLocation.push(e),this.deleteIndex=t}},mounted:function(){this.init()}},S=k,_=a("6691"),w=Object(_["a"])(S,i,n,!1,null,"366d7ce8",null);t["a"]=w.exports},adf0:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("v-card",{staticClass:"elevation-3",staticStyle:{width:"100%"}},[e._t("default")],2)],1)},n=[],r={props:{title:{type:String}}},s=r,l=a("6691"),o=Object(l["a"])(s,i,n,!1,null,null,null);t["a"]=o.exports},b07b:function(e,t,a){},b193:function(e,t,a){"use strict";var i=a("5330"),n=a.n(i);n.a},b216:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",[a("DetailBlock",{attrs:{taskDetail:e.taskDetail}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",{on:{dblclick:function(a){return e.rowDbClick(t.item,t.index)}}},e._l(e.headers,(function(i,n){return a("td",{key:n,staticClass:"text-xs-center"},["acceptance"===i.value?[t.item[i.value]?a("span",[e._v("已检验")]):a("v-btn",{attrs:{small:""},on:{click:function(a){return e.handleCheck(t.item,t.index)}}},[e._v("检验")])]:"document"===i.value?a("span",[t.item.documentName?[a("view-file",{attrs:{documentViewModel:{newestFilePath:t.item.documentName}}})]:e._e()],2):"acceptancePerson"===i.value?[e._v("\n                                "+e._s(t.item.acceptancePersonName)+"\n                            ")]:"acceptanceResult"===i.value?[e._v("\n                                "+e._s(1===t.item[i.value]?"通过":0===t.item[i.value]?"未通过":"")+"\n                            ")]:[e._v(e._s(t.item[i.value]))]],2)})),0)]}}])})],1),a("AgreePanel",{ref:"agreePanel",attrs:{isShow:e.isShow,itemDetail:e.itemDetail},on:{agreeConfirm:e.handleAgreeConfirm,AgreeCancle:e.handleAgreeCancle}})],1)},n=[],r=(a("7cfd"),a("4634"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"800"},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[a("v-card",[a("v-card-title",{staticClass:"primary"},[a("span",{staticClass:"headline",staticStyle:{color:"#fff"}},[e._v("验收单")])]),a("v-card-text",[a("v-container",[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs3:""}},[e._v("备件名称："+e._s(e.itemDetail.name))]),a("v-flex",{attrs:{xs3:""}},[e._v("规格型号："+e._s(e.itemDetail.model))]),a("v-flex",{attrs:{xs3:""}},[e._v("供应商："+e._s(e.itemDetail.supplierName))]),a("v-flex",{attrs:{xs3:""}},[e._v("数量："+e._s(e.itemDetail.purchaseCount))]),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{xs12:""}},[e._v("\n                        检验标准："),a("v-btn",{attrs:{small:""}},[e._v("查看技术标准")])],1),a("v-flex",{attrs:{xs12:""}},[a("div",{staticClass:"label inline-block"},[e._v("检验结果:")]),a("div",{staticClass:"inline-block"},[a("v-radio-group",{attrs:{row:""},model:{value:e.itemDetail.acceptanceResult,callback:function(t){e.$set(e.itemDetail,"acceptanceResult",t)},expression:"itemDetail.acceptanceResult"}},[a("v-radio",{attrs:{label:"通过",value:1}}),a("v-radio",{attrs:{label:"未通过",value:0}})],1)],1)]),a("v-flex",{attrs:{xs12:""}},[a("div",{staticClass:"label inline-block"},[e._v("备注：")]),a("div",{staticClass:"inline-block t-area"},[a("v-textarea",{attrs:{solo:"",name:"input-7-4",label:""},model:{value:e.itemDetail.description,callback:function(t){e.$set(e.itemDetail,"description",t)},expression:"itemDetail.description"}})],1)]),a("v-flex",{attrs:{xs1:""}},[e._v("附件:")]),a("v-flex",{attrs:{xs11:""}},[a("uploadFile",{ref:"uploadFile",attrs:{label:"上传附件",multiple:!1,fileNames:null,uploadBase64:!1},on:{formData:e.getFormData},model:{value:e.itemDetail.document,callback:function(t){e.$set(e.itemDetail,"document",t)},expression:"itemDetail.document"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{"margin-right":"30px"},attrs:{color:"primary"},on:{click:e.handleAgreeConfirm}},[e._v("确认")]),a("v-btn",{attrs:{color:"primary"},on:{click:e.handleAgreeCancle}},[e._v("取消")])],1)],1)],1)}),s=[],l=a("3876"),o=a("d5b3"),c={name:"AgreePanel",data:function(){return{row:"",document:""}},props:{isShow:Boolean,itemDetail:Object},components:{uploadFile:l["a"]},methods:{handleAgreeConfirm:function(){null!==this.itemDetail.acceptanceResult&&""!==this.itemDetail.acceptanceResult?this.$emit("agreeConfirm"):o["a"].alert("检验结果必填")},handleAgreeCancle:function(){this.$emit("AgreeCancle")},getFormData:function(){}}},u=c,d=(a("8023"),a("6691")),p=Object(d["a"])(u,r,s,!1,null,"18c61aba",null),m=p.exports,f=a("88a5"),v={name:"CheckPanel",data:function(){return{headers:[{text:"备件名称",align:"center",sortable:!1,value:"sparePartsName"},{text:"规格型号",align:"center",sortable:!1,value:"sparePartsModel"},{text:"是否检验",align:"center",sortable:!1,value:"acceptance"},{text:"检验结果",align:"center",sortable:!1,value:"acceptanceResult"},{text:"检验人",align:"center",sortable:!1,value:"acceptancePerson"},{text:"备注",align:"center",sortable:!1,value:"description"},{text:"附件",align:"center",sortable:!1,value:"document"}],dialog:!0,isShow:!1,taskDetail:{},acceptanceDetail:[],items:[],itemDetail:{},businessKey:""}},components:{DetailBlock:f["a"],AgreePanel:m},methods:{initForm:function(e,t){this.businessKey=e;var a=this;a.params=t,this.$Server.queryObjectById("SpPurchaseTask",e).then((function(e){a.taskDetail=e.data.data,a.$Server.queryAll("SpPurchaseAcceptance",{},{purchaseTaskID:a.taskDetail.id}).then((function(e){var t=e.datas;t.forEach((function(e){e.acceptancePerson||(e.acceptancePerson=sessionStorage.userId,e.acceptancePersonName=sessionStorage.uname)})),a.items=e.datas}),(function(e){return o["a"].alert(e)}))}),(function(e){return o["a"].alert(e)}))},getTitle:function(){return"购置任务清单"},getIsProcessEnd:function(){return!0},getFormData:function(){return this.items.forEach((function(e){if(!e.acceptance)throw"请检验全部设备";if(null===e.acceptanceResult)throw"请填写检验结果";if(0===e.acceptanceResult)throw"验收未通过请结束流程"})),this.taskDetail},getSourceKey:function(){return"SpPurchaseTask"},handleCheck:function(e,t){if(e.acceptancePerson){console.log(t),this.isShow=!0;var a=this.taskDetail.rspsList[t];e.name=a.name,e.model=a.model,e.supplierName=a.supplierName,e.purchaseCount=a.purchaseCount,this.itemDetail=e,this.$refs.agreePanel.$refs.uploadFile.clearFile()}else o["a"].alert("请填写验收人")},handleAgreeConfirm:function(){var e=this;this.itemDetail.acceptance=!0,this.isShow=!1,this.$Server.addOrUpdate("SpPurchaseAcceptance",this.itemDetail,!0).then((function(t){o["a"].alert("保存成功","success"),e.businessKey&&e.$Server.queryAll("SpPurchaseAcceptance",{},{purchaseTaskID:e.businessKey}).then((function(t){var a=t.datas;a.forEach((function(e){e.acceptancePerson||(e.acceptancePerson=sessionStorage.userId,e.acceptancePersonName=sessionStorage.uname)})),e.items=t.datas}),(function(e){return o["a"].alert(e)}))}),(function(e){return o["a"].alert(e)}))},handleAgreeCancle:function(){this.isShow=!1},rowDbClick:function(e,t){if(e.acceptance){this.isShow=!0;var a=this.taskDetail.rspsList[t];e.name=a.name,e.model=a.model,e.supplierName=a.supplierName,e.purchaseCount=a.purchaseCount,this.itemDetail=e,this.$refs.agreePanel.$refs.uploadFile.clearFile()}else o["a"].alert("未验收")},downloadDocument:function(e){var t=document.createElement("a"),a=e.substring(e.lastIndexOf("_")+1);t.href=e,t.download=a,t.click()}}},h=v,b=Object(d["a"])(h,i,n,!1,null,null,null);t["a"]=b.exports},b27e:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-layout",[i("v-flex",{staticStyle:{width:"100px"}},[i("v-img",{staticClass:"grey lighten-2",style:e.reviewStyle||"width:100px",attrs:{src:e.value?e.value:a("2064"),"aspect-ratio":"1",contain:""}})],1),i("v-flex",[i("v-btn",{attrs:{depressed:"",disabled:e.disabled},on:{click:e.upload}},[e._v("\n                "+e._s(e.btnName)+"\n            ")]),i("input",{ref:"upload",attrs:{type:"file",id:"upload",multiple:"multiple",accept:"image/jpg, image/gif, image/bmp, image/png, image/jpeg"},on:{change:e.changeimg}})],1)],1),i("v-layout",[i("v-flex",[i("p",{staticStyle:{"padding-right":"20px","font-size":"12px"}},[e._v("支持上传 jpg, gif, bmp, png, jpeg的图片格式")])])],1),e._l(e.filedata,(function(t,a){return i("div",{key:a,staticStyle:{display:"inline-block","margin-left":"30px"}},[i("p",{directives:[{name:"show",rawName:"v-show",value:e.showFileName,expression:"showFileName"}],staticClass:"mb-0",staticStyle:{"font-size":"14px"}},[e._v(e._s(t.name))])])}))],2)},n=[],r=(a("7cfd"),a("3596")),s=a("d5b3"),l={components:{},data:function(){return{filedata:[],imageValue:""}},mounted:function(){console.log(this.value)},methods:{upload:function(){var e=this.$refs.upload;e.click()},changeimg:function(e){var t=this;this.filedata=[];var a=e.target.files||e.dataTransfer.files,i=this.getFormData(a);t.$emit("formData",i);var n=function(a){var i=e.target.files[a];if("object"==Object(r["a"])(i)){var n=new FileReader;n.readAsDataURL(i),n.onload=function(e){t.filedata.push({name:i.name,data:e.target.result}),t.imageValue=t.filedata.map((function(e){return e.data}))[0],t.$emit("input",t.imageValue)}}};for(var s in e.target.files)n(s)},getfileData:function(){return this.filedata},getFormData:function(e){var t=this,a=e[0].name;if(a){var i=a.substring(a.lastIndexOf(".")+1,a.length);"png"!=i&&"gif"!=i&&"jpg"!=i&&"bmp"!=i&&"jpeg"!=i&&(s["a"].alert("请检查图片的格式"),t.clearFile())}},clearFile:function(){this.value=void 0}},props:["showFileName","reviewStyle","value","disabled","btnName"]},o=l,c=(a("e5dd"),a("6691")),u=Object(c["a"])(o,i,n,!1,null,"74dc77f1",null);t["a"]=u.exports},b361:function(e,t,a){"use strict";var i=a("7878"),n=a.n(i);n.a},b42a:function(e,t,a){},b490:function(e,t,a){"use strict";a("4634"),a("ed8b");var i=a("7300"),n=a("e9e3"),r=a("531b"),s=function(){function e(){Object(i["a"])(this,e),this.apiUrl="/api",this.restUrl="/"}return Object(n["a"])(e,[{key:"queryObjectById",value:function(e,t){var a=this.apiUrl;return new Promise((function(i,n){var s=a+"/"+e+"/"+t;r["a"].http(s,"GET",null,{success:function(e){200==e.data.code?i(e):n(e.data.msg)},error:function(e){n(e)}})}))}},{key:"queryAll",value:function(e,t,a){var i=this.apiUrl,n=this,s=a?encodeURIComponent(JSON.stringify(a)):"";return new Promise((function(a,l){var o=i+"/"+e+"?condition="+s+"&pageIndex="+(t&&Object.keys(t).length?t.page:-1)+"&pageSize="+(t&&Object.keys(t).length?t.rowsPerPage:-1);r["a"].http(o,"GET",null,{success:function(e){200==e.data.code?a(n.formatQueryResponse(e)):l(e.data.msg)},error:function(e){l(e)}})}))}},{key:"addOrUpdate",value:function(e,t,a){var i=this.apiUrl;return new Promise((function(n,s){a?r["a"].http(i+"/"+e+"?t="+Date.now(),"PUT",t,{success:function(e){200==e.data.code?n({success:!0,model:e.data.data}):s(e.msg)},error:function(e){s(e)}}):r["a"].http(i+"/"+e+"?t="+Date.now(),"POST",t,{success:function(e){200==e.data.code?n({success:!0,model:e.data.data}):s(e.msg)},error:function(e){s(e)}})}))}},{key:"delete",value:function(e,t){var a=this.apiUrl;return new Promise((function(i,n){var s=a+"/"+e+"/"+t.id+"?t="+Date.now();r["a"].http(s,"DELETE",null,{success:function(e){i({success:!e.code})},error:function(e){n(e)}})}))}},{key:"batchDelete",value:function(e,t){return this.batchOpera(e,{deleteObjects:t})}},{key:"batchSave",value:function(e,t){return this.batchOpera(e,{insertObjects:t})}},{key:"batchUpdate",value:function(e,t){return this.batchOpera(e,{updateObjects:t})}},{key:"batchOpera",value:function(e,t){var a=this.apiUrl;return new Promise((function(i,n){r["a"].http(a+"/"+e+"/batch","POST",t,{success:function(e){200==e.data.code?i({success:!e.code}):n(e.data.msg)},error:function(e){n(e)}})}))}},{key:"exportFile",value:function(e,t,a){var i=this.apiUrl,n=a?encodeURIComponent(JSON.stringify(a)):"";return new Promise((function(a,s){r["a"].http(i+"/"+e+"/exportFile?condition="+n,"GET","",{success:function(e){if(200==e.data.code&&null!=e.data.data.base64){var i=document.createElement("a");i.href=e.data.data.base64,i.download=t,i.click(),a({success:!e.code})}else s(e.msg)},error:function(e){s(e)}})}))}},{key:"importFile",value:function(e,t){var a=this.apiUrl;return new Promise((function(i,n){r["a"].http(a+"/"+e+"/importFile","POST",t,{success:function(e){200==e.data.code?i({success:!e.code,datas:e.data.data}):n(e.msg)},error:function(e){n(e)}})}))}},{key:"formatQueryResponse",value:function(e){var t=e.data.data,a=t.rows,i=t.index,n=t.size,r=t.total;return{datas:a,page:{index:i,size:n,total:r}}}}]),e}();t["a"]=s},b690:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=new c["a"],p=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","RunningEquipment"),Object(o["a"])(Object(s["a"])(a),"Name",d.charField({require:!0,fieldName:"设备名称"})),Object(o["a"])(Object(s["a"])(a),"Type",d.charField({require:!0,fieldName:"设备类型"})),Object(o["a"])(Object(s["a"])(a),"Model",d.charField({require:!0,fieldName:"规格型号"})),Object(o["a"])(Object(s["a"])(a),"directoryID",d.charField({require:!0,fieldName:"设备名录"})),Object(o["a"])(Object(s["a"])(a),"code",d.charField({require:!0,fieldName:"设备编码"})),Object(o["a"])(Object(s["a"])(a),"departmentID",d.charField({require:!0,fieldName:"所属部门"})),Object(o["a"])(Object(s["a"])(a),"usedDepartmentID",d.charField({require:!0,fieldName:"使用部门"})),Object(o["a"])(Object(s["a"])(a),"source",d.charField({require:!0,fieldName:"来源"})),Object(o["a"])(Object(s["a"])(a),"status",d.charField({require:!0,fieldName:"设备状态"})),Object(o["a"])(Object(s["a"])(a),"position",d.charField({require:!0,fieldName:"设备位置"})),Object(o["a"])(Object(s["a"])(a),"supplier",d.charField({require:!0,fieldName:"供应商"})),Object(o["a"])(Object(s["a"])(a),"manufacturer",d.charField({require:!0,fieldName:"生产厂商"})),Object(o["a"])(Object(s["a"])(a),"leaseholder",d.charField({require:!0,fieldName:"租赁厂商"})),Object(o["a"])(Object(s["a"])(a),"ABCType",d.charField({require:!0,fieldName:"ABC类"})),Object(o["a"])(Object(s["a"])(a),"purchaseDate",d.charField({require:!0,fieldName:"购入日期"})),Object(o["a"])(Object(s["a"])(a),"warrantyPeriod",d.charField({require:!0,fieldName:"验收日期"})),Object(o["a"])(Object(s["a"])(a),"acceptDate",d.charField({require:!0,fieldName:"保修期限"})),Object(o["a"])(Object(s["a"])(a),"startProduceDate",d.charField({require:!0,fieldName:"投产日期"})),Object(o["a"])(Object(s["a"])(a),"originalValue",d.charField({require:!0,fieldName:"设备原值"})),Object(o["a"])(Object(s["a"])(a),"EqpImgae",d.charField({require:!0,fieldName:"设备图像"})),Object(o["a"])(Object(s["a"])(a),"runStatus",d.charField({require:!0,fieldName:"设备运行状态"})),Object(o["a"])(Object(s["a"])(a),"runningTime",d.charField({require:!0,fieldName:"运行时间"})),Object(o["a"])(Object(s["a"])(a),"runningCount",d.charField({require:!0,fieldName:"设备运行次数"})),a}return Object(l["a"])(t,e),t}(u["a"])},b695:function(e,t,a){},ba23:function(e,t,a){},bb20:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{ref:"form1",attrs:{"lazy-validation":""}},[a("v-container",{attrs:{"grid-list-md":""}},[""!=e.item?a("v-layout",{staticStyle:{padding:"0 20px"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("p",{staticClass:"title"},[e._v("报修情况")])]),a("v-flex",{attrs:{xs4:""}},[e._v("\n        工单编号："),a("span",[e._v(e._s(e.item.code))])]),a("v-flex",{attrs:{xs4:""}},[e._v("\n        报修人："),a("span",[e._v(e._s(e.item.applicantName))])]),a("v-flex",{attrs:{xs4:""}},[e._v("\n        报修时间："),a("span",[e._v(e._s((e.item.reportTime||"").substring(0,16)))])]),a("v-flex",{attrs:{xs4:""}},[e._v("\n        报修设备："),a("span",[e._v(e._s(e.item.equipmentName))])]),a("v-flex",{attrs:{xs8:""}},[e._v("\n        设备位置："),a("span",[e._v(e._s(e.item.equipmentPosition))])]),a("v-flex",{attrs:{xs4:""}},[e._v("\n        故障类型："),a("span",[e._v(e._s(e.item.faultType&&e.item.faultType.dname))])]),a("v-flex",{attrs:{xs8:""}},[e._v("\n        故障位置："),a("span",[e._v(e._s(e.item.faultPosition))])]),a("v-flex",{attrs:{xs12:""}},[e._v("\n        故障描述："),a("span",[e._v(e._s(e.item.faultDescription))])]),a("v-flex",{attrs:{xs7:""}},[e._v("\n        紧急程度："),a("span",[e._v(e._s(e.item.urgency&&e.item.urgency.dname))])]),a("v-flex",{attrs:{xs12:""}},[e._v("\n        紧急备注："),a("span",[e._v(e._s(e.item.urgentDescription))])]),a("div",{staticClass:"line"}),a("v-flex",{attrs:{xs12:""}},[a("p",{staticClass:"title"},[e._v("维修情况")])]),e.isRepair?a("v-flex",{staticStyle:{padding:"0 15px"},attrs:{xs12:"",row:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-datetime-picker",{attrs:{label:"派工时间",clearText:"",okText:"确定",rules:[function(e){return e&&""!=e||"必填项"},function(t){return new Date(t)>new Date(e.item.reportTime)||"派工时间必须大于报修时间"},function(t){return new Date(t)<new Date(e.item.startTime)||"派工时间必须小于开始维修时间"}],prependIcon:"star",model:"String",locale:"zh-cn"},model:{value:e.item.assignmentTime,callback:function(t){e.$set(e.item,"assignmentTime",t)},expression:"item.assignmentTime"}})],1),a("v-flex",{attrs:{xs6:""}}),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"现场情况描述："},model:{value:e.item.accualDescription,callback:function(t){e.$set(e.item,"accualDescription",t)},expression:"item.accualDescription"}})],1)],1):e._e(),a("v-flex",{attrs:{xs6:""}},[a("v-datetime-picker",{attrs:{label:"维修开始时间",clearText:"",okText:"确定",rules:[function(e){return!!e||"必填项"}],prependIcon:"star",model:"String",locale:"zh-cn"},model:{value:e.item.startTime,callback:function(t){e.$set(e.item,"startTime",t)},expression:"item.startTime"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.item.userList,label:"维修人员","item-value":"id","item-text":"uname",multiple:"","single-line":"",clearable:"",rules:[e.rules.required]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n            维修人员: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}],null,!1,1927174547),model:{value:e.item.repairPersonList,callback:function(t){e.$set(e.item,"repairPersonList",t)},expression:"item.repairPersonList"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"维修详情："},model:{value:e.item.repairDetail,callback:function(t){e.$set(e.item,"repairDetail",t)},expression:"item.repairDetail"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-radio-group",{attrs:{label:"是否同步至知识库",row:""},model:{value:e.item.synchronized,callback:function(t){e.$set(e.item,"synchronized",t)},expression:"item.synchronized"}},e._l(e.eqpStatusData,(function(e){return a("v-radio",{key:e.dvalue,attrs:{label:e.dname,value:e.dvalue}})})),1)],1)],1):e._e(),a("v-layout",[a("v-flex",{attrs:{xs12:""}},[e._v("\n        备件使用情况：\n        "),a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){return e.addRowSpareParts()}}},[a("v-icon",[e._v("\n            add\n          ")])],1),a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){return e.deleteSpareparts(e.selectedIndex)}}},[a("v-icon",[e._v("\n            remove\n          ")])],1)],1)],1),e._l(e.spareParts,(function(t,i){return a("v-layout",{key:i,class:{"box-active":e.isSelectedArr[i]},on:{click:function(t){return e.spareRowSelect(i)}}},e._l(e.editSpares,(function(i,n){return a("v-flex",{key:n,attrs:{xs6:""}},["备件名称"==i.text?a("v-select",{attrs:{items:e.sparePartsList,label:i.text,"item-text":"codeName","item-value":"id",rules:[function(e){return!!e||"必填项"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n            备件名称 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}],null,!0),model:{value:t[i.value],callback:function(a){e.$set(t,i.value,a)},expression:"spare[item.value]"}}):e._e(),"数量"==i.text?a("v-text-field",{attrs:{label:i.text,rules:[function(e){return!e||/^(0|[1-9][0-9]*)$/.test(e)||"只能是正整数"}],type:"number"},model:{value:t[i.value],callback:function(a){e.$set(t,i.value,a)},expression:"spare[item.value]"}}):e._e()],1)})),1)})),a("br"),a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("span",{staticStyle:{"font-weight":"bold",width:"100%","padding-top":"20px"}},[e._v("附件:")]),a("v-icon",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],on:{click:function(t){return e.addUploadDeal()}}},[e._v("add")]),a("v-icon",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],on:{click:function(t){return e.removeUploadDeal()}}},[e._v("remove")])],1)],1),e._l(e.item.documentList,(function(t,i){return a("v-layout",{key:t.id,style:e.selectLocationDeal.includes(t)?"background: #E3F2FD":"",attrs:{row:"",wrap:""},on:{click:function(a){return e.getClickDeal(t,i)}}},[a("fileUploader",{ref:"uploadFile",refInFor:!0,attrs:{label:"上传附件",ndisabled:"",multiple:!1,fileNames:t.document.dname,uploadBase64:!1,userVersion:t},on:{formData:e.getFormData},model:{value:t.document,callback:function(a){e.$set(t,"document",a)},expression:"doc.document"}})],1)}))],2)],1)},n=[],r=a("d5b3"),s=a("a1de"),l=a("1d53"),o={name:"repairTaskDeal",data:function(){return{valid:!0,timeDealModal:!1,timeWorkPlanModal:!1,eqpStatusData:[{dname:"是",dvalue:!0},{dname:"否",dvalue:!1}],rules:{required:function(e){return!!e||"必填项"}},isSelectedArr:[],selectedIndex:0,equipmentList:[],faultTypeList:[],urgencyList:[],spareParts:[],sparePartsList:[],editSpares:[{text:"备件名称",value:"sparePartsID"},{text:"数量",value:"amount"}],selectLocationDeal:[],deleteIndexDeal:[]}},props:["item","titleDeal","isRepair"],components:{fileUploader:s["a"],datePicker:l["a"]},computed:{},created:function(){var e=this;e.$Server.queryAll("Datadict",{},{dname:"紧急程度"}).then((function(t){e.urgencyList=t.datas}),(function(e){})),e.$Server.queryAll("SpareParts",null,{deleted:!1}).then((function(t){e.sparePartsList=t.datas})),e.$Server.queryAll("Datadict",{},{dname:"故障类型"}).then((function(t){e.faultTypeList=t.datas}),(function(e){})),e.$Server.queryAll("Equipment",null,{deleted:!1}).then((function(t){e.equipmentList=t.datas}))},mounted:function(){},methods:{addUploadDeal:function(){this.item.documentList.push({document:{}})},removeUploadDeal:function(){var e=this;e.selectLocation.length>0?e.item.documentList.length>0&&e.item.documentList.splice(e.deleteIndexDeal,1):r["a"].alert("选择一个需要删除的位置")},getClickDeal:function(e,t){this.selectLocationDeal=[],this.selectLocationDeal.push(e),this.deleteIndexDeal=t},dealSpareParts:function(){this.spareParts=this.item.rspList},spareRowSelect:function(e){this.spareParts.length;this.isSelectedArr.splice(this.selectedIndex,1,!1),this.isSelectedArr.splice(e,1,!0),this.selectedIndex=e},addRowSpareParts:function(){this.spareParts.push({})},deleteSpareparts:function(e){this.spareParts.splice(e,1),this.isSelectedArr.splice(e,1,!1)},validate:function(){return 1==this.$refs.form1.validate()&&(this.item.rspList=this.spareParts,!0)},getFormData:function(e){console.log(e)},changePosition:function(){var e=this;this.item.equipmentPosition=this.equipmentList.filter((function(t){return t.id==e.item.equipmentID}))[0].equipmentPosition},workChangeValue:function(e){e.length>0&&(this.item.repairPersonListString+=e[0].loginName,this.item.repairPersonList.push(e[0].id))},modalComfirmedDeal:function(){this.item.rspList=this.spareParts,this.$emit("modalComfirmedDeal")},modalClosedDeal:function(){this.$emit("modalClosedDeal")},initEditLoacation:function(e){}}},c=o,u=(a("e09c"),a("6691")),d=Object(u["a"])(c,i,n,!1,null,"08fa4553",null);t["a"]=d.exports},bb45:function(e,t,a){},bbe0:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("b",[e._v("基本信息:")])]),a("v-flex",{attrs:{xs5:"",md5:""}},[a("v-text-field",{attrs:{rules:[function(e){return!e||/^[\w|-]+$/.test(e)||"只能是数字,字母,下划线"}],label:"报废单编号:"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              报废单编号:\n            ")]},proxy:!0}]),model:{value:e.item.scrapCode,callback:function(t){e.$set(e.item,"scrapCode",t)},expression:"item.scrapCode"}})],1),a("v-flex",{attrs:{xs4:"",md4:""}},[a("selectUser",{ref:"selectUser",attrs:{value:e.item.applicantName,required:!0,label:"申请人",multiple:!1,disabled:e.IsSubmit,initselect:e.item.userViewModel}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"报废描述"},model:{value:e.item.reason,callback:function(t){e.$set(e.item,"reason",t)},expression:"item.reason"}})],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-flex",{attrs:{xs12:""}},[a("span",{staticStyle:{"font-weight":"bold",width:"100%"}},[e._v("上传附件:")]),a("v-icon",{on:{click:function(t){return e.addUpload()}}},[e._v("add")])],1),a("v-flex",{attrs:{xs12:""}},e._l(e.item.documentList,(function(t,i){return a("v-layout",{key:t.id,attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs9:""}},[a("fileUploader",{ref:"uploadFile",refInFor:!0,attrs:{label:"上传附件",multiple:!1,fileNames:t.documentViewModel.dname,uploadBase64:!1,userVersion:t},on:{formData:e.getFormData},model:{value:t.documentViewModel,callback:function(a){e.$set(t,"documentViewModel",a)},expression:"doc.documentViewModel"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-icon",{on:{click:function(t){return e.deleteItem(i)}}},[e._v("delete")])],1)],1)})),1)],1)],1),a("div",{staticClass:"line"}),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("b",[e._v("备件信息:")])]),0==e.IsSubmit?a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-btn",{staticClass:"btnClass",attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){return e.addRow()}}},[a("v-icon",[e._v("\n              add\n            ")])],1),a("v-btn",{staticClass:"btnClass",attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:e.deleteLocation}},[a("v-icon",[e._v("\n              remove\n            ")])],1)],1):e._e()],1),e._l(e.sparePartInfo,(function(t,i){return a("v-layout",{key:t.id,style:e.selectLocation.includes(t)?"background: #E3F2FD":"",attrs:{row:"",wrap:""},on:{click:function(a){return e.getClick(t,i)}}},[a("v-flex",{attrs:{xs3:"",md3:""}},[a("v-select",{attrs:{items:e.spareCodes,label:"备件编号","item-text":"codeName","item-value":"id",rules:[e.rules.required],disabled:e.IsSubmit},on:{change:function(a){return e.getSparePartsInfo(t)}},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              备件编号 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}],null,!0),model:{value:t.sparePartsID,callback:function(a){e.$set(t,"sparePartsID",a)},expression:"item.sparePartsID"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-select",{attrs:{label:"备件位置","item-value":"storageLocationID",items:t.locationList,rules:[e.rules.required],"item-text":"positionName",disabled:e.IsSubmit},on:{change:function(a){return e.getSparePositionInfo(t)}},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              备件位置 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}],null,!0),model:{value:t.storageLocationID,callback:function(a){e.$set(t,"storageLocationID",a)},expression:"item.storageLocationID"}})],1),a("v-flex",{staticClass:"item",attrs:{xs2:"",md2:""}},[e._v("备件名称："+e._s(t.spareName))]),a("v-flex",{staticClass:"item",attrs:{xs3:"",md2:""}},[e._v("规格型号："+e._s(t.spareModel))]),0==e.IsSubmit?a("v-flex",{attrs:{xs2:"",md2:""}},[a("v-text-field",{attrs:{label:"数量",disabled:e.IsSubmit,rules:[function(e){return!!e||"必填项"},function(e){return e&&e<=t.inventory&&e>parseInt(0)||"报废数量须在0-"+t.inventory}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              数量 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}],null,!0),model:{value:t.scrapCount,callback:function(a){e.$set(t,"scrapCount",a)},expression:"item.scrapCount"}})],1):e._e(),1==e.IsSubmit?a("v-flex",{attrs:{xs2:"",md2:""}},[a("v-text-field",{attrs:{label:"数量",disabled:e.IsSubmit},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              数量 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}],null,!0),model:{value:t.scrapCount,callback:function(a){e.$set(t,"scrapCount",a)},expression:"item.scrapCount"}})],1):e._e()],1)}))],2)],1)],1)},n=[],r=(a("7cfd"),a("bada"),a("4634"),a("1d18")),s=a("a1de"),l=a("d5b3"),o={name:"spScrapTaskDetail",data:function(){return{valid:!0,timeModal:!1,rules:{required:function(e){return!!e||"必填项"}},exportDdc:[],spareCodes:[],selectLocation:[],deleteIndex:"",sparePartList:[],locationList:[],allLocations:[]}},props:["item","IsSubmit"],components:{selectUser:r["a"],fileUploader:s["a"]},computed:{sparePartInfo:function(){return this.item.spscrapSparepartList}},created:function(){var e=this;e.$Server.queryAll("SpareParts",{},{deleted:"false"}).then((function(t){e.sparePartList=t.datas,t.datas.forEach((function(t){e.spareCodes.push({id:t.id,code:t.code,codeName:t.codeName})}))})),1==this.IsSubmit?e.$Server.queryAll("SparePosition",{},{inventoryStr:"inventoryStr"}).then((function(t){e.allLocations=t.datas})):e.$Server.queryAll("SparePosition").then((function(t){e.allLocations=t.datas}))},methods:{validate:function(){if(1==this.$refs.form.validate()){var e=this.$refs.selectUser.getselectUserList();return e&&e.length>0&&(this.item.userViewModel=this.$refs.selectUser.getselectUserList()[0],this.item.applicant=this.$refs.selectUser.getselectUserList()[0].id),!0}return!1},addRow:function(){this.sparePartInfo.push({})},deleteLocation:function(){var e=this;this.selectLocation.length>0?this.sparePartInfo.length>1?e.sparePartInfo.splice(this.deleteIndex,1):l["a"].alert("至少要选择一个备件"):l["a"].alert("选择一个需要删除的位置")},getClick:function(e,t){this.selectLocation=[],this.selectLocation.push(e),this.deleteIndex=t},getSparePartsInfo:function(e){var t=this.sparePartList.find((function(t){return t.id==e.sparePartsID}));e.locationList=this.allLocations.filter((function(e){return e.sparePartsID==t.id})),this.selectLocation[0].sparePosition=t.position,this.selectLocation[0].spareName=t.name,this.selectLocation[0].spareModel=t.model},initEditLoacation:function(e){var t=this;e.spscrapSparepartList&&(e.spscrapSparepartList.forEach((function(e){e.locationList=t.allLocations.filter((function(t){return t.sparePartsID==e.sparePartsID})),t.getSparePositionInfo(e)})),this.item.spscrapSparepartList=e.spscrapSparepartList)},getFormData:function(){},addUpload:function(){this.item.documentList.push({documentViewModel:{}})},deleteItem:function(e){this.item.documentList.splice(e,1)},getSparePositionInfo:function(e){var t=e.locationList.filter((function(t){return t.storageLocationID==e.storageLocationID}));e.inventory=t[0].inventory}}},c=o,u=(a("7bb8"),a("6691")),d=Object(u["a"])(c,i,n,!1,null,"327c823d",null);t["a"]=d.exports},bd12:function(e,t,a){"use strict";var i=a("6e6d"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{position:"fixed",top:"200px",width:"100%","text-align":"center","z-index":"999"}},[a("v-dialog",{attrs:{"max-width":"500",light:"","hide-overlay":e.hideOverlay},model:{value:e.IsAlert,callback:function(t){e.IsAlert=t},expression:"IsAlert"}},[a("v-card",[a("v-card-title",{class:e.setClass,staticStyle:{padding:"15px 0px 15px 16px",color:"#FFFFFF","font-size":"16px"}},[a("div",{staticStyle:{"padding-left":"40px",width:"100%"}},[a("div",{staticStyle:{float:"left",width:"40px","margin-left":"-40px"}},[a("v-icon",{staticStyle:{color:"rgba(0,0,0,0.54)","font-size":"24px"},attrs:{dark:"",left:""}},[e._v(e._s(e.icon))])],1),a("div",{staticStyle:{float:"left",width:"100%"}},[a("div",{staticStyle:{"padding-right":"40px",width:"100%"}},[a("div",{staticStyle:{float:"left",width:"100%"}},[e._v(e._s(e.alertMessage))]),a("div",{staticStyle:{float:"left",width:"40px","margin-right":"-40px"}},[a("v-icon",{staticStyle:{color:"rgba(0,0,0,0.54)","font-size":"24px"},attrs:{dark:"",left:""},on:{click:function(t){e.IsAlert=!1}}},[e._v("cancel")])],1),a("div",{staticStyle:{clear:"both"}})])]),a("div",{staticStyle:{clear:"both"}})])])],1)],1)],1)},r=[],s={name:"Message",data:function(){return{hideOverlay:!0,icon:"priority_high",IsAlert:!1,alertType:"warning",alertMessage:""}},computed:{setClass:function(){return"success"==this.alertType?(this.icon="check_circle",{dialog_success:!0,selfmessage:!0}):"info"==this.alertType?(this.icon="info",{dialog_info:!0,selfmessage:!0}):"warning"==this.alertType?(this.icon="priority_high",{dialog_warning:!0,selfmessage:!0}):"error"==this.alertType?(this.icon="warning",{dialog_error:!0,selfmessage:!0}):(this.icon="check_circle",{dialog_success:!0,selfmessage:!0})}}},l=s,o=(a("b361"),a("6691")),c=Object(o["a"])(l,n,r,!1,null,"4e293cd0",null),u=c.exports,d=i["default"].extend(u),p=null;u.alert=function(e,t){void 0===e||null===e?e={alertMessage:""}:"string"!==typeof e&&"number"!==typeof e||(e={alertMessage:e},void 0!=t&&null!=e&&(e.alertType=t)),null==p?(p=new d({data:e}).$mount(),document.body.appendChild(p.$el),i["default"].nextTick((function(){p.IsAlert=!0}))):i["default"].nextTick((function(){p.alertMessage=e.alertMessage,p.alertType=t?e.alertType:"warning",p.IsAlert=!0}))};t["a"]=u},bee9:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[e._v("基本信息")]),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"购置单编号",rules:[function(e){return!e||/^[\w|-]+$/.test(e)||"只能是数字,字母,下划线"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                        购置单编号\n                    ")]},proxy:!0}]),model:{value:e.eqpPurchaseTaskModel.purchaseCode,callback:function(t){e.$set(e.eqpPurchaseTaskModel,"purchaseCode",t)},expression:"eqpPurchaseTaskModel.purchaseCode"}})],1),a("v-flex",{attrs:{xs4:""}},[a("datePicker",{attrs:{label:"最迟到货时间",required:!0,rules:[function(t){return new Date(t)>=new Date(e.today)||"最迟到货事件不能小于当前时间"}],prependIcon:"star",locale:"zh-cn"},model:{value:e.eqpPurchaseTaskModel.latestTime,callback:function(t){e.$set(e.eqpPurchaseTaskModel,"latestTime",t)},expression:"eqpPurchaseTaskModel.latestTime"}})],1),a("v-flex",{attrs:{xs4:""}},[a("selectUser",{ref:"selectUser",attrs:{value:e.eqpPurchaseTaskModel.applicantName,required:!0,label:"申请人",multiple:!1,initselect:e.eqpPurchaseTaskModel.selectAssign},on:{changeValue:e.changeValue}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"数量",type:"number",min:"1"},model:{value:e.eqpPurchaseTaskModel.purchaseCount,callback:function(t){e.$set(e.eqpPurchaseTaskModel,"purchaseCount",t)},expression:"eqpPurchaseTaskModel.purchaseCount"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"购置原因"},model:{value:e.eqpPurchaseTaskModel.reason,callback:function(t){e.$set(e.eqpPurchaseTaskModel,"reason",t)},expression:"eqpPurchaseTaskModel.reason"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("span",{staticStyle:{"font-weight":"bold",width:"100%","padding-top":"20px"}},[e._v("上传附件:")]),a("v-icon",{on:{click:function(t){return e.eqpPurchaseTaskModel.documentList.push({})}}},[e._v("add")])],1)],1),e._l(e.eqpPurchaseTaskModel.documentList,(function(t,i){return a("v-layout",{key:i,attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs10:""}},[a("fileUploader",{ref:"uploadFile",refInFor:!0,attrs:{label:"上传附件",multiple:!1,fileNames:t.document&&t.document.dname,uploadBase64:!1,userVersion:t},on:{formData:e.getFormData},model:{value:t.document,callback:function(a){e.$set(t,"document",a)},expression:"doc.document"}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-icon",{on:{click:function(t){return e.eqpPurchaseTaskModel.documentList.splice(i,1)}}},[e._v("delete")])],1)],1)}))],2),a("br"),a("v-flex",{attrs:{xs12:""}},[e._v("设备信息")]),a("v-flex",{attrs:{xs4:""}},[a("v-combobox",{attrs:{label:"设备名称",items:e.equipmentDirectoryList,"item-text":"nameAndModel","item-value":"id",rules:[function(e){return!!e||"必填项"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                        设备名称 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.equipmentDirectory,callback:function(t){e.equipmentDirectory=t},expression:"equipmentDirectory"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-combobox",{attrs:{label:"设备类型",disabled:e.isDisabled,items:e.typeList,"item-text":"dname","item-value":"id",rules:[function(e){return!!e||"必填项"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                        设备类型 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.eqpPurchaseTaskModel.type,callback:function(t){e.$set(e.eqpPurchaseTaskModel,"type",t)},expression:"eqpPurchaseTaskModel.type"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{disabled:e.isDisabled,label:"规格型号",rules:[function(e){return!!e||"必填项"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                        规格型号 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.eqpPurchaseTaskModel.model,callback:function(t){e.$set(e.eqpPurchaseTaskModel,"model",t)},expression:"eqpPurchaseTaskModel.model"}})],1)],1)],1)],1)},n=[],r=(a("bada"),a("1d53")),s=a("1d18"),l=a("d685"),o=a("a1de"),c=a("a7fe"),u=a("6bf2"),d=a.n(u),p={name:"eqPurchaseDetail",data:function(){return{today:d()(new Date).format("YYYY-MM-DD"),valid:!0,test:"",isDisabled:!1,equipmentDirectoryList:[],equipmentDirectory:"",typeList:[],item:{assignName:"",selectAssign:[]},error2:!1,errorHints2:""}},watch:{equipmentDirectory:{handler:function(e,t){if(e){var a=this.equipmentDirectoryList.filter((function(t){return t.id===e.id}));a.length>0?(this.type=a[0].eType,this.eqpPurchaseTaskModel.type=a[0].eType,this.eqpPurchaseTaskModel.model=a[0].model,this.eqpPurchaseTaskModel.equipmentDirectory=a[0].id,this.isDisabled=!0):(this.eqpPurchaseTaskModel.type="",this.eqpPurchaseTaskModel.model="",this.eqpPurchaseTaskModel.equipmentDirectory=e,this.isDisabled=!1)}else this.eqpPurchaseTaskModel.type="",this.eqpPurchaseTaskModel.model="",this.isDisabled=!1}},type:{handler:function(e,t){if(e){var a=this.typeList.filter((function(t){return t.id===e.id}));a.length>0?this.eqpPurchaseTaskModel.type=a[0].dvalue:this.eqpPurchaseTaskModel.type=""}else this.eqpPurchaseTaskModel.type=""}},"eqpPurchaseTaskModel.equipmentDirectory":function(e){var t=this;e&&this.$Server.queryAll((new l["a"]).__name,{},{all:"all"}).then((function(a){t.equipmentDirectoryList=a.datas;var i=a.datas.find((function(t){return t.id===e}));t.equipmentDirectory=i||""}))}},components:{datePicker:r["a"],selectUser:s["a"],fileUploader:o["a"]},created:function(){var e=this;e.$Server.queryAll((new c["a"]).__name,null,{dname:"设备类型"}).then((function(t){e.typeList=t.datas}))},methods:{validate:function(){return!!this.$refs.form.validate()},changeValue:function(e){e.length>0&&(this.eqpPurchaseTaskModel.applicant=e[0].id,this.eqpPurchaseTaskModel.applicantName=e[0].uname)},getFormData:function(){}},props:["eqpPurchaseTaskModel"]},m=p,f=a("6691"),v=Object(f["a"])(m,i,n,!1,null,null,null);t["a"]=v.exports},c339:function(e,t,a){},c4e7:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAA6CAYAAACNvRgtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjAxRDJBMUU3QjFBRDExRTk5NjI5QjRGODRCODc4NjQ1IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAxRDJBMUU4QjFBRDExRTk5NjI5QjRGODRCODc4NjQ1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDFEMkExRTVCMUFEMTFFOTk2MjlCNEY4NEI4Nzg2NDUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDFEMkExRTZCMUFEMTFFOTk2MjlCNEY4NEI4Nzg2NDUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5HXM3MAAAAYUlEQVR42mL8//8/Az7Asnz5cpySkZGRDEwMBACyAk8gfgbFntgUzAViSSiei00BMmDEpiAFiF8A8VMgTob7AknBNqjxOB1J0Bej3hz15qg3R7056s1Rb+LyJiOhihUgwADG90LvOIB79QAAAABJRU5ErkJggg=="},c4ed:function(e,t,a){},c9f1:function(e,t,a){},ccbb:function(e,t,a){},ccfe:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""}},[a("p",{staticStyle:{"font-weight":"bold"}},[e._v("基本信息")]),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs4:"",md4:""}},[a("v-text-field",{attrs:{rules:[function(e){return!e||/^[\w|-]+$/.test(e)||"只能是数字,字母,下划线"}],label:"调拨单编号"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              调拨单编号\n            ")]},proxy:!0}]),model:{value:e.item.allocateCode,callback:function(t){e.$set(e.item,"allocateCode",t)},expression:"item.allocateCode"}})],1),a("v-flex",{attrs:{xs4:""}},[a("datePicker",{attrs:{label:"最迟调拨日期",required:!0,rules:[function(e){return e&&""!=e||"必填项"},function(t){return new Date(t)>=new Date(e.today)||"截至时间不能小于当前时间"}]},model:{value:e.item.deadline,callback:function(t){e.$set(e.item,"deadline",t)},expression:"item.deadline"}})],1),a("v-flex",{attrs:{xs4:"",md4:""}},[a("selectUser",{ref:"selectUser",attrs:{value:e.item.applicantName,required:!0,label:"申请人",multiple:!1,initselect:e.item.userViewModel}})],1),a("v-flex",{attrs:{xs4:"",md4:""}},[a("treeCombo",{ref:"treeCombo3",attrs:{require:!0,Source:e.organizationList,MultipleSelect:!1,label:"需求部门",independentCheck:!1,independentSingleCheck:!0},model:{value:e.item.demandDepartment,callback:function(t){e.$set(e.item,"demandDepartment",t)},expression:"item.demandDepartment"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"调拨原因"},model:{value:e.item.reason,callback:function(t){e.$set(e.item,"reason",t)},expression:"item.reason"}})],1),a("v-flex",{attrs:{xs12:""}},[a("span",{staticStyle:{"font-weight":"bold",width:"100%","padding-top":"20px"}},[e._v("上传附件:")]),a("v-icon",{on:{click:function(t){return e.addUpload()}}},[e._v("add")]),a("v-icon",{on:{click:function(t){return e.removeUpload()}}},[e._v("remove")])],1)],1),e._l(e.item.allocateDocumentList,(function(t,i){return a("v-layout",{key:t.id,style:e.selectDocument.includes(t)?"background: #E3F2FD":"",attrs:{row:"",wrap:""},on:{click:function(a){return e.getClick(t,i)}}},[a("fileUploader",{ref:"uploadFile",refInFor:!0,attrs:{label:"上传附件",multiple:!1,fileNames:t.documentViewModel.dname,uploadBase64:!1,userVersion:t},on:{formData:e.getFormData},model:{value:t.documentViewModel,callback:function(a){e.$set(t,"documentViewModel",a)},expression:"doc.documentViewModel"}})],1)})),a("div",{staticClass:"line"}),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("span",{staticStyle:{"font-weight":"bold",width:"100%","padding-top":"20px"}},[e._v("设备信息:")]),a("v-icon",{on:{click:function(t){return e.addEquipment()}}},[e._v("add")]),a("v-icon",{on:{click:function(t){return e.removeEquipment()}}},[e._v("remove")])],1),a("v-flex",{attrs:{xs12:""}},[a("simpleDataTable",{ref:"childDataTable",attrs:{headers:e.headers,hideHeaders:!1,sort:!0,items:e.item.equipmentList,allowActive:!0,hideOperation:!0}})],1)],1)],2)],1),a("EquipmentModal",{attrs:{IsShow:e.IsShow,equipments:e.item.equipmentList},on:{result:e.getResult,equipmentModalClosed:function(t){return e.equipmentModalClosed()},equipmentModalComfirmed:function(t){return e.equipmentModalComfirmed()}}})],1)},n=[],r=(a("4634"),a("ef3e")),s=a("1d18"),l=a("a1de"),o=a("d5b3"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"1000px",persistent:!0,scrollable:""},model:{value:e.IsShow,callback:function(t){e.IsShow=t},expression:"IsShow"}},[a("v-card",[a("v-card-title",{staticClass:"primary"},[a("span",{staticClass:"headline",staticStyle:{color:"#fff"}},[e._v(e._s(e.title))])]),a("v-card-text",[a("v-container",{staticStyle:{padding:"0"},attrs:{"grid-list-md":"","text-md-center":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("treeCombo",{ref:"treeCombo",attrs:{Source:e.dataSource,MultipleSelect:!1,label:"工厂产线架构",independentCheck:!1,independentSingleCheck:!0},model:{value:e.orgList,callback:function(t){e.orgList=t},expression:"orgList"}})],1),a("v-flex",{attrs:{xs12:"",ms2:"",md2:""}},[a("v-select",{attrs:{items:e.equipType,label:"设备类型","item-value":"dvalue","item-text":"dname",clearable:"","single-line":"",multiple:""},model:{value:e.dvalues,callback:function(t){e.dvalues=t},expression:"dvalues"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-text-field",{attrs:{label:"设备编号","single-line":""},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-text-field",{attrs:{label:"设备名称","single-line":""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("v-flex",{attrs:{xs1:""}},[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(t){return e.Search()}}},[e._v("查询")])],1),a("v-flex",{attrs:{xs2:""}},[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:"","d-flex":""},on:{click:function(t){return e.clearSearch()}}},[e._v("清空查询")])],1)],1)],1),a("dataTable",{ref:"childDataTable",attrs:{headers:e.headers,sort:!0,DataSource:e.equipDataSource,hideOperation:!0,formatFields:e.FormatFields,total:e.total},on:{initialize:e.initialize}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{"margin-right":"30px"},attrs:{color:"primary"},on:{click:function(t){return e.equipmentModalComfirmed()}}},[e._v("确定")]),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.equipmentModalClosed()}}},[e._v("取消")])],1)],1)],1)},u=[],d=(a("7cfd"),a("f05f")),p=a("f19a"),m=a("7c02"),f=a("a7fe"),v=a("4027"),h=a("8333"),b=(a("9ee5"),new h["a"](new m["a"])),g={name:"equipmentModal",data:function(){return{title:"选择设备",equipmentModal:{},equipType:[],dvalues:[],code:"",name:"",orgList:"",dataSource:[],DataSource:[],headers:b.formatGridHeader(),totalDatas:1,FormatFields:b.getFormatFields(),total:1,currentparams:{}}},mounted:function(){this.init(),this.headers.unshift({text:"序号",align:"center"})},computed:{equipDataSource:function(){return this.equipments,this.DataSource}},methods:{initialize:function(e){var t=this;e&&e.page||(e=this.$refs.childDataTable.getPagination());var a=[0,2];this.$Server.queryAll((new m["a"]).__name,{page:e.page,rowsPerPage:e.rowsPerPage},{name:this.name,code:this.code,types:this.dvalues,model:this.model,equipmentPosition:this.orgList?this.orgList[0]:"",deleted:"false",statusList:a}).then((function(e){t.DataSource=e.datas,t.total=e.page.total}))},equipmentModalClosed:function(){this.$emit("equipmentModalClosed"),this.init()},equipmentModalComfirmed:function(){this.$refs.childDataTable.getCheckItems().length<=0?o["a"].alert("请选中需要确定的项"):(this.$emit("result",this.$refs.childDataTable.getCheckItems()),this.$emit("equipmentModalComfirmed"),this.init(),this.$refs.childDataTable.unCheckItems())},init:function(){var e=this;e.equipmentModal={},this.equipmentModal=new m["a"],this.$Server.queryAll((new f["a"]).__name,{},{dname:"设备类型"}).then((function(t){e.equipType=t.datas})),this.$Server.queryAll((new v["a"]).__name,{},null).then((function(t){e.dataSource=t.datas}))},Search:function(){var e=this.$refs.childDataTable.getPagination();1==e.page?this.initialize():this.$refs.childDataTable.setPage(1)},clearSearch:function(){this.dvalues=[],this.code="",this.name="",this.orgList=[],this.$refs.treeCombo.setActiveVaules(),this.initialize()}},components:{treeCombo:p["a"],dataTable:d["a"]},props:["IsShow","equipments"]},x=g,y=a("6691"),k=Object(y["a"])(x,c,u,!1,null,null,null),S=k.exports,_=a("1d53"),w=a("6bf2"),D=a.n(w),T={name:"EqpAllocateTaskDetail",data:function(){return{valid:!0,rules:{required:function(e){return!!e||"必填项"}},today:D()(new Date).format("YYYY-MM-DD"),exportDdc:[],organizationList:[],equipments:[],departments:[],equipment:[],selectEquipments:[],headers:[{text:"设备编号",value:"code",align:"center",sortable:!1},{text:"设备名称",value:"name",align:"center",sortable:!1},{text:"规格型号",value:"model",align:"center",sortable:!1},{text:"设备类型",value:"typeChinese",align:"center",sortable:!1},{text:"使用部门",value:"usedDepartName",align:"center",sortable:!1}],IsShow:!1,selectDocument:[],deleteIndex:""}},props:["item"],components:{selectUser:s["a"],EquipmentModal:S,fileUploader:l["a"],simpleDataTable:r["a"],treeCombo:p["a"],datePicker:_["a"]},computed:{},mounted:function(){this.init()},methods:{init:function(){var e=this;this.$Server.queryAll("Organization").then((function(t){e.organizationList=t.datas}))},validate:function(){var e=!0;if(this.item.allocateDocumentList&&this.item.allocateDocumentList.forEach((function(t){null==t||null!=t.documentViewModel&&""!=t.documentViewModel||(e=!1)})),0==e)return o["a"].alert("请选择上传文件或者删除当前文件选项列"),!1;if(1==this.$refs.form.validate()){Array.isArray(this.item.demandDepartment)&&this.item.demandDepartment.length>0&&(this.item.demandDepartment=this.item.demandDepartment[0]);var t=this.$refs.selectUser.getselectUserList();t&&t.length>0&&(this.item.userViewModel=this.$refs.selectUser.getselectUserList()[0],this.item.applicant=this.$refs.selectUser.getselectUserList()[0].id);var a=this.item.equipmentList;return!(null==a||a&&0==a.length)||(o["a"].alert("请选择调拨的设备"),!1)}return!1},addUpload:function(){this.item.allocateDocumentList?this.item.allocateDocumentList.push({documentViewModel:{}}):this.item.allocateDocumentList=[{documentViewModel:{}}]},removeUpload:function(){var e=this;this.selectDocument.length>0?e.item.allocateDocumentList.length>0&&e.item.allocateDocumentList.splice(this.deleteIndex,1):o["a"].alert("选择一个需要删除的位置")},getClick:function(e,t){this.selectDocument=[],this.selectDocument.push(e),this.deleteIndex=t},equipmentModalClosed:function(){this.IsShow=!1},equipmentModalComfirmed:function(){this.IsShow=!1},getFormData:function(){},addEquipment:function(){this.IsShow=!0},removeEquipment:function(){var e=this;if(0==this.$refs.childDataTable.getCheckItems().length)o["a"].alert("选择要删除的设备");else{var t=this.$refs.childDataTable.getCheckItems();t.forEach((function(t){e.item.equipmentList=e.item.equipmentList.filter((function(e){return e.id!=t.id}))}))}},getResult:function(e){var t=this;e&&e.length>0&&e.forEach((function(e){var a=t.item.equipmentList.filter((function(t){return t.id&&t.id==e.id}));a&&a.length>0||t.item.equipmentList.push(e)}))}}},C=T,I=(a("7677"),Object(y["a"])(C,i,n,!1,null,"eba7bddc",null));t["a"]=I.exports},ce16:function(e,t,a){},ce72:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"headline",attrs:{xs12:""}},[e._v("基本信息:")]),a("v-flex",{attrs:{xs4:"",md4:""}},[a("v-text-field",{attrs:{rules:[function(e){return!e||/^[\w|-]+$/.test(e)||"只能是数字,字母,下划线"}],label:"工单编号:"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              工单编号:\n            ")]},proxy:!0}]),model:{value:e.item.code,callback:function(t){e.$set(e.item,"code",t)},expression:"item.code"}})],1),a("v-flex",{attrs:{xs4:"",md4:""}},[a("selectUser",{ref:"selectUser",attrs:{value:e.item.applicantName,required:!0,label:"报修人",multiple:!1,initselect:e.item.userViewModel}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-datetime-picker",{attrs:{label:"报修时间",clearText:"",okText:"确定",rules:[function(e){return!!e||"必填项"}],prependIcon:"star",model:"String",locale:"zh-cn"},model:{value:e.item.reportTime,callback:function(t){e.$set(e.item,"reportTime",t)},expression:"item.reportTime"}})],1),a("v-flex",{attrs:{xs4:"",md4:""}},[a("treeView",{ref:"treeView",attrs:{independentCheck:!0,Source:e.equipments,MultipleSelect:!1,label:"设备名称",require:!0,independentSingleCheck:!0,"return-object":"",disabled:"true"==e.isRepair},on:{input:function(t){return e.changePosition(e.item.equipmentID)}},model:{value:e.item.equipmentID,callback:function(t){e.$set(e.item,"equipmentID",t)},expression:"item.equipmentID"}})],1),a("v-flex",{attrs:{xs8:"",md8:""}},[a("v-text-field",{attrs:{label:"设备位置:",disabled:""},model:{value:e.item.equipmentPosition,callback:function(t){e.$set(e.item,"equipmentPosition",t)},expression:"item.equipmentPosition"}})],1),a("v-flex",{attrs:{xs4:"",md4:""}},[a("v-select",{attrs:{items:e.faultTypeList,"item-text":"dname","item-value":"dvalue",rules:[function(e){return!!e||"必填项"}],"return-object":""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              故障类型: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.item.faultType,callback:function(t){e.$set(e.item,"faultType",t)},expression:"item.faultType"}})],1),a("v-flex",{attrs:{xs8:"",md8:""}},[a("v-text-field",{attrs:{label:"故障位置:"},model:{value:e.item.faultPosition,callback:function(t){e.$set(e.item,"faultPosition",t)},expression:"item.faultPosition"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"故障描述："},model:{value:e.item.faultDescription,callback:function(t){e.$set(e.item,"faultDescription",t)},expression:"item.faultDescription"}})],1),a("v-flex",{attrs:{xs4:"",md4:""}},[a("v-select",{attrs:{items:e.urgencyList,"item-value":"dvalue","item-text":"dname",rules:[function(e){return!!e||"必填项"}],"return-object":""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              紧急程度: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.item.urgency,callback:function(t){e.$set(e.item,"urgency",t)},expression:"item.urgency"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"紧急备注："},model:{value:e.item.urgentDescription,callback:function(t){e.$set(e.item,"urgentDescription",t)},expression:"item.urgentDescription"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("span",{staticStyle:{"font-weight":"bold",width:"100%","padding-top":"20px"}},[e._v("上传附件:")]),a("v-icon",{on:{click:function(t){return e.addUpload()}}},[e._v("add")]),a("v-icon",{on:{click:function(t){return e.removeUpload()}}},[e._v("remove")])],1)],1),e._l(e.item.documentList,(function(t,i){return a("v-layout",{key:t.id,style:e.selectLocation.includes(t)?"background: #E3F2FD":"",attrs:{row:"",wrap:""},on:{click:function(a){return e.getClick(t,i)}}},[a("fileUploader",{ref:"uploadFile",refInFor:!0,attrs:{label:"上传附件",multiple:!1,fileNames:t.document&&t.document.dname,uploadBase64:!1,userVersion:t},on:{formData:e.getFormData},model:{value:t.document,callback:function(a){e.$set(t,"document",a)},expression:"doc.document"}})],1)}))],2)],1)],1)],1)],1)},n=[],r=(a("7cfd"),a("40c5"),a("4634"),a("1d18")),s=a("a1de"),l=a("d5b3"),o=a("1d53"),c=a("f19a"),u={name:"repairTaskDetail",data:function(){return{valid:!0,timeModal:!1,rules:{required:function(e){return!!e||"必填项"}},equipmentList:[],faultTypeList:[],urgencyList:[],selectLocation:[],deleteIndex:"",timeWorkModal:!1,timeWorkPlanModal:!1}},props:["item","isRepair"],components:{selectUser:r["a"],fileUploader:s["a"],datePicker:o["a"],treeView:c["a"]},watch:{item:{handler:function(e){e&&this.changePosition(e.equipmentID)},deep:!0}},computed:{equipments:function(){var e=[],t=[];if(this.equipmentList.forEach((function(a){void 0==a.typeChinese||null==a.typeChinese||0==a.typeChinese.length?(a.typeChinese="无",e.push(a)):e.push(a),-1==t.indexOf(a.typeChinese)&&(void 0==a.typeChinese||null==a.typeChinese||0==a.typeChinese.length?t.includes("无")||t.push("无"):t.push(a.typeChinese))})),t.forEach((function(t,a){e.push({name:t,id:a+1,parentId:-1,isshow:!1})})),void 0==this.equipmentList||null==this.equipmentList||0==this.equipmentList.length);else{this.equipmentList.forEach((function(e){e.name=e.codeName}));for(var a=0;a<e.length;a++)for(var i=0;i<e.length;i++)if(e[a].typeChinese==e[i].name){e[a].parentId=e[i].id;break}}return e}},created:function(){var e=this;e.$Server.queryAll("Datadict",{},{dname:"紧急程度"}).then((function(t){e.urgencyList=t.datas})),e.$Server.queryAll("Datadict",{},{dname:"故障类型"}).then((function(t){e.faultTypeList=t.datas})),e.$Server.queryAll("Equipment",null,{deleted:!1}).then((function(t){e.equipmentList=t.datas}))},methods:{validate:function(){if(1==this.$refs.form.validate()){Array.isArray(this.item.equipmentID)&&(this.item.equipmentID=this.item.equipmentID[0]);var e=this.$refs.selectUser.getselectUserList();return e&&e.length>0&&(this.item.userViewModel=this.$refs.selectUser.getselectUserList()[0],this.item.applicant=this.$refs.selectUser.getselectUserList()[0].id),!0}return!1},resetVaildate:function(){this.$refs.form.resetValidation()},getFormData:function(){},changePosition:function(e){this.item.equipmentPosition=this.equipmentList.filter((function(t){return t.id==e})).length>0?this.equipmentList.filter((function(t){return t.id==e}))[0].factoryName:""},getClick:function(e,t){this.selectLocation=[],this.selectLocation.push(e),this.deleteIndex=t},addUpload:function(){this.item.documentList.push({document:{}})},removeUpload:function(){var e=this;e.selectLocation.length>0?e.item.documentList.length>0&&e.item.documentList.splice(e.deleteIndex,1):l["a"].alert("选择一个需要删除的位置")}}},d=u,p=(a("0446"),a("6691")),m=Object(p["a"])(d,i,n,!1,null,"15b46359",null);t["a"]=m.exports},ceaa:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{staticStyle:{padding:"0 20px"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("p",{staticClass:"title"},[e._v("基本信息")])]),a("v-flex",{attrs:{xs3:""}},[e._v("\n                申请单编号:"),a("span",[e._v(e._s(e.item.code))])]),a("v-flex",{attrs:{xs3:""}},[e._v("\n                发起人:"),a("span",[e._v(e._s(e.item.initiatorName))])]),a("v-flex",{attrs:{xs3:""}},[e._v("\n                负责人:"),a("span",[e._v(e._s(e.item.assignedUserName))])]),a("v-flex",{attrs:{xs3:""}},[e._v("\n                申请时间:"),a("span",[e._v(e._s(e.item.createdTime))])]),a("v-flex",{attrs:{xs3:""}},[e._v("\n                问题来源:"),a("span",[e._v(e._s(e.item.source&&e.item.source.dname))])]),a("v-flex",{attrs:{xs3:""}},[e._v("\n                计划开始时间:"),a("span",[e._v(e._s(e.item.startTime))])]),a("v-flex",{attrs:{xs3:""}},[e._v("\n                计划结束时间:"),a("span",[e._v(e._s(e.item.endTime))])]),a("v-flex",{attrs:{xs3:""}},[e._v("\n                改善类型:"),a("span",[e._v(e._s(e.item.improveType&&e.item.improveType.dname))])]),a("v-flex",{attrs:{xs12:""}},[e._v("\n                改善设备:"),a("span",[e._v(e._s(e.item.equipmentNamesList))])]),a("v-flex",{attrs:{xs12:""}},[e._v("\n               改善主题:"),a("span",[e._v(e._s(e.item.subject))])]),a("v-flex",{attrs:{xs12:""}},[e._v("\n               改善原因:"),a("span",[e._v(e._s(e.item.reason))])]),e.item.status&&"已取消"==e.item.status.dname?a("v-flex",{staticStyle:{"margin-top":"15px"},attrs:{xs12:""}},[e._v("\n               取消原因:"),a("span",[e._v(e._s(e.item.cancelReason))])]):e._e()],1)],1)],1)},n=[],r={name:"improveApplySee",data:function(){return{}},props:["item"],methods:{}},s=r,l=a("6691"),o=Object(l["a"])(s,i,n,!1,null,null,null);t["a"]=o.exports},cf9e:function(e,t,a){},d058:function(e,t,a){"use strict";var i=a("427a"),n=a.n(i);n.a},d0da:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[e._v("基本信息")]),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"改善单编号",rules:[function(e){return!e||/^\w+|-$/.test(e)||"只能是数字,字母,下划线"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              改善单编号\n            ")]},proxy:!0}]),model:{value:e.item.code,callback:function(t){e.$set(e.item,"code",t)},expression:"item.code"}})],1),a("v-flex",{attrs:{xs4:""}},[a("selectUser",{ref:"selectUser1",attrs:{value:e.item.initiatorName,required:!0,label:"发起人",multiple:!1,initselect:e.item.userViewModel1},on:{changeValue:e.changeValue1}})],1),a("v-flex",{attrs:{xs4:""}},[a("selectUser",{ref:"selectUser2",attrs:{value:e.item.assignedUserName,required:!0,label:"负责人",multiple:!1,initselect:e.item.userViewModel2},on:{changeValue:e.changeValue2}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-select",{attrs:{items:e.sourceList,label:"问题来源","item-text":"dname","return-object":"",rules:[function(e){return!!e||"必填项"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              问题来源: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.item.source,callback:function(t){e.$set(e.item,"source",t)},expression:"item.source"}})],1),a("v-flex",{attrs:{xs4:""}},[a("datePicker",{attrs:{label:"计划开始时间",required:!0,rules:[function(e){return e&&""!=e||"必填项"}]},model:{value:e.item.startTime,callback:function(t){e.$set(e.item,"startTime",t)},expression:"item.startTime"}})],1),a("v-flex",{attrs:{xs4:""}},[a("datePicker",{attrs:{label:"计划结束时间",required:!0,rules:[function(e){return e&&""!=e||"必填项"}]},model:{value:e.item.endTime,callback:function(t){e.$set(e.item,"endTime",t)},expression:"item.endTime"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-select",{attrs:{items:e.improveTypeList,label:"改善类型","item-text":"dname","return-object":"",rules:[function(e){return!!e||"必填项"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              改善类型: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.item.improveType,callback:function(t){e.$set(e.item,"improveType",t)},expression:"item.improveType"}})],1),a("v-flex",{attrs:{xs8:""}},[a("treeView",{ref:"treeView",attrs:{independentCheck:!0,Source:e.equipmentList,MultipleSelect:!1,label:"改善设备",require:!0,independentSingleCheck:!1,"return-object":""},model:{value:e.item.equipmentList,callback:function(t){e.$set(e.item,"equipmentList",t)},expression:"item.equipmentList"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"改善主题",rules:[function(e){return!!e||"必填项"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              改善主题: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.item.subject,callback:function(t){e.$set(e.item,"subject",t)},expression:"item.subject"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{rules:[function(e){return!!e||"必填项"}],label:"改善原因"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              改善原因: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.item.reason,callback:function(t){e.$set(e.item,"reason",t)},expression:"item.reason"}})],1)],1)],1)],1)],1)},n=[],r=(a("bada"),a("7cfd"),a("40c5"),a("4634"),a("f19a")),s=a("1d53"),l=a("1d18"),o=a("d5b3"),c=a("2c75"),u=a("9ee5"),d=a("8333"),p=new d["a"](new c["a"]),m={name:"improveApplyDetail",data:function(){return{equipmentDirectoryList:[],valid:!0,inventoryTypes:[],childInventoryTypes:[],IsSelectShow:!1,IsShowForSpareparts:!1,sort:!0,sourceList:[],improveTypeList:[],total:0,DataSource:[],headers:[{text:"序号",align:"center",sortable:!1},{text:"备件编号",value:"code",align:"center",sortable:!1},{text:"备件名称",value:"name",align:"center",sortable:!1},{text:"规格型号",value:"model",align:"center",sortable:!1},{text:"类型",value:"type",align:"center",sortable:!1},{text:"库存数量",value:"inventoryStr",align:"center",sortable:!1}],equipmentList:[],errorHints2:"最迟到货时间不能小于当前时间",test:new Date,isDisabled:!1,equipmentDirectory:"",test1:"",test2:"",test3:"",test4:"",selectedIndex:-1,sparePartsList:[]}},components:{datePicker:s["a"],selectUser:l["a"],treeView:r["a"]},watch:{item:{handler:function(e,t){var a=this;e.rsrtsList&&e.rsrtsList.forEach((function(e,t){e.storageLocationIDList=a.storageLocationIDList.filter((function(t){return t.sparePartsID==e.sparePartsID}))}))},deep:!0},equipmentDirectoryList:{handler:function(e,t){var a=[],i=[];if(this.equipmentDirectoryList.forEach((function(e){void 0==e.typeChinese||null==e.typeChinese||0==e.typeChinese.length?(e.typeChinese="无",a.push(e)):a.push(e),-1==i.indexOf(e.typeChinese)&&(void 0==e.typeChinese||null==e.typeChinese||0==e.typeChinese.length?i.includes("无")||i.push("无"):i.push(e.typeChinese))})),i.forEach((function(e,t){a.push({name:e,id:t+1,parentId:-1,isshow:!1})})),void 0==this.equipmentDirectoryList||null==this.equipmentDirectoryList||0==this.equipmentDirectoryList.length);else{this.equipmentDirectoryList.forEach((function(e){e.name=e.codeName}));for(var n=0;n<a.length;n++)for(var r=0;r<a.length;r++)if(a[n].typeChinese==a[r].name){a[n].parentId=a[r].id;break}}this.equipmentList=JSON.parse(JSON.stringify(a))}}},created:function(){},computed:{formatFields:function(){return p.getFormatFields()},documentName:function(){return this.item.document&&null!=this.item.document.dname?this.item.document.dname+this.item.documentName.substring(this.item.documentName.lastIndexOf(".")):""}},props:["item"],methods:{init:function(){var e=this;e.$Server.queryAll("Datadict",{},{dname:"问题来源"}).then((function(t){e.sourceList=t.datas}),(function(e){})),e.$Server.queryAll("Datadict",{},{dname:"改善类型"}).then((function(t){e.improveTypeList=t.datas}),(function(e){})),e.$Server.queryAll((new u["a"]).__name,null,{deleted:!1}).then((function(t){e.equipmentDirectoryList=t.datas}))},addRowSpareParts:function(){this.item.rsrtsList.push({})},deleteSpareparts:function(e){e>=0?(this.item.rsrtsList.splice(e,1),this.selectedIndex=-1):o["a"].alert("请选择要删除的项")},spareRowSelect:function(e){e!==this.selectedIndex&&(this.selectedIndex=e)},handleSelectChange:function(e,t){t.storageLocationIDList=this.storageLocationIDList.filter((function(e){return e.sparePartsID==t.sparePartsID}));var a=this.sparePartsList.find((function(e){return e.id==t.sparePartsID}));a&&(t.sparePartsName=a.name,t.sparePartsModel=a.model)},validate:function(){return 1==this.$refs.form.validate()},resetValid:function(){this.$refs.form.resetValidation()},getFormData:function(e){},addSpareparts:function(){var e=this;e.IsShowForSpareparts=!0},removeSpareparts:function(){var e=this,t=this.$refs.childDataTable.getCheckItems();0===t.length?o["a"].alert("请选择删除的备件"):t.forEach((function(t){e.item.sparePartsList.forEach((function(e,a,i){e.code==t.code&&i.splice(a,1)}))}))},doSearch:function(){var e=this.$refs.childDataTableForSpareparts.getPagination();1==e.page?this.initTable(e):this.$refs.childDataTableForSpareparts.setPage(1)},clearMessage:function(){this.searchfx="",this.doSearch()},initTable:function(e){var t=this;e&&e.page||(e=this.$refs.childDataTableForSpareparts.getPagination()),t.$Server.queryAll(p.getModelName(),{page:e.page,rowsPerPage:e.rowsPerPage},{nameOrCode:t.searchfx?t.searchfx:""}).then((function(e){t.$refs.childDataTableForSpareparts.unCheckItems(),t.DataSource=e.datas,t.total=e.page.total}),(function(e){}))},modalComfirmedForSpareparts:function(){var e=this,t=e.$refs.childDataTableForSpareparts.getCheckItems();t&&t.forEach((function(t){for(var a=!0,i=0;i<e.item.sparePartsList.length;i++)if(t.code==e.item.sparePartsList[i].code){a=!1;break}a&&e.item.sparePartsList.push(Object.assign({},t))})),e.IsShowForSpareparts=!1,e.clearMessage()},modalClosedForSpareparts:function(){this.IsShowForSpareparts=!1,this.clearMessage()},inventoryTypesChange:function(e){},changeValue1:function(e){e.length>0&&(this.item.initiatorName=e[0].uname,this.item.initiator=e[0].id)},changeValue2:function(e){e.length>0&&(this.item.assignedUserName=e[0].uname,this.item.assignedUser=e[0].id)}},mounted:function(){this.init()}},f=m,v=(a("768e"),a("6691")),h=Object(v["a"])(f,i,n,!1,null,"0eb0a8a7",null);t["a"]=h.exports},d0ef:function(e,t,a){},d1ef:function(e,t,a){"use strict";var i=a("d0ef"),n=a.n(i);n.a},d2db:function(e,t,a){},d2fa:function(e,t,a){"use strict";var i=a("c9f1"),n=a.n(i);n.a},d4e7:function(e,t,a){e.exports=a.p+"img/logo.cf14a81f.png"},d5b3:function(e,t,a){"use strict";var i=a("6e6d"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{position:"fixed",top:"200px",width:"100%","text-align":"center","z-index":"999"}},[a("v-dialog",{attrs:{"max-width":"500",light:"","hide-overlay":e.hideOverlay},model:{value:e.IsAlert,callback:function(t){e.IsAlert=t},expression:"IsAlert"}},[a("v-card",[a("v-card-title",{class:e.setClass,staticStyle:{padding:"15px 0px 15px 16px",color:"#FFFFFF","font-size":"16px"}},[a("div",{staticStyle:{"padding-left":"40px",width:"100%"}},[a("div",{staticStyle:{float:"left",width:"40px","margin-left":"-40px"}},[a("v-icon",{staticStyle:{color:"rgba(0,0,0,0.54)","font-size":"24px"},attrs:{dark:"",left:""}},[e._v(e._s(e.icon))])],1),a("div",{staticStyle:{float:"left",width:"100%"}},[a("div",{staticStyle:{"padding-right":"40px",width:"100%"}},[a("div",{staticStyle:{float:"left",width:"100%"}},[e._v(e._s(e.alertMessage))]),a("div",{staticStyle:{float:"left",width:"40px","margin-right":"-40px"}},[a("v-icon",{staticStyle:{color:"rgba(0,0,0,0.54)","font-size":"24px"},attrs:{dark:"",left:""},on:{click:function(t){e.IsAlert=!1}}},[e._v("cancel")])],1),a("div",{staticStyle:{clear:"both"}})])]),a("div",{staticStyle:{clear:"both"}})])])],1)],1)],1)},r=[],s={name:"Message",data:function(){return{hideOverlay:!0,icon:"priority_high",IsAlert:!1,alertType:"warning",alertMessage:""}},computed:{setClass:function(){return"success"==this.alertType?(this.icon="check_circle",{dialog_success:!0,selfmessage:!0}):"info"==this.alertType?(this.icon="info",{dialog_info:!0,selfmessage:!0}):"warning"==this.alertType?(this.icon="priority_high",{dialog_warning:!0,selfmessage:!0}):"error"==this.alertType?(this.icon="warning",{dialog_error:!0,selfmessage:!0}):(this.icon="check_circle",{dialog_success:!0,selfmessage:!0})}}},l=s,o=(a("24e3"),a("6691")),c=Object(o["a"])(l,n,r,!1,null,"72c33e6a",null),u=c.exports,d=i["default"].extend(u),p=null;u.alert=function(e,t){void 0===e||null===e?e={alertMessage:""}:"string"!==typeof e&&"number"!==typeof e||(e={alertMessage:e},void 0!=t&&null!=e&&(e.alertType=t)),null==p?(p=new d({data:e}).$mount(),document.body.appendChild(p.$el),i["default"].nextTick((function(){p.IsAlert=!0}))):i["default"].nextTick((function(){p.alertMessage=e.alertMessage,p.alertType=t?e.alertType:"warning",p.IsAlert=!0}))};t["a"]=u},d685:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=new c["a"],p=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","EquipmentDirectory"),Object(o["a"])(Object(s["a"])(a),"ename",d.charField({require:!0,fieldName:"设备名称"})),Object(o["a"])(Object(s["a"])(a),"emodel",d.charField({require:!1,fieldName:"规格型号"})),Object(o["a"])(Object(s["a"])(a),"etype",d.comboBoxField(null,{require:!1,fieldName:"设备类型",comboboxSelect:[{id:0,name:"带锯设备"},{id:1,name:"成型设备"},{id:2,name:"砂光设备"},{id:3,name:"抛光设备"},{id:4,name:"出榫设备"},{id:5,name:"铣槽设备"}]})),a}return Object(l["a"])(t,e),t}(u["a"])},d6e4:function(e,t,a){"use strict";var i=a("ba23"),n=a.n(i);n.a},d712:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=a("d685"),p=new c["a"],m=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","EqpStoppageTask"),Object(o["a"])(Object(s["a"])(a),"stoppageTaskCode",p.charField({require:!0,fieldName:"报修单编号",colspan:"md4",rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"eqpCode",p.charField({editable:!1,fieldName:"设备编号"})),Object(o["a"])(Object(s["a"])(a),"eqpName",p.charField({editable:!1,fieldName:"设备名称"})),Object(o["a"])(Object(s["a"])(a),"stoppageType",p.charField({require:!0,fieldName:"异常类型",format:function(e){if(e)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"description",p.charField({editable:!1,fieldName:"异常描述"})),Object(o["a"])(Object(s["a"])(a),"urgency",p.charField({require:!0,fieldName:"紧急程度",format:function(e){if(e)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"applicantTime",p.dateField({require:!0,fieldName:"报修日期",colspan:"md4",format:function(e){if(e)return e.substring(0,16)}})),Object(o["a"])(Object(s["a"])(a),"applicantName",p.charField({editable:!1,fieldName:"报修人"})),Object(o["a"])(Object(s["a"])(a),"equipment",p.comboBoxField(d["a"],{require:!0,fieldName:"报修设备",bindSource:{value:"id",text:"name"},visible:!1,editable:!1})),Object(o["a"])(Object(s["a"])(a),"status",p.charField({require:!0,fieldName:"任务状态",visible:!1,rules:[function(e){return!!e||"必填项"}],format:function(e){if(e)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"statusName",p.charField({fieldName:"任务状态",editable:!1})),a}return Object(l["a"])(t,e),t}(u["a"])},d9f7:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=(a("20d3"),a("6722")),p=(a("0909"),a("4ff8")),m=new c["a"],f=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","User"),Object(o["a"])(Object(s["a"])(a),"avatar",m.imageField({fieldName:"头像"})),Object(o["a"])(Object(s["a"])(a),"jobNumber",m.charField({require:!0,fieldName:"工号",rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"loginName",m.charField({require:!0,fieldName:"用户名",rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"uname",m.charField({require:!0,fieldName:"姓名",rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"sex",m.boolField({require:!0,fieldName:"性别",boolSelect:[],parms:{type:"0"},format:function(e){if(null!=e)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"phone",m.numberField("int",{fieldName:"电话"})),Object(o["a"])(Object(s["a"])(a),"createdTime",m.charField({require:!0,fieldName:"创建时间",editable:!1,visible:!0})),Object(o["a"])(Object(s["a"])(a),"userStatus",m.boolField({require:!0,fieldName:"用户状态",boolSelect:[],parms:{type:"10"},format:function(e){if(null!=e)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"password",m.charField({require:!0,fieldName:"用户密码",editable:!1,visible:!1})),Object(o["a"])(Object(s["a"])(a),"roles",m.manyToManyField(d["a"],{require:!0,fieldName:"角色",bindSource:{text:"rname",value:"id",parms:{}}})),Object(o["a"])(Object(s["a"])(a),"skills",m.manyToManyField(p["a"],{require:!1,fieldName:"人员技能",bindSource:{text:"sname",value:"id",parms:{}}})),Object(o["a"])(Object(s["a"])(a),"productionId",m.charField({require:!1,editable:!1,visible:!1,fieldName:"所在产线"})),Object(o["a"])(Object(s["a"])(a),"dutyRange",m.charField({require:!1,fieldName:"负责范围",editable:!1,visible:!0})),Object(o["a"])(Object(s["a"])(a),"tpmDuty",m.charField({require:!1,fieldName:"TPM职能",editable:!1,visible:!0})),a}return Object(l["a"])(t,e),t}(u["a"])},dad7:function(e,t,a){"use strict";var i=a("fd4e"),n=a.n(i);n.a},decc:function(e,t,a){"use strict";var i=a("82f6"),n=a.n(i);n.a},dfc4:function(e,t,a){"use strict";var i=a("6e44"),n=a.n(i);n.a},e09c:function(e,t,a){"use strict";var i=a("5c64"),n=a.n(i);n.a},e11a:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md12:""}},[a("v-text-field",{attrs:{rules:[function(e){return!e||/^[\w|-]+$/.test(e)||"只能是数字,字母,下划线"}],label:"报修单编号"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                            报修单编号\n                        ")]},proxy:!0}]),model:{value:e.item.stoppageTaskCode,callback:function(t){e.$set(e.item,"stoppageTaskCode",t)},expression:"item.stoppageTaskCode"}})],1),a("v-flex",{attrs:{xs3:"",md3:""}},[a("treeView",{ref:"treeView",attrs:{independentCheck:!0,Source:e.equipments,MultipleSelect:!1,label:"设备名称",require:!0,independentSingleCheck:!0,"return-object":""},on:{input:function(t){return e.changeEqpSelect()}},model:{value:e.item.equipmentID,callback:function(t){e.$set(e.item,"equipmentID",t)},expression:"item.equipmentID"}})],1),a("v-flex",{attrs:{xs3:"",md3:""}},[a("p",{staticStyle:{"padding-top":"25px",color:"rgba(0,0,0,.87)"}},[e._v("规格型号 "+e._s(e.item.equipment.model))])]),a("v-flex",{attrs:{xs3:"",md3:""}},[a("p",{staticStyle:{"padding-top":"25px",color:"rgba(0,0,0,.87)"}},[e._v("设备类型 "+e._s(e.item.equipment.type.dname))])]),a("v-flex",{attrs:{xs3:"",md3:""}},[a("p",{staticStyle:{"padding-top":"25px",color:"rgba(0,0,0,.87)"}},[e._v("设备位置 "+e._s(e.item.equipment.factoryName))])]),a("v-flex",{attrs:{xs4:"",md4:""}},[a("v-select",{attrs:{items:e.stoppageTypeList,"item-text":"dname",rules:[e.rules.required],"return-object":""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                            异常类型 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.item.stoppageType,callback:function(t){e.$set(e.item,"stoppageType",t)},expression:"item.stoppageType"}})],1),a("v-flex",{attrs:{xs4:"",md4:""}},[a("selectUser",{ref:"selectUser",attrs:{value:e.item.applicantName,required:!0,label:"报修人",multiple:!1,initselect:e.item.userViewModel}})],1),a("v-flex",{attrs:{xs4:"",md4:""}},[a("v-radio-group",{attrs:{row:""},model:{value:e.item.urgency.dvalue,callback:function(t){e.$set(e.item.urgency,"dvalue",t)},expression:"item.urgency.dvalue"}},[a("span",[e._v("紧急程度")]),e._l(e.urgencyList,(function(e){return a("v-radio",{key:e.id,attrs:{label:e.dname,value:e.dvalue}})}))],2)],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"异常描述"},model:{value:e.item.description,callback:function(t){e.$set(e.item,"description",t)},expression:"item.description"}})],1),a("v-flex",{attrs:{xs12:""}},[a("span",{staticStyle:{"font-weight":"bold",width:"100%","padding-top":"20px"}},[e._v("上传附件")]),a("v-icon",{on:{click:function(t){return e.addUpload()}}},[e._v("add")]),a("v-icon",{on:{click:function(t){return e.removeUpload()}}},[e._v("remove")])],1)],1),e._l(e.item.rStoppageTaskDocumentList,(function(t,i){return a("v-layout",{key:t.id,style:e.selectLocation.includes(t)?"background: #E3F2FD":"",attrs:{row:"",wrap:""},on:{click:function(a){return e.getClick(t,i)}}},[a("fileUploader",{ref:"uploadFile",refInFor:!0,attrs:{label:"上传附件",multiple:!1,fileNames:t.documentViewModel.dname,uploadBase64:!1,userVersion:t},on:{formData:e.getFormData},model:{value:t.documentViewModel,callback:function(a){e.$set(t,"documentViewModel",a)},expression:"doc.documentViewModel"}})],1)}))],2)],1)],1)},n=[],r=(a("bada"),a("7cfd"),a("40c5"),a("4634"),a("1d18")),s=a("a1de"),l=a("9ee5"),o=a("f19a"),c=a("d5b3"),u={name:"eqpStoppageTaskDetail",props:["item"],data:function(){return{valid:!0,timeModal:!1,rules:{required:function(e){return!!e||"必填项"}},exportDdc:[],equipmentList:[],stoppageTypeList:[],urgencyList:[],documentList:[],selectLocation:[],deleteIndex:""}},components:{selectUser:r["a"],fileUploader:s["a"],treeView:o["a"]},computed:{equipments:function(){var e=[],t=[];if(this.equipmentList.forEach((function(a){void 0==a.typeChinese||null==a.typeChinese||0==a.typeChinese.length?(a.typeChinese="无",e.push(a)):e.push(a),-1==t.indexOf(a.typeChinese)&&(void 0==a.typeChinese||null==a.typeChinese||0==a.typeChinese.length?t.includes("无")||t.push("无"):t.push(a.typeChinese))})),t.forEach((function(t,a){e.push({name:t,id:a+1,parentId:-1,isshow:!1})})),void 0==this.equipmentList||null==this.equipmentList||0==this.equipmentList.length);else{this.equipmentList.forEach((function(e){e.name=e.codeName}));for(var a=0;a<e.length;a++)for(var i=0;i<e.length;i++)if(e[a].typeChinese==e[i].name){e[a].parentId=e[i].id;break}}return e}},created:function(){var e=this;this.$Server.queryAll((new l["a"]).__name,{},{deleted:!1}).then((function(t){e.equipmentList=t.datas})),this.$Server.queryAll("Datadict",{},{dname:"故障报修异常类型"}).then((function(t){e.stoppageTypeList=t.datas})),this.$Server.queryAll("Datadict",{},{dname:"紧急程度"}).then((function(t){e.urgencyList=t.datas}))},methods:{validate:function(){var e=this;if(0==this.item.equipmentID.length)return c["a"].alert("设备名称选项为必填项"),!1;if(null==this.item.stoppageType.dvalue)return c["a"].alert("异常类型选项为必填项"),!1;if(1==this.$refs.form.validate()){Array.isArray(this.item.equipmentID)&&this.item.equipmentID.length>0&&(this.item.equipmentID=this.item.equipmentID[0]),this.item.documentList=[],this.documentList.forEach((function(t){if(!t.document)return!1;var a=t.document[0],i=a.dname,n=a.docuFile,r=a.newestFileSize,s=a.id,l={dname:i,docuFile:n,newestFileSize:r,id:s};e.item.documentList.push(l)})),this.item.urgency=this.urgencyList.find((function(t){return t.dvalue==e.item.urgency.dvalue}));var t=this.$refs.selectUser.getselectUserList();return t&&t.length>0&&(this.item.applicant=this.$refs.selectUser.getselectUserList()[0].id,this.item.applicantName=this.$refs.selectUser.getselectUserList()[0].uname,this.item.userViewModel=this.$refs.selectUser.getselectUserList()[0]),!0}return!1},changeEqpSelect:function(){var e=this;this.equipmentList.forEach((function(t){e.item.equipmentID[0]==t.id&&(e.item.equipment.model=t.model,e.item.equipment.type=t.type,e.item.equipment.factoryName=t.factoryName)}))},getFormData:function(e){console.log(e)},addUpload:function(){this.item.rStoppageTaskDocumentList.push({documentViewModel:{}})},removeUpload:function(){var e=this;this.selectLocation.length>0?e.item.rStoppageTaskDocumentList.length>0&&e.item.rStoppageTaskDocumentList.splice(this.deleteIndex,1):c["a"].alert("选择一个需要删除的位置")},getClick:function(e,t){this.selectLocation=[],this.selectLocation.push(e),this.deleteIndex=t}}},d=u,p=a("6691"),m=Object(p["a"])(d,i,n,!1,null,"05fa5404",null);t["a"]=m.exports},e530:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=a("3f83"),p=new c["a"],m=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","SparePosition"),Object(o["a"])(Object(s["a"])(a),"storageLocationID",p.comboBoxField(d["a"],{require:!0,fieldName:"备件库位"})),Object(o["a"])(Object(s["a"])(a),"stypeName",p.charField({fieldName:"备件类型"})),Object(o["a"])(Object(s["a"])(a),"inventory",p.charField({require:!0,fieldName:"库存量"})),a}return Object(l["a"])(t,e),t}(u["a"])},e557:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[e._v("基本信息")]),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"购置单编号",rules:[function(e){return!e||/^[\w|-]+$/.test(e)||"只能是数字,字母,下划线"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                            送修单编号\n                        ")]},proxy:!0}]),model:{value:e.item.repairCode,callback:function(t){e.$set(e.item,"repairCode",t)},expression:"item.repairCode"}})],1),a("v-flex",{attrs:{xs4:""}},[a("selectUser",{ref:"selectUser",attrs:{value:e.item.repairUserName,required:!0,label:"送修人",multiple:!1,initselect:e.item.userViewModel},on:{changeValue:e.changeValue}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-select",{attrs:{items:e.repairTypeList,label:"维修类型","item-text":"dname","return-object":"",rules:[function(e){return!!e||"必填项"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                        维修类型 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.item.repairType,callback:function(t){e.$set(e.item,"repairType",t)},expression:"item.repairType"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"送修原因"},model:{value:e.item.reason,callback:function(t){e.$set(e.item,"reason",t)},expression:"item.reason"}})],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-flex",{attrs:{xs12:""}},[a("span",{staticStyle:{"font-weight":"bold",width:"100%"}},[e._v("上传附件:")]),a("v-icon",{on:{click:function(t){return e.addUpload()}}},[e._v("add")])],1),a("v-flex",{attrs:{xs12:""}},e._l(e.item.documentList,(function(t,i){return a("v-layout",{key:t.id,attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs9:""}},[a("fileUploader",{ref:"uploadFile",refInFor:!0,attrs:{label:"上传附件",multiple:!1,fileNames:t.documentViewModel.dname,uploadBase64:!1,userVersion:t},on:{formData:e.getFormData},model:{value:t.documentViewModel,callback:function(a){e.$set(t,"documentViewModel",a)},expression:"doc.documentViewModel"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-icon",{on:{click:function(t){return e.deleteItem(i)}}},[e._v("delete")])],1)],1)})),1)],1)],1),a("v-layout",[a("v-flex",{attrs:{xs12:""}},[e._v("\n                    备件信息：\n                    "),a("v-btn",{staticClass:"btnClass",attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:e.addRowSpareParts}},[a("v-icon",[e._v("\n                            add\n                        ")])],1),a("v-btn",{staticClass:"btnClass",attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){return e.deleteSpareparts(e.selectedIndex)}}},[a("v-icon",[e._v("\n                            remove\n                        ")])],1)],1)],1),e._l(e.item.rsrtsList,(function(t,i){return a("v-layout",{key:i,class:{"box-active":i==e.selectedIndex},on:{click:function(t){return e.spareRowSelect(i)}}},[a("v-flex",{attrs:{xs3:""}},[a("v-select",{attrs:{items:e.sparePartsList,label:"备件编号","item-text":"codeName","item-value":"id",rules:[function(e){return!!e||"必填项"}]},on:{change:function(a){return e.handleSelectChange(t)}},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                        备件编号 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}],null,!0),model:{value:t.sparePartsID,callback:function(a){e.$set(t,"sparePartsID",a)},expression:"rsrtsList.sparePartsID"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-select",{attrs:{items:t.storageLocationIDList,label:"备件位置","item-text":"positionName","item-value":"storageLocationID",rules:[function(t){return e.positionFlag||!!t||"必填项"}]},on:{change:function(a){return e.handleLocationChange(a,t)}},model:{value:t.storageLocationID,callback:function(a){e.$set(t,"storageLocationID",a)},expression:"rsrtsList.storageLocationID"}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-text-field",{attrs:{label:"备件名称",disabled:!0},model:{value:t.sparePartsName,callback:function(a){e.$set(t,"sparePartsName",a)},expression:"rsrtsList.sparePartsName"}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-text-field",{attrs:{label:"规格型号",disabled:!0},model:{value:t.sparePartsModel,callback:function(a){e.$set(t,"sparePartsModel",a)},expression:"rsrtsList.sparePartsModel"}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-text-field",{attrs:{label:"备件数量",type:"number",rules:[function(e){return!("0"===e)||"数量不能为0"},function(t){return e.countFlag||!!t||"数量不能为空"},function(e){return!(t.sparePartsID&&t.storageLocationID&&t.inventory)||e&&e<=t.inventory||"送修数量不能大于"+t.inventory},function(e){return!e||/^(0|[1-9][0-9]*)$/.test(e)||"只能是正整数"}]},on:{input:function(t){e.countFlag=!1}},model:{value:t.receiveCount,callback:function(a){e.$set(t,"receiveCount",a)},expression:"rsrtsList.receiveCount"}})],1)],1)}))],2)],1)],1)},n=[],r=(a("7cfd"),a("bada"),a("4634"),a("1d53")),s=a("1d18"),l=a("d5b3"),o=a("a2a7"),c=a("2c75"),u=a("d685"),d=a("8333"),p=a("a1de"),m=a("f855"),f=a("f05f"),v=new d["a"](new c["a"]),h={name:"SpRepaireTaskDetail",data:function(){return{valid:!0,inventoryTypes:[],childInventoryTypes:[],IsSelectShow:!1,IsShowForSpareparts:!1,sort:!0,searchfx:"",repairTypeList:[],total:0,DataSource:[],headers:[{text:"序号",align:"center",sortable:!1},{text:"备件编号",value:"code",align:"center",sortable:!1},{text:"备件名称",value:"name",align:"center",sortable:!1},{text:"规格型号",value:"model",align:"center",sortable:!1},{text:"类型",value:"type",align:"center",sortable:!1},{text:"库存数量",value:"inventoryStr",align:"center",sortable:!1}],equipmentDirectoryList:[],errorHints2:"最迟到货时间不能小于当前时间",test:new Date,isDisabled:!1,equipmentDirectory:"",selectedIndex:-1,sparePartsList:[],storageLocationIDList:[],positionFlag:!0,countFlag:!0}},components:{datePicker:r["a"],selectUser:s["a"],contentModal:o["a"],localDataTable:m["a"],dataTable:f["a"],fileUploader:p["a"]},watch:{spareParts:function(e,t){},item:{handler:function(e){var t=this;e.rsrtsList&&t.storageLocationIDList.length>0&&e.rsrtsList.forEach((function(e){e.storageLocationIDList=t.storageLocationIDList.filter((function(t){return t.sparePartsID==e.sparePartsID}));var a="";e.storageLocationIDList&&(a=e.storageLocationIDList.find((function(t){return t.storageLocationID==e.storageLocationID})),a&&(e.inventory=a.inventory))}))},deep:!0},storageLocationIDList:{handler:function(e){var t=this;t.item.rsrtsList&&e&&t.item.rsrtsList.forEach((function(t){t.storageLocationIDList=e.filter((function(e){return e.sparePartsID==t.sparePartsID}));var a="";t.storageLocationIDList&&(a=t.storageLocationIDList.find((function(e){return e.storageLocationID==t.storageLocationID})),a&&(t.inventory=a.inventory))}))},deep:!0}},created:function(){var e=this;e.$Server.queryAll("Datadict",{},{dname:"维修类型"}).then((function(t){e.repairTypeList=t.datas}),(function(e){})),e.$Server.queryAll("SparePosition").then((function(t){e.storageLocationIDList=t.datas})),e.$Server.queryAll((new c["a"]).__name,null,{deleted:!1}).then((function(t){e.sparePartsList=t.datas})),e.init()},computed:{formatFields:function(){return v.getFormatFields()},documentName:function(){return!this.item.document||this.item.document&&null==this.item.document.dname?"":this.item.document.dname+(this.item.documentName?this.item.documentName.substring(this.item.documentName.lastIndexOf(".")):"")}},props:["item"],methods:{addRowSpareParts:function(){this.item.rsrtsList.push({})},deleteSpareparts:function(e){e>=0?(this.item.rsrtsList.splice(e,1),this.selectedIndex=-1):l["a"].alert("请选择要删除的项")},spareRowSelect:function(e){e!==this.selectedIndex&&(this.selectedIndex=e)},handleSelectChange:function(e,t){!1===this.positionFlag&&(this.positionFlag=!0),!1===this.countFlag&&(this.countFlag=!0),e.storageLocationID="",e.receiveCount="",e.storageLocationIDList=[],e.storageLocationIDList=this.storageLocationIDList.filter((function(t){return t.sparePartsID==e.sparePartsID})),1===e.storageLocationIDList.length&&(e.storageLocationID=e.storageLocationIDList[0].storageLocationID);var a=this.sparePartsList.find((function(t){return t.id==e.sparePartsID}));a&&(e.sparePartsName=a.name,e.sparePartsModel=a.model)},handleLocationChange:function(e,t){this.positionFlag=!1;var a=this.storageLocationIDList.filter((function(e){return e.sparePartsID==t.sparePartsID})),i="";a&&(i=a.find((function(t){return t.storageLocationID===e})),i&&(t.inventory=i.inventory))},validate:function(){if(1==this.$refs.form.validate()){var e=this.$refs.selectUser.getselectUserList();return e&&e.length>0&&(this.item.repairUser=this.$refs.selectUser.getselectUserList()[0].id),!0}return!1},init:function(){var e=this;this.$Server.queryAll((new u["a"]).__name,{},{all:"all"}).then((function(t){e.equipmentDirectoryList=t.datas}))},getFileFormData:function(){},addSpareparts:function(){var e=this;e.IsShowForSpareparts=!0},removeSpareparts:function(){var e=this,t=this.$refs.childDataTable.getCheckItems();0===t.length?l["a"].alert("请选择删除的备件"):t.forEach((function(t){e.item.sparePartsList.forEach((function(e,a,i){e.code==t.code&&i.splice(a,1)}))}))},doSearch:function(){var e=this.$refs.childDataTableForSpareparts.getPagination();1==e.page?this.initTable(e):this.$refs.childDataTableForSpareparts.setPage(1)},clearMessage:function(){this.searchfx="",this.doSearch()},initTable:function(e){var t=this;e&&e.page||(e=this.$refs.childDataTableForSpareparts.getPagination()),t.$Server.queryAll(v.getModelName(),{page:e.page,rowsPerPage:e.rowsPerPage},{nameOrCode:t.searchfx?t.searchfx:""}).then((function(e){t.$refs.childDataTableForSpareparts.unCheckItems(),t.DataSource=e.datas,t.total=e.page.total}),(function(e){}))},modalComfirmedForSpareparts:function(){var e=this,t=e.$refs.childDataTableForSpareparts.getCheckItems();t&&t.forEach((function(t){for(var a=!0,i=0;i<e.item.sparePartsList.length;i++)if(t.code==e.item.sparePartsList[i].code){a=!1;break}a&&e.item.sparePartsList.push(Object.assign({},t))})),e.IsShowForSpareparts=!1,e.clearMessage()},modalClosedForSpareparts:function(){this.IsShowForSpareparts=!1,this.clearMessage()},inventoryTypesChange:function(e){},changeValue:function(e){e.length>0&&(this.item.repairUserName=e[0].loginName,this.item.repairUser=e[0].id)},addUpload:function(){this.item.documentList.push({documentViewModel:{}})},getFormData:function(e){},deleteItem:function(e){this.item.documentList.splice(e,1)}}},b=h,g=(a("4f12"),a("6691")),x=Object(g["a"])(b,i,n,!1,null,"41327c54",null);t["a"]=x.exports},e5dc:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=a("a7fe"),p=(a("d9f7"),new c["a"]),m=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","SpScrapTask"),Object(o["a"])(Object(s["a"])(a),"scrapCode",p.charField({require:!0,fieldName:"报废单编号",colspan:"md4",rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"spareCodes",p.charField({require:!0,fieldName:"备件编号"})),Object(o["a"])(Object(s["a"])(a),"spareNames",p.charField({require:!0,fieldName:"备件名称"})),Object(o["a"])(Object(s["a"])(a),"sparePositions",p.charField({require:!0,fieldName:"备件位置"})),Object(o["a"])(Object(s["a"])(a),"spareCounts",p.charField({require:!0,fieldName:"报废数量"})),Object(o["a"])(Object(s["a"])(a),"reason",p.charField({require:!0,visible:!0,fieldName:"报废原因"})),Object(o["a"])(Object(s["a"])(a),"status",p.comboBoxField(d["a"],{require:!1,fieldName:"状态",editable:!1,visible:!1,format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"scrapDate",p.dateField({require:!0,fieldName:"报废申请时间",format:function(e){if(e)return e.substring(0,10)}})),Object(o["a"])(Object(s["a"])(a),"applicantName",p.charField({editable:!1,fieldName:"申请人"})),Object(o["a"])(Object(s["a"])(a),"statusName",p.charField({require:!1,editable:!1,fieldName:"任务状态"})),a}return Object(l["a"])(t,e),t}(u["a"])},e5dd:function(e,t,a){"use strict";var i=a("5217"),n=a.n(i);n.a},e865:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3MDZjNjU1MS0zNzJjLTAwNDEtOWU4MS0yYjg0OTEwMGFmN2EiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTUxNTRDRDY2MDI0MTFFOThDMUY5Qjk3Q0NDQTg0RkYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTUxNTRDRDU2MDI0MTFFOThDMUY5Qjk3Q0NDQTg0RkYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NzJlNzRjMDMtZTkyZi05MTQ0LWE3OTktYTBmZmY3YzZkNGQyIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YmFiMDYzNmUtNWQwMS0xMWU5LThjYjAtY2MzMGVmZjk1M2RmIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+cd3VswAAAGVJREFUeNpiDI+IYQACVSDuAGIXBgjYA8QVQHybBUioA/EJIBZgQIAgIHYCYgsmINGGJgkDILE2JiRjsQE3JgYCgAnqIFxgF0hBNRB/wCIJEqsGKbgBci0QrwPiz1C8Dip2AyDAAODfEUzOlukeAAAAAElFTkSuQmCC"},ead4:function(e,t,a){"use strict";var i=a("2a8a"),n=a.n(i);n.a},ebd9:function(e,t,a){},ed19:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADpUlEQVRoQ+2ZS4gcVRSG/5+pdiaaKAZ86xBF3CiYOLhw5TNCjzDc21Bb0Z0KwUAwoAkoKBJ1I0HQXXBdOOd2L3rAoI5uBGFQRDciohNBJeAgJnHG6a4jBdPSDN1ddW9VRQemtnUe/3fOfdS9RezwhztcP3YBhjtojHmV5MlxXVXVdxqNxtEkSfpVdb6SDhhjniJ5pqioNE1PtNvt14vaT7IrDWCMOUvysQAxF0TkagAa4PuvSykAY8wPJG8PFaCqF51ze0P9M79gAGvtawBOlEm+5fu8iJwOjVMGoFTrhwVHURSFTuwgAGPMGySPh1Ztu5+qfuScC5lHYUPIWltZ9QcwIhJUzCCnOgCiKNqXJMkF3656A8RxvKfX613yTZRn3+/3H+x0Op/l2W1/7w3QarXuU9UV30R59qr6nHPu3Ty70gB1dQDAoyLyce0AWYIdPQfqArjcq1BVu/BgxHwqIg/5Dp+ynxKV7QVra2t7lpeX1y8rgDGmSbIbknTYR1W7zrknQuN4L6PDiay1HwBohSbP/ELH/iBnKYCtCf0FgPsDIP4Skav+0/PAQLS19kkA73tAvCgipzzsx5qW7sBwZGPMKyRfHpdNVd92zh0DkFYhvtQqVJWAsnEq7UBZMSH+uwDW2ntU9U5VvYHk9QCmcirZU9XzJH8j+b2IfBNS+VLLqLX2LlU9SnIBwC1lBKjqOZIdAKdF5DvfWF5DqNlsXjczM5NdSD1doNK+WrLbujPr6+svLS0tnS/qXBhgq+rZJdZs0eAhdqq6SvJw0W4UArDWPgBgCcA1IaICfP4A0BSRz/N8cwFardataZp+TfLavGBVvlfVNVW9t91un5sUdyLA3NxcY3Z29ksAd1cpziPWt6urq4dWVlY2x/lMBLDWvgDgTY+EdZgeF5G3vAHiON6/ubn5I8l9dagqGlNV/2w0GgeSJPl9lM/YDlhrnwHgfc1RVJin3bMi8p4vwIcADnsmqsv8rIg87gNAY8zfJKO6FPnEVdWec+6KUYefkUNofn7+xunp6V98ktRtu7GxcVO32/11e56RAMaYgySz5fN/86jqIefcV4UAFhYWHp6amvK+5quTtt/vP9LpdD4pBJDtvtlXYp2CfGOTvG1xcfHnQgCZkTHmCIBTJK/0TValvapeIpldAoz8jzZxJ47jeG92b5+mafYpcQDAHQBuJpmdAfZXKXQQa0vwTwCyg047iqL2pB8fuR9zdYisMuYuQJXVDIn1DxN3P0CemSAeAAAAAElFTkSuQmCC"},ef3e:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.editConfig?a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){e.editConfig.find((function(e){return"add"==e.userfor})).click()}}},[a("v-icon",[e._v("\n                add\n            ")])],1)],1):e._e(),a("v-flex",{staticStyle:{"margin-bottom":"10px"},attrs:{xs2:"","offset-xs10":""}},[e.allowSearch?a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":"",light:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}):e._e()],1),a("v-data-table",{staticClass:"elevation-1",class:{"meter-header":e.mheader},attrs:{items:e.items,headers:e.headers,"hide-actions":"","hide-headers":e.hideHeaders,search:e.search,"select-all":e.allowActive},scopedSlots:e._u([{key:"items",fn:function(t){return[""==e.fieldName||null==e.fieldName?a("tr",{on:{dblclick:function(a){return e.rowDbClick(t.item)}}},[e.allowActive?a("td",[a("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"props.selected"}})],1):e._e(),e.sort?a("td",{staticClass:"text-xs-center"},[e._v(e._s(t.index+1))]):e._e(),e._l(e.fheader,(function(i){return a("td",{key:i.value,staticClass:"text-xs-center"},[Array.isArray(t.item[i.value])?a("table",{staticClass:"tableInside text-xs-center",staticStyle:{width:"100%"}},e._l(t.item[i.value],(function(t,i){return a("tr",{key:i,staticClass:"text-xs-center",staticStyle:{"text-align":"center",width:"100%"}},[e._v("\n                            "+e._s(t)+"\n                        ")])})),0):e.formatFields&&e.formatFields[i.value]?a("span",[e._v(e._s(e.formatFields[i.value](t.item[i.value])))]):e.editConfig?a("v-edit-dialog",{staticStyle:{width:"100%","text-align":"center"},attrs:{"return-value":t.item[i.value],lazy:"",label:"编辑","save-text":"保存","cancel-text":"取消"},on:{"update:returnValue":function(a){return e.$set(t.item,i.value,a)},"update:return-value":function(a){return e.$set(t.item,i.value,a)}},scopedSlots:e._u([{key:"input",fn:function(){return[a("v-text-field",{attrs:{label:i.text,"single-line":""},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}})]},proxy:!0}],null,!0)},[a("div",[e._v(e._s(t.item[i.value]))])]):i.isFile?[t.item.documentList&&t.item.documentList.length>0?a("div",e._l(t.item.documentList,(function(e,t){return a("div",{key:t},[a("view-file",{attrs:{documentViewModel:e}})],1)})),0):e._e()]:1==i.isLink?a("span",{staticStyle:{color:"#1867c0"},on:{click:function(a){return e.downloadFile(t.item)}}},[e._v(e._s(t.item[i.value]))]):-1!=i.value.indexOf(".")?a("span",[e._v(e._s(t.item[i.value.split(".")[0]][i.value.split(".")[1]]))]):a("span",[e._v(e._s(t.item[i.value]))])],2)})),e.editConfig?a("td",[e.editConfig.filter((function(e){return"save"==e.userfor})).length>0?a("v-icon",{on:{click:function(a){return e.addOrUpdate(t.item)}}},[e._v("\n                        save\n                    ")]):e._e(),e.editConfig.filter((function(e){return"delete"==e.userfor})).length>0?a("v-icon",{on:{click:function(a){return e.showDeleteModel(t.item,t.index)}}},[e._v("\n                        delete\n                    ")]):e._e()],1):e._e()],2):a("tr",[e.allowActive?a("td",[a("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"props.selected"}})],1):e._e(),e._l(e.fheader,(function(i){return a("td",{directives:[{name:"show",rawName:"v-show",value:i.value!=e.mergeConfig[t.index].field||e.mergeConfig[t.index].isHead,expression:"h.value!=mergeConfig[props.index].field||mergeConfig[props.index].isHead"}],key:i.value,staticClass:"text-xs-center",attrs:{rowspan:i.value!=e.mergeConfig[t.index].field?1:e.mergeConfig[t.index].rowspan}},[Array.isArray(t.item[i.value])?a("table",{staticClass:"tableInside"},e._l(t.item[i.value],(function(t,i){return a("tr",{key:i},[e._v("\n                            "+e._s(t)+"\n                        ")])})),0):e.formatFields&&e.formatFields[i.value]?a("span",[e._v(e._s(e.formatFields[i.value](t.item[i.value])))]):e._e(),"fileField"==i.fieldType?a("upload-file",{attrs:{xs2:""},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"boolField"==i.fieldType?a("v-checkbox",{model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"chatField"==i.fieldType?a("v-edit-dialog",{attrs:{"return-value":t.item[i.value],lazy:"",large:"",label:"编辑","cancel-text":"取消","save-text":"确认"},on:{"update:returnValue":function(a){return e.$set(t.item,i.value,a)},"update:return-value":function(a){return e.$set(t.item,i.value,a)}},scopedSlots:e._u([{key:"input",fn:function(){return[a("v-text-field",{attrs:{label:i.text,"single-line":"",counter:"",rules:[function(e){return!!e||"必填项"}]},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}})]},proxy:!0}],null,!0)},[e._v("\n                        "+e._s(t.item[i.value])+"\n                        ")]):a("span",[e._v(e._s(t.item[i.value]))])],1)})),e.editConfig?a("td",[e.editConfig.filter((function(e){return"save"==e.userfor})).length>0?a("v-icon",{on:{click:function(a){e.editConfig.find((function(e){return"save"==e.userfor})).click(t.item)}}},[e._v("\n                        save\n                    ")]):e._e(),e.editConfig.filter((function(e){return"delete"==e.userfor})).length>0?a("v-icon",{on:{click:function(a){e.editConfig.find((function(e){return"delete"==e.userfor})).click(t.item,t.index)}}},[e._v("\n                        delete\n                    ")]):e._e()],1):e._e()],2)]}}]),model:{value:e.checkedItem,callback:function(t){e.checkedItem=t},expression:"checkedItem"}}),a("comfirmModal",{attrs:{title:"提示",IsShow:e.IsComfirmShow,text:"确定删除所选项？"},on:{modalComfirmedClose:function(t){return e.modalComfirmedClose()},modalComfirmed:function(t){return e.deleteItem()}}})],1)},n=[],r=(a("bada"),a("de90"),a("55b3")),s=a("23f5"),l=a("d5b3"),o={components:{UploadFile:r["a"],comfirmModal:s["a"]},data:function(){return{search:"",checkedItem:[],IsComfirmShow:!1,propsItem:{},propsIndex:{}}},props:{mheader:{default:!1},items:{type:Array,required:!0},editConfig:{default:!1},headers:{type:Array},hideHeaders:{default:!0},resourceName:{default:!1},allowSearch:{default:!1,type:Boolean},allowActive:{default:!1},formatFields:{type:Object},fieldName:{default:""},sort:{type:Boolean,default:!1}},computed:{fheader:function(){return this.editConfig&&this.headers.push({text:"操作"}),!0===this.sort&&0==this.headers.filter((function(e){return"序号"===e.text})).length&&this.headers.unshift({text:"序号",align:"center",sortable:!1}),this.headers.filter((function(e){return e.value}))}},mounted:function(){},watch:{checkedItem:{handler:function(e){this.$emit("changeItems",e)}},items:{handler:function(e){var t=this;this.IsLoading=!1,this.mergeConfig=e.map((function(a,i){return{field:t.fieldName,index:i,rowspan:e.filter((function(e){return e[t.fieldName]==a[t.fieldName]})).length,isHead:0==i||!(e[i-1<0?0:i-1][t.fieldName]==e[i][t.fieldName])}}))}}},methods:{setActiveItem:function(e){this.allowActive&&(this.activeItem=e)},setCheckItems:function(e){this.checkedItem.push(e)},getCheckItems:function(){return this.checkedItem},rowDbClick:function(e){this.$emit("rowDbClick",e)},unCheckItems:function(){this.checkedItem=[]},addOrUpdate:function(e){var t=this;this.resourceName?t.$Server.addOrUpdate(t.resourceName,e,e.id).then((function(t){t.success&&(e.id=t.model.id,l["a"].alert("保存成功"))}),(function(e){l["a"].alert(e)})):this.editConfig.find((function(e){return"save"==e.userfor})).click(e)},showDeleteModel:function(e,t){this.propsItem=e,this.propsIndex=t,this.IsComfirmShow=!0},deleteItem:function(){var e=this;void 0==this.propsItem.id?(e.items=e.items.splice(this.propsIndex,1),e.IsComfirmShow=!1):this.resourceName?this.$Server.batchDelete(e.resourceName,[this.propsItem]).then((function(t){l["a"].alert("删除成功"),e.IsComfirmShow=!1,e.items=e.items.splice(e.items.indexOf((function(t){return t.id==e.propsItem.id})),1)}),(function(){})):this.editConfig.find((function(e){return"delete"==e.userfor})).click(this.propsItem,this.propsIndex)},modalComfirmedClose:function(){this.propsItem={},this.propsIndex={},this.IsComfirmShow=!1},downloadFile:function(e){this.$emit("downloadFile",e)}}},c=o,u=(a("7c48"),a("6691")),d=Object(u["a"])(c,i,n,!1,null,null,null);t["a"]=d.exports},f05f:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{light:""}},[a("v-data-table",{class:{"meter-header":e.mheader},attrs:{headers:e.headers,items:e.DataSource,pagination:e.pagination,"total-items":e.totalDatas,"item-key":"id",loading:e.IsLoading,"hide-actions":"","select-all":!e.allowActive,"rows-per-page-items":e.perPage,"no-data-text":"",search:e.search},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[e.allowActive?a("tr",{class:e.setBackground(t),on:{dblclick:function(a){return e.rowDbClick(t.item,t)},click:function(a){return e.setActiveItem(t.item,t,0)}}},[e.allowActive?e._e():a("td",[a("v-checkbox",{attrs:{"input-value":t.selected,primary:"","hide-details":""},on:{click:function(a){return a.stopPropagation(),e.setActiveItem(t.item,t,1)}}})],1),e.sort?a("td",{staticClass:"text-xs-center"},[e._v(e._s(t.index+1))]):e._e(),e._l(e.fheader,(function(i){return a("td",{directives:[{name:"show",rawName:"v-show",value:i.value!=e.mergeConfig[t.index].field||e.mergeConfig[t.index].isHead,expression:"h.value!=mergeConfig[props.index].field||mergeConfig[props.index].isHead"}],key:i.value,staticClass:"text-xs-center"},["addOrDelete"==i.value?a("div",{key:t.index,on:{click:function(e){e.stopPropagation()}}},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return e.addItem(t.item)}}},[e._v("\n                        add\n                    ")]),e._v("\n                    "+e._s(t.item[i.value])+"\n                    "),a("v-icon",{attrs:{small:""},on:{click:function(a){return e.removeItem(t.item)}}},[e._v("\n                        remove\n                    ")])],1):"comboboxField"==i.fieldType&&1==i.inlineEdit&&1==i.object&&1==i.isMultiple?a("div",{key:t.index,staticStyle:{width:"220px",margin:"auto"},on:{click:function(e){e.stopPropagation()}}},[a("v-select",{attrs:{items:i.comboboxSelect,"item-text":i.itemtext,"return-object":"",multiple:""},scopedSlots:e._u([{key:"selection",fn:function(n){var r=n.item,s=n.index;return[0===s?a("v-chip",[a("span",[e._v(e._s(r[i.itemtext]))])]):e._e(),1===s?a("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(t.item[i.value].length-1)+")")]):e._e()]}}],null,!0),model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}})],1):"comboboxField"==i.fieldType&&1==i.inlineEdit&&1==i.object&&0==i.isMultiple?a("div",{key:t.index,staticStyle:{width:"200px",margin:"auto"},on:{click:function(e){e.stopPropagation()}}},[a("v-select",{attrs:{items:i.comboboxSelect,"item-text":i.itemtext,"return-object":""},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}})],1):"comboboxField"==i.fieldType&&1==i.inlineEdit&&0==i.object?a("div",{key:t.index,on:{click:function(e){e.stopPropagation()}}},[a("v-select",{attrs:{items:t.item[i.comboboxSelect],"item-text":i.itemtext,"item-value":i.itemvalue},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}})],1):Array.isArray(t.item[i.value])?a("table",{staticClass:"tableInside",staticStyle:{margin:"0px auto"}},e._l(t.item[i.value],(function(t,i){return a("tr",{key:i,staticStyle:{"background-color":"transparent !important"}},[e._v("\n                        "+e._s(t)+"\n                    ")])})),0):e.formatFields&&e.formatFields[i.value]?a("span",[e._v(e._s(e.formatFields[i.value](t.item[i.value])))]):a("span",{domProps:{innerHTML:e._s(t.item[i.value])}})])})),e.hideOperation?e._e():a("td",{staticClass:"justify-center layout px-0"},[a("v-btn",{on:{click:function(a){return e.rowClick(t.item)}}},[e._v(e._s(e.btLabel))])],1)],2):a("tr",{attrs:{active:t.selected},on:{dblclick:function(a){return e.rowDbClick(t.item,t)},click:function(a){return e.setActiveItem(t.item,t,0)}}},[e.allowActive?e._e():a("td",{staticClass:"selftable_checkbox",attrs:{width:"30"}},[a("v-checkbox",{attrs:{"input-value":t.selected,primary:"","hide-details":""},on:{click:function(a){return a.stopPropagation(),e.setActiveItem(t.item,t,1)}}})],1),e.sort?a("td",{staticClass:"text-xs-center",attrs:{width:"30"}},[e._v(e._s(t.index+1))]):e._e(),e._l(e.fheader,(function(i){return a("td",{directives:[{name:"show",rawName:"v-show",value:i.value!=e.mergeConfig[t.index].field||e.mergeConfig[t.index].isHead,expression:"h.value!=mergeConfig[props.index].field||mergeConfig[props.index].isHead"}],key:i.value,staticClass:"text-xs-center"},["addOrDelete"==i.value?a("div",{key:t.index,on:{click:function(e){e.stopPropagation()}}},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return e.addItem(t.item)}}},[e._v("\n                        add\n                    ")]),e._v("\n                    "+e._s(t.item[i.value])+"\n                    "),a("v-icon",{attrs:{small:""},on:{click:function(a){return e.removeItem(t.item)}}},[e._v("\n                        remove\n                    ")])],1):"comboboxField"==i.fieldType&&1==i.inlineEdit&&1==i.object&&1==i.isMultiple?a("div",{key:t.index,staticStyle:{width:"220px",margin:"auto"},on:{click:function(e){e.stopPropagation()}}},[a("v-select",{attrs:{items:i.comboboxSelect,"item-text":i.itemtext,"return-object":"",multiple:""},scopedSlots:e._u([{key:"selection",fn:function(n){var r=n.item,s=n.index;return[0===s?a("v-chip",[a("span",[e._v(e._s(r[i.itemtext]))])]):e._e(),1===s?a("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(t.item[i.value].length-1)+")")]):e._e()]}}],null,!0),model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}})],1):"comboboxField"==i.fieldType&&1==i.inlineEdit&&1==i.object&&0==i.isMultiple?a("div",{key:t.index,staticStyle:{width:"200px",margin:"auto"},on:{click:function(e){e.stopPropagation()}}},[a("v-select",{attrs:{items:i.comboboxSelect,"item-text":i.itemtext,"return-object":""},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}})],1):"comboboxField"==i.fieldType&&1==i.inlineEdit&&0==i.object&&1==i.isMultiple?a("div",{key:t.index,staticStyle:{width:"200px",margin:"auto"},on:{click:function(e){e.stopPropagation()}}},[a("v-select",{attrs:{items:i.comboboxSelect,"item-text":i.itemtext,"item-value":i.itemvalue,multiple:""},scopedSlots:e._u([{key:"selection",fn:function(n){var r=n.item,s=n.index;return[0===s?a("v-chip",[a("span",[e._v(e._s(r[i.itemtext]))])]):e._e(),1===s?a("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(t.item[i.value].length-1)+")")]):e._e()]}}],null,!0),model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}})],1):"comboboxField"==i.fieldType&&1==i.inlineEdit&&0==i.object?a("div",{key:t.index,on:{click:function(e){e.stopPropagation()}}},[a("v-select",{attrs:{items:t.item[i.comboboxSelect],"item-text":i.itemtext,"item-value":i.itemvalue},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}})],1):Array.isArray(t.item[i.value])?a("table",{staticClass:"tableInside",staticStyle:{margin:"0px auto"}},e._l(t.item[i.value],(function(t,i){return a("tr",{key:i,staticStyle:{"background-color":"transparent !important"}},[e._v("\n                        "+e._s(t)+"\n                    ")])})),0):e.formatFields&&e.formatFields[i.value]?a("span",[e._v(e._s(e.formatFields[i.value](t.item[i.value])))]):a("span",{domProps:{innerHTML:e._s(t.item[i.value])}})])})),e.hideOperation?e._e():a("td",{staticClass:"justify-center layout px-0"},[a("v-btn",{on:{click:function(a){return e.rowClick(t.item)}}},[e._v(e._s(e.btLabel))])],1)],2)]}},e.childheaders&&e.childheaders.length>0?{key:"expand",fn:function(t){return[t.item["children"]&&t.item["children"].length>0?a("v-data-table",{staticClass:"elevation-1",staticStyle:{margin:"5px 10px"},attrs:{headers:e.childheaders,items:t.item["children"],"select-all":!e.allowActiveChildren,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",{on:{dblclick:function(a){return e.rowDbChildClick(t.item)}}},[e.allowActiveChildren?e._e():a("td",[a("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"children.selected"}})],1),e._l(e.chlidrenheader,(function(i){return a("td",{key:i.value,staticClass:"text-xs-center"},[Array.isArray(t.item[i.value])?a("table",{staticClass:"tableInside",staticStyle:{margin:"0px auto"}},e._l(t.item[i.value],(function(t,i){return a("tr",{key:i,staticStyle:{"background-color":"transparent !important"}},[e._v("\n                               "+e._s(t)+"\n                           ")])})),0):e.childformatFields&&e.childformatFields[i.value]?a("span",[e._v(e._s(e.childformatFields[i.value](t.item[i.value])))]):a("span",{domProps:{innerHTML:e._s(t.item[i.value])}})])}))],2)]}}],null,!0),model:{value:e.checkedChilrenItem,callback:function(t){e.checkedChilrenItem=t},expression:"checkedChilrenItem"}}):e._e()]}}:null],null,!0),model:{value:e.checkedItem,callback:function(t){e.checkedItem=t},expression:"checkedItem"}}),a("div",{staticClass:"text-xs-right pt-2 pagediv"},[a("div",{staticClass:"rightpage"},[a("v-pagination",{attrs:{length:e.pages,"total-visible":7},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1),a("div",{staticClass:"leftpage"},[a("v-select",{attrs:{items:e.comboboxValues,solo:""},model:{value:e.rowsPerPage,callback:function(t){e.rowsPerPage=t},expression:"rowsPerPage"}})],1),a("div",{staticClass:"clearpage"})])],1)},n=[],r=(a("8f42"),{data:function(){return{pagination:{},checkedItem:[],page:1,rowsPerPage:10,IsLoading:!0,perPage:[10,20,{text:"$vuetify.dataIterator.rowsPerPageAll",value:-1}],activeItem:{},mergeConfig:{},checkedChilrenItem:[],comboboxValues:[5,10,25,50]}},props:{mheader:{default:!1},headers:{type:Array,required:!0},childheaders:{type:Array,required:!1},DataSource:{type:Array,required:!0},total:{type:Number,default:1},totalDatas:{type:Number,default:0},ClientPage:{type:Boolean,default:!1},allowActive:{type:Boolean,default:!1},allowActiveChildren:{type:Boolean,default:!1},hideOperation:{type:Boolean,default:!1},search:{type:String,default:""},sort:{type:Boolean,default:!1},formatFields:{type:Object},allowSearch:{type:Boolean,default:!1},childformatFields:{type:Object},btLabel:{type:String,default:""}},computed:{fheader:function(){return this.headers.filter((function(e){return e.value}))},chlidrenheader:function(){return this.childheaders.filter((function(e){return e.value}))},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.total/this.pagination.rowsPerPage)}},watch:{rowsPerPage:{handler:function(e){this.pagination.rowsPerPage&&(this.pagination.rowsPerPage=this.rowsPerPage)},deep:!0},page:{handler:function(e){this.pagination.page&&(1==e&&(this.pagination.page=0),this.pagination.page=this.page)},deep:!0},pagination:{handler:function(e){this.ClientPage||this.page==e.page&&this.rowsPerPage==e.rowsPerPage&&this.initialize()},deep:!0},DataSource:{handler:function(e){this.IsLoading=!1,this.mergeConfig=e.map((function(t,a){var i="keyvalue";return{field:i,index:a,rowspan:e.filter((function(e){return e[i]==t[i]})).length,isHead:0==a||!(e[a-1<0?0:a-1][i]==e[a][i])}}))}},checkedItem:{handler:function(e){this.$emit("changeItems",e)}},checkedChilrenItem:{handler:function(){}}},methods:{setPage:function(e){this.page=e},setBackground:function(e){return this.activeItem.id&&this.activeItem.id==e.item.id?"secondary":""},setActiveItem:function(e,t,a){this.allowActive&&(this.activeItem=e),t&&(t.expanded=!t.expanded,0==a?(this.unCheckItems(),t.selected||this.setCheckItems(e)):t.selected?this.removeCheckItems(e):this.setCheckItems(e)),this.$emit("setActiveItem",e)},initialize:function(){var e=this;this.$emit("initialize",e.pagination),this.IsLoading=!1},rowClick:function(e){this.$emit("rowClick",e)},rowDbChildClick:function(e){this.$emit("rowDbChildClick",e)},unCheckItems:function(){this.checkedItem=[]},removeCheckItems:function(e){for(var t=0;t<this.checkedItem.length;t++)if(e.id==this.checkedItem[t].id){this.checkedItem.splice(t,1);break}},setCheckItems:function(e){this.checkedItem.push(e)},getCheckItems:function(){return this.checkedItem},getChildCheckItem:function(){return this.checkedChilrenItem},unChildCheckItems:function(){this.checkedChilrenItem=[]},rowDbClick:function(e,t){this.$emit("rowDbClick",e),t&&(this.unCheckItems(),this.setCheckItems(e))},getPagination:function(){return this.pagination?{page:this.page,rowsPerPage:this.rowsPerPage}:{page:1,rowsPerPage:10}},getActiveItem:function(){return this.activeItem},addItem:function(e){this.$emit("addItem",e)},removeItem:function(e){this.$emit("removeItem",e)}}}),s=r,l=(a("0988"),a("6691")),o=Object(l["a"])(s,i,n,!1,null,null,null);t["a"]=o.exports},f19a:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-menu",{attrs:{"offset-overflow":"",top:"","full-width":"",disabled:e.disabled,"close-on-content-click":!1},model:{value:e.showMenu,callback:function(t){e.showMenu=t},expression:"showMenu"}},[a("v-text-field",{attrs:{slot:"activator",label:e.label,"append-icon":"arrow_drop_down",value:e.textValueStr,disabled:e.disabled,clearable:"",readonly:"",rules:e.getRules(e.requireVaild)},on:{"click:clear":function(t){return e.clearfield()}},slot:"activator",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n        "+e._s(e.label)+" "),e.requireVaild?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]},proxy:!0}])}),a("v-list",[a("v-text-field",{staticStyle:{width:"97%",margin:"0px auto 12px auto"},attrs:{label:"查询","hide-details":"","single-line":"",primary:"",clearable:"","append-icon":"fa-search"},on:{"click:clear":e.clearMessage,"click:append":e.doSearch},model:{value:e.searchfx,callback:function(t){e.searchfx=t},expression:"searchfx"}}),a("treeView",{ref:"childTreeView",attrs:{Source:e.searchSource,MultipleSelect:e.MultipleSelect,independentCheck:e.independentCheck,independentSingleCheck:e.independentSingleCheck,IsTree:e.IsTree},on:{SelectChanged:e.selectChanged}})],1)],1)},n=[],r=(a("bada"),a("4634"),a("8062"),a("fafd"),a("a9b1"),a("7cfd"),a("ff4f")),s={name:"treeCombo",data:function(){return{showMenu:!1,treeValues:[],activeValue:[],selectedItem:[],IsShow:!1,textValueStr:"",requireVaild:"",searchfx:"",searchSource:[]}},components:{treeView:r["a"]},watch:{value:{handler:function(e,t){void 0!=e&&(this.textValueStr=this.getTextValueStr(e),this.$refs.childTreeView.setSelectItems(e))}},Source:{handler:function(e){this.searchSource=e},immediate:!0}},computed:{},mounted:function(){this.requireVaild=this.require},methods:{closeNode:function(){this.$refs.childTreeView.parentIds=[]},familyTree:function(e,t){var a=[],i=function t(i,n){for(var r=0;r<i.length;r++){var s=i[r];if(s.id==n){a.push(s),t(e,s.parentId);break}s.children&&t(s.children,n)}};return i(e,t),a},clearMessage:function(){var e=this;e.searchfx="",e.searchSource=e.Source},doSearch:function(){var e=this;if(e.searchfx.length>0){for(var t=[],a=0;a<e.Source.length;a++){var i=[];e.Source[a].name.indexOf(e.searchfx)>-1&&(i=e.familyTree(e.Source,e.Source[a].id),t=t.concat(t,i))}this.searchSource=Array.from(new Set(t))}else e.searchSource=e.Source},getRules:function(e){return e?[function(e){return e&&""!=e||"必填项"}]:void 0},clearfield:function(){this.$refs.childTreeView.clearfield(),this.$emit("cleared")},getTextValueStr:function(e){var t=this;Array.isArray(e)||(e=[e]);var a=this;if(e&&e.length){var i=e.map((function(e){if(!e)return"";var i={};if(i=1==t.IsTree?t.Source.find((function(t){return t.id==e&&"-1"!=t.parentId})):t.Source.find((function(t){return t.id==e})),i&&i.name)return i.name;a.$Console.error("未找到已保存的关联id："+e)}));return i.join("，")}},selectChanged:function(e){this.textValueStr=this.getTextValueStr(e),this.$emit("input",e),this.$emit("changeSelected",e)},setActiveVaules:function(){var e=this;e.clearMessage(),e.$refs.childTreeView.setActiveVaules(),e.$refs.childTreeView.clearfield()}},props:["label","Source","MultipleSelect","independentCheck","value","independentSingleCheck","require","disabled","IsTree"]},l=s,o=a("6691"),c=Object(o["a"])(l,i,n,!1,null,null,null);t["a"]=c.exports},f30f:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var i={LoginUrl:"/#/login"}},f800:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=a("a7fe"),p=(a("d9f7"),new c["a"]),m=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","EqpRentalTask"),Object(o["a"])(Object(s["a"])(a),"rentalCode",p.charField({require:!0,fieldName:"租赁单编号",colspan:"md4",rules:[function(e){return!!e||"必填项"}]})),Object(o["a"])(Object(s["a"])(a),"equipmentDirectoryName",p.charField({require:!0,fieldName:"设备名称"})),Object(o["a"])(Object(s["a"])(a),"model",p.charField({require:!0,fieldName:"规格型号"})),Object(o["a"])(Object(s["a"])(a),"type",p.charField({require:!0,editable:!1,fieldName:"设备类型",visible:!1})),Object(o["a"])(Object(s["a"])(a),"equipmentDirectory",p.charField({require:!0,visible:!1,fieldName:"租赁设备",icon:"star"})),Object(o["a"])(Object(s["a"])(a),"rentalCount",p.numberField("int",{require:!0,fieldName:"租赁数量"})),Object(o["a"])(Object(s["a"])(a),"reason",p.charField({require:!0,visible:!0,fieldName:"租赁原因"})),Object(o["a"])(Object(s["a"])(a),"latestTime",p.dateField({require:!0,fieldName:"最迟到货日期",format:function(e){if(e)return e.substring(0,10)}})),Object(o["a"])(Object(s["a"])(a),"applicant",p.charField({editable:!1,visible:!1,fieldName:"申请人"})),Object(o["a"])(Object(s["a"])(a),"applicantName",p.charField({require:!0,editable:!1,fieldName:"申请人",icon:"star",tableOrder:40})),Object(o["a"])(Object(s["a"])(a),"equipmentDirectory",p.charField({require:!0,visible:!1,fieldName:"购置设备"})),Object(o["a"])(Object(s["a"])(a),"status",p.comboBoxField(d["a"],{require:!1,fieldName:"状态",visible:!1,editable:!1,format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),Object(o["a"])(Object(s["a"])(a),"statusName",p.charField({require:!1,editable:!1,fieldName:"任务状态"})),a}return Object(l["a"])(t,e),t}(u["a"])},f81e:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var i=a("7300"),n=a("5873"),r=a("ddf2"),s=a("80ea"),l=a("ae0a"),o=a("97a3"),c=a("652a"),u=a("1269"),d=new c["a"],p=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(c))),Object(o["a"])(Object(s["a"])(a),"__name","SysMsgRecevier"),Object(o["a"])(Object(s["a"])(a),"title",d.charField({require:!1,fieldName:"标题",editable:!1,visible:!0})),Object(o["a"])(Object(s["a"])(a),"moduleName",d.charField({require:!1,fieldName:"模块",editable:!1,visible:!0})),Object(o["a"])(Object(s["a"])(a),"sendUserName",d.charField({require:!1,fieldName:"发送人",editable:!1,visible:!0})),Object(o["a"])(Object(s["a"])(a),"sendTime",d.charField({require:!1,fieldName:"发送时间",editable:!1,visible:!0})),Object(o["a"])(Object(s["a"])(a),"isReaded",d.charField({require:!1,fieldName:"是否已读",editable:!1,visible:!1})),Object(o["a"])(Object(s["a"])(a),"isReadedName",d.charField({require:!1,fieldName:"是否已读",editable:!1,visible:!0})),Object(o["a"])(Object(s["a"])(a),"detail",d.charField({require:!1,fieldName:"内容",editable:!1,visible:!1})),a}return Object(l["a"])(t,e),t}(u["a"])},f855:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.editConfig?a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){e.editConfig.find((function(e){return"add"==e.userfor})).click()}}},[a("v-icon",[e._v("\n                add\n            ")])],1)],1):e._e(),a("v-flex",{staticStyle:{"margin-bottom":"10px"},attrs:{xs2:"","offset-xs10":""}},[e.allowSearch?a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":"",light:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}):e._e()],1),a("v-data-table",{staticClass:"elevation-1",attrs:{items:e.items,headers:e.headers,"hide-actions":"","hide-headers":e.hideHeaders,search:e.search,"select-all":e.allowActive,pagination:e.pagination,"no-data-text":""},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[""==e.fieldName||null==e.fieldName?a("tr",{on:{dblclick:function(a){return e.rowDbClick(t.item)}}},[e.allowActive?a("td",[a("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"props.selected"}})],1):e._e(),e.sort?a("td",{staticClass:"text-xs-center"},[e._v(e._s(t.index+1))]):e._e(),e._l(e.fheader,(function(i){return a("td",{key:i.value,staticClass:"text-xs-center"},[Array.isArray(t.item[i.value])?a("table",{staticClass:"tableInside text-xs-center",staticStyle:{width:"100%"}},e._l(t.item[i.value],(function(t,i){return a("tr",{key:i,staticClass:"text-xs-center",staticStyle:{"text-align":"center",width:"100%"}},[a("span",{domProps:{innerHTML:e._s(t)}})])})),0):e.formatFields&&e.formatFields[i.value]?a("span",[e._v(e._s(e.formatFields[i.value](t.item[i.value])))]):e.editConfig?a("v-edit-dialog",{staticStyle:{width:"100%","text-align":"center"},attrs:{"return-value":t.item[i.value],lazy:"",label:"编辑","save-text":"保存","cancel-text":"取消"},on:{"update:returnValue":function(a){return e.$set(t.item,i.value,a)},"update:return-value":function(a){return e.$set(t.item,i.value,a)}},scopedSlots:e._u([{key:"input",fn:function(){return[a("v-text-field",{attrs:{label:i.text,"single-line":""},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}})]},proxy:!0}],null,!0)},[a("div",[e._v(e._s(t.item[i.value]))])]):1==i.isLink?a("span",{staticStyle:{color:"#1867c0"},on:{click:function(a){return e.downloadFile(t.item)}}},[e._v(e._s(t.item[i.value]))]):-1!=i.value.indexOf(".")?a("span",[e._v(e._s(t.item[i.value.split(".")[0]][i.value.split(".")[1]]))]):a("span",{domProps:{innerHTML:e._s(t.item[i.value])}})],1)})),e.editConfig?a("td",[e.editConfig.filter((function(e){return"save"==e.userfor})).length>0?a("v-icon",{on:{click:function(a){return e.addOrUpdate(t.item)}}},[e._v("\n                        save\n                    ")]):e._e(),e.editConfig.filter((function(e){return"delete"==e.userfor})).length>0?a("v-icon",{on:{click:function(a){return e.showDeleteModel(t.item,t.index)}}},[e._v("\n                        delete\n                    ")]):e._e()],1):e._e()],2):a("tr",[e.allowActive?a("td",[a("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"props.selected"}})],1):e._e(),e._l(e.fheader,(function(i){return a("td",{directives:[{name:"show",rawName:"v-show",value:i.value!=e.mergeConfig[t.index].field||e.mergeConfig[t.index].isHead,expression:"h.value!=mergeConfig[props.index].field||mergeConfig[props.index].isHead"}],key:i.value,staticClass:"text-xs-center",attrs:{rowspan:i.value!=e.mergeConfig[t.index].field?1:e.mergeConfig[t.index].rowspan}},[Array.isArray(t.item[i.value])?a("table",{staticClass:"tableInside"},e._l(t.item[i.value],(function(t,i){return a("tr",{key:i},[a("span",{domProps:{innerHTML:e._s(t)}})])})),0):e.formatFields&&e.formatFields[i.value]?a("span",[e._v(e._s(e.formatFields[i.value](t.item[i.value])))]):e._e(),"fileField"==i.fieldType?a("upload-file",{attrs:{xs2:""},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"boolField"==i.fieldType?a("v-checkbox",{model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}}):"chatField"==i.fieldType?a("v-edit-dialog",{attrs:{"return-value":t.item[i.value],lazy:"",large:"",label:"编辑","cancel-text":"取消","save-text":"确认"},on:{"update:returnValue":function(a){return e.$set(t.item,i.value,a)},"update:return-value":function(a){return e.$set(t.item,i.value,a)}},scopedSlots:e._u([{key:"input",fn:function(){return[a("v-text-field",{attrs:{label:i.text,"single-line":"",counter:"",rules:[function(e){return!!e||"必填项"}]},model:{value:t.item[i.value],callback:function(a){e.$set(t.item,i.value,a)},expression:"props.item[h.value]"}})]},proxy:!0}],null,!0)},[e._v("\n                        "+e._s(t.item[i.value])+"\n                        ")]):a("span",{domProps:{innerHTML:e._s(t.item[i.value])}})],1)})),e.editConfig?a("td",[e.editConfig.filter((function(e){return"save"==e.userfor})).length>0?a("v-icon",{on:{click:function(a){e.editConfig.find((function(e){return"save"==e.userfor})).click(t.item)}}},[e._v("\n                        save\n                    ")]):e._e(),e.editConfig.filter((function(e){return"delete"==e.userfor})).length>0?a("v-icon",{on:{click:function(a){e.editConfig.find((function(e){return"delete"==e.userfor})).click(t.item,t.index)}}},[e._v("\n                        delete\n                    ")]):e._e()],1):e._e()],2)]}}]),model:{value:e.checkedItem,callback:function(t){e.checkedItem=t},expression:"checkedItem"}}),e.pagination.totalItems>0?a("div",{staticClass:"text-xs-right pt-2"},[a("v-pagination",{attrs:{length:e.pages,"total-visible":7},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1):e._e(),a("comfirmModal",{attrs:{title:"提示",IsShow:e.IsComfirmShow,text:"确定删除所选项？"},on:{modalComfirmedClose:function(t){return e.modalComfirmedClose()},modalComfirmed:function(t){return e.deleteItem()}}})],1)},n=[],r=(a("bada"),a("de90"),a("55b3")),s=a("23f5"),l=a("d5b3"),o={components:{UploadFile:r["a"],comfirmModal:s["a"]},data:function(){return{pagination:{},search:"",checkedItem:[],IsComfirmShow:!1,propsItem:{},propsIndex:{}}},props:{items:{type:Array,required:!0},editConfig:{default:!1},headers:{type:Array},hideHeaders:{default:!0},resourceName:{default:!1},allowSearch:{default:!1,type:Boolean},allowActive:{default:!1},formatFields:{type:Object},fieldName:{default:""},sort:{type:Boolean,default:!1}},computed:{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)},fheader:function(){return this.editConfig&&this.headers.push({text:"操作"}),!0===this.sort&&0==this.headers.filter((function(e){return"序号"===e.text})).length&&this.headers.unshift({text:"序号",align:"center",sortable:!1}),this.headers.filter((function(e){return e.value}))}},mounted:function(){},watch:{checkedItem:{handler:function(e){this.$emit("changeItems",e)}},items:{handler:function(e){var t=this;this.IsLoading=!1,this.pagination.totalItems=e.length,this.pagination.page=1,this.mergeConfig=e.map((function(a,i){return{field:t.fieldName,index:i,rowspan:e.filter((function(e){return e[t.fieldName]==a[t.fieldName]})).length,isHead:0==i||!(e[i-1<0?0:i-1][t.fieldName]==e[i][t.fieldName])}}))}}},methods:{setActiveItem:function(e){this.allowActive&&(this.activeItem=e)},setCheckItems:function(e){this.checkedItem.push(e)},getCheckItems:function(){return this.checkedItem},rowDbClick:function(e){this.$emit("rowDbClick",e)},unCheckItems:function(){this.checkedItem=[]},addOrUpdate:function(e){var t=this;this.resourceName?t.$Server.addOrUpdate(t.resourceName,e,e.id).then((function(t){t.success&&(e.id=t.model.id,l["a"].alert("保存成功"))}),(function(e){l["a"].alert(e)})):this.editConfig.find((function(e){return"save"==e.userfor})).click(e)},showDeleteModel:function(e,t){this.propsItem=e,this.propsIndex=t,this.IsComfirmShow=!0},deleteItem:function(){var e=this;void 0==this.propsItem.id?(e.items=e.items.splice(this.propsIndex,1),e.IsComfirmShow=!1):this.resourceName?this.$Server.batchDelete(e.resourceName,[this.propsItem]).then((function(t){l["a"].alert("删除成功"),e.IsComfirmShow=!1,e.items=e.items.splice(e.items.indexOf((function(t){return t.id==e.propsItem.id})),1)}),(function(){})):this.editConfig.find((function(e){return"delete"==e.userfor})).click(this.propsItem,this.propsIndex)},modalComfirmedClose:function(){this.propsItem={},this.propsIndex={},this.IsComfirmShow=!1},downloadFile:function(e){this.$emit("downloadFile",e)}}},c=o,u=(a("73e9"),a("6691")),d=Object(u["a"])(c,i,n,!1,null,null,null);t["a"]=d.exports},f891:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[e._v("基本信息")]),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"购置单编号",rules:[function(e){return!e||/^[\w|-]+$/.test(e)||"只能是数字,字母,下划线"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                        购置单编号\n                    ")]},proxy:!0}]),model:{value:e.spPurchaseTaskModal.purchaseCode,callback:function(t){e.$set(e.spPurchaseTaskModal,"purchaseCode",t)},expression:"spPurchaseTaskModal.purchaseCode"}})],1),a("v-flex",{attrs:{xs4:""}},[a("datePicker",{attrs:{label:"最迟到货时间",required:!0,rules:[function(e){return e&&""!=e||"必填项"}]},model:{value:e.spPurchaseTaskModal.latestTime,callback:function(t){e.$set(e.spPurchaseTaskModal,"latestTime",t)},expression:"spPurchaseTaskModal.latestTime"}})],1),a("v-flex",{attrs:{xs4:""}},[a("selectUser",{ref:"selectUser",attrs:{value:e.spPurchaseTaskModal.applicantName,required:!0,label:"申请人",multiple:!1,initselect:e.spPurchaseTaskModal.selectAssign},on:{changeValue:e.changeValue}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"购置原因"},model:{value:e.spPurchaseTaskModal.reason,callback:function(t){e.$set(e.spPurchaseTaskModal,"reason",t)},expression:"spPurchaseTaskModal.reason"}})],1)],1),a("v-layout",[a("v-flex",{attrs:{xs12:""}},[e._v("\n                采购备件清单：\n                "),a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){return e.spPurchaseTaskModal.rspsList.push({})}}},[a("v-icon",[e._v("\n                        add\n                    ")])],1),a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){return e.deleteSpareparts(e.selectedIndex)}}},[a("v-icon",[e._v("\n                        remove\n                    ")])],1)],1)],1),e._l(e.spPurchaseTaskModal.rspsList,(function(t,i){return a("v-layout",{key:i,class:{"box-active":e.isSelectedArr[i]},on:{click:function(t){return e.spareRowSelect(i)}}},[a("v-combobox",{attrs:{label:"备件名称",items:e.sparePartsList,"item-text":"codeName","item-value":"id",rules:[function(e){return!!e||"必填项"}]},on:{change:function(t){return e.comboboxChange(t,i)}},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                    备件名称 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}],null,!0),model:{value:t.sparePartsID,callback:function(a){e.$set(t,"sparePartsID",a)},expression:"spare.sparePartsID"}}),a("v-text-field",{attrs:{label:"规格型号",disabled:!e.isModelDisabled[i]},model:{value:t.model,callback:function(a){e.$set(t,"model",a)},expression:"spare.model"}}),a("v-select",{attrs:{label:"供应商",items:e.supplierList,"item-text":"cname","item-value":"id",disabled:!e.isModelDisabled[i]},model:{value:t.supplier,callback:function(a){e.$set(t,"supplier",a)},expression:"spare.supplier"}}),a("v-text-field",{attrs:{label:"数量",rules:[function(e){return!("0"===e)||"数量不能为0"},function(e){return!!e||"数量不能为空"},function(e){return!e||/^(0|[1-9][0-9]*)$/.test(e)||"只能是正整数"}],type:"number"},model:{value:t.purchaseCount,callback:function(a){e.$set(t,"purchaseCount",a)},expression:"spare.purchaseCount"}})],1)}))],2)],1)},n=[],r=a("3596"),s=(a("63ff"),a("f8f9")),l=(a("bada"),a("4634"),a("1d53")),o=a("1d18"),c=a("a1de"),u=a("2c75"),d=a("d5b3"),p=a("6bf2"),m=a.n(p),f={name:"spPurchaseDetail",data:function(){return{today:m()(new Date).format("YYYY-MM-DD"),valid:!0,item:{assignName:"",selectAssign:[]},isSelectedArr:[],selectedIndex:0,sparePartsList:[],supplierList:[],isModelDisabled:[],rspsList:{}}},watch:{"spPurchaseTaskModal.rspsList":function(e){var t=this,a="";e&&e.forEach((function(e){a=t.sparePartsList.find((function(t){return t.id==e.sparePartsID})),a&&(e.sparePartsID=a)}))}},components:{datePicker:l["a"],selectUser:o["a"],fileUploader:c["a"]},created:function(){},methods:{getData:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,i,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,a=t.$Server.queryAll((new u["a"]).__name,null,{deleted:!1}),i=t.$Server.queryAll("Company",{},{deleted:"false"}),e.next=5,a;case 5:return n=e.sent,e.next=8,i;case 8:r=e.sent,t.sparePartsList=n.datas,t.supplierList=r.datas.filter((function(e){return e.ctypeName&&e.ctypeName.indexOf("供应商")>-1||void 0==e.ctypeName||null==e.ctypeName}));case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),validate:function(){return this.spPurchaseTaskModal.rspsList.length>=0?!!this.$refs.form.validate()&&(this.rspsList=JSON.parse(JSON.stringify(this.spPurchaseTaskModal.rspsList)),this.rspsList.forEach((function(e){"object"===Object(r["a"])(e.sparePartsID)&&(e.sparePartsID=e.sparePartsID.id)})),!0):(d["a"].alert("至少需要一个备件"),!1)},changeValue:function(e){e.length>0&&(this.spPurchaseTaskModal.applicant=e[0].id,this.spPurchaseTaskModal.applicantName=e[0].uname)},spareRowSelect:function(e){this.isSelectedArr.splice(this.selectedIndex,1,!1),this.isSelectedArr.splice(e,1,!0),this.selectedIndex=e},deleteSpareparts:function(e){this.spPurchaseTaskModal.rspsList.splice(e,1),this.isSelectedArr.splice(e,1,!1)},comboboxChange:function(e,t){e&&"object"===Object(r["a"])(e)?(this.spPurchaseTaskModal.rspsList[t].model=e.model,this.spPurchaseTaskModal.rspsList[t].supplier=e.supplier,this.isModelDisabled.splice(t,1,!1)):"string"===typeof e?(this.spPurchaseTaskModal.rspsList[t].name=e,this.spPurchaseTaskModal.rspsList[t].model="",this.spPurchaseTaskModal.rspsList[t].supplier="",this.spPurchaseTaskModal.rspsList[t].purchaseCount="",this.isModelDisabled.splice(t,1,!0)):e||(this.spPurchaseTaskModal.rspsList[t].model="",this.spPurchaseTaskModal.rspsList[t].supplier="",this.spPurchaseTaskModal.rspsList[t].purchaseCount="",this.isModelDisabled.splice(t,1,!1))},getFormData:function(){}},props:["spPurchaseTaskModal"]},v=f,h=(a("5612"),a("6691")),b=Object(h["a"])(v,i,n,!1,null,"34ca3390",null);t["a"]=b.exports},fd4e:function(e,t,a){},ff4f:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"selftreeview",staticStyle:{position:"relative","overflow-x":"hidden","max-height":"250px"}},[a("v-treeview",{ref:"tree",class:e.ShowLines?"showTreeLine":"",attrs:{active:e.activeValue,items:e.treeSource,activatable:!e.independentCheck&&!e.MultipleSelect,"selected-color":"primary","item-key":"id","active-class":e.MultipleSelect?"v-treeview-node--active":"treeActiveItem",hoverable:"",open:e.parentIds,"open-on-click":e.MultipleSelect,selectable:e.MultipleSelect,transition:""},on:{"update:active":function(t){e.activeValue=t}},scopedSlots:e._u([e.independentCheck?{key:"prepend",fn:function(t){var i=t.item;t.open;return[0==i.isshow?a("span",[e._v(e._s(i.name))]):a("v-checkbox",{attrs:{label:i.name},on:{change:function(t){return e.checkChang(i.id)}},model:{value:e.indChecks[i.id],callback:function(t){e.$set(e.indChecks,i.id,t)},expression:"indChecks[item.id]"}})]}}:null,e.independentCheck?{key:"label",fn:function(e){e.item,e.open}}:{key:"prepend",fn:function(e){e.item,e.open}}],null,!0),model:{value:e.treeValues,callback:function(t){e.treeValues=t},expression:"treeValues"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.operationEnable,expression:"!operationEnable"}],staticStyle:{position:"absolute",left:"0px",top:"0px",width:"1000px",height:"1000px","z-index":"100","background-color":"#000",opacity:"0.2"}})],1)},n=[],r=a("97a3"),s=(a("4634"),{name:"treeView",data:function(){return{treeValues:[],activeValue:[],operationEnable:!0,parentIds:[],indChecks:{},disableCommit:!1}},watch:{activeValue:{handler:function(e){this.CommitChang()},deep:!0},treeValues:{handler:function(e){this.CommitChang()},deep:!0},Source:{handler:function(e){this.CommitChang()},deep:!0}},computed:{treeSource:function(){this.parentIds=[];var e=this.toTree(this.Source,"-1");if(1==this.IsTree){var t=[];return e&&e.length>0?(e.forEach((function(e){t=t.concat(e.children)})),t):e}return e}},methods:{getSelect:function(){return this.MultipleSelect?this.treeValues:this.activeValue},checkChang:function(e){this.independentSingleCheck&&(this.indChecks=Object(r["a"])({},e,this.indChecks[e])),this.CommitChang()},setActiveVaules:function(){this.activeValue=[]},clearfield:function(){this.independentCheck?this.indChecks=[]:this.MultipleSelect?this.treeValues=[]:this.activeValue=[],this.$emit("SelectChanged",[])},clickDisable:function(){this.operationEnable=!1},clickEnable:function(){this.operationEnable=!0},CommitChang:function(){if(this.independentCheck){var e=[];for(var t in this.indChecks)this.indChecks[t]&&e.push(t);this.$emit("SelectChanged",e)}else this.MultipleSelect?this.$emit("SelectChanged",this.treeValues):this.$emit("SelectChanged",this.activeValue)},setSelectItems:function(e){var t=this;this.indChecks={},Array.isArray(e)&&e&&e.length>0&&(this.independentCheck?e.forEach((function(e){t.$set(t.indChecks,e,!0)})):this.MultipleSelect?this.treeValues=e:this.activeValue=e)},toTree:function(e,t){if(e&&e.length){for(var a,i=this,n=[],r=0;r<e.length;r++)if(e[r].parentId==t){var s=Object.assign({},e[r]);a=i.toTree(e,e[r].id),a.length>0&&(s.children=a),n.push(s)}return n}}},props:["Source","MultipleSelect","ShowLines","independentCheck","independentSingleCheck","IsTree"]}),l=s,o=(a("7e3d"),a("6691")),c=Object(o["a"])(l,i,n,!1,null,null,null);t["a"]=c.exports},ffb3:function(e,t,a){}});