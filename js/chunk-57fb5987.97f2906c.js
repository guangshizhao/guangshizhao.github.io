(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57fb5987"],{"4f60":function(e,a,n){},"706c":function(e,a,n){"use strict";var t=n("f03e"),l=n.n(t);l.a},c429:function(e,a,n){"use strict";var t=n("4f60"),l=n.n(t);l.a},c7a6:function(e,a,n){"use strict";n.r(a);var t=function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("div",[n("layContentHeader",{attrs:{title:"组织统计"}}),n("div",[n("div",{staticClass:"flex-header"},[n("div",{staticClass:"label-title"},[e._v("组织架构树:")]),n("div",{staticClass:"width280"},[n("v-select",{staticClass:"self-select",attrs:{items:["工厂组织架构","TPM组织架构","工厂产线工位架构"]},on:{change:e.handleQueryTypeChange},model:{value:e.organizeType,callback:function(a){e.organizeType=a},expression:"organizeType"}})],1)]),n("div",{staticClass:"tree-wrap"},[n("vue2-org-tree",{attrs:{collapsable:"",data:e.list,"label-class-name":e.labelClassName},on:{"on-expand":e.handleExpand,"on-node-click":e.handleNodeClick}})],1)])],1)},l=[],r=n("3596"),i=(n("7cfd"),n("4634"),function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("div",{staticClass:"org-tree-container"},[n("div",{staticClass:"org-tree",class:{horizontal:e.horizontal,collapsable:e.collapsable}},[n("org-tree-node",{attrs:{data:e.data,props:e.props,horizontal:e.horizontal,"label-width":e.labelWidth,collapsable:e.collapsable,"render-content":e.renderContent,"label-class-name":e.labelClassName},on:{"on-expand":function(a,n){e.$emit("on-expand",a,n)},"on-node-click":function(a,n){e.$emit("on-node-click",a,n)}}})],1)])}),o=[];n("8f42");const s=(e,a)=>{return!(Array.isArray(e[a])&&e[a].length>0)},c=(e,a,n)=>{const{props:t}=n,l=["org-tree-node"],r=[],i=a[t.props.children];return s(a,t.props.children)?l.push("is-leaf"):t.collapsable&&!a[t.props.expand]&&l.push("collapsed"),r.push(p(e,a,n)),t.collapsable&&!a[t.props.expand]||r.push(u(e,i,n)),e("div",{domProps:{className:l.join(" ")}},r)},d=(e,a,{props:n,listeners:t})=>{const l=t["on-expand"];let r=["org-tree-node-btn"];return a[n.props.expand]&&r.push("expanded"),e("span",{domProps:{className:r.join(" ")},on:{click:e=>l&&l(e,a)}})},p=(e,a,n)=>{const{props:t,listeners:l}=n,r=a[t.props.label],i=t.renderContent,o=l["on-node-click"],c=[];if("function"===typeof i){let n=i(e,a);n&&c.push(n)}else c.push(r);t.collapsable&&!s(a,t.props.children)&&c.push(d(e,a,n));const p=["org-tree-node-label-inner"];let{labelWidth:u,labelClassName:h,selectedClassName:b,selectedKey:f}=t;return"number"===typeof u&&(u+="px"),"function"===typeof h&&(h=h(a)),h&&p.push(h),"function"===typeof b&&(b=b(a)),b&&f&&a[f]&&p.push(b),e("div",{domProps:{className:"org-tree-node-label"}},[e("div",{domProps:{className:p.join(" ")},style:{width:u},on:{click:e=>o&&o(e,a)}},c)])},u=(e,a,n)=>{if(Array.isArray(a)&&a.length){const t=a.map(a=>{return c(e,a,n)});return e("div",{domProps:{className:"org-tree-node-children"}},t)}return""},h=(e,a)=>{const{props:n}=a;return c(e,n.data,a)};var b=h,f={name:"Vue2OrgTree",components:{OrgTreeNode:{render:b,functional:!0}},props:{data:{type:Object,required:!0},props:{type:Object,default:function(){return{label:"label",expand:"expand",children:"children"}}},horizontal:Boolean,selectedKey:String,collapsable:Boolean,renderContent:Function,labelWidth:[String,Number],labelClassName:[Function,String],selectedClassName:[Function,String]}},m=f,g=(n("c429"),n("6691")),v=Object(g["a"])(m,i,o,!1,null,null,null),x=v.exports;const y=e=>{y.installed||(y.installed=!0,e.component(x.name,x))};x.install=y,"undefined"!==typeof window&&window.Vue&&window.Vue.use(x);var j=x,O=j,N=n("20d3"),w=n("4027"),C=n("d9e9"),T={name:"organizeStatistics",components:{Vue2OrgTree:O},data:function(){return{organizeType:"工厂组织架构",labelClassName:"bg-white1",list:{},oList:{},tpmList:{},fList:{},colors:[{name:"白色",value:"bg-white1"},{name:"橘色",value:"bg-orange"},{name:"金色",value:"bg-gold"},{name:"灰色",value:"bg-gray"},{name:"粉色",value:"bg-lightpink"},{name:"巧克力色",value:"bg-chocolate"},{name:"番茄色",value:"bg-tomato"}],list82:{id:0,label:"XXX科技有限公司",children:[{id:2,label:"产品研发部",children:[{id:5,label:"研发-前端",expand:!0},{id:6,label:"研发-后端",expand:!0},{id:9,label:"UI设计",expand:!0},{id:10,label:"产品经理",expand:!0}],expand:!0},{id:3,label:"销售部",children:[{id:7,label:"销售一部",expand:!0},{id:8,label:"销售二部",expand:!0}],expand:!1},{id:4,label:"财务部",expand:!0},{id:9,label:"HR人事",expand:!0}],expand:!0}}},methods:{handleQueryTypeChange:function(){"工厂组织架构"===this.organizeType?this.list=this.oList:"TPM组织架构"===this.organizeType?this.list=this.tpmList:"工厂产线工位架构"===this.organizeType&&(this.list=this.fList)},handleExpand:function(e,a){"expand"in a?(a.expand=!a.expand,!a.expand&&a.children&&this.collapse(a.children)):this.$set(a,"expand",!0)},collapse:function(e){var a=this;e.forEach((function(e){e.expand&&(e.expand=!1),e.children&&a.collapse(e.children)}))},handleNodeClick:function(e,a){document.querySelectorAll(".org-tree-node-label-inner").forEach((function(e){e.classList.remove("bg-click")})),e.target.classList.add("bg-click")},getInfo:function(){var e=this;this.$Server.queryAll((new N["a"]).__name).then((function(a){e.list=e.oList={id:0,label:"航天云网",expand:!0,children:e.setTree(e.toList(a.datas))}})),this.$Server.queryAll((new C["a"]).__name).then((function(a){e.tpmList={id:0,label:"航天云网",expand:!0,children:e.setTree(e.toList(a.datas))}})),this.$Server.queryAll((new w["a"]).__name).then((function(a){e.fList={id:0,label:"航天云网",expand:!0,children:e.setTree(e.toList(a.datas))}}))},toList:function(e){var a=[];return e.forEach((function(e){var n={};n.id=e.id,n.expand=!0,n.label=e.name,n.parentID=e.parentId?e.parentId:"",a.push(n)})),a},treeObj:function(e){var a={};for(var n in e){var t=e[n];a[n]="object"===Object(r["a"])(t)?arguments.callee(t):t}return a["children"]=[],a},setTree:function(e){for(var a=e,n=[],t=this,l=0;l<a.length;l++)""!==a[l].parentID&&null!==a[l].parentID&&"-1"!==a[l].parentID||(n.push(t.treeObj(a[l])),a.splice(l,1),l--);function r(e){if(0!==a.length)for(var n=0;n<e.length;n++){for(var l=0;l<a.length;l++)if(e[n].id===a[l].parentID){var i=t.treeObj(a[l]);e[n].children.push(i),a.splice(l,1),l--}r(e[n].children)}}return r(n),n}},mounted:function(){this.getInfo()}},k=T,L=(n("706c"),Object(g["a"])(k,t,l,!1,null,"7622d425",null));a["default"]=L.exports},d9e9:function(e,a,n){"use strict";n.d(a,"a",(function(){return u}));var t=n("7300"),l=n("5873"),r=n("ddf2"),i=n("80ea"),o=n("ae0a"),s=n("97a3"),c=n("652a"),d=n("1269"),p=new c["a"],u=function(e){function a(){var e,n;Object(t["a"])(this,a);for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];return n=Object(l["a"])(this,(e=Object(r["a"])(a)).call.apply(e,[this].concat(c))),Object(s["a"])(Object(i["a"])(n),"__name","TpmOrganization"),Object(s["a"])(Object(i["a"])(n),"orgCode",p.charField({require:!0,fieldName:"编号"})),Object(s["a"])(Object(i["a"])(n),"oname",p.charField({require:!0,fieldName:"名称"})),Object(s["a"])(Object(i["a"])(n),"parentId",p.charField({require:!1,fieldName:"上级组织",editable:!1})),Object(s["a"])(Object(i["a"])(n),"parentName",p.charField({require:!1,fieldName:"上级组织",readonly:!0})),Object(s["a"])(Object(i["a"])(n),"description",p.charField({require:!1,fieldName:"描述"})),Object(s["a"])(Object(i["a"])(n),"orgType",p.charField({require:!1,fieldName:"组织类型",editable:!1})),Object(s["a"])(Object(i["a"])(n),"rootNode",p.charField({require:!1,fieldName:"根节点",editable:!1,visible:!1})),Object(s["a"])(Object(i["a"])(n),"level",p.charField({require:!1,visible:!1,fieldName:"级别",editable:!1})),n}return Object(o["a"])(a,e),a}(d["a"])},f03e:function(e,a,n){}}]);