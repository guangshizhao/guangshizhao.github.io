(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e5f15"],{9745:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("layContentHeader",{attrs:{title:"验收标准管理",buttons:e.headerBtns}},[a("v-text-field",{staticStyle:{width:"250px"},attrs:{label:"请输入部门、设备类型",clearable:"","hide-details":"","single-line":"",primary:""},on:{"click:clear":e.clearMessage},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a("v-icon",{on:{click:function(t){return e.doSearch()}}},[e._v("search")])]},proxy:!0}]),model:{value:e.like,callback:function(t){e.like=t},expression:"like"}})],1),a("layContent",[a("gridTemplate",{ref:"childGridTemplate",attrs:{title:"验收标准",gridModel:e.eqpAcceptanceStandard,sort:e.sort,width:500},on:{editorsReCode:e.editorsReCode,beforeEdit:e.beforeEdit,beforeAdd:e.beforeAdd,beforeEditSubmit:e.beforeEditSubmit}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{attrs:{xs12:"",md10:"","offset-md1":""}},[a("v-textarea",{attrs:{rules:[e.rules.required],label:"验收内容"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                            验收内容"),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),a("v-flex",{attrs:{xs12:"",md10:"","offset-md1":""}},[a("v-textarea",{attrs:{rules:[e.rules.required],label:"验收标准"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                            验收标准"),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.standard,callback:function(t){e.standard=t},expression:"standard"}})],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px",persistent:!0,scrollable:"","content-class":"selfdialog1"},model:{value:e.IsShow,callback:function(t){e.IsShow=t},expression:"IsShow"}},[a("v-card",[a("v-card-title",{staticClass:"primary"},[a("span",{staticClass:"headline",staticStyle:{color:"#fff"}},[e._v("编辑验收标准")])]),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""}},[a("v-container",{staticStyle:{padding:"0"},attrs:{"grid-list-md":"","text-md-center":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md10:"",xs12:"","offset-md1":""}},[a("v-select",{attrs:{label:"设备类型",items:e.equipmentTypeData,disabled:"","item-text":"dname","item-value":"dvalue"},model:{value:e.equipmentType,callback:function(t){e.equipmentType=t},expression:"equipmentType"}})],1),a("v-flex",{attrs:{md10:"",xs12:"","offset-md1":""}},[a("v-select",{attrs:{label:"验收类别",rules:[e.rules.selectRe],items:e.acceptanceTypeData,"item-text":"dname","return-object":""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                        验收类别"),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.acceptanceType,callback:function(t){e.acceptanceType=t},expression:"acceptanceType"}})],1),a("v-flex",{attrs:{md10:"",xs12:"","offset-md1":""}},[a("treeCombo",{attrs:{Source:e.departmentIDData,MultipleSelect:!1,label:"负责部门",independentCheck:!1,independentSingleCheck:!0,clearable:"",require:"true","return-object":""},model:{value:e.departmentID,callback:function(t){e.departmentID=t},expression:"departmentID"}})],1),a("v-flex",{attrs:{xs12:"",md10:"","offset-md1":""}},[a("v-textarea",{attrs:{rules:[e.rules.required],label:"验收内容"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                        验收内容"),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),a("v-flex",{attrs:{xs12:"",md10:"","offset-md1":""}},[a("v-textarea",{attrs:{rules:[e.rules.required],label:"验收标准"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                                        验收标准"),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.standard,callback:function(t){e.standard=t},expression:"standard"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{"margin-right":"30px"},attrs:{color:"primary"},on:{click:function(t){return e.updateComfirmed()}}},[e._v("确定")]),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.updateClosed()}}},[e._v("取消")])],1)],1)],1),a("contentModal",{attrs:{title:"导入验收设备标准",IsShow:e.IsShowImport},on:{modalClosed:function(t){return e.modalClosedImport()},modalComfirmed:function(t){return e.ComfirmImport()}}},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:e.downloadTemp}},[e._v("下载导入模板")]),a("div",{staticStyle:{color:"red","font-size":"12px"}},[e._v("\n                (注:文档内标题标红的列为必填项，请勿输入以下非法字符：~、@、$、^、&、《、》、<、>、￥)\n            ")])],1),a("UploadFile",{ref:"uploadFile",attrs:{label:"导入文件"},on:{formData:e.getFormData},model:{value:e.base64,callback:function(t){e.base64=t},expression:"base64"}})],1)],1)},r=[],i=(a("7cfd"),a("cc1d"),a("b9da")),c=a("7300"),l=a("5873"),d=a("ddf2"),s=a("80ea"),o=a("ae0a"),p=a("97a3"),u=a("652a"),m=a("1269"),f=a("a7fe"),b=a("20d3"),h=new u["a"],v=function(e){function t(){var e,a;Object(c["a"])(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=Object(l["a"])(this,(e=Object(d["a"])(t)).call.apply(e,[this].concat(r))),Object(p["a"])(Object(s["a"])(a),"__name","EqpAcceptanceStandard"),Object(p["a"])(Object(s["a"])(a),"equipmentTypeList",h.manyToManyField(f["a"],{require:!0,visible:!1,fieldName:"设备类型",colspan:"md10 offset-md1",bindSource:{text:"dname",value:"dvalue",parms:{dname:"设备类型"}}})),Object(p["a"])(Object(s["a"])(a),"equipmentType",h.manyToManyField(f["a"],{require:!0,editable:!1,visible:!1,fieldName:"设备类型",colspan:"md10 offset-md1",bindSource:{text:"dname",value:"dvalue",parms:{dname:"设备类型"}}})),Object(p["a"])(Object(s["a"])(a),"equipmentTypeName",h.charField({require:!1,fieldName:"设备类型",visible:!0,editable:!1})),Object(p["a"])(Object(s["a"])(a),"acceptanceType",h.comboBoxField(f["a"],{require:!0,visible:!0,colspan:"md10  offset-md1",fieldName:"验收类别",bindSource:{parms:{dname:"验收类别"}},format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),Object(p["a"])(Object(s["a"])(a),"departmentID",h.comboTree(b["a"],{require:!0,visible:!1,fieldName:"负责部门",colspan:"md10  offset-md1",related:"oneToOne"})),Object(p["a"])(Object(s["a"])(a),"departmentName",h.charField({require:!1,visible:!0,fieldName:"负责部门",editable:!1})),Object(p["a"])(Object(s["a"])(a),"content",h.charField({require:!0,fieldName:"验收内容",visible:!0,rules:[function(e){return!!e||"必填项"}]})),Object(p["a"])(Object(s["a"])(a),"standard",h.charField({require:!0,fieldName:"验收标准",visible:!0,rules:[function(e){return!!e||"必填项"}]})),a}return Object(o["a"])(t,e),t}(m["a"]),y=a("d5b3"),S=a("f19a"),x=a("55b3"),q=a("a2a7"),T=a("a0a8"),I=a.n(T),k={data:function(){var e=this;return{eqpAcceptanceStandard:{},headerBtns:[{disabled:!this.$per("EqpAcceptanceStandard","c"),text:"添加",icon:"self_add",click:function(){return e.$refs.childGridTemplate.GridAdd()}},{disabled:!this.$per("EqpAcceptanceStandard","u"),text:"编辑",icon:"self_edit",click:function(){return e.edit()}},{disabled:!this.$per("EqpAcceptanceStandard","d"),text:"删除",icon:"self_delete",click:function(){return e.$refs.childGridTemplate.GridDelete()}},{disabled:!this.$per("EqpAcceptanceStandard","import"),text:"导入",icon:"self_import",click:function(){return e.importEqpAcceptanceStandard()}},{disabled:!this.$per("EqpAcceptanceStandard","e"),text:"导出",icon:"self_export",click:function(){return e.exportEqpAcceptanceStandard()}}],IsShowImport:!1,base64:"",sort:!0,content:"",standard:"",like:"",IsShow:!1,acceptanceTypeData:[],acceptanceType:"",departmentIDData:[],departmentID:"",equipmentType:"",equipmentTypeData:[],id:"",rules:{required:function(e){return!!e||"必填项."},min:function(e){return e.length>=8||"Min 8 characters"},selectRe:function(e){return!!/^(0)$/.test(e)||!!e||"必填项"}}}},watch:{},components:{gridTemplate:i["a"],treeCombo:S["a"],UploadFile:x["a"],contentModal:q["a"]},mounted:function(){this.init();new I.a(document.querySelector(".selfdialog1"),{})},methods:{init:function(){var e=this;e.eqpAcceptanceStandard=new v,e.$Server.queryAll((new f["a"]).__name,null,{dname:"验收类别"}).then((function(t){e.acceptanceTypeData=t.datas})),e.$Server.queryAll((new f["a"]).__name,null,{dname:"设备类型"}).then((function(t){e.equipmentTypeData=t.datas})),this.$Server.queryAll((new b["a"]).__name,{},null).then((function(t){e.departmentIDData=t.datas}))},clearMessage:function(){this.$refs.childGridTemplate.doSearch({})},edit:function(){if(1!=this.$refs.childGridTemplate.getCheckItems().length)y["a"].alert("请选中一个需要修改的项");else{var e=this.$refs.childGridTemplate.getCheckItems()[0],t=this;t.id=e.id,t.standard=e.standard,t.content=e.content,t.departmentID=[e.departmentID],t.equipmentType=e.equipmentType,t.acceptanceType=e.acceptanceType,this.IsShow=!0}},updateComfirmed:function(){var e=this,t={};t.standard=e.standard,t.id=e.id,t.content=e.content,t.departmentID=Array.isArray(e.departmentID)?e.departmentID[0]:e.departmentID,t.equipmentType=e.equipmentType,t.acceptanceType=e.acceptanceType,this.$refs.form.validate()?e.$Server.addOrUpdate("EqpAcceptanceStandard",t,!0).then((function(t){t.success&&(y["a"].alert("保存成功","success"),e.IsShow=!1,e.$refs.childGridTemplate.init({}),e.$refs.childGridTemplate.unCheckItems())}),(function(e){y["a"].alert(e.toString())})):y["a"].alert("验证错误")},updateClosed:function(){this.IsShow=!1},editorsReCode:function(e){e=e.filter((function(e){return"content"!=e.field})),e=e.filter((function(e){return"standard"!=e.field})),this.$refs.childGridTemplate.editors=e},beforeEdit:function(e,t){},beforeAdd:function(e,t){var a=this;a.standard="",a.content="",e.departmentID=""},beforeEditSubmit:function(e){e.content=this.content,e.standard=this.standard,e.departmentID=Array.isArray(e.departmentID)?e.departmentID[0]:e.departmentID},doSearch:function(){this.$refs.childGridTemplate.doSearch({like:this.like})},exportEqpAcceptanceStandard:function(){this.$Server.exportFile("EqpAcceptanceStandard","设备验收标准"+this.$Utils.getLocalFotmatTime())},rowDbClick:function(){},importEqpAcceptanceStandard:function(){this.IsShowImport=!0},modalClosedImport:function(){this.IsShowImport=!1,this.$refs.uploadFile.clearFile()},getFormData:function(e){var t=this,a=e.get("data");if(a){var n=a.name.substring(a.name.lastIndexOf(".")+1,a.name.length);"xls"!=n&&"xlsx"!=n&&(y["a"].alert("请检查文件是否为Excel文件"),t.$refs.uploadFile.clearFile())}},ComfirmImport:function(){var e=this,t=this.$refs.uploadFile.filename,a={base64:this.base64,fileName:t,fileType:"xls"};null==this.base64||0==this.base64.length?y["a"].alert("请选择导入的文件"):this.$Server.importFile((new v).__name,a).then((function(t){t.success&&null==t.datas.error?(y["a"].alert("导入成功","success"),e.IsShowImport=!1,e.$refs.childGridTemplate.init({}),e.$refs.uploadFile.clearFile(),e.base64=""):y["a"].alert(t.datas.error)}),(function(e){return y["a"].alert(e)}))},downloadTemp:function(){var e=document.createElement("a");e.href="/imporTemp/eqpAcceptanceStandard.xls",e.download="验收标准.xls",e.click()}}},w=k,_=a("6691"),D=Object(_["a"])(w,n,r,!1,null,null,null);t["default"]=D.exports}}]);