(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d221807"],{cb2d:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("layContentHeader",{attrs:{title:"工装治具台账",buttons:e.headerBtns}},[i("v-text-field",{attrs:{label:"请输入名称或编号",clearable:"","hide-details":"","single-line":"",primary:""},on:{"click:clear":e.clearMessage},scopedSlots:e._u([{key:"append-outer",fn:function(){return[i("v-icon",{on:{click:function(t){return e.doSearch()}}},[e._v("search")])]},proxy:!0}]),model:{value:e.searchfx,callback:function(t){e.searchfx=t},expression:"searchfx"}})],1),i("layContent",[i("dataTable",{ref:"childDataTable",attrs:{headers:e.headers,sort:e.sort,DataSource:e.DataSource,hideOperation:!0,formatFields:e.formatFields,total:e.total},on:{rowDbClick:e.rowDbClick,initialize:e.initTable}}),i("contentModal",{attrs:{title:e.title,IsShow:e.IsShow,width:"1100"},on:{modalClosed:function(t){return e.modalClosed()},modalComfirmed:function(t){return e.modalComfirmed()}}},[i("fixturetoolDetail",{ref:"addOrUpdate",attrs:{item:e.detailForUpdate}})],1),i("contentModal",{attrs:{title:e.title,IsShow:e.IsShowDtail,width:"1100"},on:{modalClosed:function(t){return e.modalDetailClosed()},modalComfirmed:function(t){return e.modalDetailComfirmed()}}},[i("fixturetoolSee",{ref:"fixturetoolSee",attrs:{item:e.detailForUpdate}})],1),i("contentModal",{attrs:{title:"导入工装治具",IsShow:e.IsShowImport},on:{modalClosed:function(t){return e.modalClosedImport()},modalComfirmed:function(t){return e.ComfirmImport()}}},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:e.downloadTemp}},[e._v("下载导入模板")]),i("div",{staticStyle:{color:"red","font-size":"12px"}},[e._v("\n          (注:文档内标题标红的列为必填项，请勿输入以下非法字符：~、@、$、^、&、《、》、<、>、￥)\n        ")])],1),i("UploadFile",{ref:"uploadFile",attrs:{label:"导入文件"},on:{formData:e.getFormData},model:{value:e.base64,callback:function(t){e.base64=t},expression:"base64"}})],1)],1)],1)},n=[],l=(i("4634"),i("bada"),i("7cfd"),i("de90"),i("7300")),r=i("5873"),s=i("ddf2"),o=i("80ea"),c=i("ae0a"),d=i("97a3"),u=i("652a"),m=i("1269"),f=i("a7fe"),p=i("815a"),v=new u["a"],b=function(e){function t(){var e,i;Object(l["a"])(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return i=Object(r["a"])(this,(e=Object(s["a"])(t)).call.apply(e,[this].concat(n))),Object(d["a"])(Object(o["a"])(i),"__name","Fixturetool"),Object(d["a"])(Object(o["a"])(i),"partsImage",v.imageField({require:!1,fieldName:"上传图片",visible:!1})),Object(d["a"])(Object(o["a"])(i),"code",v.charField({fieldName:"工装治具编号",rules:[function(e){return!!e||"必填项"}]})),Object(d["a"])(Object(o["a"])(i),"name",v.charField({require:!0,fieldName:"工装治具名称",rules:[function(e){return!!e||"必填项"}]})),Object(d["a"])(Object(o["a"])(i),"model",v.charField({require:!1,fieldName:"规格型号"})),Object(d["a"])(Object(o["a"])(i),"type",v.comboBoxField(f["a"],{require:!1,fieldName:"类型",format:function(e){if(null!=e&&null!=e.dname)return e.dname}})),Object(d["a"])(Object(o["a"])(i),"length",v.numberField("int",{require:!0,fieldName:"长",visible:!1})),Object(d["a"])(Object(o["a"])(i),"width",v.numberField("int",{require:!0,fieldName:"宽",visible:!1})),Object(d["a"])(Object(o["a"])(i),"height",v.numberField("int",{require:!0,fieldName:"高",visible:!1})),Object(d["a"])(Object(o["a"])(i),"manufacturer",v.comboBoxField(p["a"],{require:!1,fieldName:"生产厂商",visible:!1,bindSource:{text:"cname",value:"id",parms:""}})),Object(d["a"])(Object(o["a"])(i),"supplier",v.comboBoxField(p["a"],{require:!1,fieldName:"供应商",visible:!1,bindSource:{text:"cname",value:"id",parms:""}})),Object(d["a"])(Object(o["a"])(i),"inventory",v.charField({require:!1,fieldName:"库存量",editable:!1,visible:!1})),Object(d["a"])(Object(o["a"])(i),"inventoryStr",v.charField({require:!1,fieldName:"库存量",editable:!1})),Object(d["a"])(Object(o["a"])(i),"minInventory",v.numberField("int",{require:!0,fieldName:"最低库存",visible:!1})),Object(d["a"])(Object(o["a"])(i),"minInventoryStr",v.charField({require:!0,fieldName:"最低库存"})),Object(d["a"])(Object(o["a"])(i),"miniOrder",v.numberField("int",{visible:!1,editable:!1,fieldName:"最小起订量"})),Object(d["a"])(Object(o["a"])(i),"maxInventory",v.numberField("int",{require:!0,fieldName:"最高库存",visible:!1})),Object(d["a"])(Object(o["a"])(i),"serviceLife",v.numberField("int",{require:!1,fieldName:"使用年限(月)"})),Object(d["a"])(Object(o["a"])(i),"originalValue",v.numberField("int",{require:!1,fieldName:"单价(元)"})),Object(d["a"])(Object(o["a"])(i),"totalPrice",v.charField({require:!1,fieldName:"总价(元)",editable:!1})),Object(d["a"])(Object(o["a"])(i),"inventoryUnit",v.comboBoxField(f["a"],{require:!1,fieldName:"库存单位",bindSource:{parms:{type:"25"}},format:function(e){if(null!=e&&null!=e.dname)return e.dname},visible:!1})),Object(d["a"])(Object(o["a"])(i),"abcType",v.comboBoxField(f["a"],{require:!0,fieldName:"ABC类",visible:!1,bindSource:{text:"dname",value:"dvalue",parms:{type:"6"}}})),Object(d["a"])(Object(o["a"])(i),"procurementCycle",v.numberField("int",{require:!1,fieldName:"采购周期(天)",visible:!1})),Object(d["a"])(Object(o["a"])(i),"fmrType",v.comboBoxField(f["a"],{require:!0,fieldName:"使用频次",visible:!1,bindSource:{text:"dname",value:"dvalue",parms:{type:"24"}}})),Object(d["a"])(Object(o["a"])(i),"deleted",v.charField({require:!1,visible:!1})),Object(d["a"])(Object(o["a"])(i),"status",v.charField({require:!1,fieldName:"使用状态",format:function(e){if(e&&e.dname)return e.dname}})),Object(d["a"])(Object(o["a"])(i),"safeCount",v.numberField("int",{editable:!1,visible:!1,fieldName:"安全库存"})),i}return Object(c["a"])(t,e),t}(m["a"]),h=i("d5b3"),x=i("8333"),y=i("a2a7"),g=i("f05f"),S=i("681f"),w=i("55b3"),L=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-container",{attrs:{"grid-list-md":""}},[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{staticClass:"headline",attrs:{xs12:""}},[e._v("基本信息:")]),i("v-flex",{attrs:{xs4:""}},[i("uploadInput",{staticStyle:{"margin-top":"60px","margin-left":"50px"},attrs:{btnName:"上传图片"},model:{value:e.item.partsImage,callback:function(t){e.$set(e.item,"partsImage",t)},expression:"item.partsImage"}})],1),i("v-flex",{attrs:{xs8:""}},[i("v-layout",[i("v-flex",[i("v-text-field",{attrs:{label:"工装治具编号",rules:[function(e){return!e||/^[\w|-]+$/.test(e)||"只能是数字,字母,下划线"}]},model:{value:e.item.code,callback:function(t){e.$set(e.item,"code",t)},expression:"item.code"}})],1),i("v-flex",[i("v-text-field",{attrs:{label:"工装治具名称",rules:[function(e){return!!e||"必填项"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                  工装治具名称 "),i("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.item.name,callback:function(t){e.$set(e.item,"name",t)},expression:"item.name"}})],1)],1),i("v-layout",[i("v-flex",[i("v-text-field",{attrs:{label:"规格型号"},model:{value:e.item.model,callback:function(t){e.$set(e.item,"model",t)},expression:"item.model"}})],1),i("v-flex",[i("v-select",{attrs:{label:"类型",items:e.typeList,"item-text":"dname","return-object":""},model:{value:e.item.type,callback:function(t){e.$set(e.item,"type",t)},expression:"item.type"}})],1)],1),i("v-layout",[i("v-flex",[i("v-text-field",{attrs:{label:"长",type:"number",min:"0"},model:{value:e.item.length,callback:function(t){e.$set(e.item,"length",t)},expression:"item.length"}})],1),i("v-flex",[i("v-text-field",{attrs:{label:"宽",type:"number",min:"0"},model:{value:e.item.width,callback:function(t){e.$set(e.item,"width",t)},expression:"item.width"}})],1),i("v-flex",[i("v-text-field",{attrs:{label:"高",type:"number",min:"0"},model:{value:e.item.height,callback:function(t){e.$set(e.item,"height",t)},expression:"item.height"}})],1),i("v-flex",{staticStyle:{"font-size":"12px","min-width":"90px",padding:"0px","line-height":"76px"}},[e._v("(单位：CM)\n            ")])],1)],1),i("v-flex",{attrs:{xs12:""}},[i("v-layout",[i("v-flex",[i("v-combobox",{attrs:{label:"生产厂商",items:e.manufacturerList,"item-text":"cname","item-value":"id"},model:{value:e.item.manufacturer,callback:function(t){e.$set(e.item,"manufacturer",t)},expression:"item.manufacturer"}})],1),i("v-flex",[i("v-combobox",{attrs:{label:"供应商",items:e.supplierList,"item-text":"cname","item-value":"id"},model:{value:e.item.supplier,callback:function(t){e.$set(e.item,"supplier",t)},expression:"item.supplier"}})],1),i("v-flex",[i("v-radio-group",{attrs:{label:"使用状态",row:""},model:{value:e.item.status,callback:function(t){e.$set(e.item,"status",t)},expression:"item.status"}},e._l(e.statusList,(function(e){return i("v-radio",{key:e.dvalue,attrs:{label:e.dname,value:e}})})),1)],1)],1),i("v-layout",[i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"最低库存",type:"number",min:"0",rules:[function(e){return null!=e&&void 0!=e&&e.toString().length>0||"必填项"},function(e){return/^[1-9]\d*$/.test(e)||"最低库存要大于0"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                  最低库存 "),i("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.item.minInventory,callback:function(t){e.$set(e.item,"minInventory",t)},expression:"item.minInventory"}})],1),i("v-flex",{attrs:{xs6:""}},[i("v-select",{attrs:{label:"单位",items:e.periodUnitList,"item-text":"dname","return-object":""},model:{value:e.item.inventoryUnit,callback:function(t){e.$set(e.item,"inventoryUnit",t)},expression:"item.inventoryUnit"}})],1)],1),i("v-layout",[i("v-flex",{attrs:{xs8:""}},[i("treeView",{ref:"treeView",attrs:{independentCheck:!0,Source:e.equipments,MultipleSelect:!1,label:"适用设备名录",independentSingleCheck:!1,"return-object":""},model:{value:e.item.eqpIds,callback:function(t){e.$set(e.item,"eqpIds",t)},expression:"item.eqpIds"}})],1),i("v-flex",[i("v-radio-group",{attrs:{label:"工装治具好坏",row:""},model:{value:e.item.gdType,callback:function(t){e.$set(e.item,"gdType",t)},expression:"item.gdType"}},e._l(e.gdTypeList,(function(e){return i("v-radio",{key:e.dvalue,attrs:{label:e.dname,value:e}})})),1)],1)],1),i("v-layout",[i("v-flex",{attrs:{xs12:""}},[i("span",{staticClass:"headline"},[e._v("上传附件:")]),i("v-icon",{on:{click:function(t){return e.addUpload()}}},[e._v("add")]),i("v-icon",{on:{click:function(t){return e.removeUpload()}}},[e._v("remove")])],1)],1),e._l(e.item.fixtureDocumentList,(function(t,a){return i("v-layout",{key:a,style:e.selectDocument.includes(t)?"background: #E3F2FD":"",attrs:{row:""},on:{click:function(i){return e.getClickDocument(t,a)}}},[i("fileUploader",{ref:"upload",refInFor:!0,attrs:{label:"上传附件",multiple:!1,fileNames:t.documentViewModel.dname,uploadBase64:!1,userVersion:t},on:{formData:e.getFileData},model:{value:t.documentViewModel,callback:function(i){e.$set(t,"documentViewModel",i)},expression:"doc.documentViewModel"}})],1)}))],2)],1),i("v-divider",{staticStyle:{"border-style":"dashed","border-width":"thin","margin-top":"0px"}}),i("v-flex",{staticClass:"headline"},[e._v("资产信息：")]),i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs4:""}},[i("v-select",{attrs:{label:"ABC类",items:e.abcTypeList,"item-text":"dname","return-object":""},model:{value:e.item.abcType,callback:function(t){e.$set(e.item,"abcType",t)},expression:"item.abcType"}})],1),i("v-flex",{attrs:{xs4:""}},[i("v-text-field",{attrs:{label:"单价(元)",type:"number",min:"1"},model:{value:e.item.originalValue,callback:function(t){e.$set(e.item,"originalValue",t)},expression:"item.originalValue"}})],1),i("v-flex",{attrs:{xs4:""}},[i("v-text-field",{attrs:{label:"采购周期(天)",type:"number",rules:[function(e){return null!=e&&void 0!=e&&e.toString().length>0||"必填项"},function(e){return/^[1-9]\d*$/.test(e)||"采购周期要大于0"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              采购周期(天) "),i("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.item.procurementCycle,callback:function(t){e.$set(e.item,"procurementCycle",t)},expression:"item.procurementCycle"}})],1),i("v-flex",{attrs:{xs4:""}},[i("v-text-field",{attrs:{label:"使用年限(月)",type:"number"},model:{value:e.item.serviceLife,callback:function(t){e.$set(e.item,"serviceLife",t)},expression:"item.serviceLife"}})],1),i("v-flex",{attrs:{xs4:""}},[i("v-select",{attrs:{label:"使用频次",items:e.fmrTypeList,"item-text":"dname","return-object":""},model:{value:e.item.fmrType,callback:function(t){e.$set(e.item,"fmrType",t)},expression:"item.fmrType"}})],1)],1),i("v-divider",{staticStyle:{"border-style":"dashed","border-width":"thin"}}),i("v-layout",[i("v-flex",{staticClass:"headline"},[e._v("位置信息：")])],1),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[i("v-flex",{attrs:{xs11:"",sm11:"",md11:""}},[i("v-btn",{attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){return e.addRow()}}},[i("v-icon",[e._v("\n                add\n              ")])],1),i("v-btn",{attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:e.deleteLocation}},[i("v-icon",[e._v("\n                remove\n              ")])],1)],1)],1)],1),e._l(e.item.positions,(function(t,a){return i("v-layout",{key:t.id,style:e.selectLocation.includes(t)?"background: #E3F2FD":"",attrs:{wrap:""},on:{click:function(i){return e.getClick(t,a)}}},[i("v-flex",[i("v-select",{attrs:{items:e.slocationList,label:"工装治具库位","item-text":"sname","item-value":"id",rules:[function(e){return!!e||"必填项"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              工装治具库位 "),i("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}],null,!0),model:{value:t.storageLocationID,callback:function(i){e.$set(t,"storageLocationID",i)},expression:"pos.storageLocationID"}})],1),i("v-flex",[i("v-text-field",{attrs:{label:"库存量",rules:[function(e){return null!=e&&void 0!=e&&e.toString().length>0||"必填项"},function(e){return/^(0|[1-9][0-9]*)$/.test(e)||"库存量不能小于0"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              库存量 "),i("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}],null,!0),model:{value:t.inventory,callback:function(i){e.$set(t,"inventory",i)},expression:"pos.inventory"}})],1)],1)}))],2)],1)],1)},_=[],k=(i("40c5"),i("f19a")),$=(i("d685"),i("a1de")),O=(i("2c75"),i("b27e")),I=i("9ee5"),j=i("3f83"),T={name:"fixturetoolDetail",data:function(){return{valid:!0,equipmentList:[],typeList:[],manufacturerList:[],supplierList:[],statusList:[],periodUnitList:[],abcTypeList:[],fmrTypeList:[],selectDocument:[],deleteDocumentIndex:"",selectLocation:[],deleteIndex:"",slocationList:[],gdTypeList:[]}},components:{treeView:k["a"],fileUploader:$["a"],uploadInput:O["a"]},computed:{equipments:function(){var e=[],t=[];if(this.equipmentList.forEach((function(i){void 0==i.typeChinese||null==i.typeChinese||0==i.typeChinese.length?(i.typeChinese="无",e.push(i)):e.push(i),-1==t.indexOf(i.typeChinese)&&(void 0==i.typeChinese||null==i.typeChinese||0==i.typeChinese.length?t.includes("无")||t.push("无"):t.push(i.typeChinese))})),t.forEach((function(t,i){e.push({name:t,id:i+1,parentId:-1,isshow:!1})})),void 0==this.equipmentList||null==this.equipmentList||0==this.equipmentList.length);else{this.equipmentList.forEach((function(e){e.name=e.codeName}));for(var i=0;i<e.length;i++)for(var a=0;a<e.length;a++)if(e[i].typeChinese==e[a].name){e[i].parentId=e[a].id;break}}return e}},created:function(){this.initializa()},props:["item"],methods:{initializa:function(){var e=this;this.$Server.queryAll((new p["a"]).__name,{},{deleted:"false"}).then((function(t){e.supplierList=t.datas.filter((function(e){return e.ctypeName&&e.ctypeName.indexOf("供应商")>-1||void 0==e.ctypeName||null==e.ctypeName})),e.manufacturerList=t.datas.filter((function(e){return e.ctypeName&&e.ctypeName.indexOf("生产厂商")>-1||void 0==e.ctypeName||null==e.ctypeName}))})),this.$Server.queryAll((new f["a"]).__name,{},{dname:"ABC类"}).then((function(t){e.abcTypeList=t.datas})),this.$Server.queryAll((new f["a"]).__name,{},{dname:"使用频次"}).then((function(t){e.fmrTypeList=t.datas})),this.$Server.queryAll((new f["a"]).__name,{},{dname:"备件类型"}).then((function(t){e.typeList=t.datas})),this.$Server.queryAll((new f["a"]).__name,{},{dname:"单位"}).then((function(t){e.periodUnitList=t.datas})),this.$Server.queryAll((new f["a"]).__name,{},{dname:"备件状态"}).then((function(t){e.statusList=t.datas})),this.$Server.queryAll((new j["a"]).__name).then((function(t){e.slocationList=t.datas})),this.$Server.queryAll((new f["a"]).__name,{},{dname:"备件好坏"}).then((function(t){e.gdTypeList=t.datas})),this.$Server.queryAll((new I["a"]).__name,{},{deleted:!1}).then((function(t){e.equipmentList=t.datas}))},addUpload:function(){this.item.fixtureDocumentList.push({documentViewModel:{}})},removeUpload:function(){var e=this;this.selectDocument.length>0?e.item.fixtureDocumentList.length>0&&(e.item.fixtureDocumentList.splice(e.deleteDocumentIndex,1),e.selectDocument=[]):h["a"].alert("选择一个需要删除的位置")},addRow:function(){this.item.positions.push({})},deleteLocation:function(){var e=this;this.selectLocation.length>0?this.item.positions.length>1?e.item.positions.splice(this.deleteIndex,1):h["a"].alert("必须有一个位置信息"):h["a"].alert("选择一个需要删除的位置")},validate:function(){var e=!0;return this.item.fixtureDocumentList.forEach((function(t){null==t||null!=t.documentViewModel&&""!=t.documentViewModel&&null!=t.documentViewModel.dname||(e=!1)})),0==e?(h["a"].alert("请选择上传文件或者删除当前文件选项列"),!1):1==this.$refs.form.validate()},getFileData:function(e){},getClickDocument:function(e,t){this.selectDocument=[],this.selectDocument.push(e),this.deleteDocumentIndex=t},getClick:function(e,t){this.selectLocation=[],this.selectLocation.push(e),this.deleteIndex=t},deleteItem:function(e){this.item.fixtureDocumentList.splice(e,1)}}},F=T,N=i("6691"),C=Object(N["a"])(F,L,_,!1,null,"34da3edb",null),D=C.exports,q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-container",{attrs:{"grid-list-md":""}},[i("v-form",{ref:"form"},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{staticClass:"headline",attrs:{xs12:""}},[e._v("基本信息:")]),i("v-flex",{attrs:{xs4:""}},[i("uploadInput",{staticStyle:{"margin-top":"60px","margin-left":"50px"},attrs:{btnName:"上传图片",disabled:!0},model:{value:e.item.partsImage,callback:function(t){e.$set(e.item,"partsImage",t)},expression:"item.partsImage"}})],1),i("v-flex",{attrs:{xs8:""}},[i("v-layout",[i("v-flex",[i("v-text-field",{attrs:{label:"工装治具编号",disabled:""},model:{value:e.item.code,callback:function(t){e.$set(e.item,"code",t)},expression:"item.code"}})],1),i("v-flex",[i("v-text-field",{attrs:{label:"工装治具名称",disabled:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                  工装治具名称 "),i("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.item.name,callback:function(t){e.$set(e.item,"name",t)},expression:"item.name"}})],1)],1),i("v-layout",[i("v-flex",[i("v-text-field",{attrs:{label:"规格型号",disabled:""},model:{value:e.item.model,callback:function(t){e.$set(e.item,"model",t)},expression:"item.model"}})],1),i("v-flex",[i("v-select",{attrs:{label:"类型",items:e.typeList,"item-text":"dname","return-object":"",disabled:""},model:{value:e.item.type,callback:function(t){e.$set(e.item,"type",t)},expression:"item.type"}})],1)],1),i("v-layout",[i("v-flex",[i("v-text-field",{attrs:{label:"长",type:"number",min:"0",disabled:""},model:{value:e.item.length,callback:function(t){e.$set(e.item,"length",t)},expression:"item.length"}})],1),i("v-flex",[i("v-text-field",{attrs:{label:"宽",type:"number",min:"0",disabled:""},model:{value:e.item.width,callback:function(t){e.$set(e.item,"width",t)},expression:"item.width"}})],1),i("v-flex",[i("v-text-field",{attrs:{label:"高",type:"number",min:"0",disabled:""},model:{value:e.item.height,callback:function(t){e.$set(e.item,"height",t)},expression:"item.height"}})],1),i("v-flex",{staticStyle:{"font-size":"12px","min-width":"90px",padding:"0px","line-height":"76px"}},[e._v("(单位：CM)\n            ")])],1)],1),i("v-flex",{attrs:{xs12:""}},[i("v-layout",[i("v-flex",[i("v-select",{attrs:{label:"生产厂商",items:e.manufacturerList,"item-text":"cname","item-value":"id",disabled:""},model:{value:e.item.manufacturer,callback:function(t){e.$set(e.item,"manufacturer",t)},expression:"item.manufacturer"}})],1),i("v-flex",[i("v-select",{attrs:{label:"供应商",items:e.supplierList,"item-text":"cname","item-value":"id",disabled:""},model:{value:e.item.supplier,callback:function(t){e.$set(e.item,"supplier",t)},expression:"item.supplier"}})],1),i("v-flex",[i("v-radio-group",{attrs:{label:"使用状态",row:""},model:{value:e.item.status,callback:function(t){e.$set(e.item,"status",t)},expression:"item.status"}},e._l(e.statusList,(function(e){return i("v-radio",{key:e.dvalue,attrs:{label:e.dname,value:e,disabled:""}})})),1)],1)],1),i("v-layout",[i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{attrs:{label:"最低库存",type:"number",min:"0",disabled:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                  最低库存 "),i("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.item.minInventory,callback:function(t){e.$set(e.item,"minInventory",t)},expression:"item.minInventory"}})],1),i("v-flex",{attrs:{xs6:""}},[i("v-select",{attrs:{label:"单位",items:e.periodUnitList,"item-text":"dname","return-object":"",disabled:""},model:{value:e.item.inventoryUnit,callback:function(t){e.$set(e.item,"inventoryUnit",t)},expression:"item.inventoryUnit"}})],1)],1),i("v-layout",[i("v-flex",{attrs:{xs8:""}},[i("v-select",{attrs:{items:e.equipmentList,multiple:"",label:"适用设备名录","item-text":"codeName","item-value":"id",disabled:!0},model:{value:e.item.eqpIds,callback:function(t){e.$set(e.item,"eqpIds",t)},expression:"item.eqpIds"}})],1),i("v-flex",[i("v-radio-group",{attrs:{label:"工装治具好坏",row:"",disabled:""},model:{value:e.item.gdType,callback:function(t){e.$set(e.item,"gdType",t)},expression:"item.gdType"}},e._l(e.gdTypeList,(function(e){return i("v-radio",{key:e.dvalue,attrs:{label:e.dname,value:e}})})),1)],1)],1)],1)],1),i("v-layout",[i("v-flex",{attrs:{xs12:""}},[i("span",{staticClass:"headline"},[e._v("附件信息:")])])],1),e._l(e.item.fixtureDocumentList,(function(t,a){return i("v-layout",{key:a,attrs:{row:""}},[i("v-flex",{attrs:{xs5:""}},[i("v-text-field",{attrs:{value:t.documentViewModel.dname+t.documentViewModel.newestFileExt,disabled:"",label:"附件"}})],1),i("v-flex",{attrs:{xs5:""}},[i("v-text-field",{attrs:{label:"版本",value:t.userVersion,disabled:""}})],1),i("v-flex",[i("v-btn",{on:{click:function(i){return e.downloadFile(t.documentViewModel)}}},[e._v("下载")])],1)],1)})),i("v-divider",{staticStyle:{"border-style":"dashed","border-width":"thin","margin-top":"0px"}}),i("v-flex",{staticClass:"headline"},[e._v("资产信息：")]),i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs4:""}},[i("v-select",{attrs:{label:"ABC类",items:e.abcTypeList,"item-text":"dname","return-object":"",disabled:""},model:{value:e.item.abcType,callback:function(t){e.$set(e.item,"abcType",t)},expression:"item.abcType"}})],1),i("v-flex",{attrs:{xs4:""}},[i("v-text-field",{attrs:{label:"单价(元)",type:"number",min:"1",disabled:""},model:{value:e.item.originalValue,callback:function(t){e.$set(e.item,"originalValue",t)},expression:"item.originalValue"}})],1),i("v-flex",{attrs:{xs4:""}},[i("v-text-field",{attrs:{label:"采购周期(天)",type:"number",disabled:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              采购周期(天) "),i("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.item.procurementCycle,callback:function(t){e.$set(e.item,"procurementCycle",t)},expression:"item.procurementCycle"}})],1),i("v-flex",{attrs:{xs4:""}},[i("v-text-field",{attrs:{label:"使用年限(月)",disabled:"",type:"number"},model:{value:e.item.serviceLife,callback:function(t){e.$set(e.item,"serviceLife",t)},expression:"item.serviceLife"}})],1),i("v-flex",{attrs:{xs4:""}},[i("v-select",{attrs:{label:"使用频次",items:e.fmrTypeList,"item-text":"dname",disabled:"","return-object":""},model:{value:e.item.fmrType,callback:function(t){e.$set(e.item,"fmrType",t)},expression:"item.fmrType"}})],1)],1),i("v-divider",{staticStyle:{"border-style":"dashed","border-width":"thin"}}),i("v-layout",[i("v-flex",{staticClass:"headline"},[e._v("位置信息：")])],1),e._l(e.item.positions,(function(t){return i("v-layout",{key:t.id,attrs:{wrap:""}},[i("v-flex",[i("v-select",{attrs:{items:e.slocationList,label:"工装治具库位","item-text":"sname",disabled:"","item-value":"id"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              工装治具库位 "),i("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}],null,!0),model:{value:t.storageLocationID,callback:function(i){e.$set(t,"storageLocationID",i)},expression:"pos.storageLocationID"}})],1),i("v-flex",[i("v-text-field",{attrs:{label:"库存量",disabled:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              库存量 "),i("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}],null,!0),model:{value:t.inventory,callback:function(i){e.$set(t,"inventory",i)},expression:"pos.inventory"}})],1)],1)}))],2)],1)],1)},U=[],A={name:"fixturetoolSee",data:function(){return{equipmentList:[],typeList:[],manufacturerList:[],supplierList:[],statusList:[],periodUnitList:[],sparePartsDocumentList:[],abcTypeList:[],fmrTypeList:[],locations:[],selectDocument:[],deleteDocumentIndex:"",slocationList:[],gdTypeList:[]}},components:{fileUploader:$["a"],uploadInput:O["a"]},created:function(){this.initializa()},props:["item"],methods:{initializa:function(){var e=this;this.$Server.queryAll((new p["a"]).__name,{},{deleted:"false"}).then((function(t){e.supplierList=t.datas.filter((function(e){return e.ctypeName&&e.ctypeName.indexOf("供应商")>-1||void 0==e.ctypeName||null==e.ctypeName})),e.manufacturerList=t.datas.filter((function(e){return e.ctypeName&&e.ctypeName.indexOf("生产厂商")>-1||void 0==e.ctypeName||null==e.ctypeName}))})),this.$Server.queryAll((new f["a"]).__name,{},{dname:"ABC类"}).then((function(t){e.abcTypeList=t.datas})),this.$Server.queryAll((new f["a"]).__name,{},{dname:"使用频次"}).then((function(t){e.fmrTypeList=t.datas})),this.$Server.queryAll((new f["a"]).__name,{},{dname:"备件类型"}).then((function(t){e.typeList=t.datas})),this.$Server.queryAll((new f["a"]).__name,{},{dname:"单位"}).then((function(t){e.periodUnitList=t.datas})),this.$Server.queryAll((new f["a"]).__name,{},{dname:"备件状态"}).then((function(t){e.statusList=t.datas})),this.$Server.queryAll((new j["a"]).__name).then((function(t){e.slocationList=t.datas})),this.$Server.queryAll((new I["a"]).__name,{},{deleted:!1}).then((function(t){e.equipmentList=t.datas})),this.$Server.queryAll((new f["a"]).__name,{},{dname:"备件好坏"}).then((function(t){e.gdTypeList=t.datas}))},downloadFile:function(e){if(e&&e.newestFilePath){var t=document.createElement("a");t.href=e.newestFilePath,t.download=e.dname+e.newestFileExt,t.click()}}}},V=A,M=Object(N["a"])(V,q,U,!1,null,"055710ad",null),E=M.exports,B=new x["a"](new b),z={name:"fixturetool",data:function(){var e=this;return{initObject:{id:"",code:"",name:"",model:"",type:{},length:"",width:"",height:"",manufacturer:"",supplier:"",minInventory:"",abcType:{},originalValue:"",procurementCycle:"",serviceLife:"",fmrType:"",status:{dname:"启用"},positions:[{}],eqpIds:"",gdType:{dname:"正常"},fixtureDocumentList:[]},searchfx:"",sort:!0,total:1,DataSource:[],title:"",IsShow:!1,IsAddOp:!0,detailForUpdate:{},IsShowImport:!1,base64:"",supplierList:[],manufacturerList:[],statusList:[],gdTypeList:[],IsShowDtail:!1,headerBtns:[{disabled:!this.$per("RepairStandard","c"),text:"添加",icon:"self_add",click:function(){return e.tableAdd()}},{disabled:!this.$per("RepairStandard","u"),text:"编辑",icon:"self_edit",click:function(){return e.tableEdit()}},{disabled:!this.$per("RepairStandard","d"),text:"删除",icon:"self_delete",click:function(){return e.tableDelete()}},{disabled:!this.$per("RepairStandard","import"),text:"导入",icon:"self_import",click:function(){return e.import()}},{disabled:!this.$per("RepairStandard","e"),text:"导出",icon:"self_export",click:function(){return e.export()}}]}},computed:{headers:function(){var e=B.formatGridHeader();return!0===this.sort&&e.unshift({text:"序号",align:"center",sortable:!1}),e},formatFields:function(){return B.getFormatFields()}},components:{contentModal:y["a"],dataTable:g["a"],UploadFile:w["a"],fixturetoolDetail:D,fixturetoolSee:E},mounted:function(){this.initializa()},methods:{initializa:function(){var e=this;this.$Server.queryAll((new p["a"]).__name,{},{deleted:"false"}).then((function(t){e.supplierList=t.datas.filter((function(e){return e.ctypeName&&e.ctypeName.indexOf("供应商")>-1||void 0==e.ctypeName||null==e.ctypeName})),e.manufacturerList=t.datas.filter((function(e){return e.ctypeName&&e.ctypeName.indexOf("生产厂商")>-1||void 0==e.ctypeName||null==e.ctypeName}))})),this.$Server.queryAll((new f["a"]).__name,{},{dname:"备件状态"}).then((function(t){e.statusList=t.datas})),this.$Server.queryAll((new f["a"]).__name,{},{dname:"备件好坏"}).then((function(t){e.gdTypeList=t.datas}))},getFormData:function(e){var t=this,i=e.get("data");if(i){var a=i.name.substring(i.name.lastIndexOf(".")+1,i.name.length);"xls"!=a&&"xlsx"!=a&&(h["a"].alert("请检查文件是否为Excel文件"),t.$refs.uploadFile.clearFile())}},downloadTemp:function(){var e=document.createElement("a");e.href="/imporTemp/fixturetool.xls",e.download="工装治具.xls",e.click()},ComfirmImport:function(){var e=this,t=this.$refs.uploadFile.filename,i={base64:this.base64,fileName:t,fileType:"xls"};null==this.base64||0==this.base64.length?h["a"].alert("请选择导入的文件"):this.$Server.importFile(B.getModelName(),i).then((function(t){t.success&&null==t.datas.error?(h["a"].alert("导入成功","success"),e.$refs.uploadFile.clearFile(),e.IsShowImport=!1,e.initTable()):h["a"].alert(t.datas.error)}),(function(e){return h["a"].alert(e)}))},modalClosedImport:function(){this.IsShowImport=!1,this.$refs.uploadFile.clearFile()},import:function(){this.IsShowImport=!0},export:function(){this.$Server.exportFile(B.getModelName(),"工装治具"+this.$Utils.getLocalFotmatTime())},tableAdd:function(){this.resetForm(),this.IsAddOp=!0,this.$refs.addOrUpdate.initializa(),this.initObject.status=this.statusList.find((function(e){return"启用"==e.dname})),this.initObject.gdType=this.gdTypeList.find((function(e){return"正常"==e.dname})),this.detailForUpdate=JSON.parse(JSON.stringify(this.initObject)),this.title="添加工装治具",this.IsShow=!0},tableEdit:function(){var e=this;if(e.resetFormValidation(),e.IsAddOp=!1,e.title="编辑工装治具",1!=e.$refs.childDataTable.getCheckItems().length)h["a"].alert("请选择一项作为你修改的对象");else{var t=JSON.parse(JSON.stringify(e.$refs.childDataTable.getCheckItems()[0]));if(t.gdType&&(t.gdType=this.gdTypeList.find((function(e){return e.dvalue==t.gdType.dvalue}))),null==t.fixtureDocumentList&&(t.fixtureDocumentList=[]),t.supplier){var i=this.supplierList.find((function(e){return e.id===t.supplier}));t.supplier=i}if(t.manufacturer){var a=this.manufacturerList.find((function(e){return e.id===t.manufacturer}));t.manufacturer=a}t.status&&(t.status=this.statusList.find((function(e){return e.dvalue==t.status.dvalue}))),e.detailForUpdate=JSON.parse(JSON.stringify(t)),e.IsShow=!0}},rowDbClick:function(e){var t=this;t.title="工装治具详情",e.status&&(e.status=this.statusList.find((function(t){return t.dvalue==e.status.dvalue}))),e.gdType&&(e.gdType=this.gdTypeList.find((function(t){return t.dvalue==e.gdType.dvalue}))),t.detailForUpdate=JSON.parse(JSON.stringify(e)),t.IsShowDtail=!0},modalDetailClosed:function(){this.IsShowDtail=!1},clearMessage:function(){this.searchfx="",this.doSearch()},doSearch:function(){this.initTable()},initTable:function(e){var t=this;e&&e.page||(e=t.$refs.childDataTable.getPagination()),t.$Server.queryAll(B.getModelName(),{page:e.page,rowsPerPage:e.rowsPerPage},{searchfx:t.searchfx,deleted:!1}).then((function(e){t.$refs.childDataTable.unCheckItems(),t.DataSource=e.datas,t.total=e.page.total,t.DataSource.forEach((function(e){e.inventory<e.minInventory&&(e.inventoryStr=t.$Utils.setRedBackground(e.inventoryStr))}))}),(function(e){})),t.initializa()},modalComfirmed:function(){var e=this;if(1==e.$refs.addOrUpdate.validate()){var t=JSON.parse(JSON.stringify(e.detailForUpdate));t.manufacturer&&(t.manufacturer=t.manufacturer.id),t.supplier&&(t.supplier=t.supplier.id),e.$Server.addOrUpdate(B.getModelName(),t,!e.IsAddOp).then((function(t){t.success&&(e.IsShow=!1,e.initTable(),h["a"].alert("保存成功","success"))}),(function(e){h["a"].alert(e)}))}},modalClosed:function(){this.IsShow=!1},resetFormValidation:function(){this.$refs.addOrUpdate.$refs.form.resetValidation()},resetForm:function(){this.$refs.addOrUpdate.$refs.form.reset(),this.$refs.addOrUpdate.$refs.form.resetValidation()},cofirmDelete:function(){var e=this,t=this.$refs.childDataTable.getCheckItems();e.$Server.batchDelete(B.getModelName(),t).then((function(){e.initTable()}),(function(e){h["a"].alert(e)}))},tableDelete:function(){var e=this;e.$refs.childDataTable.getCheckItems().length<=0?h["a"].alert("请选中需要删除的对象"):S["a"].confirm("确认删除所选工装治具？","提示",500,(function(){e.cofirmDelete()}),(function(){}))}}},J=z,P=Object(N["a"])(J,a,n,!1,null,null,null);t["default"]=P.exports}}]);