(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-282e281c"],{"04645":function(e,t,a){"use strict";var s=a("4b86"),r=a.n(s);r.a},"0c10":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"form1",attrs:{"lazy-validation":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"取消原因",rules:[e.rules.required]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                            取消原因: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}]),model:{value:e.item.cancelReason,callback:function(t){e.$set(e.item,"cancelReason",t)},expression:"item.cancelReason"}})],1)],1)],1)],1)],1)},r=[],n=(a("d5b3"),{name:"CancelTask",data:function(){return{rules:{required:function(e){return!!e||"必填项"}}}},props:["item"],methods:{validate:function(){return 1==this.$refs.form1.validate()},resetValid:function(){this.$refs.form1.resetValidation(),this.$refs.form1.reset()}}}),i=n,l=a("6691"),c=Object(l["a"])(i,s,r,!1,null,"058eafcc",null);t["a"]=c.exports},"4b86":function(e,t,a){},"6f71":function(e,t,a){},"8131a":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("layContentHeader",{attrs:{title:"备件购置",buttons:e.headerBtns}},[a("v-text-field",{staticStyle:{width:"300px"},attrs:{label:"请输入购置单编号或申请人",clearable:"","hide-details":"","single-line":"",primary:""},on:{"click:clear":e.clearMessage},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a("v-icon",{on:{click:function(t){return e.doSearch()}}},[e._v("search")])]},proxy:!0}]),model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),a("gridTemplate",{ref:"childGridTemplate",attrs:{title:"购置任务",gridModel:e.spPurchaseTask,sort:!0},on:{editorsReCode:e.editorsReCode,beforeEdit:e.beforeEdit,beforeAdd:e.beforeAdd,beforeEditSubmit:e.beforeEditSubmit,rowDbClick:e.rowDbClick,afterInit:e.afterInit}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[e._v("基本信息")]),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"购置单编号",rules:[function(e){return!e||/^[\w|-]+$/.test(e)||"只能是数字,字母,下划线"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                    购置单编号\n                ")]},proxy:!0}]),model:{value:e.purchaseCode,callback:function(t){e.purchaseCode=t},expression:"purchaseCode"}})],1),a("v-flex",{attrs:{xs4:""}},[a("datePicker",{attrs:{label:"最迟到货时间",required:!0,rules:[function(e){return e&&""!=e||"必填项"},function(t){return new Date(t)>=new Date(e.today)||"最迟到货时间不能小于当前时间"}]},model:{value:e.latestTime,callback:function(t){e.latestTime=t},expression:"latestTime"}})],1),a("v-flex",{attrs:{xs4:""}},[a("selectUser",{ref:"selectUser",attrs:{value:e.item.assignName,required:!0,label:"申请人",multiple:!1,initselect:e.item.selectAssign},on:{changeValue:e.changeValue}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"购置原因"},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}})],1)],1),a("v-layout",[a("v-flex",{attrs:{xs12:""}},[e._v("\n            采购备件清单：\n             "),a("v-btn",{staticClass:"btnClass",attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){return e.addRowSpareParts()}}},[a("v-icon",[e._v("\n                    add\n                ")])],1),a("v-btn",{staticClass:"btnClass",attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){return e.deleteSpareparts(e.selectedIndex)}}},[a("v-icon",[e._v("\n                    remove\n                ")])],1)],1)],1),e._l(e.sPList,(function(t,s){return a("v-layout",{key:s,class:{"box-active":e.isSelectedArr[s]},attrs:{wrap:"","align-center":""},on:{click:function(t){return e.spareRowSelect(s)}}},[a("v-flex",{attrs:{xs12:""}},[a("v-radio-group",{attrs:{row:""},on:{change:function(a){return e.handleIsChange(a,t)}},model:{value:t.isSp,callback:function(a){e.$set(t,"isSp",a)},expression:"sp.isSp"}},[a("v-radio",{attrs:{label:"从已有备件中选择",value:!0}}),a("v-radio",{attrs:{label:"新备件",value:!1}})],1)],1),a("v-flex",{attrs:{xs3:""}},[t.isSp?a("v-select",{key:"part1",attrs:{items:e.sparePartsList,"item-text":"codeName","item-value":"id",rules:[function(e){return!!e||"必填项"}]},on:{change:function(a){e.handleSpChange(a,t)}},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                    备件名称 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}],null,!0),model:{value:t.sparePartsID,callback:function(a){e.$set(t,"sparePartsID",a)},expression:"sp.sparePartsID"}}):t.isSp?e._e():a("v-text-field",{key:"part2",attrs:{rules:[function(e){return!!e||"必填项"}]},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n                    备件名称 "),a("span",{staticStyle:{color:"red"}},[e._v("*")])]},proxy:!0}],null,!0),model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"sp.name"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{label:"规格型号",disabled:t.isSp},model:{value:t.model,callback:function(a){e.$set(t,"model",a)},expression:"sp.model"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-select",{attrs:{label:"供应商",items:e.supplierList,"item-text":"cname","item-value":"id",disabled:t.isSp},model:{value:t.supplier,callback:function(a){e.$set(t,"supplier",a)},expression:"sp.supplier"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{label:"数量",rules:[function(e){return!("0"===e)||"数量不能为0"},function(e){return!!e||"数量不能为空"},function(e){return!e||/^(0|[1-9][0-9]*)$/.test(e)||"只能是正整数"}],type:"number"},model:{value:t.purchaseCount,callback:function(a){e.$set(t,"purchaseCount",a)},expression:"sp.purchaseCount"}})],1)],1)}))],2),a("spPurchaseTaskDetail",{attrs:{taskDetail:e.taskDetail,isShowDetail:e.isShowDetail},on:{detailClose:e.detailClose}}),a("spPurchaseTaskResult",{attrs:{taskDetail:e.taskDetail,taskDetailId:e.taskDetail.id,isShowResult:e.isShowResult},on:{resultCancle:e.resultCancle}}),a(e.currentView,{ref:"componentForm",tag:"component",attrs:{processKey:"spPurchaseTask",PreviewType:e.PreviewType,objectId:e.objectId},on:{modalComfirmed:e.formComfirmed}}),a("contentModal",{attrs:{title:"取消原因",IsShow:e.IsShowCancelTask,width:"1100"},on:{modalComfirmed:function(t){return e.modalComfirmedCancelTask()},modalClosed:function(t){return e.modalClosedCancelTask()}}},[a("CancelTask",{ref:"CancelTask",attrs:{item:e.detailForUpdate}})],1)],1)},r=[],n=(a("bada"),a("e6d1"),a("7cfd"),a("4634"),a("0b34"),a("0c10")),i=a("f891"),l=a("a2a7"),c=a("1d53"),o=a("f05f"),u=a("b9da"),d=a("5b9b"),p=(a("af05"),a("2c75")),f=a("8333"),h=a("1d18"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("contentModal",{attrs:{title:"购置任务详情",IsShow:e.isShowDetail,width:"1100",isDetails:!0},on:{modalClosed:function(t){return e.detailClose()}}},[a("DetailBlock",{attrs:{taskDetail:e.taskDetail}}),e.taskDetail.status&&0!=e.taskDetail.status.dvalue&&e.isShowImage?a("v-container",{staticStyle:{padding:"10px"},attrs:{"grid-list-md":""}},[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("div",[a("span",{staticStyle:{"font-weight":"bold"}},[e._v("任务进度:")])]),a("img",{attrs:{src:e.imageSrc}})])],1)],1):e._e()],1)},v=[],b=a("88a5"),g=a("551a"),S=a("d5b3"),x={name:"spPurchaseTaskDetail",data:function(){return{imageSrc:"",isShowImage:!1}},props:{isShowDetail:Boolean,taskDetail:Object},watch:{taskDetail:{handler:function(e){this.isShowImage=!1,e&&e.status&&0!=e.status.dvalue&&this.seeTrace()},deep:!0}},components:{DetailBlock:b["a"],contentModal:l["a"]},methods:{detailClose:function(){this.imageSrc="",this.$emit("detailClose")},seeTrace:function(){var e=this;g["a"].http(window.processForUrl.getUrlForInstanceId(e.taskDetail.id),"get","",{success:function(t){if(t.data&&t.data.data&&t.data.data.id){var a=t.data.data.id;e.seeImage(a)}}})},seeImage:function(e){var t=this;g["a"].http(window.processForUrl.getUrlForInstanceTrace(e),"get",{},{success:function(e){t.imageSrc=e.data.data.image,t.isShowImage=!0}})}}},k=x,w=a("6691"),C=Object(w["a"])(k,m,v,!1,null,null,null),T=C.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("contentModal",{attrs:{title:"购置结果",IsShow:e.isShowResult,width:"1100",isDetails:!0},on:{modalClosed:function(t){return e.resultCancle()}}},[a("v-container",{staticStyle:{padding:"10px"},attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[e._v("实际到货日期："+e._s(e.taskDetail.latestTime&&e.taskDetail.latestTime.substring(0,10)))])],1),a("h5",{staticClass:"sub-title"},[e._v("购置清单")]),e._l(e.taskDetail.rspsList,(function(t,s){return a("v-layout",{key:s,staticStyle:{"margin-left":"20px"}},[a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("备件名称："+e._s(t.name))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("规格型号："+e._s(t.model))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("供应商："+e._s(t.supplierName))])]),a("v-flex",{attrs:{xs3:""}},[a("p",[e._v("数量："+e._s(t.purchaseCount))])])],1)})),a("h5",{staticClass:"sub-title"},[e._v("购置验收结果")]),a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",e._l(e.headers,(function(s,r){return a("td",{key:r,staticClass:"text-xs-center"},["acceptance"===s.value?[e._v("\n                                                "+e._s(t.item[s.value]?"已检验":"未检验")+"\n                                            ")]:"document"===s.value?a("span",[t.item.documentName?a("v-btn",{staticClass:"primary",attrs:{small:""},on:{click:function(a){return e.downloadDocument(t.item.documentName)}}},[e._v("下载")]):e._e()],1):"acceptanceResult"===s.value?[e._v("\n                                                "+e._s(1===t.item[s.value]?"通过":0===t.item[s.value]?"未通过":"")+"\n                                            ")]:[e._v(e._s(t.item[s.value]))]],2)})),0)]}}])})],1)],1)],2)],1)},P=[],y=a("ef3e"),_={name:"EqpPurchaseTaskList",data:function(){return{headers:[{text:"备件名称",align:"center",sortable:!1,value:"sparePartsName"},{text:"规格型号",align:"center",sortable:!1,value:"sparePartsModel"},{text:"是否检验",align:"center",sortable:!1,value:"acceptance"},{text:"检验结果",align:"center",sortable:!1,value:"acceptanceResult"},{text:"检验人",align:"center",sortable:!1,value:"acceptancePersonName"},{text:"备注",align:"center",sortable:!1,value:"description"},{text:"附件",align:"center",sortable:!1,value:"document"}],items:[]}},props:{isShowResult:Boolean,taskDetail:Object,taskDetailId:String},components:{simpleDataTable:y["a"],contentModal:l["a"]},watch:{taskDetailId:function(e){if(e){var t=this;t.$Server.queryAll("SpPurchaseAcceptance",{},{purchaseTaskID:e}).then((function(e){t.items=e.datas}),(function(e){return Message.alert(e)}))}}},methods:{resultCancle:function(){this.$emit("resultCancle")},downloadDocument:function(e){var t=document.createElement("a"),a=e.substring(e.lastIndexOf("_")+1);t.href=e,t.download=a,t.click()}}},I=_,$=(a("f915"),Object(w["a"])(I,D,P,!1,null,"15119f59",null)),O=$.exports,N=a("b216"),j=a("531b"),F=(a("681f"),a("6bf2")),R=a.n(F),U=new f["a"](new d["a"]),G=sessionStorage.uname,A=sessionStorage.userId,E={name:"SpPurchaseTask",data:function(){var e=this;return{today:R()(new Date).format("YYYY-MM-DD"),spPurchaseTask:{},IsShowCancelTask:!1,detailForUpdate:{},headerBtns:[{disabled:!this.$per("SpPurchaseTask","c"),text:"添加",icon:"self_add",click:function(){return e.$refs.childGridTemplate.GridAdd()}},{disabled:!this.$per("SpPurchaseTask","u"),text:"编辑",icon:"self_edit",click:function(){return e.GridEdit()}},{disabled:!this.$per("SpPurchaseTask","d"),text:"删除",icon:"self_delete",click:function(){return e.GridDelete()}},{disabled:!this.$per("SpPurchaseTask","exe"),text:"执行",icon:"self_execute",click:function(){return e.excuteTask()}},{disabled:!this.$per("SpPurchaseTask","cancel"),text:"取消",icon:"self_cancel",click:function(){return e.cancleTask()}},{disabled:!(-1!=JSON.parse(sessionStorage.getItem("permission")).findIndex((function(e){return"/api/SpPurchaseTask"==e.pvalue&&"查看结果"==e.pname}))),text:"查看结果",icon:"self_look",click:function(){return e.showResult()}}],searchValue:"",headers:[{text:"序号",value:"",align:"center",sortable:!1},{text:"入库单编号",value:"inStorageNo",align:"center",sortable:!1},{text:"入库日期",value:"inStorageDate",align:"center",sortable:!1},{text:"入库人",value:"inStoragePersonName",align:"center",sortable:!1},{text:"来源",value:"source",align:"center",sortable:!1},{text:"备件编号",value:"sparePartcodes",align:"center",sortable:!1},{text:"备件名称",value:"sparePartNames",align:"center",sortable:!1},{text:"库存量",value:"inventorys",align:"center",sortable:!1},{text:"入库数量",value:"amounts",align:"center",sortable:!1}],isShowDetail:!1,isShowResult:!1,DataSource:[],sparePartsList:[],supplierList:[],totalDatas:1,purchaseCode:"",latestTime:null,applicant:"",reason:"",spareParts:[{}],spareParts2:[{}],isModelDisabled:[],editSpares:[{text:"备件名称",value:"sparePartsID"},{text:"规格型号",value:"model"},{text:"供应商",value:"supplier"},{text:"数量",value:"purchaseCount"}],isSelectedArr:[],selectedIndex:0,item:{assignName:"",selectAssign:[]},taskDetail:{},currentView:"",processKey:window.process.spPurchaseTask,PreviewType:1,objectId:"",test1:"",sPList:[]}},components:{gridTemplate:u["a"],dataTable:o["a"],selectUser:h["a"],spPurchaseTaskDetail:T,spPurchaseTaskResult:O,CheckPanel:N["a"],datePicker:c["a"],contentModal:l["a"],spPurchaseDetail:i["a"],CancelTask:n["a"]},methods:{test:function(){},doSearch:function(){this.$refs.childGridTemplate.doSearch({searchfx:this.searchValue})},clearMessage:function(){this.$refs.childGridTemplate.doSearch({})},editorsReCode:function(e){e=[],this.$refs.childGridTemplate.editors=e},GridEdit:function(){var e=this.$refs.childGridTemplate.getCheckItems();1!=e.length?S["a"].alert("请选中一个需要修改的项"):0===e[0].status.dvalue?this.$refs.childGridTemplate.GridEdit():S["a"].alert("未开始的任务才能编辑！")},beforeEdit:function(e,t){this.purchaseCode=t.purchaseCode,this.latestTime=t.latestTime,this.applicant=t.applicant,this.reason=t.reason,this.item.assignName=t.applicantName;var a=JSON.parse(JSON.stringify(t.rspsList));a.forEach((function(e){e.sparePartsID?e.isSp=!0:e.isSp=!1})),this.sPList=a,this.itemObj=t},beforeAdd:function(){this.sPList=[],this.purchaseCode="",this.latestTime=R()(new Date).format("YYYY-MM-DD"),this.applicant=A,this.item.assignName=G,this.item.selectAssign=[{uname:G,id:A,selected:!0,title:G,name:G}],this.reason=""},beforeEditSubmit:function(e){e.purchaseCode=this.purchaseCode,e.latestTime=this.latestTime,e.applicant=this.applicant,e.reason=this.reason;var t=JSON.parse(JSON.stringify(this.sPList));t.forEach((function(e){delete e.isSp})),e.rspsList=t},afterInit:function(e){var t=this;e.forEach((function(e){var a=[],s=[],r=[],n=[],i=[];e.rspsList.forEach((function(e){a.push(e.code),s.push(e.name),r.push(e.model),n.push(e.supplierName),i.push(e.purchaseCount)})),e.code=a,e.name=s,e.model=r,e.supplierName=n,e.purchaseCount=i,e.status&&e.status.dname&&("未开始"==e.status.dname||"已取消"==e.status.dname)?e.statusName=t.$Utils.setStart(e.status.dname):e.status&&e.status.dname&&"进行中"==e.status.dname?e.statusName=t.$Utils.setRed(e.status.dname):e.status&&e.status.dname&&"已完成"==e.status.dname&&(e.statusName=t.$Utils.setSuccess(e.status.dname))}))},rowDbClick:function(e){this.taskDetail=e,this.isShowDetail=!0},GridDelete:function(){var e=this.$refs.childGridTemplate.getSelectedItems();if(e.length<=0)S["a"].alert("请选择删除项");else{var t=!0;e.forEach((function(e){"未开始"!=e.status.dname&&(t=!1)})),t?this.$refs.childGridTemplate.GridDelete():S["a"].alert("只有未开始的购置备件任务可以删除")}},excuteTask:function(){var e=this.$refs.childGridTemplate.getSelectedItems();if(1===e.length){var t=sessionStorage.getItem("userId"),a=e[0];if(a.applicant!==t)S["a"].alert("这条任务负责人不是你");else{var s=a.status.dname;"未开始"===s?(this.objectId=a.id,this.initiateProcess()):S["a"].alert("只有未开始任务才能执行")}}else S["a"].alert("请选择一个任务执行")},getQueryStringArgs:function(e){if(e&&e.length>0){var t=e.length>0?e.substring(1):"",a={},s=t.length?t.split("&"):[],r=null,n=null,i=null,l=0,c=s.length;for(l=0;l<c;l++)r=s[l].split("="),n=decodeURIComponent(r[0]),i=decodeURIComponent(r[1]),n.length&&(a[n]=i);return a}return{}},initiateProcess:function(){var e=this;j["a"].http(window.processForUrl.getUrlForFirst(e.processKey),"get","",{success:function(t){var a=t.data.data,s=t.data.data.formKey,r={};s.indexOf("?")>-1&&(r=e.getQueryStringArgs(s.substring(s.indexOf("?"),s.length)),s=s.substring(0,s.indexOf("?")));var n=e.$getFrom("baseForm");n&&-1!=n&&(e.currentView=n,setTimeout((function(){e.$refs.componentForm.modalOpen(s,r,a)}),200))},error:function(e){S["a"].alert(e)}})},cancleTask:function(){var e=this.$refs.childGridTemplate.getSelectedItems(),t=this;if(1===e.length){var a=sessionStorage.getItem("userId"),s=e[0];if(s.applicant!==a)S["a"].alert("这条任务的负责人不是你");else{var r=s.status.dname;"进行中"===r?(t.detailForUpdate=JSON.parse(JSON.stringify(s)),t.$refs.CancelTask.resetValid(),t.IsShowCancelTask=!0):S["a"].alert("只有进行中的任务才能取消")}}else S["a"].alert("请选择一个任务")},modalComfirmedCancelTask:function(){var e=this;1==e.$refs.CancelTask.validate()?(e.cofirmCancel(e.detailForUpdate),e.IsShowCancelTask=!1):S["a"].alert("验证错误")},modalClosedCancelTask:function(){var e=this;e.IsShowCancelTask=!1},cofirmCancel:function(e){var t=this;j["a"].http(window.processForUrl.getUrlForInstanceId(e.id),"get","",{success:function(a){a.data&&a.data.data&&a.data.data.id?j["a"].http(window.processForUrl.getUrlForInstance(a.data.data.id),"Delete","",{success:function(a){e.status.dvalue=3,t.$Server.addOrUpdate(U.getModelName(),e,!0).then((function(e){e.success&&(t.$refs.childGridTemplate.init(),S["a"].alert("取消成功","success"))}),(function(e){S["a"].alert(e)}))},error:function(e){S["a"].alert(e)}}):(e.status.dvalue=3,t.$Server.addOrUpdate(U.getModelName(),e,!0).then((function(e){e.success&&(t.$refs.childGridTemplate.init(),S["a"].alert("取消成功","success"))}),(function(e){S["a"].alert(e)})))},error:function(e){S["a"].alert(e)}})},showResult:function(){var e=this.$refs.childGridTemplate.getSelectedItems();if(1!=e.length)S["a"].alert("请选择一条数据查看详情");else{var t=e[0];"已完成"==t.status.dname?(this.isShowResult=!0,this.taskDetail=e[0]):S["a"].alert("只有对已完成的任务才能查看！")}},changeValue:function(e){e.length>0&&(this.applicant=e[0].id)},addRowSpareParts:function(){this.sPList.push({isSp:!0})},deleteSpareparts:function(e){this.sPList.splice(e,1),this.isSelectedArr.splice(e,1,!1)},handleSpChange:function(e,t){var a=this.sparePartsList.find((function(t){return t.id===e}));a&&(console.log(a),t.model=a.model,t.supplier=a.supplier)},handleIsChange:function(e,t){t.name="",t.sparePartsID="",t.supplier="",t.model="",t.purchaseCount=""},comboboxChange:function(e){this.spareParts[e].model&&(this.spareParts[e].model=""),this.spareParts[e].purchaseCount&&(this.spareParts[e].purchaseCount=""),this.spareParts[e].supplier&&(this.spareParts[e].supplier="")},init:function(){var e=this;e.$Server.queryAll((new p["a"]).__name,null,{deleted:!1}).then((function(t){e.sparePartsList=t.datas})),this.$Server.queryAll("Company",{},{deleted:"false"}).then((function(t){e.supplierList=t.datas.filter((function(e){return e.ctypeName&&e.ctypeName.indexOf("供应商")>-1||void 0==e.ctypeName||null==e.ctypeName}))}))},spareRowSelect:function(e){this.spareParts.length;this.isSelectedArr.splice(this.selectedIndex,1,!1),this.isSelectedArr.splice(e,1,!0),this.selectedIndex=e},detailClose:function(){this.isShowDetail=!1,this.taskDetail={}},resultCancle:function(){this.isShowResult=!1},initialize:function(){var e=this;this.$Server.queryAll(SparePartInStorageParsing.getModelName(),{},{}).then((function(t){e.DataSource=t.datas,e.totalDatas=t.page.total}),(function(e){return S["a"].alert(e)}))},formComfirmed:function(){this.$refs.childGridTemplate.init()}},mounted:function(){this.spPurchaseTask=new d["a"],this.init()}},q=E,L=(a("04645"),Object(w["a"])(q,s,r,!1,null,"462eb8c8",null));t["default"]=L.exports},af05:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var s=a("7300"),r=a("5873"),n=a("ddf2"),i=a("80ea"),l=a("ae0a"),c=a("97a3"),o=a("652a"),u=a("1269"),d=new o["a"],p=function(e){function t(){var e,a;Object(s["a"])(this,t);for(var l=arguments.length,o=new Array(l),u=0;u<l;u++)o[u]=arguments[u];return a=Object(r["a"])(this,(e=Object(n["a"])(t)).call.apply(e,[this].concat(o))),Object(c["a"])(Object(i["a"])(a),"__name","SparePartInStorage"),Object(c["a"])(Object(i["a"])(a),"inStorageNo",d.charField({require:!0,fieldName:"入库单编号",rules:[function(e){return!!e||"必填项"}]})),Object(c["a"])(Object(i["a"])(a),"inStorageDate",d.dateField({require:!0,fieldName:"入库日期",rules:[function(e){return!!e||"必填项"}],format:function(e){if(e)return e.substring(0,10)}})),Object(c["a"])(Object(i["a"])(a),"inStoragePersonName",d.charField({require:!0,fieldName:"入库人",rules:[function(e){return!!e||"必填项"}]})),Object(c["a"])(Object(i["a"])(a),"source",d.charField({require:!0,fieldName:"来源",rules:[function(e){return!!e||"必填项"}]})),Object(c["a"])(Object(i["a"])(a),"sparePartcode",d.charField({require:!0,fieldName:"备件编号",rules:[function(e){return!!e||"必填项"}]})),Object(c["a"])(Object(i["a"])(a),"sparePartName",d.charField({require:!0,fieldName:"备件名称",rules:[function(e){return!!e||"必填项"}]})),Object(c["a"])(Object(i["a"])(a),"inventory",d.charField({require:!0,fieldName:"库存量",rules:[function(e){return!!e||"必填项"}]})),Object(c["a"])(Object(i["a"])(a),"amount",d.charField({require:!0,fieldName:"入库数量 ",rules:[function(e){return!!e||"必填项"}]})),Object(c["a"])(Object(i["a"])(a),"type",d.charField({require:!0,visible:!1,fieldName:"入库类型",rules:[function(e){return!!e||"必填项"}],format:function(e){if(e)return e.dname}})),Object(c["a"])(Object(i["a"])(a),"description",d.charField({require:!0,visible:!1,fieldName:"备注",rules:[function(e){return!!e||"必填项"}]})),a}return Object(l["a"])(t,e),t}(u["a"])},f915:function(e,t,a){"use strict";var s=a("6f71"),r=a.n(s);r.a}}]);