(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21b499"],{beaa:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("layContentHeader",{attrs:{title:"待办任务",buttons:e.headerBtns}},[a("v-text-field",{staticStyle:{width:"340px"},attrs:{label:"请输入任务名称或流程名称","hide-details":"","single-line":"",primary:"",clearable:""},on:{"click:clear":e.clearMessage},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a("v-icon",{on:{click:function(t){return e.doSearch()}}},[e._v("search")])]},proxy:!0}]),model:{value:e.searchfx,callback:function(t){e.searchfx=t},expression:"searchfx"}})],1),a("layContent",[a("dataTable",{ref:"childDataTable",attrs:{headers:e.headers,DataSource:e.DataSource,total:e.total,hideOperation:!0,sort:!0,allowActive:!0},on:{initialize:e.initialize,rowDbClick:e.startProcessTask}})],1),a(e.currentView,{ref:"componentForm",tag:"component",attrs:{itemDetail:e.itemDetail,commentSource:e.commentSource,PreviewType:2},on:{modalComfirmed:e.formComfirmed}})],1)},n=[],i=(a("e6d1"),a("e3b8")),o=a("551a"),s=a("bd12"),c=a("09fd"),l=a("01ee"),u={name:"processTask",data:function(){var e=this;return{searchfx:"",total:0,DataSource:[],formData:{},IsPreview:!1,commentSource:[],itemDetail:{},currentView:"",businessKey:"",processInstanceId:"",headerBtns:[{disabled:!1,text:"执行",icon:"self_execute",click:function(){return e.startProcessTask()}}],headers:[{text:"序号",align:"center",sortable:!1},{text:"任务名称",align:"center",sortable:!1,value:"name"},{text:"创建时间",align:"center",sortable:!1,value:"createTime"},{text:"计划完成时间",align:"center",sortable:!1,value:"dueDate"},{text:"流程名称",align:"center",sortable:!1,value:"processDefinitionName"}],activeItem:{}}},mounted:function(){},methods:{clearMessage:function(){this.searchfx="",this.doSearch()},doSearch:function(){var e=this.$refs.childDataTable.getPagination();1==e.page?this.initialize(e):this.$refs.childDataTable.setPage(1)},initialize:function(e){var t=this,a=t.searchfx?encodeURI("%"+t.searchfx+"%"):"";o["a"].http(window.processForUrl.getUrlForTodos(e.page,e.rowsPerPage)+"&queryText="+a,"get",{},{success:function(e){t.DataSource=e.data.data.rows,t.total=e.data.data.total,t.$refs.childDataTable.setActiveItem([])},error:function(e){s["a"].alert(e)}})},getQueryStringArgs:function(e){if(e&&e.length>0){var t=e.length>0?e.substring(1):"",a={},r=t.length?t.split("&"):[],n=null,i=null,o=null,s=0,c=r.length;for(s=0;s<c;s++)n=r[s].split("="),i=decodeURIComponent(n[0]),o=decodeURIComponent(n[1]),i.length&&(a[i]=o);return a}return{}},startProcessTask:function(){var e=this,t=this.$refs.childDataTable.getActiveItem();e.itemDetail=t,t&&!Array.isArray(t)&&t.id?o["a"].http(window.processForUrl.getUrlForTask(t.id),"get","",{success:function(t){var a=t.data.data,r=t.data.data.formKey;e.commentSource=a.comments;var n={};void 0!=r&&null!=r&&r.indexOf("?")>-1&&(n=e.getQueryStringArgs(r.substring(r.indexOf("?"),r.length)),r=r.substring(0,r.indexOf("?")));var i=e.$getFrom("baseForm");i&&-1!=i&&(e.currentView=i,setTimeout((function(){e.$refs.componentForm.modalOpen(r,n,a)}),200))},error:function(e){s["a"].alert(e)}}):s["a"].alert("请选择一项作为你操作的对象！")},formComfirmed:function(){this.initialize({page:1,rowsPerPage:10})}},components:{dataTable:i["a"],layContent:c["a"],layContentHeader:l["a"]}},d=u,f=a("6691"),m=Object(f["a"])(d,r,n,!1,null,null,null);t["default"]=m.exports}}]);