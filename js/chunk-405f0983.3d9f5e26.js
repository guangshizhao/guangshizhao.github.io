(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-405f0983"],{1395:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("layContentHeader",{attrs:{title:"设备统计"}}),a("div",[a("v-btn",{staticClass:"btn-0",attrs:{small:"",depressed:""},on:{click:t.showMessage}},[t._v(t._s(t.btnMessage))])],1),a("div",{staticClass:"mar-t10"},[a("div",{staticClass:"box-wrap bg-fff"},[a("div",{staticClass:"box",staticStyle:{width:"60%"}},[a("div",{staticClass:"box-header flex-header"},[a("div",{staticClass:"title-0"},[t._v("设备数量统计")]),a("div",{staticClass:"label-title"},[t._v("统计维度:")]),a("div",{staticClass:"width280"},[a("v-select",{staticClass:"self-select",attrs:{items:t.countTypeList,"item-text":"name","item-value":"name"},on:{change:t.changeOne},model:{value:t.countType,callback:function(e){t.countType=e},expression:"countType"}})],1)]),a("div",{staticStyle:{width:"100%",height:"350px"},attrs:{id:"echart_one"}})]),a("div",{staticClass:"box mar-l22",staticStyle:{width:"40%"}},[a("div",{staticClass:"box-header flex-header"},[a("div",{staticClass:"label-title"},[t._v("统计维度:")]),a("div",{staticClass:"width280"},[a("v-select",{staticClass:"self-select",attrs:{items:t.classTypeList,"item-text":"name","item-value":"name"},on:{change:t.changeTwo},model:{value:t.classType,callback:function(e){t.classType=e},expression:"classType"}})],1)]),a("div",{staticStyle:{float:"right",width:"100%",height:"300px",padding:"10px 0px 0px 10px"},attrs:{id:"echart_two"}})])])]),a("div",{staticClass:"box mar-t22"},[a("div",{staticClass:"box-header flex-header",staticStyle:{height:"50px",overflow:"hidden"}},[a("div",{staticClass:"label-title"},[t._v("时间:")]),a("div",{staticClass:"width280"},[a("datePicker",{attrs:{clearText:"",okText:"确定",model:"String",locale:"zh-cn"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),a("div",{staticClass:"label-title"},[t._v("到")]),a("div",{staticClass:"width280"},[a("datePicker",{attrs:{clearText:"",okText:"确定",model:"String",locale:"zh-cn"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),a("div",{staticClass:"label-title"},[t._v("时间维度:")]),a("div",{staticClass:"width280"},[a("v-select",{staticClass:"self-select",attrs:{items:t.timeTypeList,"item-text":"name","item-value":"name"},on:{change:t.changeOne},model:{value:t.timeType,callback:function(e){t.timeType=e},expression:"timeType"}})],1),a("v-btn",{staticClass:"btn-0",attrs:{depressed:"",small:""},on:{click:t.searchInfo}},[t._v("查询")])],1)]),a("div",{staticStyle:{"margin-top":"-2px"}},[a("div",{staticClass:"box-wrap"},[a("div",{staticClass:"box",staticStyle:{width:"40%"}},[a("div",{staticClass:"box-header flex-header bg-fff"},[a("div",{staticClass:"title-0"},[t._v("设备管理统计")]),a("div",{staticClass:"label-title"},[t._v("统计类容:")]),a("div",{staticClass:"width280"},[a("v-select",{staticClass:"self-select",staticStyle:{"margin-right":"20px"},attrs:{items:t.contentList,"item-text":"name","item-value":"name"},on:{change:t.changeThree},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)]),t._m(0)]),a("div",{staticClass:"box mar-l22",staticStyle:{width:"60%"}},[a("div",{staticClass:"box-header flex-header"},[a("div",{staticClass:"title-0"},[t._v("设备盘点结果统计")]),a("div",{staticClass:"label-title"},[t._v("盘点合格率:")]),a("div",{staticClass:"width280"},[a("v-text-field",{staticClass:"self-select",attrs:{rules:[function(t){return!!t||"必填项"}],type:"number",min:"0",max:"1"},on:{blur:t.changeFour},model:{value:t.inventoryRate,callback:function(e){t.inventoryRate=e},expression:"inventoryRate"}})],1),a("div",{staticClass:"label-title"},[t._v("统计维度:")]),a("div",{staticClass:"width280"},[a("v-select",{staticClass:"self-select",attrs:{items:t.inventoryTypeList,"item-text":"name","item-value":"name"},on:{change:t.changeFour},model:{value:t.inventoryType,callback:function(e){t.inventoryType=e},expression:"inventoryType"}})],1)]),t._m(1)])])]),a("equipmentCountDetail",{ref:"equipmentDetail",attrs:{countType:t.countType,IsShow:t.IsShow},on:{equipmentDetailClosed:t.equipmentDetailClosed}})],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box-body"},[a("div",{staticStyle:{width:"100%",height:"300px",padding:"10px 0px 0px 10px"},attrs:{id:"echart_three"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{float:"right",width:"100%",height:"300px",padding:"10px 0px 0px 10px"},attrs:{id:"echart_four"}})])}],s=(a("7cfd"),a("e6d1"),a("4634"),a("de90"),a("d5b3")),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"1000px",persistent:!0,scrollable:""},model:{value:t.IsShow,callback:function(e){t.IsShow=e},expression:"IsShow"}},[a("v-card",[a("v-card-title",{staticClass:"primary"},[a("span",{staticClass:"headline",staticStyle:{color:"#fff"}},[t._v(t._s(t.title))])]),a("v-card-text",[a("v-container",{staticStyle:{padding:"0"},attrs:{"grid-list-md":"","text-md-center":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-select",{attrs:{items:t.sourceList,label:"来源","item-value":"dvalue","item-text":"dname",clearable:"","single-line":"",multiple:""},model:{value:t.source,callback:function(e){t.source=e},expression:"source"}})],1),a("v-flex",{attrs:{xs12:"",ms2:"",md2:""}},[a("treeCombo",{ref:"treeCombo",attrs:{Source:t.dataSource,MultipleSelect:!1,label:"所属部门",independentCheck:!0,independentSingleCheck:!1,disabled:"所属部门"==t.countType},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("treeCombo",{ref:"treeCombo",attrs:{Source:t.dataSource,MultipleSelect:!1,label:"使用部门",independentCheck:!0,independentSingleCheck:!1,disabled:"使用部门"==t.countType},model:{value:t.usedpartment,callback:function(e){t.usedpartment=e},expression:"usedpartment"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-select",{attrs:{items:t.supplierList,label:"供应商","item-value":"id","item-text":"cname",clearable:"","single-line":"",multiple:""},model:{value:t.supplier,callback:function(e){t.supplier=e},expression:"supplier"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-select",{attrs:{items:t.abcList,label:"ABC类","item-value":"dvalue","item-text":"dname",clearable:"","single-line":"",multiple:""},model:{value:t.abcType,callback:function(e){t.abcType=e},expression:"abcType"}})],1),a("v-flex",{attrs:{xs1:""}},[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){return t.Search()}}},[t._v("查询")])],1)],1)],1),a("dataTable",{ref:"childDataTable",attrs:{headers:t.headers,sort:!0,DataSource:t.equipDataSource,hideOperation:!0,formatFields:t.FormatFields,total:t.total},on:{initialize:t.initialize}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.equipmentDetailClosed()}}},[t._v("关闭")])],1)],1)],1)},l=[],o=a("f05f"),c=a("f19a"),d=a("9ee5"),u=a("8333"),h=new u["a"](new d["a"]),m={name:"equipmentCountDetail",data:function(){return{title:"设备数量统计详情",headers:[{text:"序号",align:"center",sortable:!1},{text:"设备编号",align:"center",sortable:!1,value:"code"},{text:"设备名称",align:"center",sortable:!1,value:"name"},{text:"规格型号",align:"center",sortable:!1,value:"model"},{text:"设备类型",align:"center",sortable:!1,value:"type"},{text:"来源",align:"center",sortable:!1,value:"source"},{text:"所属部门",align:"center",sortable:!1,value:"departmentName"},{text:"使用部门",align:"center",sortable:!1,value:"usedDepartName"},{text:"ABC类",align:"center",sortable:!1,value:"abcType"}],FormatFields:h.getFormatFields(),total:1,currentparams:{},source:[],sourceList:[],dataSource:[],usedpartment:[],department:[],supplier:[],supplierList:[],abcType:[],abcList:[],equipDataSource:[],currentparam:{},typeName:""}},created:function(){},methods:{equipmentDetailClosed:function(){this.source=[],this.usedpartment=[],this.department=[],this.supplier=[],this.abcType=[],this.equipDataSource=[],this.total=1,this.$emit("equipmentDetailClosed")},initialize:function(t){var e=this;t&&null!=t.page&&(this.currentparam=t);var a={source:this.source,department:this.department,usedpartment:this.usedpartment,supplier:this.supplier,abcType:this.abcType,typeName:this.typeName,content:"设备数量详情",countType:this.countType},i=this.currentparam,n=i.page,s=i.rowsPerPage;this.$Server.queryAll("EqpManageStatis",{page:n,rowsPerPage:s},a).then((function(t){t.datas&&t.datas[0]&&t.datas[0].equipmentList&&(e.equipDataSource=t.datas[0].equipmentList,e.total=t.datas[0].equipmentSize)}))},searchInfo:function(t){t&&(this.typeName=t),this.Search()},Search:function(){var t=this.currentparam.page;1==t?this.initialize():this.$refs.childDataTable.setPage(1)},initData:function(){var t=this;this.$Server.queryAll("Datadict",{},{dname:"设备来源"}).then((function(e){t.sourceList=e.datas})),this.$Server.queryAll("Organization").then((function(e){t.dataSource=e.datas})),this.$Server.queryAll("Datadict",{},{dname:"ABC类"}).then((function(e){t.abcList=e.datas})),this.$Server.queryAll("Company",{},{deleted:"false"}).then((function(e){t.supplierList=e.datas.filter((function(t){return t.ctypeName&&t.ctypeName.indexOf("供应商")>-1||void 0==t.ctypeName||null==t.ctypeName}))}))}},components:{treeCombo:c["a"],dataTable:o["a"]},props:["IsShow","countType"]},p=m,v=a("6691"),f=Object(v["a"])(p,r,l,!1,null,null,null),b=f.exports,y=a("1d53"),x={data:function(){return{startDate:"",endDate:"",countTypeList:[{name:"设备类型"},{name:"所属部门"},{name:"使用部门"}],countType:"设备类型",classTypeList:[{name:"ABC类"},{name:"来源"}],classType:"ABC类",contentList:[{name:"设备闲置处理"},{name:"设备购置"},{name:"设备租赁"},{name:"设备调拨"}],content:"设备闲置处理",timeTypeList:[{name:"周"},{name:"月"},{name:"年"}],timeType:"周",inventoryTypeList:[{name:"时间"},{name:"所属部门"},{name:"使用部门"}],inventoryType:"时间",dataSource:[],total:0,headers:[{text:"仪器编号",align:"center",sortable:!1,value:"code"},{text:"仪器名称",align:"center",value:"name",sortable:!1},{text:"校准时间",align:"center",value:"nextCalibrationDate",sortable:!1},{text:"使用部门",align:"center",value:"usedDepartmentName",sortable:!1}],echartOne:null,echartTwo:null,echartThree:null,echartFour:null,inventoryRate:"",IsShow:!1,typeName:"",btnMessage:"显示数值",showMsg:!1}},components:{datePicker:y["a"],equipmentCountDetail:b},mounted:function(){this.initialize()},methods:{showMessage:function(){1==this.showMsg?(this.showMsg=!1,this.btnMessage="显示数值"):(this.showMsg=!0,this.btnMessage="隐藏数值"),this.initOne(),this.initFour()},changeOne:function(){this.initOne()},changeTwo:function(){this.initTwo()},changeThree:function(){this.initThree()},changeFour:function(){this.initFour()},initialize:function(){var t=this;t.initOne(),t.initTwo(),t.initThree(),t.initFour()},equipmentDetailClosed:function(){this.IsShow=!1},initTable:function(t){t&&t.page||(t=this.$refs.childDataTable.getPagination())},initOne:function(){var t=this;this.$Server.queryAll("EqpManageStatis",{},{content:"设备数量",countType:t.countType}).then((function(e){var a=[],i=[];if(e.datas&&e.datas.length>0){var n=e.datas[0].eqpCountList.sort((function(t,e){return parseInt(t.itemValue)-parseInt(e.itemValue)})).reverse();n.forEach((function(t){a.push(t.itemName),i.push(t.itemValue)}))}t.initEchartForOne(a,i,t.showMsg)}))},initTwo:function(){var t=this;this.$Server.queryAll("EqpManageStatis",{},{content:"设备ABC或来源",classType:t.classType}).then((function(e){var a=[],i=[],n=[];if(e.datas&&e.datas.length>0){var s=e.datas[0].eqpCountList.sort((function(t,e){return parseInt(t.itemValue)-parseInt(e.itemValue)})).reverse();s.forEach((function(t){n.push({name:t.itemName,value:t.itemValue}),a.push(t.itemName),i.push(t.itemValue)}))}t.initEchartForTwo(a,i,n,t.classType)}))},initThree:function(){var t=this;this.$Server.queryAll("EqpManageStatis",{},{content:t.content,startDate:t.startDate,endDate:t.endDate}).then((function(e){var a=[],i=[],n=[];if(e.datas&&e.datas.length>0){var s=e.datas[0].topList.sort((function(t,e){return parseInt(t.itemValue)-parseInt(e.itemValue)})).reverse();s.forEach((function(t){n.push({name:t.itemName.split("-")[0],value:t.itemValue}),a.push(t.itemName.split("-")[0]),i.push(t.itemValue)}))}t.initEchartForThree(a,i,n,t.content)}))},initFour:function(){var t=this;this.$Server.queryAll("EqpManageStatis",{},{content:"设备盘点",startDate:t.startDate,endDate:t.endDate,inventoryType:t.inventoryType,timeType:t.timeType}).then((function(e){var a=[],i=[],n=[],s=[];if(e.datas&&e.datas.length>0){var r=e.datas[0].noExistLst.sort((function(t,e){return parseInt(t.itemValue)-parseInt(e.itemValue)})).reverse();r.forEach((function(t){a.push(t.itemValue),s.push(t.itemName)}));var l=e.datas[0].existLst.sort((function(t,e){return parseInt(t.itemValue)-parseInt(e.itemValue)})).reverse();l.forEach((function(t){i.push(t.itemValue)}));var o=e.datas[0].diffrentList.sort((function(t,e){return parseInt(t.itemValue)-parseInt(e.itemValue)})).reverse();o.forEach((function(t){n.push(t.itemValue)}))}""==t.inventoryRate||null==t.inventoryRate?t.initEchartForFour2(a,i,n,s,t.inventoryRate,t.showMsg):t.initEchartForFour(a,i,n,s,t.inventoryRate,t.showMsg)}))},initEchartForTwo:function(t,e,a,i){var n=this;n.echartTwo=this.$echarts.init(document.getElementById("echart_two")),n.echartTwo.setOption({color:["#00a0e9","#fe6d4b","#969ba6","#1d2088"],tooltip:{trigger:"item"},legend:{show:!1,top:10,data:t,right:40},series:[{name:i,type:"pie",radius:["45%","60%"],center:["50%","55%"],data:a,label:{formatter:"{title|{b} {c}}",padding:[3,10,10,5],rich:{title:{fontSize:16,color:"#b7b8bd",borderWidth:"2px",borderColor:"#b7b8bd",borderStyle:"solid",padding:[3,3,3,3]}}},labelLine:{smooth:!1,lineStyle:{color:"#b7b8bd"}}}]})},initEchartForOne:function(t,e,a){var i=this;i.echartOne=this.$echarts.init(document.getElementById("echart_one")),i.echartOne.setOption({color:["#ccd8e7","#4a7fbb"],tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},xAxis:[{type:"category",data:t,axisPointer:{type:"shadow"},axisLabel:{interval:0,rotate:30}}],yAxis:[{type:"value",name:"单位：台",minInterval:1}],series:[{color:"#DEE4ED",name:"设备数量",type:"bar",barMaxWidth:window.infoConfig.barMaxWidth,data:e,itemStyle:{normal:{label:{show:a,position:"top",textStyle:{color:"#000",fontSize:15}}}}}]}),i.echartOne.on("dblclick",(function(t){i.typeName=t.name,i.$refs.equipmentDetail.searchInfo(i.typeName),i.$refs.equipmentDetail.initData(),i.IsShow=!0}))},initEchartForThree:function(t,e,a,i){var n=this;n.echartThree=this.$echarts.init(document.getElementById("echart_three")),n.echartThree.setOption({color:["#1fcf88","#487de9","#ff614b","#1d2088","#969BA6"],title:{text:"设备闲置处理Top5",textStyle:{fontSize:16}},tooltip:{trigger:"item"},legend:{show:!1,top:30,data:t,right:40},series:[{name:i,type:"pie",radius:["40%","55%"],center:["50%","65%"],data:a,label:{formatter:"{title|{c} }{name|{b}}",rich:{title:{fontSize:16},name:{fontSize:16,color:"#333"}}},labelLine:{smooth:!1,lineStyle:{color:"#b7b8bd"}}}]})},initEchartForFour:function(t,e,a,i,n,s){var r=this;r.echartFour=this.$echarts.init(document.getElementById("echart_four")),r.echartFour.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(t){for(var e=t[0].name,a=0;a<t.length;a++)"bar"==t[a].componentSubType?e+="<br/>"+t[a].seriesName+" : "+t[a].value:e+="";return e}},legend:{itemHeight:15,data:["不存在","存在","不一致"],right:40},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:i,axisLabel:{interval:0}}],yAxis:[{type:"value"}],series:[{color:"#acd598",name:"不存在",type:"bar",barMaxWidth:window.infoConfig.barMaxWidth,stack:"1",data:t,markLine:{silent:!0,lineStyle:{color:"red"},data:[{yAxis:n}]},itemStyle:{normal:{label:{show:s,position:"insideRight",textStyle:{fontSize:15}}}}},{color:"#6d925b",name:"存在",type:"bar",barMaxWidth:window.infoConfig.barMaxWidth,stack:"1",data:e,itemStyle:{normal:{label:{show:s,position:"insideLeft",textStyle:{fontSize:15}}}}},{color:"#6a6c77",name:"不一致",type:"bar",barMaxWidth:window.infoConfig.barMaxWidth,stack:"1",data:a,itemStyle:{normal:{label:{show:s,position:"top",textStyle:{fontSize:15}}}}},{name:"不存在",type:"line",stack:"2",data:t,itemStyle:{normal:{lineStyle:{color:"#2f4554"}}}},{color:"#a6b9c5",name:"存在",type:"line",stack:"2",data:e,itemStyle:{normal:{lineStyle:{color:"#a6b9c5"}}}},{color:"#879a87",name:"不一致",type:"line",stack:"2",data:a,itemStyle:{normal:{lineStyle:{color:"#879a87"}}}}]})},initEchartForFour2:function(t,e,a,i,n,s){var r=this;r.echartFour=this.$echarts.init(document.getElementById("echart_four")),r.echartFour.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(t){for(var e=t[0].name,a=0;a<t.length;a++)"bar"==t[a].componentSubType?e+="<br/>"+t[a].seriesName+" : "+t[a].value:e+="";return e}},legend:{itemHeight:15,data:["不存在","存在","不一致"],right:40},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:i,axisLabel:{interval:0}}],yAxis:[{type:"value"}],series:[{color:"#acd598",name:"不存在",type:"bar",barMaxWidth:window.infoConfig.barMaxWidth,stack:"1",data:t,markLine:{silent:!0,lineStyle:{color:"transparent"},data:[{yAxis:n}]},itemStyle:{normal:{label:{show:s,position:"insideRight",textStyle:{fontSize:15}}}}},{color:"#6d925b",name:"存在",type:"bar",barMaxWidth:window.infoConfig.barMaxWidth,stack:"1",data:e,itemStyle:{normal:{label:{show:s,position:"insideLeft",textStyle:{fontSize:15}}}}},{color:"#6a6c77",name:"不一致",type:"bar",barMaxWidth:window.infoConfig.barMaxWidth,stack:"1",data:a,itemStyle:{normal:{label:{show:s,position:"top",textStyle:{fontSize:15}}}}},{name:"不存在",type:"line",stack:"2",data:t,itemStyle:{normal:{lineStyle:{color:"#2f4554"}}}},{color:"#a6b9c5",name:"存在",type:"line",stack:"2",data:e,itemStyle:{normal:{lineStyle:{color:"#a6b9c5"}}}},{color:"#879a87",name:"不一致",type:"line",stack:"2",data:a,itemStyle:{normal:{lineStyle:{color:"#879a87"}}}}]})},searchInfo:function(){this.startDate>this.endDate?s["a"].alert("开始时间必须小于结束时间！"):(this.initThree(),this.initFour())}}},g=x,S=(a("92d7"),a("442c"),Object(v["a"])(g,i,n,!1,null,"7a4babd7",null));e["default"]=S.exports},"143d":function(t,e,a){},"442c":function(t,e,a){"use strict";var i=a("143d"),n=a.n(i);n.a},"92d7":function(t,e,a){"use strict";var i=a("af58"),n=a.n(i);n.a},af58:function(t,e,a){}}]);