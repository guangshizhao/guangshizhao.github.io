(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21b2f9"],{bf65:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("layContentHeader",{attrs:{title:"消息通知",buttons:e.headerBtns}}),i("layContent",[i("gridTemplate",{ref:"childGridTemplate",attrs:{title:e.title,gridModel:e.sysMsgRecevier,sort:!0},on:{rowDbClick:e.rowDbClick}})],1),i("v-dialog",{attrs:{"max-width":"1000px",persistent:!0,scrollable:"",width:"500"},model:{value:e.IsShow,callback:function(t){e.IsShow=t},expression:"IsShow"}},[i("v-card",[i("v-card-title",{staticClass:"primary"},[i("span",{staticClass:"headline",staticStyle:{color:"#fff"}},[e._v("消息通知详情")])]),i("v-card-text",[i("v-container",{attrs:{"grid-list-md":""}},e._l(e.dbclickItemFileds,(function(t){return i("v-flex",{key:t.field,attrs:{xs12:""}},[i("v-layout",{attrs:{row:"","align-center":"","justify-start":""}},[i("v-flex",{attrs:{xs3:""}},[i("label",{staticStyle:{color:"black"}},[e._v(e._s(t.name)+":")])]),i("v-flex",{attrs:{xs9:""}},[i("label",{staticStyle:{color:"black"},domProps:{innerHTML:e._s(e.showItem[t.field])}})])],1)],1)})),1)],1),i("v-card-actions",[i("v-spacer"),e.showItem&&"未读"==e.showItem.isReadedName?i("v-btn",{staticStyle:{"margin-right":"30px"},attrs:{color:"primary"},on:{click:function(t){return e.modalComfirmed()}}},[e._v("确认已读")]):e._e(),i("v-btn",{staticStyle:{"margin-right":"30px"},attrs:{color:"primary"},on:{click:function(t){return e.modalCancel()}}},[e._v("取消")])],1)],1)],1)],1)},s=[],r=(i("4634"),i("b9da")),n=i("d5b3"),l=i("1e17"),d=i("07c5"),c=i("f81e"),o=i("8333"),f=new o["a"](new c["a"]),m={data:function(){var e=this;return{title:"消息",sysMsgRecevier:{},IsShow:!1,showItem:{},headerBtns:[{disabled:!1,text:"已读",icon:"self_edit",click:function(){return e.setReaded()}},{disabled:!1,text:"删除",icon:"self_delete",click:function(){return e.$refs.childGridTemplate.GridDelete()}}],dbclickItemFileds:[{id:1,name:"标题",field:"title"},{id:2,name:"分类",field:"moduleName"},{id:3,name:"发送人",field:"sendUserName"},{id:4,name:"发送时间",field:"sendTime"},{id:5,name:"内容",field:"detail"}]}},components:{gridTemplate:r["a"],layContent:l["a"],layContentHeader:d["a"]},mounted:function(){this.sysMsgRecevier=new c["a"]},methods:{setReaded:function(){var e=this.$refs.childGridTemplate.getSelectedItems();if(e&&0==e.length)n["a"].alert("请选择需要标记为已读的消息");else{var t=this,i=[],a=!1;e.forEach((function(e){e.isReaded&&1==e.isReaded?a=!0:i.push(e)})),1==a?n["a"].alert("请选择未读的消息"):(i.forEach((function(e){e.isReaded=!0,e.readed=!0})),this.$Server.batchUpdate(f.getModelName(),i).then((function(e){e.success&&(n["a"].alert("操作成功","success"),t.$refs.childGridTemplate.init())}),(function(e){return n["a"].alert(e)})))}},rowDbClick:function(e){this.showItem=JSON.parse(JSON.stringify(e)),this.IsShow=!0},modalComfirmed:function(){var e=this,t=this.showItem;t.isReaded&&n["a"].alert("该消息已读"),t.isReaded=!0,t.readed=!0,this.$Server.addOrUpdate(f.getModelName(),t,!0).then((function(t){t.success&&(e.IsShow=!1,e.$refs.childGridTemplate.init())}),(function(e){return n["a"].alert(e)}))},modalCancel:function(){this.IsShow=!1,this.showItem={}}}},h=m,u=i("6691"),v=Object(u["a"])(h,a,s,!1,null,null,null);t["default"]=v.exports}}]);